/*! For license information please see main.8be4187f.js.LICENSE.txt */
(()=>{var e={5172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7396);n(5173);var i=n(5043);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var p=function(){function e(t){s(this,e),c(this,"handlers",void 0),this.handlers=t.slice(0)}return l(e,[{key:"addHandlers",value:function(t){for(var n=this.handlers.slice(0),r=t.length,i=0;i<r;i+=1)n.push(t[i]);return new e(n)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlers.length-1;if(t){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](e));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===t.indexOf(o)&&n.push(o)}return new e(n)}}]),e}();function m(e){var t=new Map;return e.forEach((function(e,n){t.set(n,e)})),t}function g(e){return Array.isArray(e)?e:[e]}function v(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===o(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var y=function(){function e(t,n){s(this,e),c(this,"handlerSets",void 0),c(this,"poolName",void 0),this.handlerSets=n,this.poolName=t}return l(e,[{key:"addHandlers",value:function(t,n){var r=m(this.handlerSets);if(r.has(t)){var i=r.get(t);r.set(t,i.addHandlers(n))}else r.set(t,new p(n));return new e(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlerSets.get(e),r="default"===this.poolName;n&&n.dispatchEvent(t,r)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,n){var r=m(this.handlerSets);if(!r.has(t))return new e(this.poolName,r);var i=r.get(t).removeHandlers(n);return i.hasHandlers()?r.set(t,i):r.delete(t),new e(this.poolName,r)}}]),e}();c(y,"createByType",(function(e,t,n){var r=new Map;return r.set(t,new p(n)),new y(e,r)}));var b=function(){function e(t){var n=this;s(this,e),c(this,"handlers",new Map),c(this,"pools",new Map),c(this,"target",void 0),c(this,"createEmitter",(function(e){return function(t){n.pools.forEach((function(n){n.dispatchEvent(e,t)}))}})),this.target=t}return l(e,[{key:"addHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e);this.pools.set(e,r.addHandlers(t,n))}else this.pools.set(e,y.createByType(e,t,n));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e).removeHandlers(t,n);r.hasHandlers()?this.pools.set(e,r):this.pools.delete(e);var i=!1;this.pools.forEach((function(e){return i=i||e.hasHandlers(t)})),i||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),w=new(function(){function e(){var t=this;s(this,e),c(this,"targets",new Map),c(this,"getTarget",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=v(e);if(t.targets.has(r))return t.targets.get(r);if(!n)return null;var i=new b(r);return t.targets.set(r,i),i})),c(this,"removeTarget",(function(e){t.targets.delete(v(e))}))}return l(e,[{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,o=void 0===i?document:i,s=n.pool,a=void 0===s?"default":s;this.getTarget(o).addHandlers(a,e,g(t))}}},{key:"unsub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,o=void 0===i?document:i,s=n.pool,a=void 0===s?"default":s,l=this.getTarget(o,!1);l&&(l.removeHandlers(a,e,g(t)),l.hasHandlers()||this.removeTarget(o))}}}]),e}()),x=function(){function e(){return s(this,e),f(this,h(e).apply(this,arguments))}return u(e,i.PureComponent),l(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;w.sub(t,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;w.unsub(t,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}();c(x,"defaultProps",{pool:"default",target:"document"}),x.propTypes={},t.instance=w,t.default=x},4173:(e,t,n)=>{"use strict";var r;r=n(5172),e.exports=r.default,e.exports.instance=r.instance},854:(e,t,n)=>{e.exports=n(672)},1989:(e,t,n)=>{"use strict";var r=n(6267),i=n(3229),o=n(7903),s=n(6735),a=n(7638),l=n(3101),c=n(705),u=n(9335),h=n(2702),d=n(7482),f=n(3403),p=n(2412);e.exports=function(e){return new Promise((function(t,n){var m,g=e.data,v=e.headers,y=e.responseType,b=e.withXSRFToken;function w(){e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m)}r.isFormData(g)&&r.isStandardBrowserEnv()&&delete v["Content-Type"];var x=new XMLHttpRequest;if(e.auth){var k=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(k+":"+S)}var C=a(e.baseURL,e.url,e.allowAbsoluteUrls);function E(){if(x){var r="getAllResponseHeaders"in x?l(x.getAllResponseHeaders()):null,o={data:y&&"text"!==y&&"json"!==y?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:r,config:e,request:x};i((function(e){t(e),w()}),(function(e){n(e),w()}),o),x=null}}if(x.open(e.method.toUpperCase(),s(C,e.params,e.paramsSerializer),!0),x.timeout=e.timeout,"onloadend"in x?x.onloadend=E:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(E)},x.onabort=function(){x&&(n(new h("Request aborted",h.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new h("Network Error",h.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new h(t,r.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,e,x)),x=null},r.isStandardBrowserEnv()&&(b&&r.isFunction(b)&&(b=b(e)),b||!1!==b&&c(C))){var T=e.xsrfHeaderName&&e.xsrfCookieName&&o.read(e.xsrfCookieName);T&&(v[e.xsrfHeaderName]=T)}"setRequestHeader"in x&&r.forEach(v,(function(e,t){"undefined"===typeof g&&"content-type"===t.toLowerCase()?delete v[t]:x.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),y&&"json"!==y&&(x.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&x.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&x.upload&&x.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(m=function(t){x&&(n(!t||t.type?new d(null,e,x):t),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m))),g||!1===g||0===g||""===g||(g=null);var O=f(C);O&&-1===p.protocols.indexOf(O)?n(new h("Unsupported protocol "+O+":",h.ERR_BAD_REQUEST,e)):x.send(g)}))}},672:(e,t,n)=>{"use strict";var r=n(6267),i=n(6973),o=n(8938),s=n(6438),a=n(2989),l=n(783);var c=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(a);c.Axios=o,c.CanceledError=n(7482),c.CancelToken=n(7690),c.isCancel=n(7767),c.VERSION=n(3104).version,c.toFormData=n(7289),c.AxiosError=n(2702),c.Cancel=c.CanceledError,c.all=function(e){return Promise.all(e)},c.spread=n(8125),c.isAxiosError=n(8738),c.formToJSON=function(e){return l(r.isHTMLForm(e)?new FormData(e):e)},e.exports=c,e.exports.default=c},7690:(e,t,n)=>{"use strict";var r=n(7482);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){for(var t=n._listeners.length;t-- >0;)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,i,o){n.reason||(n.reason=new r(e,i,o),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},7482:(e,t,n)=>{"use strict";var r=n(2702);function i(e,t,n){r.call(this,null==e?"canceled":e,r.ERR_CANCELED,t,n),this.name="CanceledError"}n(6267).inherits(i,r,{__CANCEL__:!0}),e.exports=i},7767:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},8938:(e,t,n)=>{"use strict";var r=n(6267),i=n(6735),o=n(6664),s=n(4395),a=n(6438),l=n(7638),c=n(2478),u=c.validators;function h(e){this.defaults=e,this.interceptors={request:new o,response:new o}}h.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var i=t.paramsSerializer;null!=i&&(r.isFunction(i)?t.paramsSerializer={serialize:i}:c.assertOptions(i,{encode:u.function,serialize:u.function},!0));var o=[],l=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var h,d=[];if(this.interceptors.response.forEach((function(e){d.push(e.fulfilled,e.rejected)})),!l){var f=[s,void 0];for(Array.prototype.unshift.apply(f,o),f=f.concat(d),h=Promise.resolve(t);f.length;)h=h.then(f.shift(),f.shift());return h}for(var p=t;o.length;){var m=o.shift(),g=o.shift();try{p=m(p)}catch(v){g(v);break}}try{h=s(p)}catch(v){return Promise.reject(v)}for(;d.length;)h=h.then(d.shift(),d.shift());return h},h.prototype.getUri=function(e){e=a(this.defaults,e);var t=l(e.baseURL,e.url,e.allowAbsoluteUrls);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){h.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(a(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}h.prototype[e]=t(),h.prototype[e+"Form"]=t(!0)})),e.exports=h},2702:(e,t,n)=>{"use strict";var r=n(6267);function i(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(i,s),Object.defineProperty(o,"isAxiosError",{value:!0}),i.from=function(e,t,n,s,a,l){var c=Object.create(o);return r.toFlatObject(e,c,(function(e){return e!==Error.prototype})),i.call(c,e.message,t,n,s,a),c.cause=e,c.name=e.name,l&&Object.assign(c,l),c},e.exports=i},6664:(e,t,n)=>{"use strict";var r=n(6267);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.clear=function(){this.handlers&&(this.handlers=[])},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},7638:(e,t,n)=>{"use strict";var r=n(2762),i=n(1523);e.exports=function(e,t,n){var o=!r(t);return e&&(o||!1===n)?i(e,t):t}},4395:(e,t,n)=>{"use strict";var r=n(6267),i=n(3024),o=n(7767),s=n(2989),a=n(7482),l=n(2121);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,null,e.transformRequest),l(e.headers,"Accept"),l(e.headers,"Content-Type"),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,t.status,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,t.response.status,e.transformResponse))),Promise.reject(t)}))}},6438:(e,t,n)=>{"use strict";var r=n(6267);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isEmptyObject(t)?r.merge({},e):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function l(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,i=t(e);r.isUndefined(i)&&t!==l||(n[e]=i)})),n}},3229:(e,t,n)=>{"use strict";var r=n(2702);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},3024:(e,t,n)=>{"use strict";var r=n(6267),i=n(2989);e.exports=function(e,t,n,o){var s=this||i;return r.forEach(o,(function(r){e=r.call(s,e,t,n)})),e}},2989:(e,t,n)=>{"use strict";var r=n(6267),i=n(2121),o=n(2702),s=n(9335),a=n(7289),l=n(7220),c=n(2412),u=n(783),h={"Content-Type":"application/x-www-form-urlencoded"};function d(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var f={transitional:s,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(1989)),e}(),transformRequest:[function(e,t){i(t,"Accept"),i(t,"Content-Type");var n,o=t&&t["Content-Type"]||"",s=o.indexOf("application/json")>-1,c=r.isObject(e);if(c&&r.isHTMLForm(e)&&(e=new FormData(e)),r.isFormData(e))return s?JSON.stringify(u(e)):e;if(r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return d(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();if(c){if(-1!==o.indexOf("application/x-www-form-urlencoded"))return l(e,this.formSerializer).toString();if((n=r.isFileList(e))||o.indexOf("multipart/form-data")>-1){var h=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,h&&new h,this.formSerializer)}}return c||s?(d(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||f.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(e&&r.isString(e)&&(n&&!this.responseType||i)){var s=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(s){if("SyntaxError"===a.name)throw o.from(a,o.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:c.classes.FormData,Blob:c.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){f.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){f.headers[e]=r.merge(h)})),e.exports=f},9335:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7523:(e,t,n)=>{e.exports=n(6171)},3104:e=>{e.exports={version:"0.30.0"}},3075:(e,t,n)=>{"use strict";var r=n(7289);function i(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function o(e,t){this._pairs=[],e&&r(e,this,t)}var s=o.prototype;s.append=function(e,t){this._pairs.push([e,t])},s.toString=function(e){var t=e?function(t){return e.call(this,t,i)}:i;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")},e.exports=o},6973:e=>{"use strict";e.exports=function(e,t){return function(){return e.apply(t,arguments)}}},6735:(e,t,n)=>{"use strict";var r=n(6267),i=n(3075);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s));var a,l=n&&n.encode||o,c=n&&n.serialize;return(a=c?c(t,n):r.isURLSearchParams(t)?t.toString():new i(t,n).toString(l))&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}},1523:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}},7903:(e,t,n)=>{"use strict";var r=n(6267);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},783:(e,t,n)=>{"use strict";var r=n(6267);e.exports=function(e){function t(e,n,i,o){var s=e[o++];if("__proto__"===s)return!0;var a=Number.isFinite(+s),l=o>=e.length;return s=!s&&r.isArray(i)?i.length:s,l?(r.hasOwnProperty(i,s)?i[s]=[i[s],n]:i[s]=n,!a):(i[s]&&r.isObject(i[s])||(i[s]=[]),t(e,n,i[s],o)&&r.isArray(i[s])&&(i[s]=function(e){var t,n,r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(i[s])),!a)}if(r.isFormData(e)&&r.isFunction(e.entries)){var n={};return r.forEachEntry(e,(function(e,i){t(function(e){return r.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),i,n,0)})),n}return null}},2762:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},8738:(e,t,n)=>{"use strict";var r=n(6267);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},705:(e,t,n)=>{"use strict";var r=n(6267);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},2121:(e,t,n)=>{"use strict";var r=n(6267);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3101:(e,t,n)=>{"use strict";var r=n(6267),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.slice(0,o)).toLowerCase(),n=r.trim(e.slice(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},3403:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8125:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7289:(e,t,n)=>{"use strict";var r=n(6267),i=n(2702),o=n(7523);function s(e){return r.isPlainObject(e)||r.isArray(e)}function a(e){return r.endsWith(e,"[]")?e.slice(0,-2):e}function l(e,t,n){return e?e.concat(t).map((function(e,t){return e=a(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var c=r.toFlatObject(r,{},null,(function(e){return/^is[A-Z]/.test(e)}));e.exports=function(e,t,n){if(!r.isObject(e))throw new TypeError("target must be an object");t=t||new(o||FormData);var u,h=(n=r.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!r.isUndefined(t[e])}))).metaTokens,d=n.visitor||v,f=n.dots,p=n.indexes,m=(n.Blob||"undefined"!==typeof Blob&&Blob)&&((u=t)&&r.isFunction(u.append)&&"FormData"===u[Symbol.toStringTag]&&u[Symbol.iterator]);if(!r.isFunction(d))throw new TypeError("visitor must be a function");function g(e){if(null===e)return"";if(r.isDate(e))return e.toISOString();if(!m&&r.isBlob(e))throw new i("Blob is not supported. Use a Buffer instead.");return r.isArrayBuffer(e)||r.isTypedArray(e)?m&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function v(e,n,i){var o=e;if(e&&!i&&"object"===typeof e)if(r.endsWith(n,"{}"))n=h?n:n.slice(0,-2),e=JSON.stringify(e);else if(r.isArray(e)&&function(e){return r.isArray(e)&&!e.some(s)}(e)||r.isFileList(e)||r.endsWith(n,"[]")&&(o=r.toArray(e)))return n=a(n),o.forEach((function(e,i){!r.isUndefined(e)&&null!==e&&t.append(!0===p?l([n],i,f):null===p?n:n+"[]",g(e))})),!1;return!!s(e)||(t.append(l(i,n,f),g(e)),!1)}var y=[],b=Object.assign(c,{defaultVisitor:v,convertValue:g,isVisitable:s});if(!r.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!r.isUndefined(n)){if(-1!==y.indexOf(n))throw Error("Circular reference detected in "+i.join("."));y.push(n),r.forEach(n,(function(n,o){!0===(!(r.isUndefined(n)||null===n)&&d.call(t,n,r.isString(o)?o.trim():o,i,b))&&e(n,i?i.concat(o):[o])})),y.pop()}}(e),t}},7220:(e,t,n)=>{"use strict";var r=n(6267),i=n(7289),o=n(2412);e.exports=function(e,t){return i(e,new o.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return o.isNode&&r.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}},2478:(e,t,n)=>{"use strict";var r=n(3104).version,i=n(2702),o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new i(o(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!s[r]&&(s[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),o=r.length;o-- >0;){var s=r[o],a=t[s];if(a){var l=e[s],c=void 0===l||a(l,s,e);if(!0!==c)throw new i("option "+s+" must be "+c,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+s,i.ERR_BAD_OPTION)}},validators:o}},6588:e=>{"use strict";e.exports=FormData},2427:(e,t,n)=>{"use strict";var r=n(3075);e.exports="undefined"!==typeof URLSearchParams?URLSearchParams:r},6751:(e,t,n)=>{"use strict";e.exports={isBrowser:!0,classes:{URLSearchParams:n(2427),FormData:n(6588),Blob:Blob},protocols:["http","https","file","blob","url","data"]}},2412:(e,t,n)=>{"use strict";e.exports=n(6751)},6267:(e,t,n)=>{"use strict";var r,i=n(6973),o=Object.prototype.toString,s=(r=Object.create(null),function(e){var t=o.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function l(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}var u=a("ArrayBuffer");function h(e){return"number"===typeof e}function d(e){return null!==e&&"object"===typeof e}function f(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=a("Date"),m=a("File"),g=a("Blob"),v=a("FileList");function y(e){return"[object Function]"===o.call(e)}var b=a("URLSearchParams");function w(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),l(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var x,k=(x="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return x&&e instanceof x});var S,C=a("HTMLFormElement"),E=(S=Object.prototype.hasOwnProperty,function(e,t){return S.call(e,t)});e.exports={isArray:l,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||o.call(e)===t||y(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:h,isObject:d,isPlainObject:f,isEmptyObject:function(e){return e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype},isUndefined:c,isDate:p,isFile:m,isBlob:g,isFunction:y,isStream:function(e){return d(e)&&y(e.pipe)},isURLSearchParams:b,isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:w,merge:function e(){var t={};function n(n,r){f(t[r])&&f(n)?t[r]=e(t[r],n):f(n)?t[r]=e({},n):l(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)w(arguments[r],n);return t},extend:function(e,t,n){return w(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,o,s,a={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(l(e))return e;var t=e.length;if(!h(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:k,isFileList:v,forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:C,hasOwnProperty:E}},6171:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},7396:(e,t,n)=>{var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},219:(e,t,n)=>{"use strict";var r=n(2086),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=d(n,v);try{c(t,v,y)}catch(b){}}}}return t}},1141:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},3090:e=>{"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},r=0;r<24;r+=1)n[112+r]="F"+(r+1);for(var i=0;i<26;i+=1){var o=i+65;n[o]=[String.fromCharCode(o+32),String.fromCharCode(o)]}var s={codes:n,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var r=t(e);if(r&&e.key)return e.key;var i=n[r?e.keyCode||e.which:e];return Array.isArray(i)&&(i=r?i[e.shiftKey?1:0]:i[0]),i},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};s.Spacebar=s[" "],s.Digit0=s[0],s.Digit1=s[1],s.Digit2=s[2],s.Digit3=s[3],s.Digit4=s[4],s.Digit5=s[5],s.Digit6=s[6],s.Digit7=s[7],s.Digit8=s[8],s.Digit9=s[9],s.Tilde=s["~"],s.GraveAccent=s["`"],s.ExclamationPoint=s["!"],s.AtSign=s["@"],s.PoundSign=s["#"],s.PercentSign=s["%"],s.Caret=s["^"],s.Ampersand=s["&"],s.PlusSign=s["+"],s.MinusSign=s["-"],s.EqualsSign=s["="],s.DivisionSign=s["/"],s.MultiplicationSign=s["*"],s.Comma=s[","],s.Decimal=s["."],s.Colon=s[":"],s.Semicolon=s[";"],s.Pipe=s["|"],s.BackSlash=s["\\"],s.QuestionMark=s["?"],s.SingleQuote=s["'"],s.DoubleQuote=s['"'],s.LeftCurlyBrace=s["{"],s.RightCurlyBrace=s["}"],s.LeftParenthesis=s["("],s.RightParenthesis=s[")"],s.LeftAngleBracket=s["<"],s.RightAngleBracket=s[">"],s.LeftSquareBracket=s["["],s.RightSquareBracket=s["]"],e.exports=s},3393:(e,t,n)=>{var r,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(n){return i(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var s=t.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var s=[];return n.forEach((function(t){s.push(e(t))})),o.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return i(n,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,i,o,s={},a={},l="",c="",u="",h=2,d=3,f=2,p=[],m=0,g=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(s,l)||(s[l]=d++,a[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(s,c))u=c;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,g==t-1?(g=0,p.push(n(m)),m=0):g++;for(i=u.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}else{for(i=1,r=0;r<f;r++)m=m<<1|i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}0==--h&&(h=Math.pow(2,f),f++),delete a[u]}else for(i=s[u],r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;0==--h&&(h=Math.pow(2,f),f++),s[c]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,g==t-1?(g=0,p.push(n(m)),m=0):g++;for(i=u.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}else{for(i=1,r=0;r<f;r++)m=m<<1|i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}0==--h&&(h=Math.pow(2,f),f++),delete a[u]}else for(i=s[u],r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;0==--h&&(h=Math.pow(2,f),f++)}for(i=2,r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){p.push(n(m));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var i,o,s,a,l,c,u,h=[],d=4,f=4,p=3,m="",g=[],v={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)h[i]=i;for(s=0,l=Math.pow(2,2),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,l=Math.pow(2,8),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;u=e(s);break;case 1:for(s=0,l=Math.pow(2,16),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;u=e(s);break;case 2:return""}for(h[3]=u,o=u,g.push(u);;){if(v.index>t)return"";for(s=0,l=Math.pow(2,p),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;switch(u=s){case 0:for(s=0,l=Math.pow(2,8),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;h[f++]=e(s),u=f-1,d--;break;case 1:for(s=0,l=Math.pow(2,16),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;h[f++]=e(s),u=f-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,p),p++),h[u])m=h[u];else{if(u!==f)return null;m=o+o.charAt(0)}g.push(m),h[f++]=o+m.charAt(0),o=m,0==--d&&(d=Math.pow(2,p),p++)}}};return o}();void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)},2123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(a[c]=o[c]);if(t){s=t(o);for(var u=0;u<s.length;u++)r.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},8123:(e,t,n)=>{var r=n(1141);e.exports=p,e.exports.parse=o,e.exports.compile=function(e,t){return l(o(e,t),t)},e.exports.tokensToFunction=l,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,l="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(l+=e.slice(a,f),a=f+h.length,d)l+=d[1];else{var p=e[a],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6],w=n[7];l&&(r.push(l),l="");var x=null!=m&&null!=p&&p!==m,k="+"===b||"*"===b,S="?"===b||"*"===b,C=m||c,E=v||y,T=m||("string"===typeof r[r.length-1]?r[r.length-1]:"");r.push({name:g||o++,prefix:m||"",delimiter:C,optional:S,repeat:k,partial:x,asterisk:!!w,pattern:E?u(E):w?".*":s(C,T)})}}return a<e.length&&(l+=e.substr(a)),l&&r.push(l),r}function s(e,t){return!t||t.indexOf(e)>-1?"[^"+c(e)+"]+?":c(t)+"|(?:(?!"+c(t)+")[^"+c(e)+"])+?"}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function l(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var o="",s=t||{},l=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var h,d=s[u.name];if(null==d){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=l(d[f]),!n[c].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[c].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');o+=u.prefix+h}}else o+=u}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,s="",a=0;a<e.length;a++){var l=e[a];if("string"===typeof l)s+=c(l);else{var u=c(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+u+f+")*"),s+=f=l.optional?l.partial?u+"("+f+")?":"(?:"+u+"("+f+"))?":u+"("+f+")"}}var p=c(n.delimiter||"/"),m=s.slice(-p.length)===p;return i||(s=(m?s.slice(0,-p.length):s)+"(?:"+p+"(?=$))?"),s+=o?"$":i&&m?"":"(?="+p+"|$)",h(new RegExp("^"+s,d(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return h(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return f(o(e,n),t,n)}(e,t,n)}},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(2123),o=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var l=!1,c=null,u=!1,h=null,d={onError:function(e){l=!0,c=e}};function f(e,t,n,r,i,o,s,u,h){l=!1,c=null,a.apply(d,arguments)}var p=null,m=null,g=null;function v(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,a,d,p){if(f.apply(this,arguments),l){if(!l)throw Error(s(198));var m=c;l=!1,c=null,u||(u=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var y=null,b={};function w(){if(y)for(var e in b){var t=b[e],n=y.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!k[n]){if(!t.extractEvents)throw Error(s(97,e));for(var r in k[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,l=r;if(S.hasOwnProperty(l))throw Error(s(99,l));S[l]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&x(c[i],a,l);i=!0}else o.registrationName?(x(o.registrationName,a,l),i=!0):i=!1;if(!i)throw Error(s(98,r,e))}}}}function x(e,t,n){if(C[e])throw Error(s(100,e));C[e]=t,E[e]=t.eventTypes[n].dependencies}var k=[],S={},C={},E={};function T(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(s(102,t));b[t]=r,n=!0}}n&&w()}var O=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),A=null,_=null,P=null;function N(e){if(e=m(e)){if("function"!==typeof A)throw Error(s(280));var t=e.stateNode;t&&(t=p(t),A(e.stateNode,e.type,t))}}function M(e){_?P?P.push(e):P=[e]:_=e}function j(){if(_){var e=_,t=P;if(P=_=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function R(e,t){return e(t)}function I(e,t,n,r,i){return e(t,n,r,i)}function D(){}var L=R,B=!1,F=!1;function z(){null===_&&null===P||(D(),j())}function H(e,t,n){if(F)return e(t,n);F=!0;try{return L(e,t,n)}finally{F=!1,z()}}var $=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U=Object.prototype.hasOwnProperty,W={},V={};function q(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){K[e]=new q(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];K[t]=new q(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){K[e]=new q(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){K[e]=new q(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){K[e]=new q(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){K[e]=new q(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){K[e]=new q(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){K[e]=new q(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){K[e]=new q(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function G(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,G);K[t]=new q(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,G);K[t]=new q(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,G);K[t]=new q(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){K[e]=new q(e,1,!1,e.toLowerCase(),null,!1)})),K.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){K[e]=new q(e,1,!1,e.toLowerCase(),null,!0)}));var J=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Y(e,t,n,r){var i=K.hasOwnProperty(t)?K[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!U.call(V,e)||!U.call(W,e)&&($.test(e)?V[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}J.hasOwnProperty("ReactCurrentDispatcher")||(J.ReactCurrentDispatcher={current:null}),J.hasOwnProperty("ReactCurrentBatchConfig")||(J.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,oe=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,le=Z?Symbol.for("react.forward_ref"):60112,ce=Z?Symbol.for("react.suspense"):60113,ue=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ve(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(X,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function xe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ke(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Se(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ce(e,t){null!=(t=t.checked)&&Y(e,"checked",t,!1)}function Ee(e,t){Ce(e,t);var n=ye(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oe(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Oe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function _e(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ye(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ye(n)}}function Me(e,t){var n=ye(t.value),r=ye(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function je(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Ie="http://www.w3.org/2000/svg";function De(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?De(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Be,Fe,ze=(Fe=function(e,t){if(e.namespaceURI!==Ie||"innerHTML"in e)e.innerHTML=t;else{for((Be=Be||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Fe(e,t)}))}:Fe);function He(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function $e(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ue={animationend:$e("Animation","AnimationEnd"),animationiteration:$e("Animation","AnimationIteration"),animationstart:$e("Animation","AnimationStart"),transitionend:$e("Transition","TransitionEnd")},We={},Ve={};function qe(e){if(We[e])return We[e];if(!Ue[e])return e;var t,n=Ue[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ve)return We[e]=n[t];return e}O&&(Ve=document.createElement("div").style,"AnimationEvent"in window||(delete Ue.animationend.animation,delete Ue.animationiteration.animation,delete Ue.animationstart.animation),"TransitionEvent"in window||delete Ue.transitionend.transition);var Ke=qe("animationend"),Qe=qe("animationiteration"),Ge=qe("animationstart"),Je=qe("transitionend"),Ye="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(s(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ot(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var st=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)v(e,t[r],n[r]);else t&&v(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(st=it(st,e)),e=st,st=null,e){if(ot(e,at),st)throw Error(s(95));if(u)throw e=h,u=!1,h=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!O)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,r){if(ht.length){var i=ht.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=jn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ct(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,s=e.eventSystemFlags;0===n&&(s|=64);for(var a=null,l=0;l<k.length;l++){var c=k[l];c&&(c=c.extractEvents(r,t,o,i,s))&&(a=it(a,c))}lt(a)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Gt(t,"scroll",!0);break;case"focus":case"blur":Gt(t,"focus",!0),Gt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ut(e)&&Gt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ye.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var gt,vt,yt,bt=!1,wt=[],xt=null,kt=null,St=null,Ct=new Map,Et=new Map,Tt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),At="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function _t(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Pt(e,t){switch(e){case"focus":case"blur":xt=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Et.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=_t(t,n,r,i,o),null!==t&&(null!==(t=Rn(t))&&vt(t)),e):(e.eventSystemFlags|=r,e)}function Mt(e){var t=jn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Rn(t);return null!==n&&vt(n),e.blockedOn=t,!1}return!0}function Rt(e,t,n){jt(e)&&n.delete(t)}function It(){for(bt=!1;0<wt.length;){var e=wt[0];if(null!==e.blockedOn){null!==(e=Rn(e.blockedOn))&&gt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:wt.shift()}null!==xt&&jt(xt)&&(xt=null),null!==kt&&jt(kt)&&(kt=null),null!==St&&jt(St)&&(St=null),Ct.forEach(Rt),Et.forEach(Rt)}function Dt(e,t){e.blockedOn===t&&(e.blockedOn=null,bt||(bt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,It)))}function Lt(e){function t(t){return Dt(t,e)}if(0<wt.length){Dt(wt[0],e);for(var n=1;n<wt.length;n++){var r=wt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Dt(xt,e),null!==kt&&Dt(kt,e),null!==St&&Dt(St,e),Ct.forEach(t),Et.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Tt.shift()}var Bt={},Ft=new Map,zt=new Map,Ht=["abort","abort",Ke,"animationEnd",Qe,"animationIteration",Ge,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Je,"transitionEnd","waiting","waiting"];function $t(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},zt.set(r,t),Ft.set(r,o),Bt[i]=o}}$t("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),$t("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),$t(Ht,2);for(var Ut="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wt=0;Wt<Ut.length;Wt++)zt.set(Ut[Wt],0);var Vt=o.unstable_UserBlockingPriority,qt=o.unstable_runWithPriority,Kt=!0;function Qt(e,t){Gt(t,e,!1)}function Gt(e,t,n){var r=zt.get(t);switch(void 0===r?2:r){case 0:r=Jt.bind(null,t,1,e);break;case 1:r=Yt.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Jt(e,t,n,r){B||D();var i=Xt,o=B;B=!0;try{I(i,e,t,n,r)}finally{(B=o)||z()}}function Yt(e,t,n,r){qt(Vt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if(Kt)if(0<wt.length&&-1<Ot.indexOf(e))e=_t(null,e,t,n,r),wt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Pt(e,r);else if(-1<Ot.indexOf(e))e=_t(i,e,t,n,r),wt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return xt=Nt(xt,e,t,n,r,i),!0;case"dragenter":return kt=Nt(kt,e,t,n,r,i),!0;case"mouseover":return St=Nt(St,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ct.set(o,Nt(Ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Et.set(o,Nt(Et.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Pt(e,r),e=ft(e,r,null,t);try{H(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,r){if(null!==(n=jn(n=ct(r)))){var i=et(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=tt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{H(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var on=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(e,t){if(t){if(on[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=Re;function cn(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=E[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function un(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vn="$",yn="/$",bn="$?",wn="$!",xn=null,kn=null;function Sn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Cn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var En="function"===typeof setTimeout?setTimeout:void 0,Tn="function"===typeof clearTimeout?clearTimeout:void 0;function On(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function An(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn||n===wn||n===bn){if(0===t)return e;t--}else n===yn&&t++}e=e.previousSibling}return null}var _n=Math.random().toString(36).slice(2),Pn="__reactInternalInstance$"+_n,Nn="__reactEventHandlers$"+_n,Mn="__reactContainere$"+_n;function jn(e){var t=e[Pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mn]||n[Pn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=An(e);null!==e;){if(n=e[Pn])return n;e=An(e)}return t}n=(e=n).parentNode}return null}function Rn(e){return!(e=e[Pn]||e[Mn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function In(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Dn(e){return e[Nn]||null}function Ln(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Bn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}function Fn(e,t,n){(t=Bn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function zn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ln(t);for(t=n.length;0<t--;)Fn(n[t],"captured",e);for(t=0;t<n.length;t++)Fn(n[t],"bubbled",e)}}function Hn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Bn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function $n(e){e&&e.dispatchConfig.registrationName&&Hn(e._targetInst,null,e)}function Un(e){ot(e,zn)}var Wn=null,Vn=null,qn=null;function Kn(){if(qn)return qn;var e,t,n=Vn,r=n.length,i="value"in Wn?Wn.value:Wn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return qn=i.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Gn(){return!1}function Jn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Gn,this.isPropagationStopped=Gn,this}function Yn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Xn(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=Yn,e.release=Xn}i(Jn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Gn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gn,this._dispatchInstances=this._dispatchListeners=null}}),Jn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Jn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn(Jn);var er=Jn.extend({data:null}),tr=Jn.extend({data:null}),nr=[9,13,27,32],rr=O&&"CompositionEvent"in window,ir=null;O&&"documentMode"in document&&(ir=document.documentMode);var or=O&&"TextEvent"in window&&!ir,sr=O&&(!rr||ir&&8<ir&&11>=ir),ar=String.fromCharCode(32),lr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},cr=!1;function ur(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var fr={eventTypes:lr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var o=lr.compositionStart;break e;case"compositionend":o=lr.compositionEnd;break e;case"compositionupdate":o=lr.compositionUpdate;break e}o=void 0}else dr?ur(e,n)&&(o=lr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=lr.compositionStart);return o?(sr&&"ko"!==n.locale&&(dr||o!==lr.compositionStart?o===lr.compositionEnd&&dr&&(i=Kn()):(Vn="value"in(Wn=r)?Wn.value:Wn.textContent,dr=!0)),o=er.getPooled(o,t,n,r),i?o.data=i:null!==(i=hr(n))&&(o.data=i),Un(o),i=o):i=null,(e=or?function(e,t){switch(e){case"compositionend":return hr(t);case"keypress":return 32!==t.which?null:(cr=!0,ar);case"textInput":return(e=t.data)===ar&&cr?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&ur(e,t)?(e=Kn(),qn=Vn=Wn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sr&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(lr.beforeInput,t,n,r)).data=e,Un(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var gr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function vr(e,t,n){return(e=Jn.getPooled(gr.change,e,t,n)).type="change",M(n),Un(e),e}var yr=null,br=null;function wr(e){lt(e)}function xr(e){if(xe(In(e)))return e}function kr(e,t){if("change"===e)return t}var Sr=!1;function Cr(){yr&&(yr.detachEvent("onpropertychange",Er),br=yr=null)}function Er(e){if("value"===e.propertyName&&xr(br))if(e=vr(br,e,ct(e)),B)lt(e);else{B=!0;try{R(wr,e)}finally{B=!1,z()}}}function Tr(e,t,n){"focus"===e?(Cr(),br=n,(yr=t).attachEvent("onpropertychange",Er)):"blur"===e&&Cr()}function Or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return xr(br)}function Ar(e,t){if("click"===e)return xr(t)}function _r(e,t){if("input"===e||"change"===e)return xr(t)}O&&(Sr=ut("input")&&(!document.documentMode||9<document.documentMode));var Pr={eventTypes:gr,_isInputEventSupported:Sr,extractEvents:function(e,t,n,r){var i=t?In(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=kr;else if(mr(i))if(Sr)s=_r;else{s=Or;var a=Tr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Ar);if(s&&(s=s(e,t)))return vr(s,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Oe(i,"number",i.value)}},Nr=Jn.extend({view:null,detail:null}),Mr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mr[e])&&!!t[e]}function Rr(){return jr}var Ir=0,Dr=0,Lr=!1,Br=!1,Fr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Rr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ir;return Ir=e.screenX,Lr?"mousemove"===e.type?e.screenX-t:0:(Lr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Dr;return Dr=e.screenY,Br?"mousemove"===e.type?e.screenY-t:0:(Br=!0,0)}}),zr=Fr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Hr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$r={eventTypes:Hr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?jn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var a=Fr,l=Hr.mouseLeave,c=Hr.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=zr,l=Hr.pointerLeave,c=Hr.pointerEnter,u="pointer");if(e=null==s?o:In(s),o=null==t?o:In(t),(l=a.getPooled(l,s,n,r)).type=u+"leave",l.target=e,l.relatedTarget=o,(n=a.getPooled(c,t,n,r)).type=u+"enter",n.target=o,n.relatedTarget=e,u=t,(r=s)&&u)e:{for(c=u,s=0,e=a=r;e;e=Ln(e))s++;for(e=0,t=c;t;t=Ln(t))e++;for(;0<s-e;)a=Ln(a),s--;for(;0<e-s;)c=Ln(c),e--;for(;s--;){if(a===c||a===c.alternate)break e;a=Ln(a),c=Ln(c)}a=null}else a=null;for(c=a,a=[];r&&r!==c&&(null===(s=r.alternate)||s!==c);)a.push(r),r=Ln(r);for(r=[];u&&u!==c&&(null===(s=u.alternate)||s!==c);)r.push(u),u=Ln(u);for(u=0;u<a.length;u++)Hn(a[u],"bubbled",l);for(u=r.length;0<u--;)Hn(r[u],"captured",n);return 0===(64&i)?[l]:[l,n]}};var Ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Wr=Object.prototype.hasOwnProperty;function Vr(e,t){if(Ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Wr.call(t,n[r])||!Ur(e[n[r]],t[n[r]]))return!1;return!0}var qr=O&&"documentMode"in document&&11>=document.documentMode,Kr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Gr=null,Jr=null,Yr=!1;function Xr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Yr||null==Qr||Qr!==hn(n)?null:("selectionStart"in(n=Qr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Jr&&Vr(Jr,n)?null:(Jr=n,(e=Jn.getPooled(Kr.select,Gr,e,t)).type="select",e.target=Qr,Un(e),e))}var Zr={eventTypes:Kr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),o=E.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?In(t):window,e){case"focus":(mr(i)||"true"===i.contentEditable)&&(Qr=i,Gr=t,Jr=null);break;case"blur":Jr=Gr=Qr=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yr=!1,Xr(n,r);case"selectionchange":if(qr)break;case"keydown":case"keyup":return Xr(n,r)}return null}},ei=Jn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=Jn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Nr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},si=Nr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?oi[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Rr,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Fr.extend({dataTransfer:null}),li=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Rr}),ci=Jn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ui=Fr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hi={eventTypes:Bt,extractEvents:function(e,t,n,r){var i=Ft.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=si;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=li;break;case Ke:case Qe:case Ge:e=ei;break;case Je:e=ci;break;case"scroll":e=Nr;break;case"wheel":e=ui;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=zr;break;default:e=Jn}return Un(t=e.getPooled(i,t,n,r)),t}};if(y)throw Error(s(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),p=Dn,m=Rn,g=In,T({SimpleEventPlugin:hi,EnterLeaveEventPlugin:$r,ChangeEventPlugin:Pr,SelectEventPlugin:Zr,BeforeInputEventPlugin:fr});var di=[],fi=-1;function pi(e){0>fi||(e.current=di[fi],di[fi]=null,fi--)}function mi(e,t){fi++,di[fi]=e.current,e.current=t}var gi={},vi={current:gi},yi={current:!1},bi=gi;function wi(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function xi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ki(){pi(yi),pi(vi)}function Si(e,t,n){if(vi.current!==gi)throw Error(s(168));mi(vi,t),mi(yi,n)}function Ci(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,ge(t)||"Unknown",o));return i({},n,{},r)}function Ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,bi=vi.current,mi(vi,e),mi(yi,yi.current),!0}function Ti(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ci(e,t,bi),r.__reactInternalMemoizedMergedChildContext=e,pi(yi),pi(vi),mi(vi,e)):pi(yi),mi(yi,n)}var Oi=o.unstable_runWithPriority,Ai=o.unstable_scheduleCallback,_i=o.unstable_cancelCallback,Pi=o.unstable_requestPaint,Ni=o.unstable_now,Mi=o.unstable_getCurrentPriorityLevel,ji=o.unstable_ImmediatePriority,Ri=o.unstable_UserBlockingPriority,Ii=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Li=o.unstable_IdlePriority,Bi={},Fi=o.unstable_shouldYield,zi=void 0!==Pi?Pi:function(){},Hi=null,$i=null,Ui=!1,Wi=Ni(),Vi=1e4>Wi?Ni:function(){return Ni()-Wi};function qi(){switch(Mi()){case ji:return 99;case Ri:return 98;case Ii:return 97;case Di:return 96;case Li:return 95;default:throw Error(s(332))}}function Ki(e){switch(e){case 99:return ji;case 98:return Ri;case 97:return Ii;case 96:return Di;case 95:return Li;default:throw Error(s(332))}}function Qi(e,t){return e=Ki(e),Oi(e,t)}function Gi(e,t,n){return e=Ki(e),Ai(e,t,n)}function Ji(e){return null===Hi?(Hi=[e],$i=Ai(ji,Xi)):Hi.push(e),Bi}function Yi(){if(null!==$i){var e=$i;$i=null,_i(e)}Xi()}function Xi(){if(!Ui&&null!==Hi){Ui=!0;var e=0;try{var t=Hi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Hi=null}catch(n){throw null!==Hi&&(Hi=Hi.slice(e+1)),Ai(ji,Yi),n}finally{Ui=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function eo(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var to={current:null},no=null,ro=null,io=null;function oo(){io=ro=no=null}function so(e){var t=to.current;pi(to),e.type._context._currentValue=t}function ao(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function lo(e,t){no=e,io=ro=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ds=!0),e.firstContext=null)}function co(e,t){if(io!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(io=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ro){if(null===no)throw Error(s(308));ro=t,no.dependencies={expirationTime:0,firstContext:t,responders:null}}else ro=ro.next=t;return e._currentValue}var uo=!1;function ho(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function po(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function mo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function go(e,t){var n=e.alternate;null!==n&&fo(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function vo(e,t,n,r){var o=e.updateQueue;uo=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var l=s.next;s.next=a.next,a.next=l}s=a,o.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=a))}if(null!==s){l=s.next;var c=o.baseState,u=0,h=null,d=null,f=null;if(null!==l)for(var p=l;;){if((a=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=c):f=f.next=m,a>u&&(u=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),kl(a,p.suspenseConfig);e:{var g=e,v=p;switch(a=t,m=n,v.tag){case 1:if("function"===typeof(g=v.payload)){c=g.call(m,c,a);break e}c=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"===typeof(g=v.payload)?g.call(m,c,a):g)||void 0===a)break e;c=i({},c,a);break e;case 2:uo=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=o.effects)?o.effects=[p]:a.push(p))}if(null===(p=p.next)||p===l){if(null===(a=o.shared.pending))break;p=s.next=a.next,a.next=l,o.baseQueue=s=a,o.shared.pending=null}}null===f?h=c:f.next=d,o.baseState=h,o.baseQueue=f,Sl(u),e.expirationTime=u,e.memoizedState=c}}function yo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var bo=J.ReactCurrentBatchConfig,wo=(new r.Component).refs;function xo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var ko={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=cl(),i=bo.suspense;(i=po(r=ul(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),mo(e,i),hl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=cl(),i=bo.suspense;(i=po(r=ul(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),mo(e,i),hl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=cl(),r=bo.suspense;(r=po(n=ul(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),mo(e,r),hl(e,n)}};function So(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Vr(n,r)||!Vr(i,o))}function Co(e,t,n){var r=!1,i=gi,o=t.contextType;return"object"===typeof o&&null!==o?o=co(o):(i=xi(t)?bi:vi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?wi(e,i):gi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ko,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Eo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ko.enqueueReplaceState(t,t.state,null)}function To(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=wo,ho(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=co(o):(o=xi(t)?bi:vi.current,i.context=wi(e,o)),vo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(xo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ko.enqueueReplaceState(i,i.state,null),vo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Oo=Array.isArray;function Ao(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===wo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function _o(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Po(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ul(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=ql(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ao(e,t,n),r.return=e,r):((r=Wl(n.type,n.key,n.props,null,e.mode,r)).ref=Ao(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Vl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=ql(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Wl(t.type,t.key,t.props,null,e.mode,n)).ref=Ao(e,null,t),n.return=e,n;case te:return(t=Kl(t,e.mode,n)).return=e,t}if(Oo(t)||me(t))return(t=Vl(t,e.mode,n,null)).return=e,t;_o(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?u(e,t,n,r):null}if(Oo(n)||me(n))return null!==i?null:h(e,t,n,r,null);_o(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Oo(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);_o(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,a,l,c){var u=me(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===h?u=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,o,l){var c="object"===typeof o&&null!==o&&o.type===ne&&null===o.key;c&&(o=o.props.children);var u="object"===typeof o&&null!==o;if(u)switch(o.$$typeof){case ee:e:{for(u=o.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(o.type===ne){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}}else if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=Ao(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===ne?((r=Vl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Wl(o.type,o.key,o.props,null,e.mode,l)).ref=Ao(e,r,o),l.return=e,e=l)}return a(e);case te:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Kl(o,e.mode,l)).return=e,e=r}return a(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=ql(o,e.mode,l)).return=e,e=r),a(e);if(Oo(o))return m(e,r,o,l);if(me(o))return g(e,r,o,l);if(u&&_o(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,r)}}var No=Po(!0),Mo=Po(!1),jo={},Ro={current:jo},Io={current:jo},Do={current:jo};function Lo(e){if(e===jo)throw Error(s(174));return e}function Bo(e,t){switch(mi(Do,t),mi(Io,e),mi(Ro,jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Le(null,"");break;default:t=Le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Ro),mi(Ro,t)}function Fo(){pi(Ro),pi(Io),pi(Do)}function zo(e){Lo(Do.current);var t=Lo(Ro.current),n=Le(t,e.type);t!==n&&(mi(Io,e),mi(Ro,n))}function Ho(e){Io.current===e&&(pi(Ro),pi(Io))}var $o={current:0};function Uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===bn||n.data===wn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Wo(e,t){return{responder:e,props:t}}var Vo=J.ReactCurrentDispatcher,qo=J.ReactCurrentBatchConfig,Ko=0,Qo=null,Go=null,Jo=null,Yo=!1;function Xo(){throw Error(s(321))}function Zo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ur(e[n],t[n]))return!1;return!0}function es(e,t,n,r,i,o){if(Ko=o,Qo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Vo.current=null===e||null===e.memoizedState?Ss:Cs,e=n(r,i),t.expirationTime===Ko){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(s(301));o+=1,Jo=Go=null,t.updateQueue=null,Vo.current=Es,e=n(r,i)}while(t.expirationTime===Ko)}if(Vo.current=ks,t=null!==Go&&null!==Go.next,Ko=0,Jo=Go=Qo=null,Yo=!1,t)throw Error(s(300));return e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Jo?Qo.memoizedState=Jo=e:Jo=Jo.next=e,Jo}function ns(){if(null===Go){var e=Qo.alternate;e=null!==e?e.memoizedState:null}else e=Go.next;var t=null===Jo?Qo.memoizedState:Jo.next;if(null!==t)Jo=t,Go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Go=e).memoizedState,baseState:Go.baseState,baseQueue:Go.baseQueue,queue:Go.queue,next:null},null===Jo?Qo.memoizedState=Jo=e:Jo=Jo.next=e}return Jo}function rs(e,t){return"function"===typeof t?t(e):t}function is(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=o=null,c=i;do{var u=c.expirationTime;if(u<Ko){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,o=r):l=l.next=h,u>Qo.expirationTime&&(Qo.expirationTime=u,Sl(u))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),kl(u,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===l?o=r:l.next=a,Ur(r,t.memoizedState)||(Ds=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function os(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Ur(o,t.memoizedState)||(Ds=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ss(e){var t=ts();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e}).dispatch=xs.bind(null,Qo,e),[t.memoizedState,e]}function as(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qo.updateQueue)?(t={lastEffect:null},Qo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ls(){return ns().memoizedState}function cs(e,t,n,r){var i=ts();Qo.effectTag|=e,i.memoizedState=as(1|t,n,void 0,void 0===r?null:r)}function us(e,t,n,r){var i=ns();r=void 0===r?null:r;var o=void 0;if(null!==Go){var s=Go.memoizedState;if(o=s.destroy,null!==r&&Zo(r,s.deps))return void as(t,n,o,r)}Qo.effectTag|=e,i.memoizedState=as(1|t,n,o,r)}function hs(e,t){return cs(516,4,e,t)}function ds(e,t){return us(516,4,e,t)}function fs(e,t){return us(4,2,e,t)}function ps(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ms(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,us(4,2,ps.bind(null,t,e),n)}function gs(){}function vs(e,t){return ts().memoizedState=[e,void 0===t?null:t],e}function ys(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function bs(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ws(e,t,n){var r=qi();Qi(98>r?98:r,(function(){e(!0)})),Qi(97<r?97:r,(function(){var r=qo.suspense;qo.suspense=void 0===t?null:t;try{e(!1),n()}finally{qo.suspense=r}}))}function xs(e,t,n){var r=cl(),i=bo.suspense;i={expirationTime:r=ul(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Qo||null!==o&&o===Qo)Yo=!0,i.expirationTime=Ko,Qo.expirationTime=Ko;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,Ur(a,s))return}catch(l){}hl(e,r)}}var ks={readContext:co,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo,useResponder:Xo,useDeferredValue:Xo,useTransition:Xo},Ss={readContext:co,useCallback:vs,useContext:co,useEffect:hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,cs(4,2,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cs(4,2,e,t)},useMemo:function(e,t){var n=ts();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ts();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=xs.bind(null,Qo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ts().memoizedState=e},useState:ss,useDebugValue:gs,useResponder:Wo,useDeferredValue:function(e,t){var n=ss(e),r=n[0],i=n[1];return hs((function(){var n=qo.suspense;qo.suspense=void 0===t?null:t;try{i(e)}finally{qo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ss(!1),n=t[0];return t=t[1],[vs(ws.bind(null,t,e),[t,e]),n]}},Cs={readContext:co,useCallback:ys,useContext:co,useEffect:ds,useImperativeHandle:ms,useLayoutEffect:fs,useMemo:bs,useReducer:is,useRef:ls,useState:function(){return is(rs)},useDebugValue:gs,useResponder:Wo,useDeferredValue:function(e,t){var n=is(rs),r=n[0],i=n[1];return ds((function(){var n=qo.suspense;qo.suspense=void 0===t?null:t;try{i(e)}finally{qo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=is(rs),n=t[0];return t=t[1],[ys(ws.bind(null,t,e),[t,e]),n]}},Es={readContext:co,useCallback:ys,useContext:co,useEffect:ds,useImperativeHandle:ms,useLayoutEffect:fs,useMemo:bs,useReducer:os,useRef:ls,useState:function(){return os(rs)},useDebugValue:gs,useResponder:Wo,useDeferredValue:function(e,t){var n=os(rs),r=n[0],i=n[1];return ds((function(){var n=qo.suspense;qo.suspense=void 0===t?null:t;try{i(e)}finally{qo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=os(rs),n=t[0];return t=t[1],[ys(ws.bind(null,t,e),[t,e]),n]}},Ts=null,Os=null,As=!1;function _s(e,t){var n=Hl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ps(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ns(e){if(As){var t=Os;if(t){var n=t;if(!Ps(e,t)){if(!(t=On(n.nextSibling))||!Ps(e,t))return e.effectTag=-1025&e.effectTag|2,As=!1,void(Ts=e);_s(Ts,n)}Ts=e,Os=On(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,As=!1,Ts=e}}function Ms(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ts=e}function js(e){if(e!==Ts)return!1;if(!As)return Ms(e),As=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Cn(t,e.memoizedProps))for(t=Os;t;)_s(e,t),t=On(t.nextSibling);if(Ms(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn){if(0===t){Os=On(e.nextSibling);break e}t--}else n!==vn&&n!==wn&&n!==bn||t++}e=e.nextSibling}Os=null}}else Os=Ts?On(e.stateNode.nextSibling):null;return!0}function Rs(){Os=Ts=null,As=!1}var Is=J.ReactCurrentOwner,Ds=!1;function Ls(e,t,n,r){t.child=null===e?Mo(t,null,n,r):No(t,e.child,n,r)}function Bs(e,t,n,r,i){n=n.render;var o=t.ref;return lo(t,i),r=es(e,t,n,r,o,i),null===e||Ds?(t.effectTag|=1,Ls(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function Fs(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!==typeof s||$l(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wl(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,zs(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:Vr)(i,r)&&e.ref===t.ref)?ta(e,t,o):(t.effectTag|=1,(e=Ul(s,r)).ref=t.ref,e.return=t,t.child=e)}function zs(e,t,n,r,i,o){return null!==e&&Vr(e.memoizedProps,r)&&e.ref===t.ref&&(Ds=!1,i<o)?(t.expirationTime=e.expirationTime,ta(e,t,o)):$s(e,t,n,r,o)}function Hs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function $s(e,t,n,r,i){var o=xi(n)?bi:vi.current;return o=wi(t,o),lo(t,i),n=es(e,t,n,r,o,i),null===e||Ds?(t.effectTag|=1,Ls(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function Us(e,t,n,r,i){if(xi(n)){var o=!0;Ei(t)}else o=!1;if(lo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Co(t,n,r),To(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=co(c):c=wi(t,c=xi(n)?bi:vi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Eo(t,s,r,c),uo=!1;var d=t.memoizedState;s.state=d,vo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||yi.current||uo?("function"===typeof u&&(xo(t,n,u,r),l=t.memoizedState),(a=uo||So(t,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,fo(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:eo(t.type,a),l=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=co(c):c=wi(t,c=xi(n)?bi:vi.current),(h="function"===typeof(u=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Eo(t,s,r,c),uo=!1,l=t.memoizedState,s.state=l,vo(t,r,s,i),d=t.memoizedState,a!==r||l!==d||yi.current||uo?("function"===typeof u&&(xo(t,n,u,r),d=t.memoizedState),(u=uo||So(t,n,a,r,l,d,c))?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,c)),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=c,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Ws(e,t,n,r,o,i)}function Ws(e,t,n,r,i,o){Hs(e,t);var s=0!==(64&t.effectTag);if(!r&&!s)return i&&Ti(t,n,!1),ta(e,t,o);r=t.stateNode,Is.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=No(t,e.child,null,o),t.child=No(t,null,a,o)):Ls(e,t,a,o),t.memoizedState=r.state,i&&Ti(t,n,!0),t.child}function Vs(e){var t=e.stateNode;t.pendingContext?Si(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Si(0,t.context,!1),Bo(e,t.containerInfo)}var qs,Ks,Qs,Gs,Js={dehydrated:null,retryTime:0};function Ys(e,t,n){var r,i=t.mode,o=t.pendingProps,s=$o.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&s)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),mi($o,1&s),null===e){if(void 0!==o.fallback&&Ns(t),a){if(a=o.fallback,(o=Vl(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Vl(a,i,n,null)).return=t,o.sibling=n,t.memoizedState=Js,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Mo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(o=o.fallback,(n=Ul(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=Ul(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Js,t.child=n,i}return n=No(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=o.fallback,(o=Vl(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Vl(a,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Js,t.child=o,n}return t.memoizedState=null,t.child=No(t,e,o.children,n)}function Xs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ao(e.return,t)}function Zs(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function ea(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ls(e,t,r.children,n),0!==(2&(r=$o.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Xs(e,n);else if(19===e.tag)Xs(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mi($o,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zs(t,!0,n,null,o,t.lastEffect);break;case"together":Zs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ta(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Sl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ul(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ul(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function na(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ra(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return xi(t.type)&&ki(),null;case 3:return Fo(),pi(yi),pi(vi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!js(t)||(t.effectTag|=4),Ks(t),null;case 5:Ho(t),n=Lo(Do.current);var o=t.type;if(null!==e&&null!=t.stateNode)Qs(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Lo(Ro.current),js(t)){r=t.stateNode,o=t.type;var a=t.memoizedProps;switch(r[Pn]=t,r[Nn]=a,o){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Ye.length;e++)Qt(Ye[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Se(r,a),Qt("invalid",r),cn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r),cn(n,"onChange");break;case"textarea":Ne(r,a),Qt("invalid",r),cn(n,"onChange")}for(var l in sn(o,a),e=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):C.hasOwnProperty(l)&&null!=c&&cn(n,l)}switch(o){case"input":we(r),Te(r,a,!0);break;case"textarea":we(r),je(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=un)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===ln&&(e=De(o)),e===ln?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(o,{is:r.is}):(e=l.createElement(o),"select"===o&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,o),e[Pn]=t,e[Nn]=r,qs(e,t,!1,!1),t.stateNode=e,l=an(o,r),o){case"iframe":case"object":case"embed":Qt("load",e),c=r;break;case"video":case"audio":for(c=0;c<Ye.length;c++)Qt(Ye[c],e);c=r;break;case"source":Qt("error",e),c=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),c=r;break;case"form":Qt("reset",e),Qt("submit",e),c=r;break;case"details":Qt("toggle",e),c=r;break;case"input":Se(e,r),c=ke(e,r),Qt("invalid",e),cn(n,"onChange");break;case"option":c=Ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Qt("invalid",e),cn(n,"onChange");break;case"textarea":Ne(e,r),c=Pe(e,r),Qt("invalid",e),cn(n,"onChange");break;default:c=r}sn(o,c);var u=c;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?rn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ze(e,h):"children"===a?"string"===typeof h?("textarea"!==o||""!==h)&&He(e,h):"number"===typeof h&&He(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(C.hasOwnProperty(a)?null!=h&&cn(n,a):null!=h&&Y(e,a,h,l))}switch(o){case"input":we(e),Te(e,r,!1);break;case"textarea":we(e),je(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ye(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?_e(e,!!r.multiple,n,!1):null!=r.defaultValue&&_e(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=un)}Sn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Gs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Lo(Do.current),Lo(Ro.current),js(t)?(n=t.stateNode,r=t.memoizedProps,n[Pn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Pn]=t,t.stateNode=n)}return null;case 13:return pi($o),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&js(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&$o.current)?Ua===ja&&(Ua=Da):(Ua!==ja&&Ua!==Da||(Ua=La),0!==Qa&&null!==za&&(Jl(za,$a),Yl(za,Qa)))),(n||r)&&(t.effectTag|=4),null);case 4:return Fo(),Ks(t),null;case 10:return so(t),null;case 19:if(pi($o),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(a=r.rendering)){if(o)na(r,!1);else if(Ua!==ja||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Uo(a))){for(t.effectTag|=64,na(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return mi($o,1&$o.current|2),t.child}a=a.sibling}}else{if(!o)if(null!==(e=Uo(a))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),na(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Vi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,na(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Vi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Vi(),n.sibling=null,t=$o.current,mi($o,o?1&t|2:1&t),n):null}throw Error(s(156,t.tag))}function ia(e){switch(e.tag){case 1:xi(e.type)&&ki();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Fo(),pi(yi),pi(vi),0!==(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return Ho(e),null;case 13:return pi($o),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi($o),null;case 4:return Fo(),null;case 10:return so(e),null;default:return null}}function oa(e,t){return{value:e,source:t,stack:ve(t)}}qs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ks=function(){},Qs=function(e,t,n,r,o){var s=e.memoizedProps;if(s!==r){var a,l,c=t.stateNode;switch(Lo(Ro.current),e=null,n){case"input":s=ke(c,s),r=ke(c,r),e=[];break;case"option":s=Ae(c,s),r=Ae(c,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=Pe(c,s),r=Pe(c,r),e=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(c.onclick=un)}for(a in sn(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(l in c=s[a])c.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(C.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var u=r[a];if(c=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&u!==c&&(null!=u||null!=c))if("style"===a)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(e||(e=[]),e.push(a,n)),n=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(a,u)):"children"===a?c===u||"string"!==typeof u&&"number"!==typeof u||(e=e||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(C.hasOwnProperty(a)?(null!=u&&cn(o,a),e||c===u||(e=[])):(e=e||[]).push(a,u))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Gs=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var sa="function"===typeof WeakSet?WeakSet:Set;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ve(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function la(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Il(e,n)}else t.current=null}function ca(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:eo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(s(163))}function ua(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ha(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ha(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:eo(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&yo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}yo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Sn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Lt(n)))))}throw Error(s(163))}function fa(e,t,n){switch("function"===typeof Fl&&Fl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Il(i,o)}}e=e.next}while(e!==r)}))}break;case 1:la(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Il(e,n)}}(t,n);break;case 5:la(t);break;case 4:ba(e,t,n)}}function pa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pa(t)}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(He(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?va(e,n,t):ya(e,n,t)}function va(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=un));else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function ya(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function ba(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var l=e,c=o,u=n,h=c;;)if(fa(l,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break e;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=r,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(fa(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function wa(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ua(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ce(n,r),an(e,i),t=an(e,r),i=0;i<o.length;i+=2){var a=o[i],l=o[i+1];"style"===a?rn(n,l):"dangerouslySetInnerHTML"===a?ze(n,l):"children"===a?He(n,l):Y(n,a,l,t)}switch(e){case"input":Ee(n,r);break;case"textarea":Me(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?_e(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?_e(n,!!r.multiple,r.defaultValue,!0):_e(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Lt(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Ja=Vi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void xa(t);case 19:return void xa(t)}throw Error(s(163))}function xa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new sa),t.forEach((function(t){var r=Ll.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ka="function"===typeof WeakMap?WeakMap:Map;function Sa(e,t,n){(n=po(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,el=r),aa(e,t)},n}function Ca(e,t,n){(n=po(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return aa(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===tl?tl=new Set([this]):tl.add(this),aa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ea,Ta=Math.ceil,Oa=J.ReactCurrentDispatcher,Aa=J.ReactCurrentOwner,_a=0,Pa=8,Na=16,Ma=32,ja=0,Ra=1,Ia=2,Da=3,La=4,Ba=5,Fa=_a,za=null,Ha=null,$a=0,Ua=ja,Wa=null,Va=1073741823,qa=1073741823,Ka=null,Qa=0,Ga=!1,Ja=0,Ya=500,Xa=null,Za=!1,el=null,tl=null,nl=!1,rl=null,il=90,ol=null,sl=0,al=null,ll=0;function cl(){return(Fa&(Na|Ma))!==_a?1073741821-(Vi()/10|0):0!==ll?ll:ll=1073741821-(Vi()/10|0)}function ul(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=qi();if(0===(4&t))return 99===r?1073741823:1073741822;if((Fa&Na)!==_a)return $a;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==za&&e===$a&&--e,e}function hl(e,t){if(50<sl)throw sl=0,al=null,Error(s(185));if(null!==(e=dl(e,t))){var n=qi();1073741823===t?(Fa&Pa)!==_a&&(Fa&(Na|Ma))===_a?gl(e):(pl(e),Fa===_a&&Yi()):pl(e),(4&Fa)===_a||98!==n&&99!==n||(null===ol?ol=new Map([[e,t]]):(void 0===(n=ol.get(e))||n>t)&&ol.set(e,t))}}function dl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(za===i&&(Sl(t),Ua===La&&Jl(i,$a)),Yl(i,t)),i}function fl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Gl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ji(gl.bind(null,e));else{var t=fl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=cl();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Bi&&_i(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Ji(gl.bind(null,e)):Gi(r,ml.bind(null,e),{timeout:10*(1073741821-t)-Vi()}),e.callbackNode=t}}}function ml(e,t){if(ll=0,t)return Xl(e,t=cl()),pl(e),null;var n=fl(e);if(0!==n){if(t=e.callbackNode,(Fa&(Na|Ma))!==_a)throw Error(s(327));if(Ml(),e===za&&n===$a||bl(e,n),null!==Ha){var r=Fa;Fa|=Na;for(var i=xl();;)try{El();break}catch(l){wl(e,l)}if(oo(),Fa=r,Oa.current=i,Ua===Ra)throw t=Wa,bl(e,n),Jl(e,n),pl(e),t;if(null===Ha)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ua,za=null,r){case ja:case Ra:throw Error(s(345));case Ia:Xl(e,2<n?2:n);break;case Da:if(Jl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Al(i)),1073741823===Va&&10<(i=Ja+Ya-Vi())){if(Ga){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,bl(e,n);break}}if(0!==(o=fl(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=En(_l.bind(null,e),i);break}_l(e);break;case La:if(Jl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Al(i)),Ga&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,bl(e,n);break}if(0!==(i=fl(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==qa?r=10*(1073741821-qa)-Vi():1073741823===Va?r=0:(r=10*(1073741821-Va)-5e3,0>(r=(i=Vi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ta(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=En(_l.bind(null,e),r);break}_l(e);break;case Ba:if(1073741823!==Va&&null!==Ka){o=Va;var a=Ka;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=Vi()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Jl(e,n),e.timeoutHandle=En(_l.bind(null,e),r);break}}_l(e);break;default:throw Error(s(329))}if(pl(e),e.callbackNode===t)return ml.bind(null,e)}}return null}function gl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Fa&(Na|Ma))!==_a)throw Error(s(327));if(Ml(),e===za&&t===$a||bl(e,t),null!==Ha){var n=Fa;Fa|=Na;for(var r=xl();;)try{Cl();break}catch(i){wl(e,i)}if(oo(),Fa=n,Oa.current=r,Ua===Ra)throw n=Wa,bl(e,t),Jl(e,t),pl(e),n;if(null!==Ha)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,za=null,_l(e),pl(e)}return null}function vl(e,t){var n=Fa;Fa|=1;try{return e(t)}finally{(Fa=n)===_a&&Yi()}}function yl(e,t){var n=Fa;Fa&=-2,Fa|=Pa;try{return e(t)}finally{(Fa=n)===_a&&Yi()}}function bl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Tn(n)),null!==Ha)for(n=Ha.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ki();break;case 3:Fo(),pi(yi),pi(vi);break;case 5:Ho(r);break;case 4:Fo();break;case 13:case 19:pi($o);break;case 10:so(r)}n=n.return}za=e,Ha=Ul(e.current,null),$a=t,Ua=ja,Wa=null,qa=Va=1073741823,Ka=null,Qa=0,Ga=!1}function wl(e,t){for(;;){try{if(oo(),Vo.current=ks,Yo)for(var n=Qo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ko=0,Jo=Go=Qo=null,Yo=!1,null===Ha||null===Ha.return)return Ua=Ra,Wa=t,Ha=null;e:{var i=e,o=Ha.return,s=Ha,a=t;if(t=$a,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var l=a;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.expirationTime=c.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var u=0!==(1&$o.current),h=o;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!u)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0===(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=po(1073741823,null);v.tag=2,mo(s,v)}s.expirationTime=1073741823;break e}a=void 0,s=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new ka,a=new Set,y.set(l,a)):void 0===(a=y.get(l))&&(a=new Set,y.set(l,a)),!a.has(s)){a.add(s);var b=Dl.bind(null,i,l,s);l.then(b,b)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((ge(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ve(s))}Ua!==Ba&&(Ua=Ia),a=oa(a,s),h=o;do{switch(h.tag){case 3:l=a,h.effectTag|=4096,h.expirationTime=t,go(h,Sa(h,l,t));break e;case 1:l=a;var w=h.type,x=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===tl||!tl.has(x)))){h.effectTag|=4096,h.expirationTime=t,go(h,Ca(h,l,t));break e}}h=h.return}while(null!==h)}Ha=Ol(Ha)}catch(k){t=k;continue}break}}function xl(){var e=Oa.current;return Oa.current=ks,null===e?ks:e}function kl(e,t){e<Va&&2<e&&(Va=e),null!==t&&e<qa&&2<e&&(qa=e,Ka=t)}function Sl(e){e>Qa&&(Qa=e)}function Cl(){for(;null!==Ha;)Ha=Tl(Ha)}function El(){for(;null!==Ha&&!Fi();)Ha=Tl(Ha)}function Tl(e){var t=Ea(e.alternate,e,$a);return e.memoizedProps=e.pendingProps,null===t&&(t=Ol(e)),Aa.current=null,t}function Ol(e){Ha=e;do{var t=Ha.alternate;if(e=Ha.return,0===(2048&Ha.effectTag)){if(t=ra(t,Ha,$a),1===$a||1!==Ha.childExpirationTime){for(var n=0,r=Ha.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ha.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ha.firstEffect),null!==Ha.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ha.firstEffect),e.lastEffect=Ha.lastEffect),1<Ha.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ha:e.firstEffect=Ha,e.lastEffect=Ha))}else{if(null!==(t=ia(Ha)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ha.sibling))return t;Ha=e}while(null!==Ha);return Ua===ja&&(Ua=Ba),null}function Al(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function _l(e){var t=qi();return Qi(99,Pl.bind(null,e,t)),null}function Pl(e,t){do{Ml()}while(null!==rl);if((Fa&(Na|Ma))!==_a)throw Error(s(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Al(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===za&&(Ha=za=null,$a=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Fa;Fa|=Ma,Aa.current=null,xn=Kt;var a=mn();if(gn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{var c=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch(T){l=null;break e}var d=0,f=-1,p=-1,m=0,g=0,v=a,y=null;t:for(;;){for(var b;v!==l||0!==u&&3!==v.nodeType||(f=d+u),v!==h||0!==c&&3!==v.nodeType||(p=d+c),3===v.nodeType&&(d+=v.nodeValue.length),null!==(b=v.firstChild);)y=v,v=b;for(;;){if(v===a)break t;if(y===l&&++m===u&&(f=d),y===h&&++g===c&&(p=d),null!==(b=v.nextSibling))break;y=(v=y).parentNode}v=b}l=-1===f||-1===p?null:{start:f,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;kn={activeElementDetached:null,focusedElem:a,selectionRange:l},Kt=!1,Xa=i;do{try{Nl()}catch(T){if(null===Xa)throw Error(s(330));Il(Xa,T),Xa=Xa.nextEffect}}while(null!==Xa);Xa=i;do{try{for(a=e,l=t;null!==Xa;){var w=Xa.effectTag;if(16&w&&He(Xa.stateNode,""),128&w){var x=Xa.alternate;if(null!==x){var k=x.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&w){case 2:ga(Xa),Xa.effectTag&=-3;break;case 6:ga(Xa),Xa.effectTag&=-3,wa(Xa.alternate,Xa);break;case 1024:Xa.effectTag&=-1025;break;case 1028:Xa.effectTag&=-1025,wa(Xa.alternate,Xa);break;case 4:wa(Xa.alternate,Xa);break;case 8:ba(a,u=Xa,l),pa(u)}Xa=Xa.nextEffect}}catch(T){if(null===Xa)throw Error(s(330));Il(Xa,T),Xa=Xa.nextEffect}}while(null!==Xa);if(k=kn,x=mn(),w=k.focusedElem,l=k.selectionRange,x!==w&&w&&w.ownerDocument&&pn(w.ownerDocument.documentElement,w)){null!==l&&gn(w)&&(x=l.start,void 0===(k=l.end)&&(k=x),"selectionStart"in w?(w.selectionStart=x,w.selectionEnd=Math.min(k,w.value.length)):(k=(x=w.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),u=w.textContent.length,a=Math.min(l.start,u),l=void 0===l.end?a:Math.min(l.end,u),!k.extend&&a>l&&(u=l,l=a,a=u),u=fn(w,a),h=fn(w,l),u&&h&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==h.node||k.focusOffset!==h.offset)&&((x=x.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),a>l?(k.addRange(x),k.extend(h.node,h.offset)):(x.setEnd(h.node,h.offset),k.addRange(x))))),x=[];for(k=w;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<x.length;w++)(k=x[w]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Kt=!!xn,kn=xn=null,e.current=n,Xa=i;do{try{for(w=e;null!==Xa;){var S=Xa.effectTag;if(36&S&&da(w,Xa.alternate,Xa),128&S){x=void 0;var C=Xa.ref;if(null!==C){var E=Xa.stateNode;Xa.tag,x=E,"function"===typeof C?C(x):C.current=x}}Xa=Xa.nextEffect}}catch(T){if(null===Xa)throw Error(s(330));Il(Xa,T),Xa=Xa.nextEffect}}while(null!==Xa);Xa=null,zi(),Fa=o}else e.current=n;if(nl)nl=!1,rl=e,il=t;else for(Xa=i;null!==Xa;)t=Xa.nextEffect,Xa.nextEffect=null,Xa=t;if(0===(t=e.firstPendingTime)&&(tl=null),1073741823===t?e===al?sl++:(sl=0,al=e):sl=0,"function"===typeof Bl&&Bl(n.stateNode,r),pl(e),Za)throw Za=!1,e=el,el=null,e;return(Fa&Pa)!==_a||Yi(),null}function Nl(){for(;null!==Xa;){var e=Xa.effectTag;0!==(256&e)&&ca(Xa.alternate,Xa),0===(512&e)||nl||(nl=!0,Gi(97,(function(){return Ml(),null}))),Xa=Xa.nextEffect}}function Ml(){if(90!==il){var e=97<il?97:il;return il=90,Qi(e,jl)}}function jl(){if(null===rl)return!1;var e=rl;if(rl=null,(Fa&(Na|Ma))!==_a)throw Error(s(331));var t=Fa;for(Fa|=Ma,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ua(5,n),ha(5,n)}}catch(r){if(null===e)throw Error(s(330));Il(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Fa=t,Yi(),!0}function Rl(e,t,n){mo(e,t=Sa(e,t=oa(n,t),1073741823)),null!==(e=dl(e,1073741823))&&pl(e)}function Il(e,t){if(3===e.tag)Rl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Rl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tl||!tl.has(r))){mo(n,e=Ca(n,e=oa(t,e),1073741823)),null!==(n=dl(n,1073741823))&&pl(n);break}}n=n.return}}function Dl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),za===e&&$a===n?Ua===La||Ua===Da&&1073741823===Va&&Vi()-Ja<Ya?bl(e,$a):Ga=!0:Gl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pl(e)))}function Ll(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ul(t=cl(),e,null)),null!==(e=dl(e,t))&&pl(e)}Ea=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||yi.current)Ds=!0;else{if(r<n){switch(Ds=!1,t.tag){case 3:Vs(t),Rs();break;case 5:if(zo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:xi(t.type)&&Ei(t);break;case 4:Bo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,mi(to,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ys(e,t,n):(mi($o,1&$o.current),null!==(t=ta(e,t,n))?t.sibling:null);mi($o,1&$o.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return ea(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),mi($o,$o.current),!r)return null}return ta(e,t,n)}Ds=!1}}else Ds=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=wi(t,vi.current),lo(t,n),i=es(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,xi(r)){var o=!0;Ei(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ho(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&xo(t,r,a,e),i.updater=ko,t.stateNode=i,i._reactInternalFiber=t,To(t,r,e,n),t=Ws(null,t,r,!0,o,n)}else t.tag=0,Ls(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return $l(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(i),e=eo(i,e),o){case 0:t=$s(null,t,i,e,n);break e;case 1:t=Us(null,t,i,e,n);break e;case 11:t=Bs(null,t,i,e,n);break e;case 14:t=Fs(null,t,i,eo(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,$s(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Us(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 3:if(Vs(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,fo(e,t),vo(t,r,null,n),(r=t.memoizedState.element)===i)Rs(),t=ta(e,t,n);else{if((i=t.stateNode.hydrate)&&(Os=On(t.stateNode.containerInfo.firstChild),Ts=t,i=As=!0),i)for(n=Mo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ls(e,t,r,n),Rs();t=t.child}return t;case 5:return zo(t),null===e&&Ns(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Cn(r,i)?a=null:null!==o&&Cn(r,o)&&(t.effectTag|=16),Hs(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ls(e,t,a,n),t=t.child),t;case 6:return null===e&&Ns(t),null;case 13:return Ys(e,t,n);case 4:return Bo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=No(t,null,r,n):Ls(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Bs(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 7:return Ls(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ls(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var l=t.type._context;if(mi(to,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=Ur(l,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(a.children===i.children&&!yi.current){t=ta(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&o)){1===l.tag&&((u=po(n,null)).tag=2,mo(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),ao(l.return,n),c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Ls(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,lo(t,n),r=r(i=co(i,o.unstable_observedBits)),t.effectTag|=1,Ls(e,t,r,n),t.child;case 14:return o=eo(i=t.type,t.pendingProps),Fs(e,t,i,o=eo(i.type,o),r,n);case 15:return zs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,xi(r)?(e=!0,Ei(t)):e=!1,lo(t,n),Co(t,r,i),To(t,r,i,n),Ws(null,t,r,!0,e,n);case 19:return ea(e,t,n)}throw Error(s(156,t.tag))};var Bl=null,Fl=null;function zl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Hl(e,t,n,r){return new zl(e,t,n,r)}function $l(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ul(e,t){var n=e.alternate;return null===n?((n=Hl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wl(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)$l(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Vl(n.children,i,o,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=Hl(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ce:return(e=Hl(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=o,e;case ue:return(e=Hl(19,n,t,i)).elementType=ue,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:a=10;break e;case se:a=9;break e;case le:a=11;break e;case he:a=14;break e;case de:a=16,r=null;break e;case fe:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Hl(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Vl(e,t,n,r){return(e=Hl(7,e,r,t)).expirationTime=n,e}function ql(e,t,n){return(e=Hl(6,e,null,t)).expirationTime=n,e}function Kl(e,t,n){return(t=Hl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Gl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Jl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Yl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Xl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zl(e,t,n,r){var i=t.current,o=cl(),a=bo.suspense;o=ul(o,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(xi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var c=n.type;if(xi(c)){n=Ci(n,c,l);break e}}n=l}else n=gi;return null===t.context?t.context=n:t.pendingContext=n,(t=po(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),mo(i,t),hl(i,o),o}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=new Ql(e,t,n=null!=n&&!0===n.hydrate),i=Hl(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,ho(i),e[Mn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);Ot.forEach((function(e){mt(e,t,n)})),At.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=ec(s);a.call(e)}}Zl(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var l=i;i=function(){var e=ec(s);l.call(e)}}yl((function(){Zl(t,s,e,i)}))}return ec(s)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}rc.prototype.render=function(e){Zl(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zl(null,e,null,(function(){t[Mn]=null}))},gt=function(e){if(13===e.tag){var t=Zi(cl(),150,100);hl(e,t),nc(e,t)}},vt=function(e){13===e.tag&&(hl(e,3),nc(e,3))},yt=function(e){if(13===e.tag){var t=cl();hl(e,t=ul(t,e,null)),nc(e,t)}},A=function(e,t,n){switch(t){case"input":if(Ee(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Dn(r);if(!i)throw Error(s(90));xe(r),Ee(r,i)}}}break;case"textarea":Me(e,n);break;case"select":null!=(t=n.value)&&_e(e,!!n.multiple,t,!1)}},R=vl,I=function(e,t,n,r,i){var o=Fa;Fa|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{(Fa=o)===_a&&Yi()}},D=function(){(Fa&(1|Na|Ma))===_a&&(function(){if(null!==ol){var e=ol;ol=null,e.forEach((function(e,t){Xl(t,e),pl(t)})),Yi()}}(),Ml())},L=function(e,t){var n=Fa;Fa|=2;try{return e(t)}finally{(Fa=n)===_a&&Yi()}};var ac={Events:[Rn,In,Dn,T,S,Un,function(e){ot(e,$n)},M,j,Xt,lt,Ml,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Bl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Fl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:jn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ac,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Fa&(Na|Ma))!==_a)throw Error(s(187));var n=Fa;Fa|=1;try{return Qi(99,e.bind(null,t))}finally{Fa=n,Yi()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(s(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(s(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(s(40));return!!e._reactRootContainer&&(yl((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Mn]=null}))})),!0)},t.unstable_batchedUpdates=vl,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return oc(e,t,n,!1,r)},t.version="16.14.0"},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},6366:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=s.length)return!1;for(l=a;0!==l--;)if(!o(e[l],s[l]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!o(l.value[1],s.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((a=e.length)!=s.length)return!1;for(l=a;0!==l--;)if(e[l]!==s[l])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof s.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof s.toString)return e.toString()===s.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(l=a;0!==l--;)if(!Object.prototype.hasOwnProperty.call(s,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!o(e[c[l]],s[c[l]]))return!1;return!0}return e!==e&&s!==s}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},5082:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function k(e){return x(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||x(e)===u},t.isConcurrentMode=k,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},5237:function(e,t,n){var r;r=e=>(()=>{var t={"./node_modules/css-mediaquery/index.js":(e,t)=>{"use strict";t.match=function(e,t){return a(e).some((function(e){var n=e.inverse,r="all"===e.type||t.type===e.type;if(r&&n||!r&&!n)return!1;var i=e.expressions.every((function(e){var n=e.feature,r=e.modifier,i=e.value,o=t[n];if(!o)return!1;switch(n){case"orientation":case"scan":return o.toLowerCase()===i.toLowerCase();case"width":case"height":case"device-width":case"device-height":i=u(i),o=u(o);break;case"resolution":i=c(i),o=c(o);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":i=l(i),o=l(o);break;case"grid":case"color":case"color-index":case"monochrome":i=parseInt(i,10)||1,o=parseInt(o,10)||0}switch(r){case"min":return o>=i;case"max":return o<=i;default:return o===i}}));return i&&!n||!i&&n}))},t.parse=a;var n=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,r=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,i=/^(?:(min|max)-)?(.+)/,o=/(em|rem|px|cm|mm|in|pt|pc)?$/,s=/(dpi|dpcm|dppx)?$/;function a(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(n),o=t[1],s=t[2],a=t[3]||"",l={};return l.inverse=!!o&&"not"===o.toLowerCase(),l.type=s?s.toLowerCase():"all",a=a.match(/\([^\)]+\)/g)||[],l.expressions=a.map((function(e){var t=e.match(r),n=t[1].toLowerCase().match(i);return{modifier:n[1],feature:n[2],value:t[2]}})),l}))}function l(e){var t,n=Number(e);return n||(n=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),n}function c(e){var t=parseFloat(e);switch(String(e).match(s)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function u(e){var t=parseFloat(e);switch(String(e).match(o)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}},"./node_modules/hyphenate-style-name/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=/[A-Z]/g,i=/^ms-/,o={};function s(e){return"-"+e.toLowerCase()}const a=function(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,s);return o[e]=i.test(t)?"-"+t:t}},"./node_modules/matchmediaquery/index.js":(e,t,n)=>{"use strict";var r=n("./node_modules/css-mediaquery/index.js").match,i="undefined"!==typeof window?window.matchMedia:null;function o(e,t,n){var o=this;if(i&&!n){var s=i.call(window,e);this.matches=s.matches,this.media=s.media,s.addListener(a)}else this.matches=r(e,t),this.media=e;function a(e){o.matches=e.matches,o.media=e.media}this.addListener=function(e){s&&s.addListener(e)},this.removeListener=function(e){s&&s.removeListener(e)},this.dispose=function(){s&&s.removeListener(a)}}e.exports=function(e,t,n){return new o(e,t,n)}},"./node_modules/object-assign/index.js":e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(a[c]=o[c]);if(t){s=t(o);for(var u=0;u<s.length;u++)r.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},"./node_modules/prop-types/checkPropTypes.js":(e,t,n)=>{"use strict";var r=function(){},i=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),o={},s=n("./node_modules/prop-types/lib/has.js");function a(e,t,n,a,l){for(var c in e)if(s(e,c)){var u;try{if("function"!==typeof e[c]){var h=Error((a||"React class")+": "+n+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw h.name="Invariant Violation",h}u=e[c](t,c,a,n,null,i)}catch(f){u=f}if(!u||u instanceof Error||r((a||"React class")+": type specification of "+n+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof u+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),u instanceof Error&&!(u.message in o)){o[u.message]=!0;var d=l?l():"";r("Failed "+n+" type: "+u.message+(null!=d?d:""))}}}r=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},a.resetWarningCache=function(){o={}},e.exports=a},"./node_modules/prop-types/factoryWithTypeCheckers.js":(e,t,n)=>{"use strict";var r=n("./node_modules/react-is/index.js"),i=n("./node_modules/object-assign/index.js"),o=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),s=n("./node_modules/prop-types/lib/has.js"),a=n("./node_modules/prop-types/checkPropTypes.js"),l=function(){};function c(){return null}l=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},e.exports=function(e,t){var n="function"===typeof Symbol&&Symbol.iterator,u="@@iterator",h="<<anonymous>>",d={array:g("array"),bigint:g("bigint"),bool:g("boolean"),func:g("function"),number:g("number"),object:g("object"),string:g("string"),symbol:g("symbol"),any:m(c),arrayOf:function(e){return m((function(t,n,r,i,s){if("function"!==typeof e)return new p("Property `"+s+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a))return new p("Invalid "+i+" `"+s+"` of type `"+b(a)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<a.length;l++){var c=e(a,l,r,i,s+"["+l+"]",o);if(c instanceof Error)return c}return null}))},element:m((function(t,n,r,i,o){var s=t[n];return e(s)?null:new p("Invalid "+i+" `"+o+"` of type `"+b(s)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:m((function(e,t,n,i,o){var s=e[t];return r.isValidElementType(s)?null:new p("Invalid "+i+" `"+o+"` of type `"+b(s)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return m((function(t,n,r,i,o){if(!(t[n]instanceof e)){var s=e.name||h;return new p("Invalid "+i+" `"+o+"` of type `"+((a=t[n]).constructor&&a.constructor.name?a.constructor.name:h)+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}var a;return null}))},node:m((function(e,t,n,r,i){return y(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return m((function(t,n,r,i,a){if("function"!==typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var l=t[n],c=b(l);if("object"!==c)return new p("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var u in l)if(s(l,u)){var h=e(l,u,r,i,a+"."+u,o);if(h instanceof Error)return h}return null}))},oneOf:function(e){return Array.isArray(e)?m((function(t,n,r,i,o){for(var s=t[n],a=0;a<e.length;a++)if(f(s,e[a]))return null;var l=JSON.stringify(e,(function(e,t){return"symbol"===w(t)?String(t):t}));return new p("Invalid "+i+" `"+o+"` of value `"+String(s)+"` supplied to `"+r+"`, expected one of "+l+".")})):(l(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),c)},oneOfType:function(e){if(!Array.isArray(e))return l("Invalid argument supplied to oneOfType, expected an instance of array."),c;for(var t=0;t<e.length;t++){var n=e[t];if("function"!==typeof n)return l("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+x(n)+" at index "+t+"."),c}return m((function(t,n,r,i,a){for(var l=[],c=0;c<e.length;c++){var u=(0,e[c])(t,n,r,i,a,o);if(null==u)return null;u.data&&s(u.data,"expectedType")&&l.push(u.data.expectedType)}return new p("Invalid "+i+" `"+a+"` supplied to `"+r+"`"+(l.length>0?", expected one of type ["+l.join(", ")+"]":"")+".")}))},shape:function(e){return m((function(t,n,r,i,s){var a=t[n],l=b(a);if("object"!==l)return new p("Invalid "+i+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if("function"!==typeof u)return v(r,i,s,c,w(u));var h=u(a,c,r,i,s+"."+c,o);if(h)return h}return null}))},exact:function(e){return m((function(t,n,r,a,l){var c=t[n],u=b(c);if("object"!==u)return new p("Invalid "+a+" `"+l+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var h=i({},t[n],e);for(var d in h){var f=e[d];if(s(e,d)&&"function"!==typeof f)return v(r,a,l,d,w(f));if(!f)return new p("Invalid "+a+" `"+l+"` key `"+d+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=f(c,d,r,a,l+"."+d,o);if(m)return m}return null}))}};function f(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function p(e,t){this.message=e,this.data=t&&"object"===typeof t?t:{},this.stack=""}function m(e){var n={},r=0;function i(i,s,a,c,u,d,f){if(c=c||h,d=d||a,f!==o){if(t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}if("undefined"!==typeof console){var g=c+":"+a;!n[g]&&r<3&&(l("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+c+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[g]=!0,r++)}}return null==s[a]?i?null===s[a]?new p("The "+u+" `"+d+"` is marked as required in `"+c+"`, but its value is `null`."):new p("The "+u+" `"+d+"` is marked as required in `"+c+"`, but its value is `undefined`."):null:e(s,a,c,u,d)}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}function g(e){return m((function(t,n,r,i,o,s){var a=t[n];return b(a)!==e?new p("Invalid "+i+" `"+o+"` of type `"+w(a)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}))}function v(e,t,n,r,i){return new p((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e[u]);if("function"===typeof t)return t}(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!y(i.value))return!1}else for(;!(i=o.next()).done;){var s=i.value;if(s&&!y(s[1]))return!1}return!0;default:return!1}}function b(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function w(e){if("undefined"===typeof e||null===e)return""+e;var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function x(e){var t=w(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,d.checkPropTypes=a,d.resetWarningCache=a.resetWarningCache,d.PropTypes=d,d}},"./node_modules/prop-types/index.js":(e,t,n)=>{var r=n("./node_modules/react-is/index.js");e.exports=n("./node_modules/prop-types/factoryWithTypeCheckers.js")(r.isElement,!0)},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./node_modules/prop-types/lib/has.js":e=>{e.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":(e,t)=>{"use strict";!function(){var e="function"===typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var f=e.type;switch(f){case c:case u:case i:case s:case o:case d:return f;default:var g=f&&f.$$typeof;switch(g){case l:case h:case m:case p:case a:return g;default:return t}}case r:return t}}}var x=c,k=u,S=l,C=a,E=n,T=h,O=i,A=m,_=p,P=r,N=s,M=o,j=d,R=!1;function I(e){return w(e)===u}t.AsyncMode=x,t.ConcurrentMode=k,t.ContextConsumer=S,t.ContextProvider=C,t.Element=E,t.ForwardRef=T,t.Fragment=O,t.Lazy=A,t.Memo=_,t.Portal=P,t.Profiler=N,t.StrictMode=M,t.Suspense=j,t.isAsyncMode=function(e){return R||(R=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),I(e)||w(e)===c},t.isConcurrentMode=I,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===a},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===p},t.isPortal=function(e){return w(e)===r},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===u||e===s||e===o||e===d||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===p||e.$$typeof===a||e.$$typeof===l||e.$$typeof===h||e.$$typeof===v||e.$$typeof===y||e.$$typeof===b||e.$$typeof===g)},t.typeOf=w}()},"./node_modules/react-is/index.js":(e,t,n)=>{"use strict";e.exports=n("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":(e,t,n)=>{"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var s=n[o];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}function i(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}n.r(t),n.d(t,{shallowEqualArrays:()=>i,shallowEqualObjects:()=>r})},"./src/Component.ts":function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n("./src/useMediaQuery.ts"));t.default=function(e){var t=e.children,n=e.device,i=e.onChange,s=r(e,["children","device","onChange"]),a=(0,o.default)(s,n,i);return"function"===typeof t?t(a):a?t:null}},"./src/Context.ts":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n("react").createContext)(void 0);t.default=r},"./src/index.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Context=t.toQuery=t.useMediaQuery=t.default=void 0;var i=r(n("./src/useMediaQuery.ts"));t.useMediaQuery=i.default;var o=r(n("./src/Component.ts"));t.default=o.default;var s=r(n("./src/toQuery.ts"));t.toQuery=s.default;var a=r(n("./src/Context.ts"));t.Context=a.default},"./src/mediaQuery.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("./node_modules/prop-types/index.js")),a=s.default.oneOfType([s.default.string,s.default.number]),l={all:s.default.bool,grid:s.default.bool,aural:s.default.bool,braille:s.default.bool,handheld:s.default.bool,print:s.default.bool,projection:s.default.bool,screen:s.default.bool,tty:s.default.bool,tv:s.default.bool,embossed:s.default.bool},c={orientation:s.default.oneOf(["portrait","landscape"]),scan:s.default.oneOf(["progressive","interlace"]),aspectRatio:s.default.string,deviceAspectRatio:s.default.string,height:a,deviceHeight:a,width:a,deviceWidth:a,color:s.default.bool,colorIndex:s.default.bool,monochrome:s.default.bool,resolution:a,type:Object.keys(l)},u=i(c,["type"]),h=r({minAspectRatio:s.default.string,maxAspectRatio:s.default.string,minDeviceAspectRatio:s.default.string,maxDeviceAspectRatio:s.default.string,minHeight:a,maxHeight:a,minDeviceHeight:a,maxDeviceHeight:a,minWidth:a,maxWidth:a,minDeviceWidth:a,maxDeviceWidth:a,minColor:s.default.number,maxColor:s.default.number,minColorIndex:s.default.number,maxColorIndex:s.default.number,minMonochrome:s.default.number,maxMonochrome:s.default.number,minResolution:a,maxResolution:a},u),d=r(r({},l),h);t.default={all:d,types:l,matchers:c,features:h}},"./src/toQuery.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("./node_modules/hyphenate-style-name/index.js")),o=r(n("./src/mediaQuery.ts"));t.default=function(e){var t=[];return Object.keys(o.default.all).forEach((function(n){var r=e[n];null!=r&&t.push(function(e,t){var n=(0,i.default)(e);return"number"===typeof t&&(t="".concat(t,"px")),!0===t?n:!1===t?"not ".concat(n):"(".concat(n,": ").concat(t,")")}(n,r))})),t.join(" and ")}},"./src/useMediaQuery.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n("react"),o=r(n("./node_modules/matchmediaquery/index.js")),s=r(n("./node_modules/hyphenate-style-name/index.js")),a=n("./node_modules/shallow-equal/dist/index.esm.js"),l=r(n("./src/toQuery.ts")),c=r(n("./src/Context.ts")),u=function(e){if(e)return Object.keys(e).reduce((function(t,n){return t[(0,s.default)(n)]=e[n],t}),{})},h=function(){var e=(0,i.useRef)(!1);return(0,i.useEffect)((function(){e.current=!0}),[]),e.current},d=function(e){var t=function(){return function(e){return e.query||(0,l.default)(e)}(e)},n=(0,i.useState)(t),r=n[0],o=n[1];return(0,i.useEffect)((function(){var e=t();r!==e&&o(e)}),[e]),r};t.default=function(e,t,n){var r=function(e){var t=(0,i.useContext)(c.default),n=function(){return u(e)||u(t)},r=(0,i.useState)(n),o=r[0],s=r[1];return(0,i.useEffect)((function(){var e=n();(0,a.shallowEqualObjects)(o,e)||s(e)}),[e,t]),o}(t),s=d(e);if(!s)throw new Error("Invalid or missing MediaQuery!");var l=function(e,t){var n=function(){return(0,o.default)(e,t||{},!!t)},r=(0,i.useState)(n),s=r[0],a=r[1],l=h();return(0,i.useEffect)((function(){if(l){var e=n();return a(e),function(){e&&e.dispose()}}}),[e,t]),s}(s,r),f=function(e){var t=(0,i.useState)(e.matches),n=t[0],r=t[1];return(0,i.useEffect)((function(){var t=function(e){r(e.matches)};return e.addListener(t),r(e.matches),function(){e.removeListener(t)}}),[e]),n}(l),p=h();return(0,i.useEffect)((function(){p&&n&&n(f)}),[f]),(0,i.useEffect)((function(){return function(){l&&l.dispose()}}),[]),f}},react:t=>{"use strict";t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r("./src/index.ts")})(),e.exports=r(n(5043))},1153:(e,t,n)=>{"use strict";var r=n(5043),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.jsx=c,t.jsxs=c},4202:(e,t,n)=>{"use strict";var r=n(2123),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function x(){}function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var S=k.prototype=new x;S.constructor=k,r(S,w.prototype),S.isPureReactComponent=!0;var C={current:null},E=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,r)&&!T.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:C.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var _=/\/+/g,P=[];function N(e,t,n,r){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function j(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case o:case s:a=!0}}if(a)return n(r,e,""===t?"."+I(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+I(i=e[l],l);a+=j(i,c,n,r)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=g&&e[g]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(i=e.next()).done;)a+=j(i=i.value,c=t+I(i,l++),n,r);else if("object"===i)throw n=""+e,Error(v(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function R(e,t,n){return null==e?0:j(e,"",t,n)}function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function D(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,r,n,(function(e){return e})):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+n)),r.push(e))}function B(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(_,"$&/")+"/"),R(e,L,t=N(t,o,r,i)),M(t)}var F={current:null};function z(){var e=F.current;if(null===e)throw Error(v(321));return e}var H={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return B(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,D,t=N(null,null,t,n)),M(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return B(e,t,null,(function(e){return e})),t},only:function(e){if(!A(e))throw Error(v(143));return e}},t.Component=w,t.Fragment=a,t.Profiler=c,t.PureComponent=k,t.StrictMode=l,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(v(267,e));var i=r({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=C.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)E.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return z().useCallback(e,t)},t.useContext=function(e,t){return z().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return z().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return z().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return z().useLayoutEffect(e,t)},t.useMemo=function(e,t){return z().useMemo(e,t)},t.useReducer=function(e,t,n){return z().useReducer(e,t,n)},t.useRef=function(e){return z().useRef(e)},t.useState=function(e){return z().useState(e)},t.version="16.14.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";var n,r,i,o,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,l=null,c=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(c,0),n}},u=Date.now();t.unstable_now=function(){return Date.now()-u},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(c,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},o=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var v=!1,y=null,b=-1,w=5,x=0;o=function(){return t.unstable_now()>=x},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,S=k.port2;k.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();x=e+w;try{y(!0,e)?S.postMessage(null):(v=!1,y=null)}catch(n){throw S.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,S.postMessage(null))},r=function(e,n){b=f((function(){e(t.unstable_now())}),n)},i=function(){p(b),b=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<O(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,l=e[a];if(void 0!==s&&0>O(s,n))void 0!==l&&0>O(l,s)?(e[r]=l,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==l&&0>O(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function O(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],_=[],P=1,N=null,M=3,j=!1,R=!1,I=!1;function D(e){for(var t=E(_);null!==t;){if(null===t.callback)T(_);else{if(!(t.startTime<=e))break;T(_),t.sortIndex=t.expirationTime,C(A,t)}t=E(_)}}function L(e){if(I=!1,D(e),!R)if(null!==E(A))R=!0,n(B);else{var t=E(_);null!==t&&r(L,t.startTime-e)}}function B(e,n){R=!1,I&&(I=!1,i()),j=!0;var s=M;try{for(D(n),N=E(A);null!==N&&(!(N.expirationTime>n)||e&&!o());){var a=N.callback;if(null!==a){N.callback=null,M=N.priorityLevel;var l=a(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?N.callback=l:N===E(A)&&T(A),D(n)}else T(A);N=E(A)}if(null!==N)var c=!0;else{var u=E(_);null!==u&&r(L,u.startTime-n),c=!1}return c}finally{N=null,M=s,j=!1}}function F(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var z=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||j||(R=!0,n(B))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return E(A)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();if("object"===typeof s&&null!==s){var l=s.delay;l="number"===typeof l&&0<l?a+l:a,s="number"===typeof s.timeout?s.timeout:F(e)}else s=F(e),l=a;return e={id:P++,callback:o,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>a?(e.sortIndex=l,C(_,e),null===E(A)&&e===E(_)&&(I?i():I=!0,r(L,l-a))):(e.sortIndex=s,C(A,e),R||j||(R=!0,n(B))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();D(e);var n=E(A);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},7324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},5023:(e,t,n)=>{e.exports=n(5498).YAML},5498:(e,t,n)=>{"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,n){return d=h()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},d.apply(null,arguments)}function f(e){var t="function"===typeof Map?new Map:void 0;return f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},f(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?p(e):t}function g(e){var t=h();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function v(e,t,n){return v="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},v(e,t,n||e)}function y(e,t){return w(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||x(e,t)||S()}function b(e){return w(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||x(e)||S()}function w(e){if(Array.isArray(e))return e}function x(e,t){if(e){if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=x(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}n.d(t,{YAML:()=>nn});var E={ANCHOR:"&",COMMENT:"#",TAG:"!",DIRECTIVES_END:"-",DOCUMENT_END:"."},T={ALIAS:"ALIAS",BLANK_LINE:"BLANK_LINE",BLOCK_FOLDED:"BLOCK_FOLDED",BLOCK_LITERAL:"BLOCK_LITERAL",COMMENT:"COMMENT",DIRECTIVE:"DIRECTIVE",DOCUMENT:"DOCUMENT",FLOW_MAP:"FLOW_MAP",FLOW_SEQ:"FLOW_SEQ",MAP:"MAP",MAP_KEY:"MAP_KEY",MAP_VALUE:"MAP_VALUE",PLAIN:"PLAIN",QUOTE_DOUBLE:"QUOTE_DOUBLE",QUOTE_SINGLE:"QUOTE_SINGLE",SEQ:"SEQ",SEQ_ITEM:"SEQ_ITEM"},O="tag:yaml.org,2002:",A={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function _(e){for(var t=[0],n=e.indexOf("\n");-1!==n;)n+=1,t.push(n),n=e.indexOf("\n",n);return t}function P(e){var t,n;return"string"===typeof e?(t=_(e),n=e):(Array.isArray(e)&&(e=e[0]),e&&e.context&&(e.lineStarts||(e.lineStarts=_(e.context.src)),t=e.lineStarts,n=e.context.src)),{lineStarts:t,src:n}}function N(e,t){if("number"!==typeof e||e<0)return null;var n=P(t),r=n.lineStarts,i=n.src;if(!r||!i||e>i.length)return null;for(var o=0;o<r.length;++o){var s=r[o];if(e<s)return{line:o,col:e-r[o-1]+1};if(e===s)return{line:o+1,col:1}}var a=r.length;return{line:a,col:e-r[a-1]+1}}function M(e,t){var n=e.start,r=e.end,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,o=function(e,t){var n=P(t),r=n.lineStarts,i=n.src;if(!r||!(e>=1)||e>r.length)return null;for(var o=r[e-1],s=r[e];s&&s>o&&"\n"===i[s-1];)--s;return i.slice(o,s)}(n.line,t);if(!o)return null;var s=n.col;if(o.length>i)if(s<=i-10)o=o.substr(0,i-1)+"\u2026";else{var a=Math.round(i/2);o.length>s+a&&(o=o.substr(0,s+a-1)+"\u2026"),s-=o.length-i,o="\u2026"+o.substr(1-i)}var l=1,c="";r&&(r.line===n.line&&s+(r.col-n.col)<=i+1?l=r.col-n.col:(l=Math.min(o.length+1,i)-s,c="\u2026"));var u=s>1?" ".repeat(s-1):"",h="^".repeat(l);return"".concat(o,"\n").concat(u).concat(h).concat(c)}var j=function(){function e(t,n){i(this,e),this.start=t,this.end=n||t}return s(e,[{key:"isEmpty",value:function(){return"number"!==typeof this.start||!this.end||this.end<=this.start}},{key:"setOrigRange",value:function(e,t){var n=this.start,r=this.end;if(0===e.length||r<=e[0])return this.origStart=n,this.origEnd=r,t;for(var i=t;i<e.length&&!(e[i]>n);)++i;this.origStart=n+i;for(var o=i;i<e.length&&!(e[i]>=r);)++i;return this.origEnd=r+i,o}}],[{key:"copy",value:function(t){return new e(t.start,t.end)}}]),e}(),R=function(){function e(t,n,r){i(this,e),Object.defineProperty(this,"context",{value:r||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=n||[],this.type=t,this.value=null}return s(e,[{key:"getPropValue",value:function(e,t,n){if(!this.context)return null;var r=this.context.src,i=this.props[e];return i&&r[i.start]===t?r.slice(i.start+(n?1:0),i.end):null}},{key:"anchor",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,E.ANCHOR,!0);if(null!=t)return t}return null}},{key:"comment",get:function(){for(var e=[],t=0;t<this.props.length;++t){var n=this.getPropValue(t,E.COMMENT,!0);null!=n&&e.push(n)}return e.length>0?e.join("\n"):null}},{key:"commentHasRequiredWhitespace",value:function(t){var n=this.context.src;if(this.header&&t===this.header.end)return!1;if(!this.valueRange)return!1;var r=this.valueRange.end;return t!==r||e.atBlank(n,r-1)}},{key:"hasComment",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]===E.COMMENT)return!0;return!1}},{key:"hasProps",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]!==E.COMMENT)return!0;return!1}},{key:"includesTrailingLines",get:function(){return!1}},{key:"jsonLike",get:function(){return-1!==[T.FLOW_MAP,T.FLOW_SEQ,T.QUOTE_DOUBLE,T.QUOTE_SINGLE].indexOf(this.type)}},{key:"rangeAsLinePos",get:function(){if(this.range&&this.context){var e=N(this.range.start,this.context.root);if(e)return{start:e,end:N(this.range.end,this.context.root)}}}},{key:"rawValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end;return this.context.src.slice(t,n)}},{key:"tag",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,E.TAG,!1);if(null!=t){if("<"===t[1])return{verbatim:t.slice(2,-1)};var n=y(t.match(/^(.*!)([^!]*)$/),3);return n[0],{handle:n[1],suffix:n[2]}}}return null}},{key:"valueRangeContainsNewline",get:function(){if(!this.valueRange||!this.context)return!1;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=t;i<n;++i)if("\n"===r[i])return!0;return!1}},{key:"parseComment",value:function(t){var n=this.context.src;if(n[t]===E.COMMENT){var r=e.endOfLine(n,t+1),i=new j(t,r);return this.props.push(i),r}return t}},{key:"setOrigRanges",value:function(e,t){return this.range&&(t=this.range.setOrigRange(e,t)),this.valueRange&&this.valueRange.setOrigRange(e,t),this.props.forEach((function(n){return n.setOrigRange(e,t)})),t}},{key:"toString",value:function(){var t=this.context.src,n=this.range,r=this.value;if(null!=r)return r;var i=t.slice(n.start,n.end);return e.addStringTerminator(t,n.end,i)}}],[{key:"addStringTerminator",value:function(t,n,r){if("\n"===r[r.length-1])return r;var i=e.endOfWhiteSpace(t,n);return i>=t.length||"\n"===t[i]?r+"\n":r}},{key:"atDocumentBoundary",value:function(e,t,n){var r=e[t];if(!r)return!0;var i=e[t-1];if(i&&"\n"!==i)return!1;if(n){if(r!==n)return!1}else if(r!==E.DIRECTIVES_END&&r!==E.DOCUMENT_END)return!1;var o=e[t+1],s=e[t+2];if(o!==r||s!==r)return!1;var a=e[t+3];return!a||"\n"===a||"\t"===a||" "===a}},{key:"endOfIdentifier",value:function(e,t){for(var n=e[t],r="<"===n,i=r?["\n","\t"," ",">"]:["\n","\t"," ","[","]","{","}",","];n&&-1===i.indexOf(n);)n=e[t+=1];return r&&">"===n&&(t+=1),t}},{key:"endOfIndent",value:function(e,t){for(var n=e[t];" "===n;)n=e[t+=1];return t}},{key:"endOfLine",value:function(e,t){for(var n=e[t];n&&"\n"!==n;)n=e[t+=1];return t}},{key:"endOfWhiteSpace",value:function(e,t){for(var n=e[t];"\t"===n||" "===n;)n=e[t+=1];return t}},{key:"startOfLine",value:function(e,t){var n=e[t-1];if("\n"===n)return t;for(;n&&"\n"!==n;)n=e[t-=1];return t+1}},{key:"endOfBlockIndent",value:function(t,n,r){var i=e.endOfIndent(t,r);if(i>r+n)return i;var o=e.endOfWhiteSpace(t,i),s=t[o];return s&&"\n"!==s?null:o}},{key:"atBlank",value:function(e,t,n){var r=e[t];return"\n"===r||"\t"===r||" "===r||n&&!r}},{key:"nextNodeIsIndented",value:function(e,t,n){return!(!e||t<0)&&(t>0||n&&"-"===e)}},{key:"normalizeOffset",value:function(t,n){var r=t[n];return r?"\n"!==r&&"\n"===t[n-1]?n-1:e.endOfWhiteSpace(t,n):n}},{key:"foldNewline",value:function(t,n,r){for(var i=0,o=!1,s="",a=t[n+1];" "===a||"\t"===a||"\n"===a;){switch(a){case"\n":i=0,n+=1,s+="\n";break;case"\t":i<=r&&(o=!0),n=e.endOfWhiteSpace(t,n+2)-1;break;case" ":i+=1,n+=1}a=t[n+1]}return s||(s=" "),a&&i<=r&&(o=!0),{fold:s,offset:n,error:o}}}]),e}(),I=function(e){l(n,e);var t=g(n);function n(e,r,o){var s;if(i(this,n),!o||!(r instanceof R))throw new Error("Invalid arguments for new ".concat(e));return(s=t.call(this)).name=e,s.message=o,s.source=r,s}return s(n,[{key:"makePretty",value:function(){if(this.source){this.nodeType=this.source.type;var e=this.source.context&&this.source.context.root;if("number"===typeof this.offset){this.range=new j(this.offset,this.offset+1);var t=e&&N(this.offset,e);if(t){var n={line:t.line,col:t.col+1};this.linePos={start:t,end:n}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){var r=this.linePos.start,i=r.line,o=r.col;this.message+=" at line ".concat(i,", column ").concat(o);var s=e&&M(this.linePos,e);s&&(this.message+=":\n\n".concat(s,"\n"))}delete this.source}}}]),n}(f(Error)),D=function(e){l(n,e);var t=g(n);function n(e,r){return i(this,n),t.call(this,"YAMLReferenceError",e,r)}return n}(I),L=function(e){l(n,e);var t=g(n);function n(e,r){return i(this,n),t.call(this,"YAMLSemanticError",e,r)}return n}(I),B=function(e){l(n,e);var t=g(n);function n(e,r){return i(this,n),t.call(this,"YAMLSyntaxError",e,r)}return n}(I),F=function(e){l(n,e);var t=g(n);function n(e,r){return i(this,n),t.call(this,"YAMLWarning",e,r)}return n}(I),z=function(e){l(n,e);var t=g(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=r[n-1];t<n&&("\n"===i||"\t"===i||" "===i);)i=r[--n-1];for(var o="",s=t;s<n;++s){var a=r[s];if("\n"===a){var l=R.foldNewline(r,s,-1);o+=l.fold,s=l.offset}else if(" "===a||"\t"===a){for(var c=s,u=r[s+1];s<n&&(" "===u||"\t"===u);)u=r[(s+=1)+1];"\n"!==u&&(o+=s>c?r.slice(c,s+1):a)}else o+=a}var h=r[t];switch(h){case"\t":return{errors:[new L(this,"Plain value cannot start with a tab character")],str:o};case"@":case"`":var d="Plain value cannot start with reserved character ".concat(h);return{errors:[new L(this,d)],str:o};default:return o}}},{key:"parseBlockValue",value:function(e){for(var t=this.context,r=t.indent,i=t.inFlow,o=t.src,s=e,a=e,l=o[s];"\n"===l&&!R.atDocumentBoundary(o,s+1);l=o[s]){var c=R.endOfBlockIndent(o,r,s+1);if(null===c||"#"===o[c])break;s="\n"===o[c]?c:a=n.endOfLine(o,c,i)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=a,a}},{key:"parse",value:function(e,t){this.context=e;var r=e.inFlow,i=e.src,o=t,s=i[o];return s&&"#"!==s&&"\n"!==s&&(o=n.endOfLine(i,t,r)),this.valueRange=new j(t,o),o=R.endOfWhiteSpace(i,o),o=this.parseComment(o),this.hasComment&&!this.valueRange.isEmpty()||(o=this.parseBlockValue(o)),o}}],[{key:"endOfLine",value:function(e,t,n){for(var r=e[t],i=t;r&&"\n"!==r&&(!n||"["!==r&&"]"!==r&&"{"!==r&&"}"!==r&&","!==r);){var o=e[i+1];if(":"===r&&(!o||"\n"===o||"\t"===o||" "===o||n&&","===o))break;if((" "===r||"\t"===r)&&"#"===o)break;i+=1,r=o}return i}}]),n}(R),H=function(e){l(n,e);var t=g(n);function n(){return i(this,n),t.call(this,T.BLANK_LINE)}return s(n,[{key:"includesTrailingLines",get:function(){return!0}},{key:"parse",value:function(e,t){return this.context=e,this.range=new j(t,t+1),t+1}}]),n}(R),$=function(e){l(n,e);var t=g(n);function n(e,r){var o;return i(this,n),(o=t.call(this,e,r)).node=null,o}return s(n,[{key:"includesTrailingLines",get:function(){return!!this.node&&this.node.includesTrailingLines}},{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.atLineStart,o=e.lineStart;i||this.type!==T.SEQ_ITEM||(this.error=new L(this,"Sequence items must not have preceding content on the same line"));for(var s=i?t-o:e.indent,a=R.endOfWhiteSpace(r,t+1),l=r[a],c="#"===l,u=[],h=null;"\n"===l||"#"===l;){if("#"===l){var d=R.endOfLine(r,a+1);u.push(new j(a,d)),a=d}else{i=!0,o=a+1,"\n"===r[R.endOfWhiteSpace(r,o)]&&0===u.length&&(o=(h=new H).parse({src:r},o)),a=R.endOfIndent(r,o)}l=r[a]}if(R.nextNodeIsIndented(l,a-(o+s),this.type!==T.SEQ_ITEM)?this.node=n({atLineStart:i,inCollection:!1,indent:s,lineStart:o,parent:this},a):l&&o>t+1&&(a=o-1),this.node){if(h){var f=e.parent.items||e.parent.contents;f&&f.push(h)}u.length&&Array.prototype.push.apply(this.props,u),a=this.node.range.end}else if(c){var p=u[0];this.props.push(p),a=p.end}else a=R.endOfLine(r,t+1);var m=this.node?this.node.valueRange.end:a;return this.valueRange=new j(t,m),a}},{key:"setOrigRanges",value:function(e,t){return t=v(c(n.prototype),"setOrigRanges",this).call(this,e,t),this.node?this.node.setOrigRanges(e,t):t}},{key:"toString",value:function(){var e=this.context.src,t=this.node,n=this.range,r=this.value;if(null!=r)return r;var i=t?e.slice(n.start,t.range.start)+String(t):e.slice(n.start,n.end);return R.addStringTerminator(e,n.end,i)}}]),n}(R),U=function(e){l(n,e);var t=g(n);function n(){return i(this,n),t.call(this,T.COMMENT)}return s(n,[{key:"parse",value:function(e,t){this.context=e;var n=this.parseComment(t);return this.range=new j(t,n),n}}]),n}(R);function W(e){for(var t=e;t instanceof $;)t=t.node;if(!(t instanceof V))return null;for(var n=t.items.length,r=-1,i=n-1;i>=0;--i){var o=t.items[i];if(o.type===T.COMMENT){var s=o.context,a=s.indent,l=s.lineStart;if(a>0&&o.range.start>=l+a)break;r=i}else{if(o.type!==T.BLANK_LINE)break;r=i}}if(-1===r)return null;for(var c=t.items.splice(r,n-r),u=c[0].range.start;t.range.end=u,t.valueRange&&t.valueRange.end>u&&(t.valueRange.end=u),t!==e;)t=t.context.parent;return c}var V=function(e){l(n,e);var t=g(n);function n(e){var r;i(this,n),r=t.call(this,e.type===T.SEQ_ITEM?T.SEQ:T.MAP);for(var o=e.props.length-1;o>=0;--o)if(e.props[o].start<e.context.lineStart){r.props=e.props.slice(0,o+1),e.props=e.props.slice(o+1);var s=e.props[0]||e.valueRange;e.range.start=s.start;break}r.items=[e];var a=W(e);return a&&Array.prototype.push.apply(r.items,a),r}return s(n,[{key:"includesTrailingLines",get:function(){return this.items.length>0}},{key:"parse",value:function(e,t){this.context=e;var r=e.parseNode,i=e.src,o=R.startOfLine(i,t),s=this.items[0];s.context.parent=this,this.valueRange=j.copy(s.valueRange);for(var a=s.range.start-s.context.lineStart,l=t,c=i[l=R.normalizeOffset(i,l)],u=R.endOfWhiteSpace(i,o)===l,h=!1;c;){for(;"\n"===c||"#"===c;){if(u&&"\n"===c&&!h){var d=new H;if(l=d.parse({src:i},l),this.valueRange.end=l,l>=i.length){c=null;break}this.items.push(d),l-=1}else if("#"===c){if(l<o+a&&!n.nextContentHasIndent(i,l,a))return l;var f=new U;if(l=f.parse({indent:a,lineStart:o,src:i},l),this.items.push(f),this.valueRange.end=l,l>=i.length){c=null;break}}if(o=l+1,l=R.endOfIndent(i,o),R.atBlank(i,l)){var p=R.endOfWhiteSpace(i,l),m=i[p];m&&"\n"!==m&&"#"!==m||(l=p)}c=i[l],u=!0}if(!c)break;if(l!==o+a&&(u||":"!==c)){if(l<o+a){o>t&&(l=o);break}if(!this.error){this.error=new B(this,"All collection items must start at the same column")}}if(s.type===T.SEQ_ITEM){if("-"!==c){o>t&&(l=o);break}}else if("-"===c&&!this.error){var g=i[l+1];if(!g||"\n"===g||"\t"===g||" "===g){this.error=new B(this,"A collection cannot be both a mapping and a sequence")}}var v=r({atLineStart:u,inCollection:!0,indent:a,lineStart:o,parent:this},l);if(!v)return l;if(this.items.push(v),this.valueRange.end=v.valueRange.end,c=i[l=R.normalizeOffset(i,v.range.end)],u=!1,h=v.includesTrailingLines,c){for(var y=l-1,b=i[y];" "===b||"\t"===b;)b=i[--y];"\n"===b&&(o=y+1,u=!0)}var w=W(v);w&&Array.prototype.push.apply(this.items,w)}return l}},{key:"setOrigRanges",value:function(e,t){return t=v(c(n.prototype),"setOrigRanges",this).call(this,e,t),this.items.forEach((function(n){t=n.setOrigRanges(e,t)})),t}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;for(var i=e.slice(n.start,t[0].range.start)+String(t[0]),o=1;o<t.length;++o){var s=t[o],a=s.context,l=a.atLineStart,c=a.indent;if(l)for(var u=0;u<c;++u)i+=" ";i+=String(s)}return R.addStringTerminator(e,n.end,i)}}],[{key:"nextContentHasIndent",value:function(e,t,r){var i=R.endOfLine(e,t)+1,o=e[t=R.endOfWhiteSpace(e,i)];return!!o&&(t>=i+r||("#"===o||"\n"===o)&&n.nextContentHasIndent(e,t,r))}}]),n}(R),q=function(e){l(n,e);var t=g(n);function n(){var e;return i(this,n),(e=t.call(this,T.DIRECTIVE)).name=null,e}return s(n,[{key:"parameters",get:function(){var e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}},{key:"parseName",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"\t"!==r&&" "!==r;)r=t[n+=1];return this.name=t.slice(e,n),n}},{key:"parseParameters",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"#"!==r;)r=t[n+=1];return this.valueRange=new j(e,n),n}},{key:"parse",value:function(e,t){this.context=e;var n=this.parseName(t+1);return n=this.parseParameters(n),n=this.parseComment(n),this.range=new j(t,n),n}}]),n}(R),K=function(e){l(n,e);var t=g(n);function n(){var e;return i(this,n),(e=t.call(this,T.DOCUMENT)).directives=null,e.contents=null,e.directivesEndMarker=null,e.documentEndMarker=null,e}return s(n,[{key:"parseDirectives",value:function(e){var t=this.context.src;this.directives=[];for(var r=!0,i=!1,o=e;!R.atDocumentBoundary(t,o,E.DIRECTIVES_END);)switch(t[o=n.startCommentOrEndBlankLine(t,o)]){case"\n":if(r){var s=new H;(o=s.parse({src:t},o))<t.length&&this.directives.push(s)}else o+=1,r=!0;break;case"#":var a=new U;o=a.parse({src:t},o),this.directives.push(a),r=!1;break;case"%":var l=new q;o=l.parse({parent:this,src:t},o),this.directives.push(l),i=!0,r=!1;break;default:return i?this.error=new L(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),o}return t[o]?(this.directivesEndMarker=new j(o,o+3),o+3):(i?this.error=new L(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),o)}},{key:"parseContents",value:function(e){var t=this.context,r=t.parseNode,i=t.src;this.contents||(this.contents=[]);for(var o=e;"-"===i[o-1];)o-=1;var s=R.endOfWhiteSpace(i,e),a=o===e;for(this.valueRange=new j(s);!R.atDocumentBoundary(i,s,E.DOCUMENT_END);){switch(i[s]){case"\n":if(a){var l=new H;(s=l.parse({src:i},s))<i.length&&this.contents.push(l)}else s+=1,a=!0;o=s;break;case"#":var c=new U;s=c.parse({src:i},s),this.contents.push(c),a=!1;break;default:var u=R.endOfIndent(i,s),h=r({atLineStart:a,indent:-1,inFlow:!1,inCollection:!1,lineStart:o,parent:this},u);if(!h)return this.valueRange.end=u;this.contents.push(h),s=h.range.end,a=!1;var d=W(h);d&&Array.prototype.push.apply(this.contents,d)}s=n.startCommentOrEndBlankLine(i,s)}if(this.valueRange.end=s,i[s]&&(this.documentEndMarker=new j(s,s+3),i[s+=3])){if("#"===i[s=R.endOfWhiteSpace(i,s)]){var f=new U;s=f.parse({src:i},s),this.contents.push(f)}switch(i[s]){case"\n":s+=1;break;case void 0:break;default:this.error=new B(this,"Document end marker line cannot have a non-comment suffix")}}return s}},{key:"parse",value:function(e,t){e.root=this,this.context=e;var n=65279===e.src.charCodeAt(t)?t+1:t;return n=this.parseDirectives(n),n=this.parseContents(n)}},{key:"setOrigRanges",value:function(e,t){return t=v(c(n.prototype),"setOrigRanges",this).call(this,e,t),this.directives.forEach((function(n){t=n.setOrigRanges(e,t)})),this.directivesEndMarker&&(t=this.directivesEndMarker.setOrigRange(e,t)),this.contents.forEach((function(n){t=n.setOrigRanges(e,t)})),this.documentEndMarker&&(t=this.documentEndMarker.setOrigRange(e,t)),t}},{key:"toString",value:function(){var e=this.contents,t=this.directives,n=this.value;if(null!=n)return n;var r=t.join("");return e.length>0&&((t.length>0||e[0].type===T.COMMENT)&&(r+="---\n"),r+=e.join("")),"\n"!==r[r.length-1]&&(r+="\n"),r}}],[{key:"startCommentOrEndBlankLine",value:function(e,t){var n=R.endOfWhiteSpace(e,t),r=e[n];return"#"===r||"\n"===r?n:t}}]),n}(R),Q=function(e){l(n,e);var t=g(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=R.endOfIdentifier(n,t+1);return this.valueRange=new j(t+1,r),r=R.endOfWhiteSpace(n,r),r=this.parseComment(r)}}]),n}(R),G="CLIP",J="KEEP",Y="STRIP",X=function(e){l(n,e);var t=g(n);function n(e,r){var o;return i(this,n),(o=t.call(this,e,r)).blockIndent=null,o.chomping=G,o.header=null,o}return s(n,[{key:"includesTrailingLines",get:function(){return this.chomping===J}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end,r=this.context,i=r.indent,o=r.src;if(this.valueRange.isEmpty())return"";for(var s=null,a=o[n-1];"\n"===a||"\t"===a||" "===a;){if((n-=1)<=t){if(this.chomping===J)break;return""}"\n"===a&&(s=n),a=o[n-1]}var l=n+1;s&&(this.chomping===J?(l=s,n=this.valueRange.end):n=s);for(var c=i+this.blockIndent,u=this.type===T.BLOCK_FOLDED,h=!0,d="",f="",p=!1,m=t;m<n;++m){for(var g=0;g<c&&" "===o[m];++g)m+=1;var v=o[m];if("\n"===v)"\n"===f?d+="\n":f="\n";else{var y=R.endOfLine(o,m),b=o.slice(m,y);m=y,u&&(" "===v||"\t"===v)&&m<l?(" "===f?f="\n":p||h||"\n"!==f||(f="\n\n"),d+=f+b,f=y<n&&o[y]||"",p=!0):(d+=f+b,f=u&&m<l?" ":"\n",p=!1),h&&""!==b&&(h=!1)}}return this.chomping===Y?d:d+"\n"}},{key:"parseBlockHeader",value:function(e){for(var t=this.context.src,n=e+1,r="";;){var i=t[n];switch(i){case"-":this.chomping=Y;break;case"+":this.chomping=J;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r+=i;break;default:return this.blockIndent=Number(r)||null,this.header=new j(e,n),n}n+=1}}},{key:"parseBlockValue",value:function(e){for(var t=this.context,n=t.indent,r=t.src,i=!!this.blockIndent,o=e,s=e,a=1,l=r[o];"\n"===l&&(o+=1,!R.atDocumentBoundary(r,o));l=r[o]){var c=R.endOfBlockIndent(r,n,o);if(null===c)break;var u=r[c],h=c-(o+n);if(this.blockIndent){if(u&&"\n"!==u&&h<this.blockIndent){if("#"===r[c])break;if(!this.error){var d="Block scalars must not be less indented than their ".concat(i?"explicit indentation indicator":"first line");this.error=new L(this,d)}}}else if("\n"!==r[c]){if(h<a){this.error=new L(this,"Block scalars with more-indented leading empty lines must use an explicit indentation indicator")}this.blockIndent=h}else h>a&&(a=h);o="\n"===r[c]?c:s=R.endOfLine(r,c)}return this.chomping!==J&&(o=r[s]?s+1:s),this.valueRange=new j(e+1,o),o}},{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=this.parseBlockHeader(t);return r=R.endOfWhiteSpace(n,r),r=this.parseComment(r),r=this.parseBlockValue(r)}},{key:"setOrigRanges",value:function(e,t){return t=v(c(n.prototype),"setOrigRanges",this).call(this,e,t),this.header?this.header.setOrigRange(e,t):t}}]),n}(R),Z=function(e){l(n,e);var t=g(n);function n(e,r){var o;return i(this,n),(o=t.call(this,e,r)).items=null,o}return s(n,[{key:"prevNodeIsJsonLike",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.items[e-1];return!!t&&(t.jsonLike||t.type===T.COMMENT&&this.prevNodeIsJsonLike(e-1))}},{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.indent,o=e.lineStart,s=r[t];this.items=[{char:s,offset:t}];var a=R.endOfWhiteSpace(r,t+1);for(s=r[a];s&&"]"!==s&&"}"!==s;){switch(s){case"\n":if(o=a+1,"\n"===r[R.endOfWhiteSpace(r,o)]){var l=new H;o=l.parse({src:r},o),this.items.push(l)}if((a=R.endOfIndent(r,o))<=o+i&&(s=r[a],a<o+i||"]"!==s&&"}"!==s)){this.error=new L(this,"Insufficient indentation in flow collection")}break;case",":this.items.push({char:s,offset:a}),a+=1;break;case"#":var c=new U;a=c.parse({src:r},a),this.items.push(c);break;case"?":case":":var u=r[a+1];if("\n"===u||"\t"===u||" "===u||","===u||":"===s&&this.prevNodeIsJsonLike()){this.items.push({char:s,offset:a}),a+=1;break}default:var h=n({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:o,parent:this},a);if(!h)return this.valueRange=new j(t,a),a;this.items.push(h),a=R.normalizeOffset(r,h.range.end)}s=r[a=R.endOfWhiteSpace(r,a)]}return this.valueRange=new j(t,a+1),s&&(this.items.push({char:s,offset:a}),a=R.endOfWhiteSpace(r,a+1),a=this.parseComment(a)),a}},{key:"setOrigRanges",value:function(e,t){return t=v(c(n.prototype),"setOrigRanges",this).call(this,e,t),this.items.forEach((function(n){if(n instanceof R)t=n.setOrigRanges(e,t);else if(0===e.length)n.origOffset=n.offset;else{for(var r=t;r<e.length&&!(e[r]>n.offset);)++r;n.origOffset=n.offset+r,t=r}})),t}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;var i=t.filter((function(e){return e instanceof R})),o="",s=n.start;return i.forEach((function(t){var n=e.slice(s,t.range.start);s=t.range.end,"\n"===(o+=n+String(t))[o.length-1]&&"\n"!==e[s-1]&&"\n"===e[s]&&(s+=1)})),o+=e.slice(s,n.end),R.addStringTerminator(e,n.end,o)}}]),n}(R),ee=function(e){l(n,e);var t=g(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,o=i.indent,s=i.src;'"'!==s[r-1]&&e.push(new B(this,'Missing closing "quote'));for(var a="",l=n+1;l<r-1;++l){var c=s[l];if("\n"===c){R.atDocumentBoundary(s,l+1)&&e.push(new L(this,"Document boundary indicators are not allowed within string values"));var u=R.foldNewline(s,l,o);a+=u.fold,l=u.offset,u.error&&e.push(new L(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if("\\"===c)switch(s[l+=1]){case"0":a+="\0";break;case"a":a+="\x07";break;case"b":a+="\b";break;case"e":a+="\x1b";break;case"f":a+="\f";break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":case"\t":a+="\t";break;case"v":a+="\v";break;case"N":a+="\x85";break;case"_":a+="\xa0";break;case"L":a+="\u2028";break;case"P":a+="\u2029";break;case" ":a+=" ";break;case'"':a+='"';break;case"/":a+="/";break;case"\\":a+="\\";break;case"x":a+=this.parseCharCode(l+1,2,e),l+=2;break;case"u":a+=this.parseCharCode(l+1,4,e),l+=4;break;case"U":a+=this.parseCharCode(l+1,8,e),l+=8;break;case"\n":for(;" "===s[l+1]||"\t"===s[l+1];)l+=1;break;default:e.push(new B(this,"Invalid escape sequence ".concat(s.substr(l-1,2)))),a+="\\"+s[l]}else if(" "===c||"\t"===c){for(var h=l,d=s[l+1];" "===d||"\t"===d;)d=s[(l+=1)+1];"\n"!==d&&(a+=l>h?s.slice(h,l+1):c)}else a+=c}return e.length>0?{errors:e,str:a}:a}},{key:"parseCharCode",value:function(e,t,n){var r=this.context.src,i=r.substr(e,t),o=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;return isNaN(o)?(n.push(new B(this,"Invalid escape sequence ".concat(r.substr(e-2,t+2)))),r.substr(e-2,t+2)):String.fromCodePoint(o)}},{key:"parse",value:function(e,t){this.context=e;var r=e.src,i=n.endOfQuote(r,t+1);return this.valueRange=new j(t,i),i=R.endOfWhiteSpace(r,i),i=this.parseComment(i)}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n&&'"'!==n;)n=e[t+="\\"===n?2:1];return t+1}}]),n}(R),te=function(e){l(n,e);var t=g(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,o=i.indent,s=i.src;"'"!==s[r-1]&&e.push(new B(this,"Missing closing 'quote"));for(var a="",l=n+1;l<r-1;++l){var c=s[l];if("\n"===c){R.atDocumentBoundary(s,l+1)&&e.push(new L(this,"Document boundary indicators are not allowed within string values"));var u=R.foldNewline(s,l,o);a+=u.fold,l=u.offset,u.error&&e.push(new L(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if("'"===c)a+=c,"'"!==s[l+=1]&&e.push(new B(this,"Unescaped single quote? This should not happen."));else if(" "===c||"\t"===c){for(var h=l,d=s[l+1];" "===d||"\t"===d;)d=s[(l+=1)+1];"\n"!==d&&(a+=l>h?s.slice(h,l+1):c)}else a+=c}return e.length>0?{errors:e,str:a}:a}},{key:"parse",value:function(e,t){this.context=e;var r=e.src,i=n.endOfQuote(r,t+1);return this.valueRange=new j(t,i),i=R.endOfWhiteSpace(r,i),i=this.parseComment(i)}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n;)if("'"===n){if("'"!==e[t+1])break;n=e[t+=2]}else n=e[t+=1];return t+1}}]),n}(R);var ne=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.atLineStart,s=r.inCollection,l=r.inFlow,c=r.indent,u=r.lineStart,h=r.parent;i(this,e),a(this,"parseNode",(function(n,r){if(R.atDocumentBoundary(t.src,r))return null;var i=new e(t,n),o=i.parseProps(r),s=o.props,a=o.type,l=o.valueStart,c=function(e,t){switch(e){case T.ALIAS:return new Q(e,t);case T.BLOCK_FOLDED:case T.BLOCK_LITERAL:return new X(e,t);case T.FLOW_MAP:case T.FLOW_SEQ:return new Z(e,t);case T.MAP_KEY:case T.MAP_VALUE:case T.SEQ_ITEM:return new $(e,t);case T.COMMENT:case T.PLAIN:return new z(e,t);case T.QUOTE_DOUBLE:return new ee(e,t);case T.QUOTE_SINGLE:return new te(e,t);default:return null}}(a,s),u=c.parse(i,l);if(c.range=new j(r,u),u<=r&&(c.error=new Error("Node#parse consumed no characters"),c.error.parseEnd=u,c.error.source=c,c.range.end=r+1),i.nodeStartsCollection(c)){c.error||i.atLineStart||i.parent.type!==T.DOCUMENT||(c.error=new B(c,"Block collection must not have preceding content here (e.g. directives-end indicator)"));var h=new V(c);return u=h.parse(new e(i),u),h.range=new j(r,u),h}return c})),this.atLineStart=null!=o?o:n.atLineStart||!1,this.inCollection=null!=s?s:n.inCollection||!1,this.inFlow=null!=l?l:n.inFlow||!1,this.indent=null!=c?c:n.indent,this.lineStart=null!=u?u:n.lineStart,this.parent=null!=h?h:n.parent||{},this.root=n.root,this.src=n.src}return s(e,[{key:"nodeStartsCollection",value:function(e){var t=this.inCollection,n=this.inFlow,r=this.src;if(t||n)return!1;if(e instanceof $)return!0;var i=e.range.end;return"\n"!==r[i]&&"\n"!==r[i-1]&&":"===r[i=R.endOfWhiteSpace(r,i)]}},{key:"parseProps",value:function(t){for(var n=this.inFlow,r=this.parent,i=this.src,o=[],s=!1,a=i[t=this.atLineStart?R.endOfIndent(i,t):R.endOfWhiteSpace(i,t)];a===E.ANCHOR||a===E.COMMENT||a===E.TAG||"\n"===a;){if("\n"===a){var l=t,c=void 0;do{c=l+1,l=R.endOfIndent(i,c)}while("\n"===i[l]);var u=l-(c+this.indent),h=r.type===T.SEQ_ITEM&&r.context.atLineStart;if("#"!==i[l]&&!R.nextNodeIsIndented(i[l],u,!h))break;this.atLineStart=!0,this.lineStart=c,s=!1,t=l}else if(a===E.COMMENT){var d=R.endOfLine(i,t+1);o.push(new j(t,d)),t=d}else{var f=R.endOfIdentifier(i,t+1);a===E.TAG&&","===i[f]&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(t+1,f+13))&&(f=R.endOfIdentifier(i,f+5)),o.push(new j(t,f)),s=!0,t=R.endOfWhiteSpace(i,f)}a=i[t]}return s&&":"===a&&R.atBlank(i,t+1,!0)&&(t-=1),{props:o,type:e.parseType(i,t,n),valueStart:t}}}],[{key:"parseType",value:function(e,t,n){switch(e[t]){case"*":return T.ALIAS;case">":return T.BLOCK_FOLDED;case"|":return T.BLOCK_LITERAL;case"{":return T.FLOW_MAP;case"[":return T.FLOW_SEQ;case"?":return!n&&R.atBlank(e,t+1,!0)?T.MAP_KEY:T.PLAIN;case":":return!n&&R.atBlank(e,t+1,!0)?T.MAP_VALUE:T.PLAIN;case"-":return!n&&R.atBlank(e,t+1,!0)?T.SEQ_ITEM:T.PLAIN;case'"':return T.QUOTE_DOUBLE;case"'":return T.QUOTE_SINGLE;default:return T.PLAIN}}}]),e}();function re(e){var t=[];-1!==e.indexOf("\r")&&(e=e.replace(/\r\n?/g,(function(e,n){return e.length>1&&t.push(n),"\n"})));var n=[],r=0;do{var i=new K,o=new ne({src:e});r=i.parse(o,r),n.push(i)}while(r<e.length);return n.setOrigRanges=function(){if(0===t.length)return!1;for(var e=1;e<t.length;++e)t[e]-=e;for(var r=0,i=0;i<n.length;++i)r=n[i].setOrigRanges(t,r);return t.splice(0,t.length),!0},n.toString=function(){return n.join("...\n")},n}function ie(e,t,n){return n?-1===n.indexOf("\n")?"".concat(e," #").concat(n):"".concat(e,"\n")+n.replace(/^/gm,"".concat(t||"","#")):e}var oe=function e(){i(this,e)};function se(e,t,n){if(Array.isArray(e))return e.map((function(e,t){return se(e,String(t),n)}));if(e&&"function"===typeof e.toJSON){var r=n&&n.anchors&&n.anchors.get(e);r&&(n.onCreate=function(e){r.res=e,delete n.onCreate});var i=e.toJSON(t,n);return r&&n.onCreate&&n.onCreate(i),i}return n&&n.keep||"bigint"!==typeof e?e:Number(e)}var ae=function(e){l(n,e);var t=g(n);function n(e){var r;return i(this,n),(r=t.call(this)).value=e,r}return s(n,[{key:"toJSON",value:function(e,t){return t&&t.keep?this.value:se(this.value,e,t)}},{key:"toString",value:function(){return String(this.value)}}]),n}(oe);function le(e,t,n){for(var r=n,i=t.length-1;i>=0;--i){var o=t[i];if(Number.isInteger(o)&&o>=0){var s=[];s[o]=r,r=s}else{var a={};Object.defineProperty(a,o,{value:r,writable:!0,enumerable:!0,configurable:!0}),r=a}}return e.createNode(r,!1)}var ce=function(e){return null==e||"object"===r(e)&&e[Symbol.iterator]().next().done},ue=function(e){l(n,e);var t=g(n);function n(e){var r;return i(this,n),a(p(r=t.call(this)),"items",[]),r.schema=e,r}return s(n,[{key:"addIn",value:function(e,t){if(ce(e))this.add(t);else{var r=b(e),i=r[0],o=r.slice(1),s=this.get(i,!0);if(s instanceof n)s.addIn(o,t);else{if(void 0!==s||!this.schema)throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(o));this.set(i,le(this.schema,o,t))}}}},{key:"deleteIn",value:function(e){var t=b(e),r=t[0],i=t.slice(1);if(0===i.length)return this.delete(r);var o=this.get(r,!0);if(o instanceof n)return o.deleteIn(i);throw new Error("Expected YAML collection at ".concat(r,". Remaining path: ").concat(i))}},{key:"getIn",value:function(e,t){var r=b(e),i=r[0],o=r.slice(1),s=this.get(i,!0);return 0===o.length?!t&&s instanceof ae?s.value:s:s instanceof n?s.getIn(o,t):void 0}},{key:"hasAllNullValues",value:function(){return this.items.every((function(e){if(!e||"PAIR"!==e.type)return!1;var t=e.value;return null==t||t instanceof ae&&null==t.value&&!t.commentBefore&&!t.comment&&!t.tag}))}},{key:"hasIn",value:function(e){var t=b(e),r=t[0],i=t.slice(1);if(0===i.length)return this.has(r);var o=this.get(r,!0);return o instanceof n&&o.hasIn(i)}},{key:"setIn",value:function(e,t){var r=b(e),i=r[0],o=r.slice(1);if(0===o.length)this.set(i,t);else{var s=this.get(i,!0);if(s instanceof n)s.setIn(o,t);else{if(void 0!==s||!this.schema)throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(o));this.set(i,le(this.schema,o,t))}}}},{key:"toJSON",value:function(){return null}},{key:"toString",value:function(e,t,r,i){var o=this,s=t.blockItem,a=t.flowChars,l=t.isMap,c=t.itemIndent,u=e,h=u.indent,d=u.indentStep,f=u.stringify,p=this.type===T.FLOW_MAP||this.type===T.FLOW_SEQ||e.inFlow;p&&(c+=d);var m=l&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:m,indent:c,inFlow:p,type:null});var g,v=!1,y=!1,b=this.items.reduce((function(t,n,r){var i;n&&(!v&&n.spaceBefore&&t.push({type:"comment",str:""}),n.commentBefore&&n.commentBefore.match(/^.*$/gm).forEach((function(e){t.push({type:"comment",str:"#".concat(e)})})),n.comment&&(i=n.comment),p&&(!v&&n.spaceBefore||n.commentBefore||n.comment||n.key&&(n.key.commentBefore||n.key.comment)||n.value&&(n.value.commentBefore||n.value.comment))&&(y=!0)),v=!1;var s=f(n,e,(function(){return i=null}),(function(){return v=!0}));return p&&!y&&s.includes("\n")&&(y=!0),p&&r<o.items.length-1&&(s+=","),s=ie(s,c,i),v&&(i||p)&&(v=!1),t.push({type:"item",str:s}),t}),[]);if(0===b.length)g=a.start+a.end;else if(p){var w=a.start,x=a.end,k=b.map((function(e){return e.str}));if(y||k.reduce((function(e,t){return e+t.length+2}),2)>n.maxFlowStringSingleLineLength){g=w;var S,E=C(k);try{for(E.s();!(S=E.n()).done;){var O=S.value;g+=O?"\n".concat(d).concat(h).concat(O):"\n"}}catch(M){E.e(M)}finally{E.f()}g+="\n".concat(h).concat(x)}else g="".concat(w," ").concat(k.join(" ")," ").concat(x)}else{var A=b.map(s);g=A.shift();var _,P=C(A);try{for(P.s();!(_=P.n()).done;){var N=_.value;g+=N?"\n".concat(h).concat(N):"\n"}}catch(M){P.e(M)}finally{P.f()}}return this.comment?(g+="\n"+this.comment.replace(/^/gm,"".concat(h,"#")),r&&r()):v&&i&&i(),g}}]),n}(oe);function he(e){var t=e instanceof ae?e.value:e;return t&&"string"===typeof t&&(t=Number(t)),Number.isInteger(t)&&t>=0?t:null}a(ue,"maxFlowStringSingleLineLength",60);var de=function(e){l(n,e);var t=g(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"add",value:function(e){this.items.push(e)}},{key:"delete",value:function(e){var t=he(e);return"number"===typeof t&&this.items.splice(t,1).length>0}},{key:"get",value:function(e,t){var n=he(e);if("number"===typeof n){var r=this.items[n];return!t&&r instanceof ae?r.value:r}}},{key:"has",value:function(e){var t=he(e);return"number"===typeof t&&t<this.items.length}},{key:"set",value:function(e,t){var n=he(e);if("number"!==typeof n)throw new Error("Expected a valid index, not ".concat(e,"."));this.items[n]=t}},{key:"toJSON",value:function(e,t){var n=[];t&&t.onCreate&&t.onCreate(n);var r,i=0,o=C(this.items);try{for(o.s();!(r=o.n()).done;){var s=r.value;n.push(se(s,String(i++),t))}}catch(a){o.e(a)}finally{o.f()}return n}},{key:"toString",value:function(e,t,r){return e?v(c(n.prototype),"toString",this).call(this,e,{blockItem:function(e){return"comment"===e.type?e.str:"- ".concat(e.str)},flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},t,r):JSON.stringify(this)}}]),n}(ue),fe=function(e){l(n,e);var t=g(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(this,n),(r=t.call(this)).key=e,r.value=o,r.type=n.Type.PAIR,r}return s(n,[{key:"commentBefore",get:function(){return this.key instanceof oe?this.key.commentBefore:void 0},set:function(e){if(null==this.key&&(this.key=new ae(null)),!(this.key instanceof oe)){throw new Error("Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.")}this.key.commentBefore=e}},{key:"addToJSMap",value:function(e,t){var n=se(this.key,"",e);if(t instanceof Map){var i=se(this.value,n,e);t.set(n,i)}else if(t instanceof Set)t.add(n);else{var o=function(e,t,n){return null===t?"":"object"!==r(t)?String(t):e instanceof oe&&n&&n.doc?e.toString({anchors:Object.create(null),doc:n.doc,indent:"",indentStep:n.indentStep,inFlow:!0,inStringifyKey:!0,stringify:n.stringify}):JSON.stringify(t)}(this.key,n,e),s=se(this.value,o,e);o in t?Object.defineProperty(t,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):t[o]=s}return t}},{key:"toJSON",value:function(e,t){var n=t&&t.mapAsMap?new Map:{};return this.addToJSMap(t,n)}},{key:"toString",value:function(e,t,n){if(!e||!e.doc)return JSON.stringify(this);var i=e.doc.options,o=i.indent,s=i.indentSeq,a=i.simpleKeys,l=this.key,c=this.value,u=l instanceof oe&&l.comment;if(a){if(u)throw new Error("With simple keys, key nodes cannot have comments");if(l instanceof ue){throw new Error("With simple keys, collection cannot be used as a key value")}}var h=!a&&(!l||u||(l instanceof oe?l instanceof ue||l.type===T.BLOCK_FOLDED||l.type===T.BLOCK_LITERAL:"object"===r(l))),d=e,f=d.doc,p=d.indent,m=d.indentStep,g=d.stringify;e=Object.assign({},e,{implicitKey:!h,indent:p+m});var v=!1,y=g(l,e,(function(){return u=null}),(function(){return v=!0}));if(y=ie(y,e.indent,u),!h&&y.length>1024){if(a)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(e.allNullValues&&!a)return this.comment?(y=ie(y,e.indent,this.comment),t&&t()):v&&!u&&n&&n(),e.inFlow&&!h?y:"? ".concat(y);y=h?"? ".concat(y,"\n").concat(p,":"):"".concat(y,":"),this.comment&&(y=ie(y,e.indent,this.comment),t&&t());var b="",w=null;if(c instanceof oe){if(c.spaceBefore&&(b="\n"),c.commentBefore){var x=c.commentBefore.replace(/^/gm,"".concat(e.indent,"#"));b+="\n".concat(x)}w=c.comment}else c&&"object"===r(c)&&(c=f.schema.createNode(c,!0));e.implicitKey=!1,!h&&!this.comment&&c instanceof ae&&(e.indentAtStart=y.length+1),v=!1,!s&&o>=2&&!e.inFlow&&!h&&c instanceof de&&c.type!==T.FLOW_SEQ&&!c.tag&&!f.anchors.getName(c)&&(e.indent=e.indent.substr(2));var k=g(c,e,(function(){return w=null}),(function(){return v=!0})),S=" ";if(b||this.comment)S="".concat(b,"\n").concat(e.indent);else if(!h&&c instanceof ue){("["===k[0]||"{"===k[0])&&!k.includes("\n")||(S="\n".concat(e.indent))}else"\n"===k[0]&&(S="");return v&&!w&&n&&n(),ie(y+S+k,e.indent,w)}}]),n}(oe);a(fe,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var pe=function e(t,n){if(t instanceof me){var r=n.get(t.source);return r.count*r.aliasCount}if(t instanceof ue){var i,o=0,s=C(t.items);try{for(s.s();!(i=s.n()).done;){var a=e(i.value,n);a>o&&(o=a)}}catch(u){s.e(u)}finally{s.f()}return o}if(t instanceof fe){var l=e(t.key,n),c=e(t.value,n);return Math.max(l,c)}return 1},me=function(e){l(n,e);var t=g(n);function n(e){var r;return i(this,n),(r=t.call(this)).source=e,r.type=T.ALIAS,r}return s(n,[{key:"tag",set:function(e){throw new Error("Alias nodes cannot have tags")}},{key:"toJSON",value:function(e,t){if(!t)return se(this.source,e,t);var n=t.anchors,r=t.maxAliasCount,i=n.get(this.source);if(!i||void 0===i.res){var o="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new D(this.cstNode,o):new ReferenceError(o)}if(r>=0&&(i.count+=1,0===i.aliasCount&&(i.aliasCount=pe(this.source,n)),i.count*i.aliasCount>r)){var s="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new D(this.cstNode,s):new ReferenceError(s)}return i.res}},{key:"toString",value:function(e){return n.stringify(this,e)}}],[{key:"stringify",value:function(e,t){var n=e.range,r=e.source,i=t.anchors,o=t.doc,s=t.implicitKey,a=t.inStringifyKey,l=Object.keys(i).find((function(e){return i[e]===r}));if(!l&&a&&(l=o.anchors.getName(r)||o.anchors.newName()),l)return"*".concat(l).concat(s?" ":"");var c=o.anchors.getName(r)?"Alias node must be after source node":"Source node not found for alias node";throw new Error("".concat(c," [").concat(n,"]"))}}]),n}(oe);function ge(e,t){var n,r=t instanceof ae?t.value:t,i=C(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o instanceof fe){if(o.key===t||o.key===r)return o;if(o.key&&o.key.value===r)return o}}}catch(s){i.e(s)}finally{i.f()}}a(me,"default",!0);var ve=function(e){l(n,e);var t=g(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"add",value:function(e,t){e?e instanceof fe||(e=new fe(e.key||e,e.value)):e=new fe(e);var n=ge(this.items,e.key),r=this.schema&&this.schema.sortMapEntries;if(n){if(!t)throw new Error("Key ".concat(e.key," already set"));n.value=e.value}else if(r){var i=this.items.findIndex((function(t){return r(e,t)<0}));-1===i?this.items.push(e):this.items.splice(i,0,e)}else this.items.push(e)}},{key:"delete",value:function(e){var t=ge(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}},{key:"get",value:function(e,t){var n=ge(this.items,e),r=n&&n.value;return!t&&r instanceof ae?r.value:r}},{key:"has",value:function(e){return!!ge(this.items,e)}},{key:"set",value:function(e,t){this.add(new fe(e,t),!0)}},{key:"toJSON",value:function(e,t,n){var r=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(r);var i,o=C(this.items);try{for(o.s();!(i=o.n()).done;){i.value.addToJSMap(t,r)}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"toString",value:function(e,t,r){if(!e)return JSON.stringify(this);var i,o=C(this.items);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(!(s instanceof fe))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(s)," instead"))}}catch(a){o.e(a)}finally{o.f()}return v(c(n.prototype),"toString",this).call(this,e,{blockItem:function(e){return e.str},flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},t,r)}}]),n}(ue),ye="<<",be=function(e){l(n,e);var t=g(n);function n(e){var r;if(i(this,n),e instanceof fe){var o=e.value;o instanceof de||((o=new de).items.push(e.value),o.range=e.value.range),(r=t.call(this,e.key,o)).range=e.range}else r=t.call(this,new ae(ye),new de);return r.type=fe.Type.MERGE_PAIR,m(r)}return s(n,[{key:"addToJSMap",value:function(e,t){var n,r=C(this.value.items);try{for(r.s();!(n=r.n()).done;){var i=n.value.source;if(!(i instanceof ve))throw new Error("Merge sources must be maps");var o,s=C(i.toJSON(null,e,Map));try{for(s.s();!(o=s.n()).done;){var a=y(o.value,2),l=a[0],c=a[1];t instanceof Map?t.has(l)||t.set(l,c):t instanceof Set?t.add(l):Object.prototype.hasOwnProperty.call(t,l)||Object.defineProperty(t,l,{value:c,writable:!0,enumerable:!0,configurable:!0})}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}return t}},{key:"toString",value:function(e,t){var r=this.value;if(r.items.length>1)return v(c(n.prototype),"toString",this).call(this,e,t);this.value=r.items[0];var i=v(c(n.prototype),"toString",this).call(this,e,t);return this.value=r,i}}]),n}(fe),we={defaultType:T.BLOCK_LITERAL,lineWidth:76},xe={trueStr:"true",falseStr:"false"},ke={asBigInt:!1},Se={nullStr:"null"},Ce={defaultType:T.PLAIN,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function Ee(e,t,n){var r,i=C(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.format,a=o.test,l=o.resolve;if(a){var c=e.match(a);if(c){var u=l.apply(null,c);return u instanceof ae||(u=new ae(u)),s&&(u.format=s),u}}}}catch(h){i.e(h)}finally{i.f()}return n&&(e=n(e)),new ae(e)}var Te="flow",Oe="block",Ae="quoted",_e=function(e,t){for(var n=e[t+1];" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t};function Pe(e,t,n,r){var i=r.indentAtStart,o=r.lineWidth,s=void 0===o?80:o,a=r.minContentWidth,l=void 0===a?20:a,c=r.onFold,u=r.onOverflow;if(!s||s<0)return e;var h=Math.max(1+l,1+s-t.length);if(e.length<=h)return e;var d=[],f={},p=s-t.length;"number"===typeof i&&(i>s-Math.max(2,l)?d.push(0):p=s-i);var m,g=void 0,v=void 0,y=!1,b=-1,w=-1,x=-1;for(n===Oe&&-1!==(b=_e(e,b))&&(p=b+h);m=e[b+=1];){if(n===Ae&&"\\"===m){switch(w=b,e[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}x=b}if("\n"===m)n===Oe&&(b=_e(e,b)),p=b+h,g=void 0;else{if(" "===m&&v&&" "!==v&&"\n"!==v&&"\t"!==v){var k=e[b+1];k&&" "!==k&&"\n"!==k&&"\t"!==k&&(g=b)}if(b>=p)if(g)d.push(g),p=g+h,g=void 0;else if(n===Ae){for(;" "===v||"\t"===v;)v=m,m=e[b+=1],y=!0;var S=b>x+1?b-2:w-1;if(f[S])return e;d.push(S),f[S]=!0,p=S+h,g=void 0}else y=!0}v=m}if(y&&u&&u(),0===d.length)return e;c&&c();for(var C=e.slice(0,d[0]),E=0;E<d.length;++E){var T=d[E],O=d[E+1]||e.length;0===T?C="\n".concat(t).concat(e.slice(0,O)):(n===Ae&&f[T]&&(C+="".concat(e[T],"\\")),C+="\n".concat(t).concat(e.slice(T+1,O)))}return C}var Ne=function(e){var t=e.indentAtStart;return t?Object.assign({indentAtStart:t},Ce.fold):Ce.fold},Me=function(e){return/^(%|---|\.\.\.)/m.test(e)};function je(e,t){var n=t.implicitKey,r=Ce.doubleQuoted,i=r.jsonEncoding,o=r.minMultiLineLength,s=JSON.stringify(e);if(i)return s;for(var a=t.indent||(Me(e)?"  ":""),l="",c=0,u=0,h=s[u];h;h=s[++u])if(" "===h&&"\\"===s[u+1]&&"n"===s[u+2]&&(l+=s.slice(c,u)+"\\ ",c=u+=1,h="\\"),"\\"===h)switch(s[u+1]){case"u":l+=s.slice(c,u);var d=s.substr(u+2,4);switch(d){case"0000":l+="\\0";break;case"0007":l+="\\a";break;case"000b":l+="\\v";break;case"001b":l+="\\e";break;case"0085":l+="\\N";break;case"00a0":l+="\\_";break;case"2028":l+="\\L";break;case"2029":l+="\\P";break;default:"00"===d.substr(0,2)?l+="\\x"+d.substr(2):l+=s.substr(u,6)}c=(u+=5)+1;break;case"n":if(n||'"'===s[u+2]||s.length<o)u+=1;else{for(l+=s.slice(c,u)+"\n\n";"\\"===s[u+2]&&"n"===s[u+3]&&'"'!==s[u+4];)l+="\n",u+=2;l+=a," "===s[u+2]&&(l+="\\"),c=(u+=1)+1}break;default:u+=1}return l=c?l+s.slice(c):s,n?l:Pe(l,a,Ae,Ne(t))}function Re(e,t){if(t.implicitKey){if(/\n/.test(e))return je(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return je(e,t);var n=t.indent||(Me(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,"$&\n".concat(n))+"'";return t.implicitKey?r:Pe(r,n,Te,Ne(t))}function Ie(e,t,n,r){var i=e.comment,o=e.type,s=e.value;if(/\n[\t ]+$/.test(s)||/^\s*$/.test(s))return je(s,t);var a=t.indent||(t.forceBlockIndent||Me(s)?"  ":""),l=a?"2":"1",c=o!==T.BLOCK_FOLDED&&(o===T.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;var r=t-n,i=e.length;if(i<=r)return!1;for(var o=0,s=0;o<i;++o)if("\n"===e[o]){if(o-s>r)return!0;if(i-(s=o+1)<=r)return!1}return!0}(s,Ce.fold.lineWidth,a.length)),u=c?"|":">";if(!s)return u+"\n";var h="",d="";if(s=s.replace(/[\n\t ]*$/,(function(e){var t=e.indexOf("\n");return-1===t?u+="-":s!==e&&t===e.length-1||(u+="+",r&&r()),d=e.replace(/\n$/,""),""})).replace(/^[\n ]*/,(function(e){-1!==e.indexOf(" ")&&(u+=l);var t=e.match(/ +$/);return t?(h=e.slice(0,-t[0].length),t[0]):(h=e,"")})),d&&(d=d.replace(/\n+(?!\n|$)/g,"$&".concat(a))),h&&(h=h.replace(/\n+/g,"$&".concat(a))),i&&(u+=" #"+i.replace(/ ?[\r\n]+/g," "),n&&n()),!s)return"".concat(u).concat(l,"\n").concat(a).concat(d);if(c)return s=s.replace(/\n+/g,"$&".concat(a)),"".concat(u,"\n").concat(a).concat(h).concat(s).concat(d);s=s.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(a));var f=Pe("".concat(h).concat(s).concat(d),a,Oe,Ce.fold);return"".concat(u,"\n").concat(a).concat(f)}function De(e,t,n,r){var i=Ce.defaultType,o=t.implicitKey,s=t.inFlow,a=e,l=a.type,c=a.value;"string"!==typeof c&&(c=String(c),e=Object.assign({},e,{value:c}));var u=function(i){switch(i){case T.BLOCK_FOLDED:case T.BLOCK_LITERAL:return Ie(e,t,n,r);case T.QUOTE_DOUBLE:return je(c,t);case T.QUOTE_SINGLE:return Re(c,t);case T.PLAIN:return function(e,t,n,r){var i=e.comment,o=e.type,s=e.value,a=t.actualString,l=t.implicitKey,c=t.indent,u=t.inFlow;if(l&&/[\n[\]{},]/.test(s)||u&&/[[\]{},]/.test(s))return je(s,t);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return l||u||-1===s.indexOf("\n")?-1!==s.indexOf('"')&&-1===s.indexOf("'")?Re(s,t):je(s,t):Ie(e,t,n,r);if(!l&&!u&&o!==T.PLAIN&&-1!==s.indexOf("\n"))return Ie(e,t,n,r);if(""===c&&Me(s))return t.forceBlockIndent=!0,Ie(e,t,n,r);var h=s.replace(/\n+/g,"$&\n".concat(c));if(a){var d=t.doc.schema.tags;if("string"!==typeof Ee(h,d,d.scalarFallback).value)return je(s,t)}var f=l?h:Pe(h,c,Te,Ne(t));return!i||u||-1===f.indexOf("\n")&&-1===i.indexOf("\n")?f:(n&&n(),function(e,t,n){if(!n)return e;var r=n.replace(/[\s\S]^/gm,"$&".concat(t,"#"));return"#".concat(r,"\n").concat(t).concat(e)}(f,c,i))}(e,t,n,r);default:return null}};l!==T.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(c)?l=T.QUOTE_DOUBLE:!o&&!s||l!==T.BLOCK_FOLDED&&l!==T.BLOCK_LITERAL||(l=T.QUOTE_DOUBLE);var h=u(l);if(null===h&&null===(h=u(i)))throw new Error("Unsupported default string type ".concat(i));return h}function Le(e){var t=e.format,n=e.minFractionDigits,r=e.tag,i=e.value;if("bigint"===typeof i)return String(i);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";var o=JSON.stringify(i);if(!t&&n&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(o)){var s=o.indexOf(".");s<0&&(s=o.length,o+=".");for(var a=n-(o.length-s-1);a-- >0;)o+="0"}return o}function Be(e,t){var n,r,i;switch(t.type){case T.FLOW_MAP:n="}",r="flow map";break;case T.FLOW_SEQ:n="]",r="flow sequence";break;default:return void e.push(new L(t,"Not a flow collection!?"))}for(var o=t.items.length-1;o>=0;--o){var s=t.items[o];if(!s||s.type!==T.COMMENT){i=s;break}}if(i&&i.char!==n){var a,l="Expected ".concat(r," to end with ").concat(n);"number"===typeof i.offset?(a=new L(t,l)).offset=i.offset+1:(a=new L(i,l),i.range&&i.range.end&&(a.offset=i.range.end-i.range.start)),e.push(a)}}function Fe(e,t){var n=t.context.src[t.range.start-1];if("\n"!==n&&"\t"!==n&&" "!==n){e.push(new L(t,"Comments must be separated from other tokens by white space characters"))}}function ze(e,t){var n=String(t),r=n.substr(0,8)+"..."+n.substr(-8);return new L(e,'The "'.concat(r,'" key is too long'))}function He(e,t){var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.afterKey,s=i.before,a=i.comment,l=e.items[s];l?(o&&l.value&&(l=l.value),void 0===a?!o&&l.commentBefore||(l.spaceBefore=!0):l.commentBefore?l.commentBefore+="\n"+a:l.commentBefore=a):void 0!==a&&(e.comment?e.comment+="\n"+a:e.comment=a)}}catch(c){r.e(c)}finally{r.f()}}function $e(e,t){var n=t.strValue;return n?"string"===typeof n?n:(n.errors.forEach((function(n){n.source||(n.source=t),e.errors.push(n)})),n.str):""}function Ue(e,t){var n=t.tag,r=t.type,i=!1;if(n){var o=n.handle,s=n.suffix,a=n.verbatim;if(a){if("!"!==a&&"!!"!==a)return a;var l="Verbatim tags aren't resolved, so ".concat(a," is invalid.");e.errors.push(new L(t,l))}else if("!"!==o||s)try{return function(e,t){var n=t.tag,r=n.handle,i=n.suffix,o=e.tagPrefixes.find((function(e){return e.handle===r}));if(!o){var s=e.getDefaults().tagPrefixes;if(s&&(o=s.find((function(e){return e.handle===r}))),!o)throw new L(t,"The ".concat(r," tag handle is non-default and was not declared."))}if(!i)throw new L(t,"The ".concat(r," tag has no suffix."));if("!"===r&&"1.0"===(e.version||e.options.version)){if("^"===i[0])return e.warnings.push(new F(t,"YAML 1.0 ^ tag expansion is not supported")),i;if(/[:/]/.test(i)){var a=i.match(/^([a-z0-9-]+)\/(.*)/i);return a?"tag:".concat(a[1],".yaml.org,2002:").concat(a[2]):"tag:".concat(i)}}return o.prefix+decodeURIComponent(i)}(e,t)}catch(c){e.errors.push(c)}else i=!0}switch(r){case T.BLOCK_FOLDED:case T.BLOCK_LITERAL:case T.QUOTE_DOUBLE:case T.QUOTE_SINGLE:return A.STR;case T.FLOW_MAP:case T.MAP:return A.MAP;case T.FLOW_SEQ:case T.SEQ:return A.SEQ;case T.PLAIN:return i?A.STR:null;default:return null}}function We(e,t,n){var r,i=e.schema.tags,o=[],s=C(i);try{for(s.s();!(r=s.n()).done;){var a=r.value;if(a.tag===n){if(!a.test){var l=a.resolve(e,t);return l instanceof ue?l:new ae(l)}o.push(a)}}}catch(u){s.e(u)}finally{s.f()}var c=$e(e,t);return"string"===typeof c&&o.length>0?Ee(c,o,i.scalarFallback):null}function Ve(e,t,n){try{var r=We(e,t,n);if(r)return n&&t.tag&&(r.tag=n),r}catch(l){return l.source||(l.source=t),e.errors.push(l),null}try{var i=function(e){switch(e.type){case T.FLOW_MAP:case T.MAP:return A.MAP;case T.FLOW_SEQ:case T.SEQ:return A.SEQ;default:return A.STR}}(t);if(!i)throw new Error("The tag ".concat(n," is unavailable"));var o="The tag ".concat(n," is unavailable, falling back to ").concat(i);e.warnings.push(new F(t,o));var s=We(e,t,i);return s.tag=n,s}catch(l){var a=new D(t,l.message);return a.stack=l.stack,e.errors.push(a),null}}var qe=function(e){if(!e)return!1;var t=e.type;return t===T.MAP_KEY||t===T.MAP_VALUE||t===T.SEQ_ITEM};function Ke(e,t){if(!t)return null;t.error&&e.errors.push(t.error);var n=function(e,t){var n,r={before:[],after:[]},i=!1,o=!1,s=C(qe(t.context.parent)?t.context.parent.props.concat(t.props):t.props);try{for(s.s();!(n=s.n()).done;){var a=n.value,l=a.start,c=a.end;switch(t.context.src[l]){case E.COMMENT:t.commentHasRequiredWhitespace(l)||e.push(new L(t,"Comments must be separated from other tokens by white space characters"));var u=t.header,h=t.valueRange;(h&&(l>h.start||u&&l>u.start)?r.after:r.before).push(t.context.src.slice(l+1,c));break;case E.ANCHOR:i&&e.push(new L(t,"A node can have at most one anchor")),i=!0;break;case E.TAG:o&&e.push(new L(t,"A node can have at most one tag")),o=!0}}}catch(d){s.e(d)}finally{s.f()}return{comments:r,hasAnchor:i,hasTag:o}}(e.errors,t),r=n.comments,i=n.hasAnchor,o=n.hasTag;if(i){var s=e.anchors,a=t.anchor,l=s.getNode(a);l&&(s.map[s.newName(a)]=l),s.map[a]=t}if(t.type===T.ALIAS&&(i||o)){e.errors.push(new L(t,"An alias node must not specify any properties"))}var c=function(e,t){var n=e.anchors,r=e.errors,i=e.schema;if(t.type===T.ALIAS){var o=t.rawValue,s=n.getNode(o);if(!s){var a="Aliased anchor not found: ".concat(o);return r.push(new D(t,a)),null}var l=new me(s);return n._cstAliases.push(l),l}var c=Ue(e,t);if(c)return Ve(e,t,c);if(t.type!==T.PLAIN){var u="Failed to resolve ".concat(t.type," node here");return r.push(new B(t,u)),null}try{return Ee($e(e,t),i.tags,i.tags.scalarFallback)}catch(h){return h.source||(h.source=t),r.push(h),null}}(e,t);if(c){c.range=[t.range.start,t.range.end],e.options.keepCstNodes&&(c.cstNode=t),e.options.keepNodeTypes&&(c.type=t.type);var u=r.before.join("\n");u&&(c.commentBefore=c.commentBefore?"".concat(c.commentBefore,"\n").concat(u):u);var h=r.after.join("\n");h&&(c.comment=c.comment?"".concat(c.comment,"\n").concat(h):h)}return t.resolved=c}function Qe(e,t){if(t.type!==T.MAP&&t.type!==T.FLOW_MAP){var n="A ".concat(t.type," node cannot be resolved as a mapping");return e.errors.push(new B(t,n)),null}var r=t.type===T.FLOW_MAP?function(e,t){for(var n=[],r=[],i=void 0,o=!1,s="{",a=0;a<t.items.length;++a){var l=t.items[a];if("string"===typeof l.char){var c=l.char,u=l.offset;if("?"===c&&void 0===i&&!o){o=!0,s=":";continue}if(":"===c){if(void 0===i&&(i=null),":"===s){s=",";continue}}else if(o&&(void 0===i&&","!==c&&(i=null),o=!1),void 0!==i&&(r.push(new fe(i)),i=void 0,","===c)){s=":";continue}if("}"===c){if(a===t.items.length-1)continue}else if(c===s){s=":";continue}var h="Flow map contains an unexpected ".concat(c),d=new B(t,h);d.offset=u,e.errors.push(d)}else l.type===T.BLANK_LINE?n.push({afterKey:!!i,before:r.length}):l.type===T.COMMENT?(Fe(e.errors,l),n.push({afterKey:!!i,before:r.length,comment:l.comment})):void 0===i?(","===s&&e.errors.push(new L(l,"Separator , missing in flow map")),i=Ke(e,l)):(","!==s&&e.errors.push(new L(l,"Indicator : missing in flow map entry")),r.push(new fe(i,Ke(e,l))),i=void 0,o=!1)}Be(e.errors,t),void 0!==i&&r.push(new fe(i));return{comments:n,items:r}}(e,t):function(e,t){for(var n=[],r=[],i=void 0,o=null,s=0;s<t.items.length;++s){var a=t.items[s];switch(a.type){case T.BLANK_LINE:n.push({afterKey:!!i,before:r.length});break;case T.COMMENT:n.push({afterKey:!!i,before:r.length,comment:a.comment});break;case T.MAP_KEY:void 0!==i&&r.push(new fe(i)),a.error&&e.errors.push(a.error),i=Ke(e,a.node),o=null;break;case T.MAP_VALUE:if(void 0===i&&(i=null),a.error&&e.errors.push(a.error),!a.context.atLineStart&&a.node&&a.node.type===T.MAP&&!a.node.context.atLineStart){var l="Nested mappings are not allowed in compact mappings";e.errors.push(new L(a.node,l))}var c=a.node;if(!c&&a.props.length>0){(c=new z(T.PLAIN,[])).context={parent:a,src:a.context.src};var u=a.range.start+1;if(c.range={start:u,end:u},c.valueRange={start:u,end:u},"number"===typeof a.range.origStart){var h=a.range.origStart+1;c.range.origStart=c.range.origEnd=h,c.valueRange.origStart=c.valueRange.origEnd=h}}var d=new fe(i,Ke(e,c));Je(a,d),r.push(d),i&&"number"===typeof o&&a.range.start>o+1024&&e.errors.push(ze(t,i)),i=void 0,o=null;break;default:void 0!==i&&r.push(new fe(i)),i=Ke(e,a),o=a.range.start,a.error&&e.errors.push(a.error);e:for(var f=s+1;;++f){var p=t.items[f];switch(p&&p.type){case T.BLANK_LINE:case T.COMMENT:continue e;case T.MAP_VALUE:break e;default:var m="Implicit map keys need to be followed by map values";e.errors.push(new L(a,m));break e}}if(a.valueRangeContainsNewline){var g="Implicit map keys need to be on a single line";e.errors.push(new L(a,g))}}}void 0!==i&&r.push(new fe(i));return{comments:n,items:r}}(e,t),i=r.comments,o=r.items,s=new ve;s.items=o,He(s,i);for(var a=!1,l=0;l<o.length;++l){var c=o[l].key;if(c instanceof ue&&(a=!0),e.schema.merge&&c&&c.value===ye){o[l]=new be(o[l]);var u=o[l].value.items,h=null;u.some((function(e){if(e instanceof me){var t=e.source.type;return t!==T.MAP&&t!==T.FLOW_MAP&&(h="Merge nodes aliases can only point to maps")}return h="Merge nodes can only have Alias nodes as values"})),h&&e.errors.push(new L(t,h))}else for(var d=l+1;d<o.length;++d){var f=o[d].key;if(c===f||c&&f&&Object.prototype.hasOwnProperty.call(c,"value")&&c.value===f.value){var p='Map keys must be unique; "'.concat(c,'" is repeated');e.errors.push(new L(t,p));break}}}if(a&&!e.options.mapAsMap){e.warnings.push(new F(t,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this."))}return t.resolved=s,s}var Ge=function(e){var t=e.context,n=t.lineStart,r=t.node,i=t.src,o=e.props;if(0===o.length)return!1;var s=o[0].start;if(r&&s>r.valueRange.start)return!1;if(i[s]!==E.COMMENT)return!1;for(var a=n;a<s;++a)if("\n"===i[a])return!1;return!0};function Je(e,t){if(Ge(e)){var n=e.getPropValue(0,E.COMMENT,!0),r=!1,i=t.value.commentBefore;if(i&&i.startsWith(n))t.value.commentBefore=i.substr(n.length+1),r=!0;else{var o=t.value.comment;!e.node&&o&&o.startsWith(n)&&(t.value.comment=o.substr(n.length+1),r=!0)}r&&(t.comment=n)}}function Ye(e,t){if(t.type!==T.SEQ&&t.type!==T.FLOW_SEQ){var n="A ".concat(t.type," node cannot be resolved as a sequence");return e.errors.push(new B(t,n)),null}var r=t.type===T.FLOW_SEQ?function(e,t){for(var n=[],r=[],i=!1,o=void 0,s=null,a="[",l=null,c=0;c<t.items.length;++c){var u=t.items[c];if("string"===typeof u.char){var h=u.char,d=u.offset;if(":"===h||!i&&void 0===o||(i&&void 0===o&&(o=a?r.pop():null),r.push(new fe(o)),i=!1,o=void 0,s=null),h===a)a=null;else if(a||"?"!==h){if("["!==a&&":"===h&&void 0===o){if(","===a){if((o=r.pop())instanceof fe){var f=new L(t,"Chaining flow sequence pairs is invalid");f.offset=d,e.errors.push(f)}if(!i&&"number"===typeof s){var p=u.range?u.range.start:u.offset;p>s+1024&&e.errors.push(ze(t,o));for(var m=l.context.src,g=s;g<p;++g)if("\n"===m[g]){var v="Implicit keys of flow sequence pairs need to be on a single line";e.errors.push(new L(l,v));break}}}else o=null;s=null,i=!1,a=null}else if("["===a||"]"!==h||c<t.items.length-1){var y="Flow sequence contains an unexpected ".concat(h),b=new B(t,y);b.offset=d,e.errors.push(b)}}else i=!0}else if(u.type===T.BLANK_LINE)n.push({before:r.length});else if(u.type===T.COMMENT)Fe(e.errors,u),n.push({comment:u.comment,before:r.length});else{if(a){var w="Expected a ".concat(a," in flow sequence");e.errors.push(new L(u,w))}var x=Ke(e,u);void 0===o?(r.push(x),l=u):(r.push(new fe(o,x)),o=void 0),s=u.range.start,a=","}}Be(e.errors,t),void 0!==o&&r.push(new fe(o));return{comments:n,items:r}}(e,t):function(e,t){for(var n=[],r=[],i=0;i<t.items.length;++i){var o=t.items[i];switch(o.type){case T.BLANK_LINE:n.push({before:r.length});break;case T.COMMENT:n.push({comment:o.comment,before:r.length});break;case T.SEQ_ITEM:if(o.error&&e.errors.push(o.error),r.push(Ke(e,o.node)),o.hasProps){var s="Sequence items cannot have tags or anchors before the - indicator";e.errors.push(new L(o,s))}break;default:o.error&&e.errors.push(o.error),e.errors.push(new B(o,"Unexpected ".concat(o.type," node in sequence")))}}return{comments:n,items:r}}(e,t),i=r.comments,o=r.items,s=new de;if(s.items=o,He(s,i),!e.options.mapAsMap&&o.some((function(e){return e instanceof fe&&e.key instanceof ue}))){e.warnings.push(new F(t,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this."))}return t.resolved=s,s}var Xe={identify:function(e){return e instanceof Uint8Array},default:!1,tag:"tag:yaml.org,2002:binary",resolve:function(e,t){var n=$e(e,t);if("function"===typeof Buffer)return Buffer.from(n,"base64");if("function"===typeof atob){for(var r=atob(n.replace(/[\n\r]/g,"")),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}return e.errors.push(new D(t,"This environment does not support reading binary tags; either Buffer or atob is required")),null},options:we,stringify:function(e,t,n,r){var i,o=e.comment,s=e.type,a=e.value;if("function"===typeof Buffer)i=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else{if("function"!==typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");for(var l="",c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);i=btoa(l)}if(s||(s=we.defaultType),s===T.QUOTE_DOUBLE)a=i;else{for(var u=we.lineWidth,h=Math.ceil(i.length/u),d=new Array(h),f=0,p=0;f<h;++f,p+=u)d[f]=i.substr(p,u);a=d.join(s===T.BLOCK_LITERAL?"\n":" ")}return De({comment:o,type:s,value:a},t,n,r)}};function Ze(e,t){for(var n=Ye(e,t),r=0;r<n.items.length;++r){var i=n.items[r];if(!(i instanceof fe)){if(i instanceof ve){if(i.items.length>1){throw new L(t,"Each pair must have its own sequence indicator")}var o=i.items[0]||new fe;i.commentBefore&&(o.commentBefore=o.commentBefore?"".concat(i.commentBefore,"\n").concat(o.commentBefore):i.commentBefore),i.comment&&(o.comment=o.comment?"".concat(i.comment,"\n").concat(o.comment):i.comment),i=o}n.items[r]=i instanceof fe?i:new fe(i)}}return n}function et(e,t,n){var r=new de(e);r.tag="tag:yaml.org,2002:pairs";var i,o=C(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,a=void 0,l=void 0;if(Array.isArray(s)){if(2!==s.length)throw new TypeError("Expected [key, value] tuple: ".concat(s));a=s[0],l=s[1]}else if(s&&s instanceof Object){var c=Object.keys(s);if(1!==c.length)throw new TypeError("Expected { key: value } tuple: ".concat(s));l=s[a=c[0]]}else a=s;var u=e.createPair(a,l,n);r.items.push(u)}}catch(h){o.e(h)}finally{o.f()}return r}var tt={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ze,createNode:et},nt=function(e){l(n,e);var t=g(n);function n(){var e;return i(this,n),a(p(e=t.call(this)),"add",ve.prototype.add.bind(p(e))),a(p(e),"delete",ve.prototype.delete.bind(p(e))),a(p(e),"get",ve.prototype.get.bind(p(e))),a(p(e),"has",ve.prototype.has.bind(p(e))),a(p(e),"set",ve.prototype.set.bind(p(e))),e.tag=n.tag,e}return s(n,[{key:"toJSON",value:function(e,t){var n=new Map;t&&t.onCreate&&t.onCreate(n);var r,i=C(this.items);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=void 0,a=void 0;if(o instanceof fe?(s=se(o.key,"",t),a=se(o.value,s,t)):s=se(o,"",t),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,a)}}catch(l){i.e(l)}finally{i.f()}return n}}]),n}(de);a(nt,"tag","tag:yaml.org,2002:omap");var rt={identify:function(e){return e instanceof Map},nodeClass:nt,default:!1,tag:"tag:yaml.org,2002:omap",resolve:function(e,t){var n,r=Ze(e,t),i=[],o=C(r.items);try{for(o.s();!(n=o.n()).done;){var s=n.value.key;if(s instanceof ae){if(i.includes(s.value)){throw new L(t,"Ordered maps must not include duplicate keys")}i.push(s.value)}}}catch(a){o.e(a)}finally{o.f()}return Object.assign(new nt,r)},createNode:function(e,t,n){var r=et(e,t,n),i=new nt;return i.items=r.items,i}},it=function(e){l(n,e);var t=g(n);function n(){var e;return i(this,n),(e=t.call(this)).tag=n.tag,e}return s(n,[{key:"add",value:function(e){var t=e instanceof fe?e:new fe(e);ge(this.items,t.key)||this.items.push(t)}},{key:"get",value:function(e,t){var n=ge(this.items,e);return!t&&n instanceof fe?n.key instanceof ae?n.key.value:n.key:n}},{key:"set",value:function(e,t){if("boolean"!==typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat(r(t)));var n=ge(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new fe(e))}},{key:"toJSON",value:function(e,t){return v(c(n.prototype),"toJSON",this).call(this,e,t,Set)}},{key:"toString",value:function(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return v(c(n.prototype),"toString",this).call(this,e,t,r);throw new Error("Set items must all have null values")}}]),n}(ve);a(it,"tag","tag:yaml.org,2002:set");var ot={identify:function(e){return e instanceof Set},nodeClass:it,default:!1,tag:"tag:yaml.org,2002:set",resolve:function(e,t){var n=Qe(e,t);if(!n.hasAllNullValues())throw new L(t,"Set items must all have null values");return Object.assign(new it,n)},createNode:function(e,t,n){var r,i=new it,o=C(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;i.items.push(e.createPair(s,null,n))}}catch(a){o.e(a)}finally{o.f()}return i}},st=function(e,t){var n=t.split(":").reduce((function(e,t){return 60*e+Number(t)}),0);return"-"===e?-n:n},at=function(e){var t=e.value;if(isNaN(t)||!isFinite(t))return Le(t);var n="";t<0&&(n="-",t=Math.abs(t));var r=[t%60];return t<60?r.unshift(0):(t=Math.round((t-r[0])/60),r.unshift(t%60),t>=60&&(t=Math.round((t-r[0])/60),r.unshift(t))),n+r.map((function(e){return e<10?"0"+String(e):String(e)})).join(":").replace(/000000\d*$/,"")},lt={identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:function(e,t,n){return st(t,n.replace(/_/g,""))},stringify:at},ct={identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:function(e,t,n){return st(t,n.replace(/_/g,""))},stringify:at},ut={identify:function(e){return e instanceof Date},default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:function(e,t,n,r,i,o,s,a,l){a&&(a=(a+"00").substr(1,3));var c=Date.UTC(t,n-1,r,i||0,o||0,s||0,a||0);if(l&&"Z"!==l){var u=st(l[0],l.slice(1));Math.abs(u)<30&&(u*=60),c-=6e4*u}return new Date(c)},stringify:function(e){return e.value.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")}};function ht(e){var t="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}||{};return e?"undefined"!==typeof YAML_SILENCE_DEPRECATION_WARNINGS?!YAML_SILENCE_DEPRECATION_WARNINGS:!t.YAML_SILENCE_DEPRECATION_WARNINGS:"undefined"!==typeof YAML_SILENCE_WARNINGS?!YAML_SILENCE_WARNINGS:!t.YAML_SILENCE_WARNINGS}function dt(e,t){if(ht(!1)){var n="undefined"!==typeof process&&process.emitWarning;n?n(e,t):console.warn(t?"".concat(t,": ").concat(e):e)}}var ft={};var pt={createNode:function(e,t,n){var i=new ve(e);if(t instanceof Map){var o,s=C(t);try{for(s.s();!(o=s.n()).done;){var a=y(o.value,2),l=a[0],c=a[1];i.items.push(e.createPair(l,c,n))}}catch(f){s.e(f)}finally{s.f()}}else if(t&&"object"===r(t))for(var u=0,h=Object.keys(t);u<h.length;u++){var d=h[u];i.items.push(e.createPair(d,t[d],n))}return"function"===typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i},default:!0,nodeClass:ve,tag:"tag:yaml.org,2002:map",resolve:Qe};var mt={createNode:function(e,t,n){var r=new de(e);if(t&&t[Symbol.iterator]){var i,o=C(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,a=e.createNode(s,n.wrapScalars,null,n);r.items.push(a)}}catch(l){o.e(l)}finally{o.f()}}return r},default:!0,nodeClass:de,tag:"tag:yaml.org,2002:seq",resolve:Ye},gt=[pt,mt,{identify:function(e){return"string"===typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:$e,stringify:function(e,t,n,r){return De(e,t=Object.assign({actualString:!0},t),n,r)},options:Ce}],vt=function(e){return"bigint"===typeof e||Number.isInteger(e)},yt=function(e,t,n){return ke.asBigInt?BigInt(e):parseInt(t,n)};function bt(e,t,n){var r=e.value;return vt(r)&&r>=0?n+r.toString(t):Le(e)}var wt={identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new ae(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:Se,stringify:function(){return Se.nullStr}},xt={identify:function(e){return"boolean"===typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:function(e){return"t"===e[0]||"T"===e[0]},options:xe,stringify:function(e){return e.value?xe.trueStr:xe.falseStr}},kt={identify:function(e){return vt(e)&&e>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:function(e,t){return yt(e,t,8)},options:ke,stringify:function(e){return bt(e,8,"0o")}},St={identify:vt,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:function(e){return yt(e,e,10)},options:ke,stringify:Le},Ct={identify:function(e){return vt(e)&&e>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:function(e,t){return yt(e,t,16)},options:ke,stringify:function(e){return bt(e,16,"0x")}},Et={identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:Le},Tt={identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e)},stringify:function(e){var t=e.value;return Number(t).toExponential()}},Ot={identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve:function(e,t,n){var r=t||n,i=new ae(parseFloat(e));return r&&"0"===r[r.length-1]&&(i.minFractionDigits=r.length),i},stringify:Le},At=gt.concat([wt,xt,kt,St,Ct,Et,Tt,Ot]),_t=function(e){return"bigint"===typeof e||Number.isInteger(e)},Pt=function(e){var t=e.value;return JSON.stringify(t)},Nt=[pt,mt,{identify:function(e){return"string"===typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:$e,stringify:Pt},{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new ae(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:function(){return null},stringify:Pt},{identify:function(e){return"boolean"===typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:function(e){return"true"===e},stringify:Pt},{identify:_t,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:function(e){return ke.asBigInt?BigInt(e):parseInt(e,10)},stringify:function(e){var t=e.value;return _t(t)?t.toString():JSON.stringify(t)}},{identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:function(e){return parseFloat(e)},stringify:Pt}];Nt.scalarFallback=function(e){throw new SyntaxError("Unresolved plain scalar ".concat(JSON.stringify(e)))};var Mt=function(e){return e.value?xe.trueStr:xe.falseStr},jt=function(e){return"bigint"===typeof e||Number.isInteger(e)};function Rt(e,t,n){var r=t.replace(/_/g,"");if(ke.asBigInt){switch(n){case 2:r="0b".concat(r);break;case 8:r="0o".concat(r);break;case 16:r="0x".concat(r)}var i=BigInt(r);return"-"===e?BigInt(-1)*i:i}var o=parseInt(r,n);return"-"===e?-1*o:o}function It(e,t,n){var r=e.value;if(jt(r)){var i=r.toString(t);return r<0?"-"+n+i.substr(1):n+i}return Le(e)}var Dt=gt.concat([{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new ae(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:Se,stringify:function(){return Se.nullStr}},{identify:function(e){return"boolean"===typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:function(){return!0},options:xe,stringify:Mt},{identify:function(e){return"boolean"===typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:function(){return!1},options:xe,stringify:Mt},{identify:jt,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:function(e,t,n){return Rt(t,n,2)},stringify:function(e){return It(e,2,"0b")}},{identify:jt,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:function(e,t,n){return Rt(t,n,8)},stringify:function(e){return It(e,8,"0")}},{identify:jt,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:function(e,t,n){return Rt(t,n,10)},stringify:Le},{identify:jt,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:function(e,t,n){return Rt(t,n,16)},stringify:function(e){return It(e,16,"0x")}},{identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:Le},{identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e.replace(/_/g,""))},stringify:function(e){var t=e.value;return Number(t).toExponential()}},{identify:function(e){return"number"===typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve:function(e,t){var n=new ae(parseFloat(e.replace(/_/g,"")));if(t){var r=t.replace(/_/g,"");"0"===r[r.length-1]&&(n.minFractionDigits=r.length)}return n},stringify:Le}],Xe,rt,tt,ot,lt,ct,ut),Lt={core:At,failsafe:gt,json:Nt,yaml11:Dt},Bt={binary:Xe,bool:xt,float:Ot,floatExp:Tt,floatNaN:Et,floatTime:ct,int:St,intHex:Ct,intOct:kt,intTime:lt,map:pt,null:wt,omap:rt,pairs:tt,seq:mt,set:ot,timestamp:ut};function Ft(e,t,n){if(e instanceof oe)return e;var i=n.defaultPrefix,o=n.onTagObj,s=n.prevObjects,a=n.schema,l=n.wrapScalars;t&&t.startsWith("!!")&&(t=i+t.slice(2));var c=function(e,t,n){if(t){var r=n.filter((function(e){return e.tag===t})),i=r.find((function(e){return!e.format}))||r[0];if(!i)throw new Error("Tag ".concat(t," not found"));return i}return n.find((function(t){return(t.identify&&t.identify(e)||t.class&&e instanceof t.class)&&!t.format}))}(e,t,a.tags);if(!c){if("function"===typeof e.toJSON&&(e=e.toJSON()),!e||"object"!==r(e))return l?new ae(e):e;c=e instanceof Map?pt:e[Symbol.iterator]?mt:pt}o&&(o(c),delete n.onTagObj);var u={value:void 0,node:void 0};if(e&&"object"===r(e)&&s){var h=s.get(e);if(h){var d=new me(h);return n.aliasNodes.push(d),d}u.value=e,s.set(e,u)}return u.node=c.createNode?c.createNode(n.schema,e,n):l?new ae(e):e,t&&u.node instanceof oe&&(u.node.tag=t),u.node}var zt=function(e,t){return e.key<t.key?-1:e.key>t.key?1:0},Ht=function(){function e(t){var n=t.customTags,r=t.merge,o=t.schema,s=t.sortMapEntries,a=t.tags;i(this,e),this.merge=!!r,this.name=o,this.sortMapEntries=!0===s?zt:s||null,!n&&a&&function(e,t){if(!ft[e]&&ht(!0)){ft[e]=!0;var n="The option '".concat(e,"' will be removed in a future release");dt(n+=t?", use '".concat(t,"' instead."):".","DeprecationWarning")}}("tags","customTags"),this.tags=function(e,t,n,r){var i=e[r.replace(/\W/g,"")];if(!i){var o=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(", ");throw new Error('Unknown schema "'.concat(r,'"; use one of ').concat(o))}if(Array.isArray(n)){var s,a=C(n);try{for(a.s();!(s=a.n()).done;){var l=s.value;i=i.concat(l)}}catch(f){a.e(f)}finally{a.f()}}else"function"===typeof n&&(i=n(i.slice()));for(var c=0;c<i.length;++c){var u=i[c];if("string"===typeof u){var h=t[u];if(!h){var d=Object.keys(t).map((function(e){return JSON.stringify(e)})).join(", ");throw new Error('Unknown custom tag "'.concat(u,'"; use one of ').concat(d))}i[c]=h}}return i}(Lt,Bt,n||a,o)}return s(e,[{key:"createNode",value:function(t,n,r,i){var o={defaultPrefix:e.defaultPrefix,schema:this,wrapScalars:n};return Ft(t,r,i?Object.assign(i,o):o)}},{key:"createPair",value:function(e,t,n){n||(n={wrapScalars:!0});var r=this.createNode(e,n.wrapScalars,null,n),i=this.createNode(t,n.wrapScalars,null,n);return new fe(r,i)}}]),e}();a(Ht,"defaultPrefix",O),a(Ht,"defaultTags",A);var $t={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},Ut={get binary(){return we},set binary(e){Object.assign(we,e)},get bool(){return xe},set bool(e){Object.assign(xe,e)},get int(){return ke},set int(e){Object.assign(ke,e)},get null(){return Se},set null(e){Object.assign(Se,e)},get str(){return Ce},set str(e){Object.assign(Ce,e)}},Wt={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:O},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:O}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:O}]}};function Vt(e,t){if("1.0"===(e.version||e.options.version)){var n=t.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(n)return"!"+n[1];var r=t.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return r?"!".concat(r[1],"/").concat(r[2]):"!".concat(t.replace(/^tag:/,""))}var i=e.tagPrefixes.find((function(e){return 0===t.indexOf(e.prefix)}));if(!i){var o=e.getDefaults().tagPrefixes;i=o&&o.find((function(e){return 0===t.indexOf(e.prefix)}))}if(!i)return"!"===t[0]?t:"!<".concat(t,">");var s=t.substr(i.prefix.length).replace(/[!,[\]{}]/g,(function(e){return{"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"}[e]}));return i.handle+s}function qt(e,t,n,i){var o,s=t.doc,a=s.anchors,l=s.schema;if(!(e instanceof oe)){var c={aliasNodes:[],onTagObj:function(e){return o=e},prevObjects:new Map};e=l.createNode(e,!0,null,c);var u,h=C(c.aliasNodes);try{for(h.s();!(u=h.n()).done;){var d=u.value;d.source=d.source.node;var f=a.getName(d.source);f||(f=a.newName(),a.map[f]=d.source)}}catch(g){h.e(g)}finally{h.f()}}if(e instanceof fe)return e.toString(t,n,i);o||(o=function(e,t){if(t instanceof me)return me;if(t.tag){var n=e.filter((function(e){return e.tag===t.tag}));if(n.length>0)return n.find((function(e){return e.format===t.format}))||n[0]}var i,o;if(t instanceof ae){o=t.value;var s=e.filter((function(e){return e.identify&&e.identify(o)||e.class&&o instanceof e.class}));i=s.find((function(e){return e.format===t.format}))||s.find((function(e){return!e.format}))}else o=t,i=e.find((function(e){return e.nodeClass&&o instanceof e.nodeClass}));if(!i){var a=o&&o.constructor?o.constructor.name:r(o);throw new Error("Tag not resolved for ".concat(a," value"))}return i}(l.tags,e));var p=function(e,t,n){var r=n.anchors,i=n.doc,o=[],s=i.anchors.getName(e);return s&&(r[s]=e,o.push("&".concat(s))),e.tag?o.push(Vt(i,e.tag)):t.default||o.push(Vt(i,t.tag)),o.join(" ")}(e,o,t);p.length>0&&(t.indentAtStart=(t.indentAtStart||0)+p.length+1);var m="function"===typeof o.stringify?o.stringify(e,t,n,i):e instanceof ae?De(e,t,n,i):e.toString(t,n,i);return p?e instanceof ae||"{"===m[0]||"["===m[0]?"".concat(p," ").concat(m):"".concat(p,"\n").concat(t.indent).concat(m):m}var Kt=function(){function e(t){i(this,e),a(this,"map",Object.create(null)),this.prefix=t}return s(e,[{key:"createAlias",value:function(e,t){return this.setAnchor(e,t),new me(e)}},{key:"createMergePair",value:function(){for(var e=this,t=new be,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.value.items=r.map((function(t){if(t instanceof me){if(t.source instanceof ve)return t}else if(t instanceof ve)return e.createAlias(t);throw new Error("Merge sources must be Map nodes or their Aliases")})),t}},{key:"getName",value:function(e){var t=this.map;return Object.keys(t).find((function(n){return t[n]===e}))}},{key:"getNames",value:function(){return Object.keys(this.map)}},{key:"getNode",value:function(e){return this.map[e]}},{key:"newName",value:function(e){e||(e=this.prefix);for(var t=Object.keys(this.map),n=1;;++n){var r="".concat(e).concat(n);if(!t.includes(r))return r}}},{key:"resolveNodes",value:function(){var e=this.map,t=this._cstAliases;Object.keys(e).forEach((function(t){e[t]=e[t].resolved})),t.forEach((function(e){e.source=e.source.resolved})),delete this._cstAliases}},{key:"setAnchor",value:function(t,n){if(null!=t&&!e.validAnchorNode(t))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(n&&/[\x00-\x19\s,[\]{}]/.test(n))throw new Error("Anchor names must not contain whitespace or control characters");var r=this.map,i=t&&Object.keys(r).find((function(e){return r[e]===t}));if(i){if(!n)return i;i!==n&&(delete r[i],r[n]=t)}else{if(!n){if(!t)return null;n=this.newName()}r[n]=t}return n}}],[{key:"validAnchorNode",value:function(e){return e instanceof ae||e instanceof de||e instanceof ve}}]),e}(),Qt=function e(t,n){if(t&&"object"===r(t)){var i=t.tag;t instanceof ue?(i&&(n[i]=!0),t.items.forEach((function(t){return e(t,n)}))):t instanceof fe?(e(t.key,n),e(t.value,n)):t instanceof ae&&i&&(n[i]=!0)}return n},Gt=function(e){return Object.keys(Qt(e,{}))};function Jt(e,t){var n=e.tagPrefixes,r=y(t.parameters,2),i=r[0],o=r[1];if(!i||!o){throw new L(t,"Insufficient parameters given for %TAG directive")}if(n.some((function(e){return e.handle===i}))){throw new L(t,"The %TAG directive must only be given at most once per handle in the same document.")}return{handle:i,prefix:o}}function Yt(e,t){var n=y(t.parameters,1)[0];if("YAML:1.0"===t.name&&(n="1.0"),!n){throw new L(t,"Insufficient parameters given for %YAML directive")}if(!Wt[n]){var r=e.version||e.options.version,i="Document will be parsed as YAML ".concat(r," rather than YAML ").concat(n);e.warnings.push(new F(t,i))}return n}function Xt(e){if(e instanceof ue)return!0;throw new Error("Expected a YAML collection as document contents")}var Zt=function(){function e(t){i(this,e),this.anchors=new Kt(t.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=t,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}return s(e,[{key:"add",value:function(e){return Xt(this.contents),this.contents.add(e)}},{key:"addIn",value:function(e,t){Xt(this.contents),this.contents.addIn(e,t)}},{key:"delete",value:function(e){return Xt(this.contents),this.contents.delete(e)}},{key:"deleteIn",value:function(e){return ce(e)?null!=this.contents&&(this.contents=null,!0):(Xt(this.contents),this.contents.deleteIn(e))}},{key:"getDefaults",value:function(){return e.defaults[this.version]||e.defaults[this.options.version]||{}}},{key:"get",value:function(e,t){return this.contents instanceof ue?this.contents.get(e,t):void 0}},{key:"getIn",value:function(e,t){return ce(e)?!t&&this.contents instanceof ae?this.contents.value:this.contents:this.contents instanceof ue?this.contents.getIn(e,t):void 0}},{key:"has",value:function(e){return this.contents instanceof ue&&this.contents.has(e)}},{key:"hasIn",value:function(e){return ce(e)?void 0!==this.contents:this.contents instanceof ue&&this.contents.hasIn(e)}},{key:"set",value:function(e,t){Xt(this.contents),this.contents.set(e,t)}},{key:"setIn",value:function(e,t){ce(e)?this.contents=t:(Xt(this.contents),this.contents.setIn(e,t))}},{key:"setSchema",value:function(e,t){if(e||t||!this.schema){"number"===typeof e&&(e=e.toFixed(1)),"1.0"===e||"1.1"===e||"1.2"===e?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&"string"===typeof e&&(this.options.schema=e),Array.isArray(t)&&(this.options.customTags=t);var n=Object.assign({},this.getDefaults(),this.options);this.schema=new Ht(n)}}},{key:"parse",value:function(e,t){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");var n=e.directives,r=void 0===n?[]:n,i=e.contents,o=void 0===i?[]:i,s=e.directivesEndMarker,a=e.error,l=e.valueRange;if(a&&(a.source||(a.source=this),this.errors.push(a)),function(e,t,n){var r,i=[],o=!1,s=C(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,c=l.comment,u=l.name;switch(u){case"TAG":try{e.tagPrefixes.push(Jt(e,l))}catch(a){e.errors.push(a)}o=!0;break;case"YAML":case"YAML:1.0":e.version&&e.errors.push(new L(l,"The %YAML directive must only be given at most once per document."));try{e.version=Yt(e,l)}catch(a){e.errors.push(a)}o=!0;break;default:if(u){var h="YAML only supports %TAG and %YAML directives, and not %".concat(u);e.warnings.push(new F(l,h))}}c&&i.push(c)}}catch(d){s.e(d)}finally{s.f()}n&&!o&&"1.1"===(e.version||n.version||e.options.version)&&(e.tagPrefixes=n.tagPrefixes.map((function(e){return{handle:e.handle,prefix:e.prefix}})),e.version=n.version);e.commentBefore=i.join("\n")||null}(this,r,t),s&&(this.directivesEndMarker=!0),this.range=l?[l.start,l.end]:null,this.setSchema(),this.anchors._cstAliases=[],function(e,t){var n,r={before:[],after:[]},i=void 0,o=!1,s=C(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;if(a.valueRange){if(void 0!==i){e.errors.push(new B(a,"Document contains trailing content not separated by a ... or --- line"));break}var l=Ke(e,a);o&&(l.spaceBefore=!0,o=!1),i=l}else null!==a.comment?(void 0===i?r.before:r.after).push(a.comment):a.type===T.BLANK_LINE&&(o=!0,void 0===i&&r.before.length>0&&!e.commentBefore&&(e.commentBefore=r.before.join("\n"),r.before=[]))}}catch(h){s.e(h)}finally{s.f()}if(e.contents=i||null,i){var c=r.before.join("\n");if(c){var u=i instanceof ue&&i.items[0]?i.items[0]:i;u.commentBefore=u.commentBefore?"".concat(c,"\n").concat(u.commentBefore):c}e.comment=r.after.join("\n")||null}else e.comment=r.before.concat(r.after).join("\n")||null}(this,o),this.anchors.resolveNodes(),this.options.prettyErrors){var c,u=C(this.errors);try{for(u.s();!(c=u.n()).done;){var h=c.value;h instanceof I&&h.makePretty()}}catch(m){u.e(m)}finally{u.f()}var d,f=C(this.warnings);try{for(f.s();!(d=f.n()).done;){var p=d.value;p instanceof I&&p.makePretty()}}catch(m){f.e(m)}finally{f.f()}}return this}},{key:"listNonDefaultTags",value:function(){return Gt(this.contents).filter((function(e){return 0!==e.indexOf(Ht.defaultPrefix)}))}},{key:"setTagPrefix",value:function(e,t){if("!"!==e[0]||"!"!==e[e.length-1])throw new Error("Handle must start and end with !");if(t){var n=this.tagPrefixes.find((function(t){return t.handle===e}));n?n.prefix=t:this.tagPrefixes.push({handle:e,prefix:t})}else this.tagPrefixes=this.tagPrefixes.filter((function(t){return t.handle!==e}))}},{key:"toJSON",value:function(e,t){var n=this,r=this.options,i=r.keepBlobsInJSON,o=r.mapAsMap,s=r.maxAliasCount,a=i&&("string"!==typeof e||!(this.contents instanceof ae)),l={doc:this,indentStep:"  ",keep:a,mapAsMap:a&&!!o,maxAliasCount:s,stringify:qt},c=Object.keys(this.anchors.map);c.length>0&&(l.anchors=new Map(c.map((function(e){return[n.anchors.map[e],{alias:[],aliasCount:0,count:1}]}))));var u=se(this.contents,e,l);if("function"===typeof t&&l.anchors){var h,d=C(l.anchors.values());try{for(d.s();!(h=d.n()).done;){var f=h.value,p=f.count;t(f.res,p)}}catch(m){d.e(m)}finally{d.f()}}return u}},{key:"toString",value:function(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");var e=this.options.indent;if(!Number.isInteger(e)||e<=0){var t=JSON.stringify(e);throw new Error('"indent" option must be a positive integer, not '.concat(t))}this.setSchema();var n=[],r=!1;if(this.version){var i="%YAML 1.2";"yaml-1.1"===this.schema.name&&("1.0"===this.version?i="%YAML:1.0":"1.1"===this.version&&(i="%YAML 1.1")),n.push(i),r=!0}var o=this.listNonDefaultTags();this.tagPrefixes.forEach((function(e){var t=e.handle,i=e.prefix;o.some((function(e){return 0===e.indexOf(i)}))&&(n.push("%TAG ".concat(t," ").concat(i)),r=!0)})),(r||this.directivesEndMarker)&&n.push("---"),this.commentBefore&&(!r&&this.directivesEndMarker||n.unshift(""),n.unshift(this.commentBefore.replace(/^/gm,"#")));var s={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(e),stringify:qt},a=!1,l=null;if(this.contents){this.contents instanceof oe&&(this.contents.spaceBefore&&(r||this.directivesEndMarker)&&n.push(""),this.contents.commentBefore&&n.push(this.contents.commentBefore.replace(/^/gm,"#")),s.forceBlockIndent=!!this.comment,l=this.contents.comment);var c=l?null:function(){return a=!0},u=qt(this.contents,s,(function(){return l=null}),c);n.push(ie(u,"",l))}else void 0!==this.contents&&n.push(qt(this.contents,s));return this.comment&&(a&&!l||""===n[n.length-1]||n.push(""),n.push(this.comment.replace(/^/gm,"#"))),n.join("\n")+"\n"}}]),e}();a(Zt,"defaults",Wt);var en=function(e){l(n,e);var t=g(n);function n(e){return i(this,n),t.call(this,Object.assign({},$t,e))}return n}(Zt);function tn(e,t){var n=re(e),r=new en(t).parse(n[0]);if(n.length>1){r.errors.unshift(new L(n[1],"Source contains multiple documents; please use YAML.parseAllDocuments()"))}return r}var nn={createNode:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;void 0===n&&"string"===typeof t&&(n=t,t=!0);var r=Object.assign({},Zt.defaults[$t.version],$t);return new Ht(r).createNode(e,t,n)},defaultOptions:$t,Document:en,parse:function(e,t){var n=tn(e,t);if(n.warnings.forEach((function(e){return dt(e)})),n.errors.length>0)throw n.errors[0];return n.toJSON()},parseAllDocuments:function(e,t){var n,r,i=[],o=C(re(e));try{for(o.s();!(r=o.n()).done;){var s=r.value,a=new en(t);a.parse(s,n),i.push(a),n=a}}catch(l){o.e(l)}finally{o.f()}return i},parseCST:re,parseDocument:tn,scalarOptions:Ut,stringify:function(e,t){var n=new en(t);return n.contents=e,String(n)}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e;const t=("/"===window.urlBase?"":window.urlBase)||"",r=(e=window.port,`${t}/api/v0`),i=`${t}/hub`,o="slskd-token",s="n/a",a="slskd-active-chat",l="slskd-active-room",c="slskd-active-user",u=()=>sessionStorage.getItem(o)||localStorage.getItem(o),h=(e,t)=>e.setItem(o,t),d=()=>{localStorage.removeItem(o),sessionStorage.removeItem(o)},f=()=>u()===s,p=[0,2e3,1e4,3e4,null];class m{constructor(e){this._retryDelays=void 0!==e?[...e,null]:p}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class g{}g.Authorization="Authorization",g.Cookie="Cookie";class v{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}class y{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}class b extends y{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const n=await this._innerClient.send(e);return t&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[g.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[g.Authorization]&&delete e.headers[g.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}class w extends Error{constructor(e,t){const n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}}class x extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A timeout occurred.";const t=new.target.prototype;super(e),this.__proto__=t}}class k extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An abort occurred.";const t=new.target.prototype;super(e),this.__proto__=t}}class S extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}}class C extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}}class E extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}}class T extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class O extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}}var A;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(A||(A={}));class _{constructor(){}log(e,t){}}_.instance=new _;const P="7.0.7";class N{static isRequired(e,t){if(null===e||void 0===e)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}}class M{static get isBrowser(){return"object"===typeof window&&"object"===typeof window.document}static get isWebWorker(){return"object"===typeof self&&"importScripts"in self}static get isReactNative(){return"object"===typeof window&&"undefined"===typeof window.document}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function j(e,t){let n="";return R(e)?(n=`Binary data of length ${e.byteLength}`,t&&(n+=`. Content: '${function(e){const t=new Uint8Array(e);let n="";return t.forEach((e=>{n+=`0x${e<16?"0":""}${e.toString(16)} `})),n.substr(0,n.length-1)}(e)}'`)):"string"===typeof e&&(n=`String data of length ${e.length}`,t&&(n+=`. Content: '${e}'`)),n}function R(e){return e&&"undefined"!==typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}async function I(e,t,n,r,i,o){const s={},[a,l]=B();s[a]=l,e.log(A.Trace,`(${t} transport) sending data. ${j(i,o.logMessageContent)}.`);const c=R(i)?"arraybuffer":"text",u=await n.post(r,{content:i,headers:{...s,...o.headers},responseType:c,timeout:o.timeout,withCredentials:o.withCredentials});e.log(A.Trace,`(${t} transport) request complete. Response status: ${u.statusCode}.`)}class D{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((e=>{}))}}class L{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const n=`[${(new Date).toISOString()}] ${A[e]}: ${t}`;switch(e){case A.Critical:case A.Error:this.out.error(n);break;case A.Warning:this.out.warn(n);break;case A.Information:this.out.info(n);break;default:this.out.log(n)}}}}function B(){let e="X-SignalR-User-Agent";return M.isNode&&(e="User-Agent"),[e,F(P,z(),$(),H())]}function F(e,t,n,r){let i="Microsoft SignalR/";const o=e.split(".");return i+=`${o[0]}.${o[1]}`,i+=` (${e}; `,i+=t&&""!==t?`${t}; `:"Unknown OS; ",i+=`${n}`,i+=r?`; ${r}`:"; Unknown Runtime Version",i+=")",i}function z(){if(!M.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function H(){if(M.isNode)return process.versions.node}function $(){return M.isNode?"NodeJS":"Browser"}function U(e){return e.stack?e.stack:e.message?e.message:`${e}`}class W extends y{constructor(e){if(super(),this._logger=e,"undefined"===typeof fetch){const e=require;this._jar=new(e("tough-cookie").CookieJar),this._fetchType=e("node-fetch"),this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("could not find global")}());if("undefined"===typeof AbortController){const e=require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new k;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new k});let r,i=null;if(e.timeout){const r=e.timeout;i=setTimeout((()=>{t.abort(),this._logger.log(A.Warning,"Timeout from HTTP request."),n=new x}),r)}""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},R(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{r=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(a){if(n)throw n;throw this._logger.log(A.Warning,`Error from HTTP request. ${a}.`),a}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!r.ok){const e=await V(r,"text");throw new w(e||r.statusText,r.status)}const o=V(r,e.responseType),s=await o;return new v(r.status,r.statusText,s)}getCookieString(e){let t="";return M.isNode&&this._jar&&this._jar.getCookies(e,((e,n)=>t=n.join("; "))),t}}function V(e,t){let n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`)}return n}class q extends y{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new k):e.method?e.url?new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=void 0===e.withCredentials||e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(R(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const i=e.headers;i&&Object.keys(i).forEach((e=>{r.setRequestHeader(e,i[e])})),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),n(new k)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new v(r.status,r.statusText,r.response||r.responseText)):n(new w(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(A.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),n(new w(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(A.Warning,"Timeout from HTTP request."),n(new x)},r.send(e.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class K extends y{constructor(e){if(super(),"undefined"!==typeof fetch||M.isNode)this._httpClient=new W(e);else{if("undefined"===typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this._httpClient=new q(e)}}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new k):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}var Q,G;!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(Q||(Q={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(G||(G={}));class J{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class Y{constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new J,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}async connect(e,t){if(N.isRequired(e,"url"),N.isRequired(t,"transferFormat"),N.isIn(t,G,"transferFormat"),this._url=e,this._logger.log(A.Trace,"(LongPolling transport) Connecting."),t===G.Binary&&"undefined"!==typeof XMLHttpRequest&&"string"!==typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,r]=B(),i={[n]:r,...this._options.headers},o={abortSignal:this._pollAbort.signal,headers:i,timeout:1e5,withCredentials:this._options.withCredentials};t===G.Binary&&(o.responseType="arraybuffer");const s=`${e}&_=${Date.now()}`;this._logger.log(A.Trace,`(LongPolling transport) polling: ${s}.`);const a=await this._httpClient.get(s,o);200!==a.statusCode?(this._logger.log(A.Error,`(LongPolling transport) Unexpected response code: ${a.statusCode}.`),this._closeError=new w(a.statusText||"",a.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)}async _poll(e,t){try{for(;this._running;)try{const n=`${e}&_=${Date.now()}`;this._logger.log(A.Trace,`(LongPolling transport) polling: ${n}.`);const r=await this._httpClient.get(n,t);204===r.statusCode?(this._logger.log(A.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==r.statusCode?(this._logger.log(A.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new w(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(A.Trace,`(LongPolling transport) data received. ${j(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(A.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){this._running?n instanceof x?this._logger.log(A.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=n,this._running=!1):this._logger.log(A.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{this._logger.log(A.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?I(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(A.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(A.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,n]=B();e[t]=n;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};await this._httpClient.delete(this._url,r),this._logger.log(A.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(A.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(A.Trace,e),this.onclose(this._closeError)}}}class X{constructor(e,t,n,r){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,t){return N.isRequired(e,"url"),N.isRequired(t,"transferFormat"),N.isIn(t,G,"transferFormat"),this._logger.log(A.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise(((n,r)=>{let i,o=!1;if(t===G.Text){if(M.isBrowser||M.isWebWorker)i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const t=this._httpClient.getCookieString(e),n={};n.Cookie=t;const[r,o]=B();n[r]=o,i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...n,...this._options.headers}})}try{i.onmessage=e=>{if(this.onreceive)try{this._logger.log(A.Trace,`(SSE transport) data received. ${j(e.data,this._options.logMessageContent)}.`),this.onreceive(e.data)}catch(t){return void this._close(t)}},i.onerror=e=>{o?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},i.onopen=()=>{this._logger.log(A.Information,`SSE connected to ${this._url}`),this._eventSource=i,o=!0,n()}}catch(s){return void r(s)}}else r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))}async send(e){return this._eventSource?I(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class Z{constructor(e,t,n,r,i,o){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=r,this._webSocketConstructor=i,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}async connect(e,t){let n;return N.isRequired(e,"url"),N.isRequired(t,"transferFormat"),N.isIn(t,G,"transferFormat"),this._logger.log(A.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise(((r,i)=>{let o;e=e.replace(/^http/,"ws");const s=this._httpClient.getCookieString(e);let a=!1;if(M.isNode||M.isReactNative){const t={},[r,i]=B();t[r]=i,n&&(t[g.Authorization]=`Bearer ${n}`),s&&(t[g.Cookie]=s),o=new this._webSocketConstructor(e,void 0,{headers:{...t,...this._headers}})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);o||(o=new this._webSocketConstructor(e)),t===G.Binary&&(o.binaryType="arraybuffer"),o.onopen=t=>{this._logger.log(A.Information,`WebSocket connected to ${e}.`),this._webSocket=o,a=!0,r()},o.onerror=e=>{let t=null;t="undefined"!==typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"There was an error with the transport",this._logger.log(A.Information,`(WebSockets transport) ${t}.`)},o.onmessage=e=>{if(this._logger.log(A.Trace,`(WebSockets transport) data received. ${j(e.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(e.data)}catch(t){return void this._close(t)}},o.onclose=e=>{if(a)this._close(e);else{let t=null;t="undefined"!==typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",i(new Error(t))}}}))}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(A.Trace,`(WebSockets transport) sending data. ${j(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(A.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))}_isCloseEvent(e){return e&&"boolean"===typeof e.wasClean&&"number"===typeof e.code}}class ee{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,N.isRequired(e,"url"),this._logger=void 0===(n=t.logger)?new L(A.Information):null===n?_.instance:void 0!==n.log?n:new L(n),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"!==typeof t.withCredentials&&void 0!==t.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=void 0===t.withCredentials||t.withCredentials,t.timeout=void 0===t.timeout?1e5:t.timeout;let r=null,i=null;if(M.isNode){const e=require;r=e("ws"),i=e("eventsource")}M.isNode||"undefined"===typeof WebSocket||t.WebSocket?M.isNode&&!t.WebSocket&&r&&(t.WebSocket=r):t.WebSocket=WebSocket,M.isNode||"undefined"===typeof EventSource||t.EventSource?M.isNode&&!t.EventSource&&"undefined"!==typeof i&&(t.EventSource=i):t.EventSource=EventSource,this._httpClient=new b(t.httpClient||new K(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||G.Binary,N.isIn(e,G,"transferFormat"),this._logger.log(A.Debug,`Starting connection with transfer format '${G[e]}'.`),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,"Disconnecting"===this._connectionState){const e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(A.Error,e),await this._stopPromise,Promise.reject(new k(e))}if("Connected"!==this._connectionState){const e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(A.Error,e),Promise.reject(new k(e))}this._connectionStarted=!0}send(e){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new te(this.transport)),this._sendQueue.send(e))}async stop(e){return"Disconnected"===this._connectionState?(this._logger.log(A.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(A.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise((e=>{this._stopPromiseResolver=e})),await this._stopInternal(e),void await this._stopPromise)}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch(t){}if(this.transport){try{await this.transport.stop()}catch(t){this._logger.log(A.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(A.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==Q.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(Q.WebSockets),await this._startTransport(t,e)}else{let n=null,r=0;do{if(n=await this._getNegotiationResponse(t),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new k("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){const e=n.accessToken;this._accessTokenFactory=()=>e,this._httpClient._accessToken=e,this._httpClient._accessTokenFactory=void 0}r++}while(n.url&&r<100);if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,n,e)}this.transport instanceof Y&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(A.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(n){return this._logger.log(A.Error,"Failed to start the connection: "+n),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(n)}}async _getNegotiationResponse(e){const t={},[n,r]=B();t[n]=r;const i=this._resolveNegotiateUrl(e);this._logger.log(A.Debug,`Sending negotiation request: ${i}.`);try{const e=await this._httpClient.post(i,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==e.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${e.statusCode}'`));const n=JSON.parse(e.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n}catch(o){let e="Failed to complete negotiation with the server: "+o;return o instanceof w&&404===o.statusCode&&(e+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(A.Error,e),Promise.reject(new T(e))}}_createConnectUrl(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+`id=${t}`:e}async _createTransport(e,t,n,r){let i=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t))return this._logger.log(A.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(i,r),void(this.connectionId=n.connectionId);const o=[],s=n.availableTransports||[];let a=n;for(const c of s){const n=this._resolveTransportOrError(c,t,r);if(n instanceof Error)o.push(`${c.transport} failed:`),o.push(n);else if(this._isITransport(n)){if(this.transport=n,!a){try{a=await this._getNegotiationResponse(e)}catch(l){return Promise.reject(l)}i=this._createConnectUrl(e,a.connectionToken)}try{return await this._startTransport(i,r),void(this.connectionId=a.connectionId)}catch(l){if(this._logger.log(A.Error,`Failed to start the transport '${c.transport}': ${l}`),a=void 0,o.push(new E(`${c.transport} failed: ${l}`,Q[c.transport])),"Connecting"!==this._connectionState){const e="Failed to select transport before stop() was called.";return this._logger.log(A.Debug,e),Promise.reject(new k(e))}}}}return o.length>0?Promise.reject(new O(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case Q.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Z(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Q.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new X(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Q.LongPolling:return new Y(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.transport.onclose=e=>this._stopConnection(e),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n){const r=Q[e.transport];if(null===r||void 0===r)return this._logger.log(A.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(!function(e,t){return!e||0!==(t&e)}(t,r))return this._logger.log(A.Debug,`Skipping transport '${Q[r]}' because it was disabled by the client.`),new C(`'${Q[r]}' is disabled by the client.`,r);if(!(e.transferFormats.map((e=>G[e])).indexOf(n)>=0))return this._logger.log(A.Debug,`Skipping transport '${Q[r]}' because it does not support the requested transfer format '${G[n]}'.`),new Error(`'${Q[r]}' does not support ${G[n]}.`);if(r===Q.WebSockets&&!this._options.WebSocket||r===Q.ServerSentEvents&&!this._options.EventSource)return this._logger.log(A.Debug,`Skipping transport '${Q[r]}' because it is not supported in your environment.'`),new S(`'${Q[r]}' is not supported in your environment.`,r);this._logger.log(A.Debug,`Selecting transport '${Q[r]}'.`);try{return this._constructTransport(r)}catch(i){return i}}_isITransport(e){return e&&"object"===typeof e&&"connect"in e}_stopConnection(e){if(this._logger.log(A.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(A.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(A.Error,`Connection disconnected with error '${e}'.`):this._logger.log(A.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((e=>{this._logger.log(A.Error,`TransportSendQueue.stop() threw error '${e}'.`)})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(A.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}else this._logger.log(A.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!M.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(A.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=e.indexOf("?");let n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",n+=-1===t?"":e.substring(t),-1===n.indexOf("negotiateVersion")&&(n+=-1===t?"?":"&",n+="negotiateVersion="+this._negotiateVersion),n}}class te{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new ne,this._transportResult=new ne,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new ne),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!==typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ne;const t=this._transportResult;this._transportResult=void 0;const n="string"===typeof this._buffer[0]?this._buffer.join(""):te._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(n),t.resolve()}catch(e){t.reject(e)}}}static _concatBuffers(e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t)),n=new Uint8Array(t);let r=0;for(const i of e)n.set(new Uint8Array(i),r),r+=i.byteLength;return n.buffer}}class ne{constructor(){this.promise=new Promise(((e,t)=>[this._resolver,this._rejecter]=[e,t]))}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class re{static write(e){return`${e}${re.RecordSeparator}`}static parse(e){if(e[e.length-1]!==re.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(re.RecordSeparator);return t.pop(),t}}re.RecordSeparatorCode=30,re.RecordSeparator=String.fromCharCode(re.RecordSeparatorCode);class ie{writeHandshakeRequest(e){return re.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(R(e)){const r=new Uint8Array(e),i=r.indexOf(re.RecordSeparatorCode);if(-1===i)throw new Error("Message is incomplete.");const o=i+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,o))),n=r.byteLength>o?r.slice(o).buffer:null}else{const r=e,i=r.indexOf(re.RecordSeparator);if(-1===i)throw new Error("Message is incomplete.");const o=i+1;t=r.substring(0,o),n=r.length>o?r.substring(o):null}const r=re.parse(t),i=JSON.parse(r[0]);if(i.type)throw new Error("Expected a handshake response from the server.");return[n,i]}}var oe;!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close"}(oe||(oe={}));class se{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new D(this,e)}}var ae;!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(ae||(ae={}));class le{constructor(e,t,n,r){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(A.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},N.isRequired(e,"connection"),N.isRequired(t,"logger"),N.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new ie,this.connection.onreceive=e=>this._processIncomingData(e),this.connection.onclose=e=>this._connectionClosed(e),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=ae.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:oe.Ping})}static create(e,t,n,r){return new le(e,t,n,r)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==ae.Disconnected&&this._connectionState!==ae.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==ae.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=ae.Connecting,this._logger.log(A.Debug,"Starting HubConnection.");try{await this._startInternal(),M.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=ae.Connected,this._connectionStarted=!0,this._logger.log(A.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=ae.Disconnected,this._logger.log(A.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise(((e,t)=>{this._handshakeResolver=e,this._handshakeRejecter=t}));await this.connection.start(this._protocol.transferFormat);try{const t={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(A.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)),this._logger.log(A.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(t){throw this._logger.log(A.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(t),t}}async stop(){const e=this._startPromise;this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch(t){}}_stopInternal(e){return this._connectionState===ae.Disconnected?(this._logger.log(A.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===ae.Disconnecting?(this._logger.log(A.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=ae.Disconnecting,this._logger.log(A.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(A.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new k("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}stream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const[i,o]=this._replaceStreamingParams(n),s=this._createStreamInvocation(e,n,o);let a;const l=new se;return l.cancelCallback=()=>{const e=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],a.then((()=>this._sendWithProtocol(e)))},this._callbacks[s.invocationId]=(e,t)=>{t?l.error(t):e&&(e.type===oe.Completion?e.error?l.error(new Error(e.error)):l.complete():l.next(e.item))},a=this._sendWithProtocol(s).catch((e=>{l.error(e),delete this._callbacks[s.invocationId]})),this._launchStreams(i,a),l}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._sendMessage(this._protocol.writeMessage(e))}send(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const[i,o]=this._replaceStreamingParams(n),s=this._sendWithProtocol(this._createInvocation(e,n,!0,o));return this._launchStreams(i,s),s}invoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const[i,o]=this._replaceStreamingParams(n),s=this._createInvocation(e,n,!1,o);return new Promise(((e,t)=>{this._callbacks[s.invocationId]=(n,r)=>{r?t(r):n&&(n.type===oe.Completion?n.error?t(new Error(n.error)):e(n.result):t(new Error(`Unexpected message type: ${n.type}`)))};const n=this._sendWithProtocol(s).catch((e=>{t(e),delete this._callbacks[s.invocationId]}));this._launchStreams(i,n)}))}on(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const n=this._methods[e];if(n)if(t){const r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const n=this._protocol.parseMessages(e,this._logger);for(const e of n)switch(e.type){case oe.Invocation:this._invokeClientMethod(e);break;case oe.StreamItem:case oe.Completion:{const n=this._callbacks[e.invocationId];if(n){e.type===oe.Completion&&delete this._callbacks[e.invocationId];try{n(e)}catch(t){this._logger.log(A.Error,`Stream callback threw error: ${U(t)}`)}}break}case oe.Ping:break;case oe.Close:{this._logger.log(A.Information,"Close message received from server.");const t=e.error?new Error("Server returned an error on close: "+e.error):void 0;!0===e.allowReconnect?this.connection.stop(t):this._stopPromise=this._stopInternal(t);break}default:this._logger.log(A.Warning,`Invalid message type: ${e.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(r){const e="Error parsing handshake response: "+r;this._logger.log(A.Error,e);const t=new Error(e);throw this._handshakeRejecter(t),t}if(t.error){const e="Server returned handshake error: "+t.error;this._logger.log(A.Error,e);const n=new Error(e);throw this._handshakeRejecter(n),n}return this._logger.log(A.Debug,"Server handshake complete."),this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout((()=>this.serverTimeout()),this.serverTimeoutInMilliseconds),void 0===this._pingServerHandle)){let e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout((async()=>{if(this._connectionState===ae.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),n=this._methods[t];if(!n)return this._logger.log(A.Warning,`No client method with the name '${t}' found.`),void(e.invocationId&&(this._logger.log(A.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));const r=n.slice(),i=!!e.invocationId;let o,s,a;for(const c of r)try{const n=o;o=await c.apply(this,e.arguments),i&&o&&n&&(this._logger.log(A.Error,`Multiple results provided for '${t}'. Sending error to server.`),a=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),s=void 0}catch(l){s=l,this._logger.log(A.Error,`A callback for the method '${t}' threw error '${l}'.`)}a?await this._sendWithProtocol(a):i?(s?a=this._createCompletionMessage(e.invocationId,`${s}`,null):void 0!==o?a=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(A.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),a=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(a)):o&&this._logger.log(A.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(A.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new k("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===ae.Disconnecting?this._completeClose(e):this._connectionState===ae.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===ae.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=ae.Disconnected,this._connectionStarted=!1,M.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(A.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let n=0,r=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),i=this._getNextRetryDelay(n++,0,r);if(null===i)return this._logger.log(A.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(e);if(this._connectionState=ae.Reconnecting,e?this._logger.log(A.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(A.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach((t=>t.apply(this,[e])))}catch(o){this._logger.log(A.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==ae.Reconnecting)return void this._logger.log(A.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==i;){if(this._logger.log(A.Information,`Reconnect attempt number ${n} will start in ${i} ms.`),await new Promise((e=>{this._reconnectDelayHandle=setTimeout(e,i)})),this._reconnectDelayHandle=void 0,this._connectionState!==ae.Reconnecting)return void this._logger.log(A.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=ae.Connected,this._logger.log(A.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((e=>e.apply(this,[this.connection.connectionId])))}catch(o){this._logger.log(A.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(A.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==ae.Reconnecting)return this._logger.log(A.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this._connectionState===ae.Disconnecting&&this._completeClose());r=o instanceof Error?o:new Error(o.toString()),i=this._getNextRetryDelay(n++,Date.now()-t,r)}}this._logger.log(A.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(r){return this._logger.log(A.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${r}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach((n=>{const r=t[n];try{r(null,e)}catch(i){this._logger.log(A.Error,`Stream 'error' callback called with '${e}' threw error: ${U(i)}`)}}))}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,r){if(n)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:oe.Invocation}:{arguments:t,target:e,type:oe.Invocation};{const n=this._invocationId;return this._invocationId++,0!==r.length?{arguments:t,invocationId:n.toString(),streamIds:r,target:e,type:oe.Invocation}:{arguments:t,invocationId:n.toString(),target:e,type:oe.Invocation}}}_launchStreams(e,t){if(0!==e.length){t||(t=Promise.resolve());for(const n in e)e[n].subscribe({complete:()=>{t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n))))},error:e=>{let r;r=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n,r))))},next:e=>{t=t.then((()=>this._sendWithProtocol(this._createStreamItemMessage(n,e))))}})}}_replaceStreamingParams(e){const t=[],n=[];for(let r=0;r<e.length;r++){const i=e[r];if(this._isObservable(i)){const o=this._invocationId;this._invocationId++,t[o]=i,n.push(o.toString()),e.splice(r,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&"function"===typeof e.subscribe}_createStreamInvocation(e,t,n){const r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:oe.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:oe.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:oe.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:oe.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:oe.Completion}:{invocationId:e,result:n,type:oe.Completion}}}class ce{constructor(){this.name="json",this.version=1,this.transferFormat=G.Text}parseMessages(e,t){if("string"!==typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=_.instance);const n=re.parse(e),r=[];for(const i of n){const e=JSON.parse(i);if("number"!==typeof e.type)throw new Error("Invalid payload.");switch(e.type){case oe.Invocation:this._isInvocationMessage(e);break;case oe.StreamItem:this._isStreamItemMessage(e);break;case oe.Completion:this._isCompletionMessage(e);break;case oe.Ping:case oe.Close:break;default:t.log(A.Information,"Unknown message type '"+e.type+"' ignored.");continue}r.push(e)}return r}writeMessage(e){return re.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(e,t){if("string"!==typeof e||""===e)throw new Error(t)}}const ue={trace:A.Trace,debug:A.Debug,info:A.Information,information:A.Information,warn:A.Warning,warning:A.Warning,error:A.Error,critical:A.Critical,none:A.None};class he{configureLogging(e){if(N.isRequired(e,"logging"),void 0!==e.log)this.logger=e;else if("string"===typeof e){const t=function(e){const t=ue[e.toLowerCase()];if("undefined"!==typeof t)return t;throw new Error(`Unknown log level: ${e}`)}(e);this.logger=new L(t)}else this.logger=new L(e);return this}withUrl(e,t){return N.isRequired(e,"url"),N.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions="object"===typeof t?{...this.httpConnectionOptions,...t}:{...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return N.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new m(e):this.reconnectPolicy=e:this.reconnectPolicy=new m,this}build(){const e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new ee(this.url,e);return le.create(t,this.logger||_.instance,this.protocol||new ce,this.reconnectPolicy)}}const de=e=>{let{url:t}=e;return(new he).withUrl(t,{accessTokenFactory:f()?void 0:u,withCredentials:!0}).withAutomaticReconnect([0,100,250,500,1e3,2e3,3e3,5e3,5e3,5e3,5e3,5e3]).withHubProtocol(new ce).configureLogging(A.Warning).build()};var fe=n(854),pe=n.n(fe);pe().defaults.baseURL=r;const me=pe().create({withCredentials:!0});me.interceptors.request.use((e=>{const t=u();return e.headers["Content-Type"]="application/json",!f()&&t&&(e.headers.Authorization="Bearer "+t),e})),me.interceptors.response.use((e=>e),(e=>(401!==e.response.status||["/session","/server","/application"].includes(e.response.config.url)||(console.debug("received 401 from api route, logging out"),d(),window.location.reload(!0)),Promise.reject(e))));const ge=me,ve=()=>{const e=u();return void 0!==e&&null!==e&&e!==s},ye=()=>{console.debug("removing token from local and session storage"),d()},be=async()=>{try{return await ge.get("/session"),!0}catch(e){if(401===e.response.status)return console.error("session error; not logged in or session has expired"),ye(),!1;throw e}};var we=n(5043);const xe=we.createContext(),ke=e=>{let{username:t}=e;return ge.get(`/users/${encodeURIComponent(t)}/info`)},Se=e=>{let{username:t}=e;return ge.get(`/users/${encodeURIComponent(t)}/status`)},Ce=e=>{let{username:t}=e;return ge.get(`/users/${encodeURIComponent(t)}/endpoint`)};function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(null,arguments)}function Te(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Te(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const Oe=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Te(e))&&(r&&(r+=" "),r+=t);return r};var Ae={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function _e(e){var t=typeof e;return"string"===t||"number"===t?Ae[e]||e:""}var Pe=function(e,t){return e&&t},Ne=function(e,t){return e&&!0!==e&&e+" "+t},Me=function(e,t){return e&&(!0===e?t:e+" "+t)},je=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},Re=function(e){return"justified"===e?"justified":Ne(e,"aligned")},Ie=function(e){return Ne(e,"aligned")},De=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=!1),n&&"equal"===e)return"equal width";var r=typeof e;return"string"!==r&&"number"!==r||!t?_e(e):_e(e)+" "+t};const Le=function(e,t){var n=e.handledProps,r=void 0===n?[]:n;return Object.keys(t).reduce((function(e,n){return"childKey"===n||-1===r.indexOf(n)&&(e[n]=t[n]),e}),{})};const Be=function(e,t,n){var r=e.defaultProps,i=void 0===r?{}:r;if(t.as&&t.as!==i.as)return t.as;if(n){var o=n();if(o)return o}return t.href?"a":i.as||"div"};const Fe=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const ze=function(){this.__data__=[],this.size=0};const He=function(e,t){return e===t||e!==e&&t!==t};const $e=function(e,t){for(var n=e.length;n--;)if(He(e[n][0],t))return n;return-1};var Ue=Array.prototype.splice;const We=function(e){var t=this.__data__,n=$e(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ue.call(t,n,1),--this.size,!0)};const Ve=function(e){var t=this.__data__,n=$e(t,e);return n<0?void 0:t[n][1]};const qe=function(e){return $e(this.__data__,e)>-1};const Ke=function(e,t){var n=this.__data__,r=$e(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Qe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Qe.prototype.clear=ze,Qe.prototype.delete=We,Qe.prototype.get=Ve,Qe.prototype.has=qe,Qe.prototype.set=Ke;const Ge=Qe;const Je=function(){this.__data__=new Ge,this.size=0};const Ye=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const Xe=function(e){return this.__data__.get(e)};const Ze=function(e){return this.__data__.has(e)};const et="object"==typeof global&&global&&global.Object===Object&&global;var tt="object"==typeof self&&self&&self.Object===Object&&self;const nt=et||tt||Function("return this")();const rt=nt.Symbol;var it=Object.prototype,ot=it.hasOwnProperty,st=it.toString,at=rt?rt.toStringTag:void 0;const lt=function(e){var t=ot.call(e,at),n=e[at];try{e[at]=void 0;var r=!0}catch(o){}var i=st.call(e);return r&&(t?e[at]=n:delete e[at]),i};var ct=Object.prototype.toString;const ut=function(e){return ct.call(e)};var ht=rt?rt.toStringTag:void 0;const dt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ht&&ht in Object(e)?lt(e):ut(e)};const ft=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const pt=function(e){if(!ft(e))return!1;var t=dt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const mt=nt["__core-js_shared__"];var gt=function(){var e=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const vt=function(e){return!!gt&&gt in e};var yt=Function.prototype.toString;const bt=function(e){if(null!=e){try{return yt.call(e)}catch(t){}try{return e+""}catch(t){}}return""};var wt=/^\[object .+?Constructor\]$/,xt=Function.prototype,kt=Object.prototype,St=xt.toString,Ct=kt.hasOwnProperty,Et=RegExp("^"+St.call(Ct).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Tt=function(e){return!(!ft(e)||vt(e))&&(pt(e)?Et:wt).test(bt(e))};const Ot=function(e,t){return null==e?void 0:e[t]};const At=function(e,t){var n=Ot(e,t);return Tt(n)?n:void 0};const _t=At(nt,"Map");const Pt=At(Object,"create");const Nt=function(){this.__data__=Pt?Pt(null):{},this.size=0};const Mt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var jt=Object.prototype.hasOwnProperty;const Rt=function(e){var t=this.__data__;if(Pt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return jt.call(t,e)?t[e]:void 0};var It=Object.prototype.hasOwnProperty;const Dt=function(e){var t=this.__data__;return Pt?void 0!==t[e]:It.call(t,e)};const Lt=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Pt&&void 0===t?"__lodash_hash_undefined__":t,this};function Bt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bt.prototype.clear=Nt,Bt.prototype.delete=Mt,Bt.prototype.get=Rt,Bt.prototype.has=Dt,Bt.prototype.set=Lt;const Ft=Bt;const zt=function(){this.size=0,this.__data__={hash:new Ft,map:new(_t||Ge),string:new Ft}};const Ht=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const $t=function(e,t){var n=e.__data__;return Ht(t)?n["string"==typeof t?"string":"hash"]:n.map};const Ut=function(e){var t=$t(this,e).delete(e);return this.size-=t?1:0,t};const Wt=function(e){return $t(this,e).get(e)};const Vt=function(e){return $t(this,e).has(e)};const qt=function(e,t){var n=$t(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Kt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Kt.prototype.clear=zt,Kt.prototype.delete=Ut,Kt.prototype.get=Wt,Kt.prototype.has=Vt,Kt.prototype.set=qt;const Qt=Kt;const Gt=function(e,t){var n=this.__data__;if(n instanceof Ge){var r=n.__data__;if(!_t||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Qt(r)}return n.set(e,t),this.size=n.size,this};function Jt(e){var t=this.__data__=new Ge(e);this.size=t.size}Jt.prototype.clear=Je,Jt.prototype.delete=Ye,Jt.prototype.get=Xe,Jt.prototype.has=Ze,Jt.prototype.set=Gt;const Yt=Jt;const Xt=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const Zt=function(e){return this.__data__.has(e)};function en(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Qt;++t<n;)this.add(e[t])}en.prototype.add=en.prototype.push=Xt,en.prototype.has=Zt;const tn=en;const nn=function(e,t){return e.has(t)};const rn=function(e,t,n,r,i,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,f=2&n?new tn:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var p=e[h],m=t[h];if(r)var g=s?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!Fe(t,(function(e,t){if(!nn(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d};const on=nt.Uint8Array;const sn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const an=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var ln=rt?rt.prototype:void 0,cn=ln?ln.valueOf:void 0;const un=function(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new on(e),new on(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return He(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=sn;case"[object Set]":var l=1&r;if(a||(a=an),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=rn(a(e),a(t),r,i,o,s);return s.delete(e),u;case"[object Symbol]":if(cn)return cn.call(e)==cn.call(t)}return!1};const hn=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};const dn=Array.isArray;const fn=function(e,t,n){var r=t(e);return dn(e)?r:hn(r,n(e))};const pn=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o};const mn=function(){return[]};var gn=Object.prototype.propertyIsEnumerable,vn=Object.getOwnPropertySymbols;const yn=vn?function(e){return null==e?[]:(e=Object(e),pn(vn(e),(function(t){return gn.call(e,t)})))}:mn;const bn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const wn=function(e){return null!=e&&"object"==typeof e};const xn=function(e){return wn(e)&&"[object Arguments]"==dt(e)};var kn=Object.prototype,Sn=kn.hasOwnProperty,Cn=kn.propertyIsEnumerable;const En=xn(function(){return arguments}())?xn:function(e){return wn(e)&&Sn.call(e,"callee")&&!Cn.call(e,"callee")};const Tn=function(){return!1};var On="object"==typeof exports&&exports&&!exports.nodeType&&exports,An=On&&"object"==typeof module&&module&&!module.nodeType&&module,_n=An&&An.exports===On?nt.Buffer:void 0;const Pn=(_n?_n.isBuffer:void 0)||Tn;var Nn=/^(?:0|[1-9]\d*)$/;const Mn=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Nn.test(e))&&e>-1&&e%1==0&&e<t};const jn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Rn={};Rn["[object Float32Array]"]=Rn["[object Float64Array]"]=Rn["[object Int8Array]"]=Rn["[object Int16Array]"]=Rn["[object Int32Array]"]=Rn["[object Uint8Array]"]=Rn["[object Uint8ClampedArray]"]=Rn["[object Uint16Array]"]=Rn["[object Uint32Array]"]=!0,Rn["[object Arguments]"]=Rn["[object Array]"]=Rn["[object ArrayBuffer]"]=Rn["[object Boolean]"]=Rn["[object DataView]"]=Rn["[object Date]"]=Rn["[object Error]"]=Rn["[object Function]"]=Rn["[object Map]"]=Rn["[object Number]"]=Rn["[object Object]"]=Rn["[object RegExp]"]=Rn["[object Set]"]=Rn["[object String]"]=Rn["[object WeakMap]"]=!1;const In=function(e){return wn(e)&&jn(e.length)&&!!Rn[dt(e)]};const Dn=function(e){return function(t){return e(t)}};var Ln="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bn=Ln&&"object"==typeof module&&module&&!module.nodeType&&module,Fn=Bn&&Bn.exports===Ln&&et.process,zn=function(){try{var e=Bn&&Bn.require&&Bn.require("util").types;return e||Fn&&Fn.binding&&Fn.binding("util")}catch(t){}}();var Hn=zn&&zn.isTypedArray;const $n=Hn?Dn(Hn):In;var Un=Object.prototype.hasOwnProperty;const Wn=function(e,t){var n=dn(e),r=!n&&En(e),i=!n&&!r&&Pn(e),o=!n&&!r&&!i&&$n(e),s=n||r||i||o,a=s?bn(e.length,String):[],l=a.length;for(var c in e)!t&&!Un.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Mn(c,l))||a.push(c);return a};var Vn=Object.prototype;const qn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Vn)};const Kn=function(e,t){return function(n){return e(t(n))}};const Qn=Kn(Object.keys,Object);var Gn=Object.prototype.hasOwnProperty;const Jn=function(e){if(!qn(e))return Qn(e);var t=[];for(var n in Object(e))Gn.call(e,n)&&"constructor"!=n&&t.push(n);return t};const Yn=function(e){return null!=e&&jn(e.length)&&!pt(e)};const Xn=function(e){return Yn(e)?Wn(e):Jn(e)};const Zn=function(e){return fn(e,Xn,yn)};var er=Object.prototype.hasOwnProperty;const tr=function(e,t,n,r,i,o){var s=1&n,a=Zn(e),l=a.length;if(l!=Zn(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:er.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=s;++c<l;){var m=e[u=a[c]],g=t[u];if(r)var v=s?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f};const nr=At(nt,"DataView");const rr=At(nt,"Promise");const ir=At(nt,"Set");const or=At(nt,"WeakMap");var sr="[object Map]",ar="[object Promise]",lr="[object Set]",cr="[object WeakMap]",ur="[object DataView]",hr=bt(nr),dr=bt(_t),fr=bt(rr),pr=bt(ir),mr=bt(or),gr=dt;(nr&&gr(new nr(new ArrayBuffer(1)))!=ur||_t&&gr(new _t)!=sr||rr&&gr(rr.resolve())!=ar||ir&&gr(new ir)!=lr||or&&gr(new or)!=cr)&&(gr=function(e){var t=dt(e),n="[object Object]"==t?e.constructor:void 0,r=n?bt(n):"";if(r)switch(r){case hr:return ur;case dr:return sr;case fr:return ar;case pr:return lr;case mr:return cr}return t});const vr=gr;var yr="[object Arguments]",br="[object Array]",wr="[object Object]",xr=Object.prototype.hasOwnProperty;const kr=function(e,t,n,r,i,o){var s=dn(e),a=dn(t),l=s?br:vr(e),c=a?br:vr(t),u=(l=l==yr?wr:l)==wr,h=(c=c==yr?wr:c)==wr,d=l==c;if(d&&Pn(e)){if(!Pn(t))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new Yt),s||$n(e)?rn(e,t,n,r,i,o):un(e,t,l,n,r,i,o);if(!(1&n)){var f=u&&xr.call(e,"__wrapped__"),p=h&&xr.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return o||(o=new Yt),i(m,g,n,r,o)}}return!!d&&(o||(o=new Yt),tr(e,t,n,r,i,o))};const Sr=function e(t,n,r,i,o){return t===n||(null==t||null==n||!wn(t)&&!wn(n)?t!==t&&n!==n:kr(t,n,r,i,e,o))};const Cr=function(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var l=(a=n[i])[0],c=e[l],u=a[1];if(s&&a[2]){if(void 0===c&&!(l in e))return!1}else{var h=new Yt;if(r)var d=r(c,u,l,e,t,h);if(!(void 0===d?Sr(u,c,3,r,h):d))return!1}}return!0};const Er=function(e){return e===e&&!ft(e)};const Tr=function(e){for(var t=Xn(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Er(i)]}return t};const Or=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const Ar=function(e){var t=Tr(e);return 1==t.length&&t[0][2]?Or(t[0][0],t[0][1]):function(n){return n===e||Cr(n,e,t)}};const _r=function(e){return"symbol"==typeof e||wn(e)&&"[object Symbol]"==dt(e)};var Pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nr=/^\w*$/;const Mr=function(e,t){if(dn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_r(e))||(Nr.test(e)||!Pr.test(e)||null!=t&&e in Object(t))};function jr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(jr.Cache||Qt),n}jr.Cache=Qt;const Rr=jr;const Ir=function(e){var t=Rr(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t};var Dr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lr=/\\(\\)?/g,Br=Ir((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Dr,(function(e,n,r,i){t.push(r?i.replace(Lr,"$1"):n||e)})),t}));const Fr=Br;const zr=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var Hr=rt?rt.prototype:void 0,$r=Hr?Hr.toString:void 0;const Ur=function e(t){if("string"==typeof t)return t;if(dn(t))return zr(t,e)+"";if(_r(t))return $r?$r.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const Wr=function(e){return null==e?"":Ur(e)};const Vr=function(e,t){return dn(e)?e:Mr(e,t)?[e]:Fr(Wr(e))};const qr=function(e){if("string"==typeof e||_r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};const Kr=function(e,t){for(var n=0,r=(t=Vr(t,e)).length;null!=e&&n<r;)e=e[qr(t[n++])];return n&&n==r?e:void 0};const Qr=function(e,t,n){var r=null==e?void 0:Kr(e,t);return void 0===r?n:r};const Gr=function(e,t){return null!=e&&t in Object(e)};const Jr=function(e,t,n){for(var r=-1,i=(t=Vr(t,e)).length,o=!1;++r<i;){var s=qr(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&jn(i)&&Mn(s,i)&&(dn(e)||En(e))};const Yr=function(e,t){return null!=e&&Jr(e,t,Gr)};const Xr=function(e,t){return Mr(e)&&Er(t)?Or(qr(e),t):function(n){var r=Qr(n,e);return void 0===r&&r===t?Yr(n,e):Sr(t,r,3)}};const Zr=function(e){return e};const ei=function(e){return function(t){return null==t?void 0:t[e]}};const ti=function(e){return function(t){return Kr(t,e)}};const ni=function(e){return Mr(e)?ei(qr(e)):ti(e)};const ri=function(e){return"function"==typeof e?e:null==e?Zr:"object"==typeof e?dn(e)?Xr(e[0],e[1]):Ar(e):ni(e)};const ii=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}};const oi=ii();const si=function(e,t){return e&&oi(e,t,Xn)};const ai=function(e,t){return function(n,r){if(null==n)return n;if(!Yn(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}(si);const li=function(e,t){var n;return ai(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n};const ci=function(e,t,n){if(!ft(n))return!1;var r=typeof t;return!!("number"==r?Yn(n)&&Mn(t,n.length):"string"==r&&t in n)&&He(n[t],e)};const ui=function(e,t,n){var r=dn(e)?Fe:li;return n&&ci(e,t,n)&&(t=void 0),r(e,ri(t,3))};var hi=function(e){return null===e||void 0===e||Array.isArray(e)&&0===e.length};function di(e){var t=e.children,n=e.className,r=e.compact,i=e.content,o=e.horizontal,s=e.piled,a=e.raised,l=e.size,c=e.stacked,u=Oe("ui",l,Pe(r,"compact"),Pe(o,"horizontal"),Pe(s,"piled"),Pe(a,"raised"),Pe(c,"stacked"),"segments",n),h=Le(di,e),d=Be(di,e);return we.createElement(d,Ee({},h,{className:u}),hi(t)?i:t)}di.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],di.propTypes={};const fi=di;function pi(e){var t=e.children,n=e.className,r=e.content,i=Oe("inline",n),o=Le(pi,e),s=Be(pi,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}pi.handledProps=["as","children","className","content"],pi.propTypes={};const mi=pi;function gi(e){var t=e.attached,n=e.basic,r=e.children,i=e.circular,o=e.className,s=e.clearing,a=e.color,l=e.compact,c=e.content,u=e.disabled,h=e.floated,d=e.inverted,f=e.loading,p=e.placeholder,m=e.padded,g=e.piled,v=e.raised,y=e.secondary,b=e.size,w=e.stacked,x=e.tertiary,k=e.textAlign,S=e.vertical,C=Oe("ui",a,b,Pe(n,"basic"),Pe(i,"circular"),Pe(s,"clearing"),Pe(l,"compact"),Pe(u,"disabled"),Pe(d,"inverted"),Pe(f,"loading"),Pe(p,"placeholder"),Pe(g,"piled"),Pe(v,"raised"),Pe(y,"secondary"),Pe(w,"stacked"),Pe(x,"tertiary"),Pe(S,"vertical"),Me(t,"attached"),Me(m,"padded"),Re(k),Ne(h,"floated"),"segment",o),E=Le(gi,e),T=Be(gi,e);return we.createElement(T,Ee({},E,{className:C}),hi(r)?c:r)}gi.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],gi.Group=fi,gi.Inline=mi,gi.propTypes={};const vi=gi;function yi(e,t){return yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yi(e,t)}function bi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,yi(e,t)}const wi=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};const xi=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};const ki=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};const Si=function(e,t){return t.length<2?e:Kr(e,ki(t,0,-1))};const Ci=function(e,t,n){t=Vr(t,e);var r=null==(e=Si(e,t))?e:e[qr(xi(t))];return null==r?void 0:wi(r,e,n)};var Ei=Math.max;const Ti=function(e,t,n){return t=Ei(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Ei(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),wi(e,this,a)}};const Oi=function(e){return function(){return e}};const Ai=function(){try{var e=At(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var _i=Ai?function(e,t){return Ai(e,"toString",{configurable:!0,enumerable:!1,value:Oi(t),writable:!0})}:Zr;const Pi=_i;var Ni=Date.now;const Mi=function(e){var t=0,n=0;return function(){var r=Ni(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Pi);const ji=function(e,t){return Mi(Ti(e,t,Zr),e+"")};const Ri=ji(Ci);const Ii=function(e){return null==e};const Di=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};const Li=function(e){return e!==e};const Bi=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};const Fi=function(e,t,n){return t===t?Bi(e,t,n):Di(e,Li,n)};const zi=function(e,t){return!!(null==e?0:e.length)&&Fi(e,t,0)>-1};const Hi=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};const $i=function(){};var Ui=ir&&1/an(new ir([,-0]))[1]==1/0?function(e){return new ir(e)}:$i;const Wi=Ui;const Vi=function(e,t,n){var r=-1,i=zi,o=e.length,s=!0,a=[],l=a;if(n)s=!1,i=Hi;else if(o>=200){var c=t?null:Wi(e);if(c)return an(c);s=!1,i=nn,l=new tn}else l=t?[]:a;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,s&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a};const qi=function(e){return e&&e.length?Vi(e):[]};const Ki=Kn(Object.getPrototypeOf,Object);var Qi=Function.prototype,Gi=Object.prototype,Ji=Qi.toString,Yi=Gi.hasOwnProperty,Xi=Ji.call(Object);const Zi=function(e){if(!wn(e)||"[object Object]"!=dt(e))return!1;var t=Ki(e);if(null===t)return!0;var n=Yi.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ji.call(n)==Xi};const eo=function(e){return"number"==typeof e||wn(e)&&"[object Number]"==dt(e)};const to=function(e){return"string"==typeof e||!dn(e)&&wn(e)&&"[object String]"==dt(e)};const no=function(e){return!0===e||!1===e||wn(e)&&"[object Boolean]"==dt(e)};function ro(e,t,n,r){if(void 0===r&&(r={}),"function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthand() Component must be a string or function.");if(Ii(n)||no(n))return null;var i=to(n),o=eo(n),s=pt(n),a=we.isValidElement(n),l=Zi(n),c=i||o||dn(n);if(!s&&!a&&!l&&!c)return null;var u=r.defaultProps,h=void 0===u?{}:u,d=a&&n.props||l&&n||c&&t(n),f=r.overrideProps,p=void 0===f?{}:f;p=pt(p)?p(Ee({},h,d)):p;var m=Ee({},h,d,p);if(h.className||p.className||d.className){var g=Oe(h.className,p.className,d.className);m.className=qi(g.split(" ")).join(" ")}if((h.style||p.style||d.style)&&(m.style=Ee({},h.style,d.style,p.style)),Ii(m.key)){var v=m.childKey,y=r.autoGenerateKey,b=void 0===y||y;Ii(v)?b&&(i||o)&&(m.key=n):(m.key="function"===typeof v?v(m):v,delete m.childKey)}return a?we.cloneElement(n,m):"function"===typeof m.children?m.children(e,Ee({},m,{children:void 0})):c||l?we.createElement(e,m):s?n(e,m,m.children):void 0}function io(e,t){if("function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return ro(e,t,n,r)}}var oo=io("div",(function(e){return{children:e}})),so=io("input",(function(e){return{type:e}})),ao=io("label",(function(e){return{children:e}})),lo=io("p",(function(e){return{children:e}}));function co(e){var t=e.children,n=e.className,r=e.content,i=e.size,o=Oe(i,"icons",n),s=Le(co,e),a=Be(co,e);return we.createElement(a,Ee({},s,{className:o}),hi(t)?r:t)}co.handledProps=["as","children","className","content","size"],co.propTypes={},co.defaultProps={as:"i"};const uo=co;var ho=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled?e.preventDefault():Ri(t.props,"onClick",e,t.props)},t}bi(t,e);var n=t.prototype;return n.getIconAriaOptions=function(){var e={},t=this.props,n=t["aria-label"],r=t["aria-hidden"];return Ii(n)?e["aria-hidden"]="true":e["aria-label"]=n,Ii(r)||(e["aria-hidden"]=r),e},n.render=function(){var e=this.props,n=e.bordered,r=e.circular,i=e.className,o=e.color,s=e.corner,a=e.disabled,l=e.fitted,c=e.flipped,u=e.inverted,h=e.link,d=e.loading,f=e.name,p=e.rotated,m=e.size,g=Oe(o,f,m,Pe(n,"bordered"),Pe(r,"circular"),Pe(a,"disabled"),Pe(l,"fitted"),Pe(u,"inverted"),Pe(h,"link"),Pe(d,"loading"),Me(s,"corner"),Ne(c,"flipped"),Ne(p,"rotated"),"icon",i),v=Le(t,this.props),y=Be(t,this.props),b=this.getIconAriaOptions();return we.createElement(y,Ee({},v,b,{className:g,onClick:this.handleClick}))},t}(we.PureComponent);ho.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],ho.propTypes={},ho.defaultProps={as:"i"},ho.Group=uo,ho.create=io(ho,(function(e){return{name:e}}));const fo=ho;var po=/\s/;const mo=function(e){for(var t=e.length;t--&&po.test(e.charAt(t)););return t};var go=/^\s+/;const vo=function(e){return e?e.slice(0,mo(e)+1).replace(go,""):e};var yo=/^[-+]0x[0-9a-f]+$/i,bo=/^0b[01]+$/i,wo=/^0o[0-7]+$/i,xo=parseInt;const ko=function(e){if("number"==typeof e)return e;if(_r(e))return NaN;if(ft(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ft(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=vo(e);var n=bo.test(e);return n||wo.test(e)?xo(e.slice(2),n?2:8):yo.test(e)?NaN:+e};var So=1/0;const Co=function(e){return e?(e=ko(e))===So||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};const Eo=function(e){var t=Co(e),n=t%1;return t===t?n?t-n:t:0};const To=function(e,t){return zr(t,(function(t){return e[t]}))};const Oo=function(e){return null==e?[]:To(e,Xn(e))};var Ao=Math.max;const _o=function(e,t,n,r){e=Yn(e)?e:Oo(e),n=n&&!r?Eo(n):0;var i=e.length;return n<0&&(n=Ao(i+n,0)),to(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Fi(e,t,n)>-1};const Po=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};const No=function(e){return"function"==typeof e?e:Zr};const Mo=function(e,t){return(dn(e)?Po:ai)(e,No(t))};var jo=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","enterKeyHint","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],Ro=[].concat(jo,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),Io=["alt","height","src","srcSet","width","loading"],Do=function(e,t){void 0===t&&(t={});var n=t,r=n.htmlProps,i=void 0===r?Ro:r,o=n.includeAria,s=void 0===o||o,a={},l={};return Mo(e,(function(e,t){var n=s&&(/^aria-.*$/.test(t)||"role"===t);(_o(i,t)||n?a:l)[t]=e})),[a,l]},Lo="object"===typeof document&&null!==document,Bo="object"===typeof window&&null!==window&&window.self===window;const Fo=function e(){return Ii(e.override)?Lo&&Bo:e.override};var zo=n(4173),Ho=n.n(zo),$o=function(e,t){"function"!==typeof e?null!==e&&"object"===typeof e&&(e.current=t):e(t)},Uo=function(e){return null!==e&&"object"===typeof e&&e.hasOwnProperty("current")};function Wo(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}var Vo=n(2086),qo=n(7950);var Ko=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).prevNode=void 0,t}bi(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=qo.findDOMNode(this);this.prevNode=e,$o(this.props.innerRef,e)},n.componentDidUpdate=function(e){var t=qo.findDOMNode(this);this.prevNode!==t&&(this.prevNode=t,$o(this.props.innerRef,t)),e.innerRef!==this.props.innerRef&&$o(this.props.innerRef,t)},n.componentWillUnmount=function(){$o(this.props.innerRef,null),delete this.prevNode},n.render=function(){return this.props.children},t}(we.Component),Qo=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).currentNode=void 0,t.handleRefOverride=function(e){var n=t.props,r=n.children,i=n.innerRef;$o(r.ref,e),$o(i,e),t.currentNode=e},t}bi(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&$o(this.props.innerRef,this.currentNode)},n.componentWillUnmount=function(){delete this.currentNode},n.render=function(){var e=this.props.children;return we.cloneElement(e,{ref:this.handleRefOverride})},t}(we.Component),Go=["children","innerRef"],Jo=function(e){var t=e.children,n=e.innerRef,r=Wo(e,Go),i=we.Children.only(t),o=Vo.isForwardRef(i)?Qo:Ko,s=i&&r&&Object.keys(r).length>0?we.cloneElement(i,r):i;return we.createElement(o,{innerRef:n},s)},Yo=n(3090),Xo=n.n(Yo),Zo=Math.max,es=Math.min;const ts=function(e,t,n){return e>=es(t,n)&&e<Zo(t,n)};const ns=function(e,t,n){return t=Co(t),void 0===n?(n=t,t=0):n=Co(n),e=ko(e),ts(e,t,n)};const rs=function(e){return e&&e.length?e[0]:void 0};const is=function(e,t){if(ui([t,e],Ii))return!1;if(t.target&&(Ri(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return Ri(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var n=t.clientX,r=t.clientY;if(ui([n,r],Ii))return!1;var i=e.getClientRects();if(!e.offsetWidth||!e.offsetHeight||!i||!i.length)return!1;var o=rs(i),s=o.top,a=o.bottom,l=o.left,c=o.right;return!ui([s,a,l,c],Ii)&&(ns(r,s,a+.001)&&ns(n,l,c+.001))};const os=function(e){return void 0===e};var ss=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=(t=e.call.apply(e,[this].concat(r))||this).constructor,s=o.autoControlledProps,a=o.getAutoControlledStateFromProps,l=Ri(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),"getInitialAutoControlledState",t.props)||{},c=s.reduce((function(e,n){return e[n]=function(e,t,n,r){void 0===r&&(r=!1);var i,o=t[e];if(void 0!==o)return o;if(r){var s=t[(i=e,"default"+(i[0].toUpperCase()+i.slice(1)))];if(void 0!==s)return s;if(n){var a=n[e];if(void 0!==a)return a}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)}(n,t.props,l,!0),e}),{});return t.state=Ee({},l,c,{autoControlledProps:s,getAutoControlledStateFromProps:a}),t}return bi(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.autoControlledProps,r=t.getAutoControlledStateFromProps,i=n.reduce((function(t,n){return!os(e[n])&&(t[n]=e[n]),t}),{});if(r){var o=r(e,Ee({},t,i),t);return Ee({},i,o)}return i},t.getAutoControlledStateFromProps=function(){return null},t}(we.Component),as=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRef=function(e){$o(t.props.innerRef,e)},t}bi(t,e);var n=t.prototype;return n.componentDidMount=function(){Ri(this.props,"onMount",null,this.props)},n.componentWillUnmount=function(){Ri(this.props,"onUnmount",null,this.props)},n.render=function(){if(!Fo())return null;var e=this.props,t=e.children,n=e.mountNode,r=void 0===n?document.body:n;return(0,qo.createPortal)(we.createElement(Jo,{innerRef:this.handleRef},t),r)},t}(we.Component);as.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],as.propTypes={};const ls=as;var cs=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).contentRef=we.createRef(),t.triggerRef=we.createRef(),t.latestDocumentMouseDownEvent=null,t.handleDocumentMouseDown=function(e){t.latestDocumentMouseDownEvent=e},t.handleDocumentClick=function(e){var n=t.props.closeOnDocumentClick,r=t.latestDocumentMouseDownEvent;t.latestDocumentMouseDownEvent=null,!t.contentRef.current||is(t.triggerRef.current,e)||r&&is(t.contentRef.current,r)||is(t.contentRef.current,e)||n&&t.close(e)},t.handleEscape=function(e){t.props.closeOnEscape&&Xo().getCode(e)===Xo().Escape&&t.close(e)},t.handlePortalMouseLeave=function(e){var n=t.props,r=n.closeOnPortalMouseLeave,i=n.mouseLeaveDelay;r&&e.target===t.contentRef.current&&(t.mouseLeaveTimer=t.closeWithTimeout(e,i))},t.handlePortalMouseEnter=function(){t.props.closeOnPortalMouseLeave&&clearTimeout(t.mouseLeaveTimer)},t.handleTriggerBlur=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerBlur,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];Ri.apply(void 0,[r,"props.onBlur",e].concat(s));var l=e.relatedTarget||document.activeElement,c=Ri(t.contentRef.current,"contains",l);i&&!c&&t.close(e)},t.handleTriggerClick=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerClick,o=n.openOnTriggerClick,s=t.state.open,a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];Ri.apply(void 0,[r,"props.onClick",e].concat(l)),s&&i?t.close(e):!s&&o&&t.open(e)},t.handleTriggerFocus=function(e){for(var n=t.props,r=n.trigger,i=n.openOnTriggerFocus,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];Ri.apply(void 0,[r,"props.onFocus",e].concat(s)),i&&t.open(e)},t.handleTriggerMouseLeave=function(e){clearTimeout(t.mouseEnterTimer);for(var n=t.props,r=n.trigger,i=n.closeOnTriggerMouseLeave,o=n.mouseLeaveDelay,s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];Ri.apply(void 0,[r,"props.onMouseLeave",e].concat(a)),i&&(t.mouseLeaveTimer=t.closeWithTimeout(e,o))},t.handleTriggerMouseEnter=function(e){clearTimeout(t.mouseLeaveTimer);for(var n=t.props,r=n.trigger,i=n.mouseEnterDelay,o=n.openOnTriggerMouseEnter,s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];Ri.apply(void 0,[r,"props.onMouseEnter",e].concat(a)),o&&(t.mouseEnterTimer=t.openWithTimeout(e,i))},t.open=function(e){Ri(t.props,"onOpen",e,Ee({},t.props,{open:!0})),t.setState({open:!0})},t.openWithTimeout=function(e,n){var r=Ee({},e);return setTimeout((function(){return t.open(r)}),n||0)},t.close=function(e){t.setState({open:!1}),Ri(t.props,"onClose",e,Ee({},t.props,{open:!1}))},t.closeWithTimeout=function(e,n){var r=Ee({},e);return setTimeout((function(){return t.close(r)}),n||0)},t.handleMount=function(){Ri(t.props,"onMount",null,t.props)},t.handleUnmount=function(){Ri(t.props,"onUnmount",null,t.props)},t.handleTriggerRef=function(e){t.triggerRef.current=e,$o(t.props.triggerRef,e)},t}bi(t,e);var n=t.prototype;return n.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},n.render=function(){var e=this.props,t=e.children,n=e.eventPool,r=e.mountNode,i=e.trigger,o=this.state.open;return we.createElement(we.Fragment,null,o&&we.createElement(we.Fragment,null,we.createElement(ls,{innerRef:this.contentRef,mountNode:r,onMount:this.handleMount,onUnmount:this.handleUnmount},t),we.createElement(Ho(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),we.createElement(Ho(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),we.createElement(Ho(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),we.createElement(Ho(),{name:"click",on:this.handleDocumentClick,pool:n}),we.createElement(Ho(),{name:"keydown",on:this.handleEscape,pool:n})),i&&we.createElement(Jo,{innerRef:this.handleTriggerRef},we.cloneElement(i,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},t}(ss);cs.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],cs.propTypes={},cs.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},cs.autoControlledProps=["open"],cs.Inner=ls;const us=cs;function hs(e){var t=e.blurring,n=e.className,r=e.children,i=e.content,o=e.dimmed,s=Oe(Pe(t,"blurring"),Pe(o,"dimmed"),"dimmable",n),a=Le(hs,e),l=Be(hs,e);return we.createElement(l,Ee({},a,{className:s}),hi(r)?i:r)}hs.handledProps=["as","blurring","children","className","content","dimmed"],hs.propTypes={};const ds=hs;var fs=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).containerRef=(0,we.createRef)(),t.contentRef=(0,we.createRef)(),t.handleClick=function(e){var n=t.contentRef.current;Ri(t.props,"onClick",e,t.props),n&&n!==e.target&&is(n,e)||Ri(t.props,"onClickOutside",e,t.props)},t}bi(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},n.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},n.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},n.render=function(){var e=this.props,n=e.active,r=e.children,i=e.className,o=e.content,s=e.disabled,a=e.inverted,l=e.page,c=e.simple,u=e.verticalAlign,h=Oe("ui",Pe(n,"active transition visible"),Pe(s,"disabled"),Pe(a,"inverted"),Pe(l,"page"),Pe(c,"simple"),Ie(u),"dimmer",i),d=Le(t,this.props),f=Be(t,this.props),p=hi(r)?o:r;return we.createElement(Jo,{innerRef:this.containerRef},we.createElement(f,Ee({},d,{className:h,onClick:this.handleClick}),p&&we.createElement("div",{className:"content",ref:this.contentRef},p)))},t}(we.Component);fs.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],fs.propTypes={};var ps=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePortalMount=function(){Fo()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){Fo()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.page,i=Le(t,this.props);return r?we.createElement(us,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:n,openOnTriggerClick:!1},we.createElement(fs,Ee({},i,{active:n,page:r}))):we.createElement(fs,Ee({},i,{active:n,page:r}))},t}(we.Component);function ms(e){var t=e.children,n=e.className,r=e.content,i=Oe("detail",n),o=Le(ms,e),s=Be(ms,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}ps.handledProps=["active","page"],ps.propTypes={},ps.Dimmable=ds,ps.Inner=fs,ps.create=io(ps,(function(e){return{content:e}})),ms.handledProps=["as","children","className","content"],ms.propTypes={},ms.create=io(ms,(function(e){return{content:e}}));const gs=ms;function vs(e){var t=e.children,n=e.circular,r=e.className,i=e.color,o=e.content,s=e.size,a=e.tag,l=Oe("ui",i,s,Pe(n,"circular"),Pe(a,"tag"),"labels",r),c=Le(vs,e),u=Be(vs,e);return we.createElement(u,Ee({},c,{className:l}),hi(t)?o:t)}vs.handledProps=["as","children","circular","className","color","content","size","tag"],vs.propTypes={};const ys=vs;var bs=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(n){Ri(e,"onClick",n),Ri(t.props,"onRemove",n,t.props)}}},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.attached,i=e.basic,o=e.children,s=e.circular,a=e.className,l=e.color,c=e.content,u=e.corner,h=e.detail,d=e.empty,f=e.floating,p=e.horizontal,m=e.icon,g=e.image,v=e.onRemove,y=e.pointing,b=e.prompt,w=e.removeIcon,x=e.ribbon,k=e.size,S=e.tag,C=Oe("ui",l,(!0===y?"pointing":("left"===y||"right"===y)&&y+" pointing")||("above"===y||"below"===y)&&"pointing "+y,k,Pe(n,"active"),Pe(i,"basic"),Pe(s,"circular"),Pe(d,"empty"),Pe(f,"floating"),Pe(p,"horizontal"),Pe(!0===g,"image"),Pe(b,"prompt"),Pe(S,"tag"),Me(u,"corner"),Me(x,"ribbon"),Ne(r,"attached"),"label",a),E=Le(t,this.props),T=Be(t,this.props);if(!hi(o))return we.createElement(T,Ee({},E,{className:C,onClick:this.handleClick}),o);var O=os(w)?"delete":w;return we.createElement(T,Ee({className:C,onClick:this.handleClick},E),fo.create(m,{autoGenerateKey:!1}),"boolean"!==typeof g&&Ss.create(g,{autoGenerateKey:!1}),c,gs.create(h,{autoGenerateKey:!1}),v&&fo.create(O,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},t}(we.Component);function ws(e){var t=e.children,n=e.className,r=e.content,i=e.size,o=Oe("ui",i,n,"images"),s=Le(ws,e),a=Be(ws,e);return we.createElement(a,Ee({},s,{className:o}),hi(t)?r:t)}bs.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],bs.propTypes={},bs.Detail=gs,bs.Group=ys,bs.create=io(bs,(function(e){return{content:e}})),ws.handledProps=["as","children","className","content","size"],ws.propTypes={};const xs=ws;function ks(e){var t=e.avatar,n=e.bordered,r=e.centered,i=e.children,o=e.circular,s=e.className,a=e.content,l=e.dimmer,c=e.disabled,u=e.floated,h=e.fluid,d=e.hidden,f=e.href,p=e.inline,m=e.label,g=e.rounded,v=e.size,y=e.spaced,b=e.verticalAlign,w=e.wrapped,x=e.ui,k=Oe(Pe(x,"ui"),v,Pe(t,"avatar"),Pe(n,"bordered"),Pe(o,"circular"),Pe(r,"centered"),Pe(c,"disabled"),Pe(h,"fluid"),Pe(d,"hidden"),Pe(p,"inline"),Pe(g,"rounded"),Me(y,"spaced"),Ne(u,"floated"),Ie(b),"image",s),S=Le(ks,e),C=Do(S,{htmlProps:Io}),E=C[0],T=C[1],O=Be(ks,e,(function(){if(!Ii(l)||!Ii(m)||!Ii(w)||!hi(i))return"div"}));return hi(i)?hi(a)?"img"===O?we.createElement(O,Ee({},T,E,{className:k})):we.createElement(O,Ee({},T,{className:k,href:f}),ps.create(l,{autoGenerateKey:!1}),bs.create(m,{autoGenerateKey:!1}),we.createElement("img",E)):we.createElement(O,Ee({},S,{className:k}),a):we.createElement(O,Ee({},S,{className:k}),i)}ks.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],ks.Group=xs,ks.propTypes={},ks.defaultProps={as:"img",ui:!0},ks.create=io(ks,(function(e){return{src:e}}));const Ss=ks;function Cs(e){var t=e.children,n=e.className,r=e.content,i=Oe("sub header",n),o=Le(Cs,e),s=Be(Cs,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Cs.handledProps=["as","children","className","content"],Cs.propTypes={},Cs.create=io(Cs,(function(e){return{content:e}}));const Es=Cs;function Ts(e){var t=e.children,n=e.className,r=e.content,i=Oe("content",n),o=Le(Ts,e),s=Be(Ts,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Ts.handledProps=["as","children","className","content"],Ts.propTypes={};const Os=Ts;function As(e){var t=e.attached,n=e.block,r=e.children,i=e.className,o=e.color,s=e.content,a=e.disabled,l=e.dividing,c=e.floated,u=e.icon,h=e.image,d=e.inverted,f=e.size,p=e.sub,m=e.subheader,g=e.textAlign,v=Oe("ui",o,f,Pe(n,"block"),Pe(a,"disabled"),Pe(l,"dividing"),Ne(c,"floated"),Pe(!0===u,"icon"),Pe(!0===h,"image"),Pe(d,"inverted"),Pe(p,"sub"),Me(t,"attached"),Re(g),"header",i),y=Le(As,e),b=Be(As,e);if(!hi(r))return we.createElement(b,Ee({},y,{className:v}),r);var w=fo.create(u,{autoGenerateKey:!1}),x=Ss.create(h,{autoGenerateKey:!1}),k=Es.create(m,{autoGenerateKey:!1});return w||x?we.createElement(b,Ee({},y,{className:v}),w||x,(s||k)&&we.createElement(Os,null,s,k)):we.createElement(b,Ee({},y,{className:v}),s,k)}As.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],As.propTypes={},As.Content=Os,As.Subheader=Es;const _s=As;var Ps=n(579);const Ns=e=>{let{caption:t,icon:n,size:r,...i}=e;const o="small"===r?"placeholder-segment-small":"placeholder-segment";return(0,Ps.jsx)(vi,{basic:!0,className:o,placeholder:!0,...i,children:(0,Ps.jsxs)(_s,{icon:!0,children:[(0,Ps.jsx)(fo,{name:n}),t]})})},Ms=e=>{let{username:t,files:n=[]}=e;return ge.post(`/transfers/downloads/${encodeURIComponent(t)}`,n)},js=e=>{let{direction:t,username:n,id:r,remove:i=!1}=e;return ge.delete(`/transfers/${t}s/${encodeURIComponent(n)}/${encodeURIComponent(r)}?remove=${i}`)},Rs=e=>e.includes("Completed")&&"Completed, Succeeded"!==e,Is=e=>["InProgress","Requested","Queued","Queued, Remotely","Queued, Locally","Initializing"].find((t=>t===e)),Ds=e=>{if(void 0===e)return"";const t=new Date(1970,0,1);return t.setSeconds(e),e>=3600?t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/u,"$1"):t.toTimeString().replace(/.*(\d{2}:\d{2}).*/u,"$1")},Ls=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 B";const n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/1024**r).toFixed(n))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][r]},Bs=e=>new Date(e).toLocaleString(),Fs=e=>e.split("\\").pop().split("/").pop(),zs=e=>{let{bitRate:t,isVariableBitRate:n,bitDepth:r,sampleRate:i}=e;return Boolean(i)&&Boolean(r)?`${r}/${i/1e3}kHz`:n?`${t} Kbps, VBR`:t?`${t} Kbps`:""};const Hs=function(e,t){var n=-1,r=Yn(e)?Array(e.length):[];return ai(e,(function(e,i,o){r[++n]=t(e,i,o)})),r};const $s=function(e,t){return(dn(e)?zr:Hs)(e,ri(t,3))};function Us(e){var t=e.children,n=e.className,r=e.content,i=Oe(n,"description"),o=Le(Us,e),s=Be(Us,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Us.handledProps=["as","children","className","content"],Us.propTypes={},Us.create=io(Us,(function(e){return{content:e}}));const Ws=Us;function Vs(e){var t=e.children,n=e.className,r=e.content,i=Oe("header",n),o=Le(Vs,e),s=Be(Vs,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Vs.handledProps=["as","children","className","content"],Vs.propTypes={},Vs.create=io(Vs,(function(e){return{content:e}}));const qs=Vs;function Ks(e){var t=e.children,n=e.className,r=e.content,i=e.description,o=e.floated,s=e.header,a=e.verticalAlign,l=Oe(Ne(o,"floated"),Ie(a),"content",n),c=Le(Ks,e),u=Be(Ks,e);return hi(t)?we.createElement(u,Ee({},c,{className:l}),qs.create(s),Ws.create(i),r):we.createElement(u,Ee({},c,{className:l}),t)}Ks.handledProps=["as","children","className","content","description","floated","header","verticalAlign"],Ks.propTypes={},Ks.create=io(Ks,(function(e){return{content:e}}));const Qs=Ks;function Gs(e){var t=e.className,n=e.verticalAlign,r=Oe(Ie(n),t),i=Le(Gs,e);return we.createElement(fo,Ee({},i,{className:r}))}Gs.handledProps=["className","verticalAlign"],Gs.propTypes={},Gs.create=io(Gs,(function(e){return{name:e}}));const Js=Gs;var Ys=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Ri(t.props,"onClick",e,t.props)},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,i=e.className,o=e.content,s=e.description,a=e.disabled,l=e.header,c=e.icon,u=e.image,h=e.value,d=Be(t,this.props),f=Oe(Pe(n,"active"),Pe(a,"disabled"),Pe("li"!==d,"item"),i),p=Le(t,this.props),m="li"===d?{value:h}:{"data-value":h};if(!hi(r))return we.createElement(d,Ee({},m,{role:"listitem",className:f,onClick:this.handleClick},p),r);var g=Js.create(c,{autoGenerateKey:!1}),v=Ss.create(u,{autoGenerateKey:!1});if(!(0,we.isValidElement)(o)&&Zi(o))return we.createElement(d,Ee({},m,{role:"listitem",className:f,onClick:this.handleClick},p),g||v,Qs.create(o,{autoGenerateKey:!1,defaultProps:{header:l,description:s}}));var y=qs.create(l,{autoGenerateKey:!1}),b=Ws.create(s,{autoGenerateKey:!1});return g||v?we.createElement(d,Ee({},m,{role:"listitem",className:f,onClick:this.handleClick},p),g||v,(o||y||b)&&we.createElement(Qs,null,y,b,o)):we.createElement(d,Ee({},m,{role:"listitem",className:f,onClick:this.handleClick},p),y,b,o)},t}(we.Component);Ys.handledProps=["active","as","children","className","content","description","disabled","header","icon","image","onClick","value"],Ys.propTypes={},Ys.create=io(Ys,(function(e){return{content:e}}));const Xs=Ys;function Zs(e){var t=e.children,n=e.className,r=e.content,i=Le(Zs,e),o=Be(Zs,e),s=Oe(Pe("ul"!==o&&"ol"!==o,"list"),n);return we.createElement(o,Ee({},i,{className:s}),hi(t)?r:t)}Zs.handledProps=["as","children","className","content"],Zs.propTypes={};const ea=Zs;var ta=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){Ri(e,"onClick",n,r),Ri(t.props,"onItemClick",n,r)}}},t}return bi(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.animated,i=n.bulleted,o=n.celled,s=n.children,a=n.className,l=n.content,c=n.divided,u=n.floated,h=n.horizontal,d=n.inverted,f=n.items,p=n.link,m=n.ordered,g=n.relaxed,v=n.selection,y=n.size,b=n.verticalAlign,w=Oe("ui",y,Pe(r,"animated"),Pe(i,"bulleted"),Pe(o,"celled"),Pe(c,"divided"),Pe(h,"horizontal"),Pe(d,"inverted"),Pe(p,"link"),Pe(m,"ordered"),Pe(v,"selection"),Me(g,"relaxed"),Ne(u,"floated"),Ie(b),"list",a),x=Le(t,this.props),k=Be(t,this.props);return hi(s)?hi(l)?we.createElement(k,Ee({role:"list",className:w},x),$s(f,(function(t){return Xs.create(t,{overrideProps:e.handleItemOverrides})}))):we.createElement(k,Ee({role:"list",className:w},x),l):we.createElement(k,Ee({role:"list",className:w},x),s)},t}(we.Component);ta.handledProps=["animated","as","bulleted","celled","children","className","content","divided","floated","horizontal","inverted","items","link","onItemClick","ordered","relaxed","selection","size","verticalAlign"],ta.propTypes={},ta.Content=Qs,ta.Description=Ws,ta.Header=qs,ta.Icon=Js,ta.Item=Xs,ta.List=ea;const na=ta;function ra(e){var t=e.children,n=e.className,r=Oe(n),i=Le(ra,e),o=Be(ra,e);return we.createElement(o,Ee({},i,{className:r}),t)}ra.handledProps=["as","children","className"],ra.defaultProps={as:"tbody"},ra.propTypes={};const ia=ra;function oa(e){var t=e.active,n=e.children,r=e.className,i=e.collapsing,o=e.content,s=e.disabled,a=e.error,l=e.icon,c=e.negative,u=e.positive,h=e.selectable,d=e.singleLine,f=e.textAlign,p=e.verticalAlign,m=e.warning,g=e.width,v=Oe(Pe(t,"active"),Pe(i,"collapsing"),Pe(s,"disabled"),Pe(a,"error"),Pe(c,"negative"),Pe(u,"positive"),Pe(h,"selectable"),Pe(d,"single line"),Pe(m,"warning"),Re(f),Ie(p),De(g,"wide"),r),y=Le(oa,e),b=Be(oa,e);return hi(n)?we.createElement(b,Ee({},y,{className:v}),fo.create(l),o):we.createElement(b,Ee({},y,{className:v}),n)}oa.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],oa.defaultProps={as:"td"},oa.propTypes={},oa.create=io(oa,(function(e){return{content:e}}));const sa=oa;function aa(e){var t=e.children,n=e.className,r=e.content,i=e.fullWidth,o=Oe(Pe(i,"full-width"),n),s=Le(aa,e),a=Be(aa,e);return we.createElement(a,Ee({},s,{className:o}),hi(t)?r:t)}aa.handledProps=["as","children","className","content","fullWidth"],aa.defaultProps={as:"thead"},aa.propTypes={};const la=aa;function ca(e){var t=e.as,n=Le(ca,e);return we.createElement(la,Ee({},n,{as:t}))}ca.handledProps=["as"],ca.propTypes={},ca.defaultProps={as:"tfoot"};const ua=ca;function ha(e){var t=e.as,n=e.className,r=e.sorted,i=Oe(Ne(r,"sorted"),n),o=Le(ha,e);return we.createElement(sa,Ee({},o,{as:t,className:i}))}ha.handledProps=["as","className","sorted"],ha.propTypes={},ha.defaultProps={as:"th"};const da=ha;function fa(e){var t=e.active,n=e.cellAs,r=e.cells,i=e.children,o=e.className,s=e.disabled,a=e.error,l=e.negative,c=e.positive,u=e.textAlign,h=e.verticalAlign,d=e.warning,f=Oe(Pe(t,"active"),Pe(s,"disabled"),Pe(a,"error"),Pe(l,"negative"),Pe(c,"positive"),Pe(d,"warning"),Re(u),Ie(h),o),p=Le(fa,e),m=Be(fa,e);return hi(i)?we.createElement(m,Ee({},p,{className:f}),$s(r,(function(e){return sa.create(e,{defaultProps:{as:n}})}))):we.createElement(m,Ee({},p,{className:f}),i)}fa.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],fa.defaultProps={as:"tr",cellAs:"td"},fa.propTypes={},fa.create=io(fa,(function(e){return{cells:e}}));const pa=fa;function ma(e){var t=e.attached,n=e.basic,r=e.celled,i=e.children,o=e.className,s=e.collapsing,a=e.color,l=e.columns,c=e.compact,u=e.definition,h=e.fixed,d=e.footerRow,f=e.headerRow,p=e.headerRows,m=e.inverted,g=e.padded,v=e.renderBodyRow,y=e.selectable,b=e.singleLine,w=e.size,x=e.sortable,k=e.stackable,S=e.striped,C=e.structured,E=e.tableData,T=e.textAlign,O=e.unstackable,A=e.verticalAlign,_=Oe("ui",a,w,Pe(r,"celled"),Pe(s,"collapsing"),Pe(u,"definition"),Pe(h,"fixed"),Pe(m,"inverted"),Pe(y,"selectable"),Pe(b,"single line"),Pe(x,"sortable"),Pe(k,"stackable"),Pe(S,"striped"),Pe(C,"structured"),Pe(O,"unstackable"),Me(t,"attached"),Me(n,"basic"),Me(c,"compact"),Me(g,"padded"),Re(T),Ie(A),De(l,"column"),"table",o),P=Le(ma,e),N=Be(ma,e);if(!hi(i))return we.createElement(N,Ee({},P,{className:_}),i);var M={defaultProps:{cellAs:"th"}},j=(f||p)&&we.createElement(la,null,pa.create(f,M),$s(p,(function(e){return pa.create(e,M)})));return we.createElement(N,Ee({},P,{className:_}),j,we.createElement(ia,null,v&&$s(E,(function(e,t){return pa.create(v(e,t))}))),d&&we.createElement(ua,null,pa.create(d)))}ma.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],ma.defaultProps={as:"table"},ma.propTypes={},ma.Body=ia,ma.Cell=sa,ma.Footer=ua,ma.Header=la,ma.HeaderCell=da,ma.Row=pa;const ga=ma;const va=function(e,t,n){"__proto__"==t&&Ai?Ai(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var ya=Object.prototype.hasOwnProperty;const ba=function(e,t,n){var r=e[t];ya.call(e,t)&&He(r,n)&&(void 0!==n||t in e)||va(e,t,n)};const wa=function(e,t,n,r){if(!ft(e))return e;for(var i=-1,o=(t=Vr(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var l=qr(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=s){var u=a[l];void 0===(c=r?r(u,l,a):void 0)&&(c=ft(u)?u:Mn(t[i+1])?[]:{})}ba(a,l,c),a=a[l]}return e};const xa=function(e,t,n){return null==e?e:wa(e,t,n)};var ka=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).inputRef=(0,we.createRef)(),t.labelRef=(0,we.createRef)(),t.canToggle=function(){var e=t.props,n=e.disabled,r=e.radio,i=e.readOnly,o=t.state.checked;return!n&&!i&&!(r&&o)},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return Ii(r)?n?-1:0:r},t.handleClick=function(e){var n=t.props.id,r=t.state,i=r.checked,o=r.indeterminate,s=Ri(t.inputRef.current,"contains",e.target),a=Ri(t.labelRef.current,"contains",e.target),l=!a&&!s,c=!Ii(n);a&&c||Ri(t.props,"onClick",e,Ee({},t.props,{checked:!i,indeterminate:!!o})),t.isClickFromMouse&&(t.isClickFromMouse=!1,a&&!c&&t.handleChange(e),l&&t.handleChange(e),a&&c&&e.stopPropagation())},t.handleChange=function(e){var n=t.state.checked;t.canToggle()&&(Ri(t.props,"onChange",e,Ee({},t.props,{checked:!n,indeterminate:!1})),t.setState({checked:!n,indeterminate:!1}))},t.handleMouseDown=function(e){var n=t.state,r=n.checked,i=n.indeterminate;Ri(t.props,"onMouseDown",e,Ee({},t.props,{checked:!!r,indeterminate:!!i})),e.defaultPrevented||Ri(t.inputRef.current,"focus"),e.preventDefault()},t.handleMouseUp=function(e){var n=t.state,r=n.checked,i=n.indeterminate;t.isClickFromMouse=!0,Ri(t.props,"onMouseUp",e,Ee({},t.props,{checked:!!r,indeterminate:!!i}))},t.setIndeterminate=function(){var e=t.state.indeterminate;xa(t.inputRef,"current.indeterminate",!!e)},t}bi(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setIndeterminate()},n.componentDidUpdate=function(){this.setIndeterminate()},n.render=function(){var e=this.props,n=e.className,r=e.disabled,i=e.label,o=e.id,s=e.name,a=e.radio,l=e.readOnly,c=e.slider,u=e.toggle,h=e.type,d=e.value,f=this.state,p=f.checked,m=f.indeterminate,g=Oe("ui",Pe(p,"checked"),Pe(r,"disabled"),Pe(m,"indeterminate"),Pe(Ii(i),"fitted"),Pe(a,"radio"),Pe(l,"read-only"),Pe(c,"slider"),Pe(u,"toggle"),"checkbox",n),v=Le(t,this.props),y=Be(t,this.props),b=Do(v,{htmlProps:jo}),w=b[0],x=b[1],k=ao(i,{defaultProps:{htmlFor:o},autoGenerateKey:!1})||we.createElement("label",{htmlFor:o});return we.createElement(y,Ee({},x,{className:g,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),we.createElement(Jo,{innerRef:this.inputRef},we.createElement("input",Ee({},w,{checked:p,className:"hidden",disabled:r,id:o,name:s,readOnly:!0,tabIndex:this.computeTabIndex(),type:h,value:d}))),we.createElement(Jo,{innerRef:this.labelRef},k))},t}(ss);ka.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],ka.propTypes={},ka.defaultProps={type:"checkbox"},ka.autoControlledProps=["checked","indeterminate"];const Sa=e=>{let{directoryName:t,disabled:n,files:r,footer:i,locked:o,onClose:s,onSelectionChange:a}=e;const[l,c]=(0,we.useState)(!1);return(0,Ps.jsxs)("div",{style:{opacity:o?.5:1},children:[(0,Ps.jsx)(_s,{className:"filelist-header",size:"small",children:(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)(fo,{link:!o,name:o?"lock":l?"folder":"folder open",onClick:()=>!o&&c(!l),size:"large"}),t,Boolean(s)&&(0,Ps.jsx)(fo,{className:"close-button",color:"red",link:!0,name:"close",onClick:()=>s()})]})}),!l&&r&&r.length>0&&(0,Ps.jsx)(na,{children:(0,Ps.jsx)(na.Item,{children:(0,Ps.jsxs)(ga,{children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.HeaderCell,{className:"filelist-selector",children:(0,Ps.jsx)(ka,{checked:0===r.filter((e=>!e.selected)).length,disabled:n,fitted:!0,onChange:(e,t)=>r.map((e=>a(e,t.checked)))})}),(0,Ps.jsx)(ga.HeaderCell,{className:"filelist-filename",children:"File"}),(0,Ps.jsx)(ga.HeaderCell,{className:"filelist-size",children:"Size"}),(0,Ps.jsx)(ga.HeaderCell,{className:"filelist-attributes",children:"Attributes"}),(0,Ps.jsx)(ga.HeaderCell,{className:"filelist-length",children:"Length"})]})}),(0,Ps.jsx)(ga.Body,{children:r.sort(((e,t)=>e.filename>t.filename?1:-1)).map((e=>(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.Cell,{className:"filelist-selector",children:(0,Ps.jsx)(ka,{checked:e.selected,disabled:n,fitted:!0,onChange:(t,n)=>a(e,n.checked)})}),(0,Ps.jsxs)(ga.Cell,{className:"filelist-filename",children:[o?(0,Ps.jsx)(fo,{name:"lock"}):"",Fs(e.filename)]}),(0,Ps.jsx)(ga.Cell,{className:"filelist-size",children:Ls(e.size)}),(0,Ps.jsx)(ga.Cell,{className:"filelist-attributes",children:zs(e)}),(0,Ps.jsx)(ga.Cell,{className:"filelist-length",children:Ds(e.length)})]},e.filename)))}),i&&(0,Ps.jsx)(ga.Footer,{fullWidth:!0,children:(0,Ps.jsx)(ga.Row,{children:(0,Ps.jsx)(ga.HeaderCell,{colSpan:"5",children:i})})})]})})})]})};function Ca(e){var t=e.children,n=e.className,r=e.content,i=e.textAlign,o=Oe(Re(i),"description",n),s=Le(Ca,e),a=Be(Ca,e);return we.createElement(a,Ee({},s,{className:o}),hi(t)?r:t)}Ca.handledProps=["as","children","className","content","textAlign"],Ca.propTypes={};const Ea=Ca;function Ta(e){var t=e.children,n=e.className,r=e.content,i=e.textAlign,o=Oe(Re(i),"header",n),s=Le(Ta,e),a=Be(Ta,e);return we.createElement(a,Ee({},s,{className:o}),hi(t)?r:t)}Ta.handledProps=["as","children","className","content","textAlign"],Ta.propTypes={};const Oa=Ta;function Aa(e){var t=e.children,n=e.className,r=e.content,i=e.textAlign,o=Oe(Re(i),"meta",n),s=Le(Aa,e),a=Be(Aa,e);return we.createElement(a,Ee({},s,{className:o}),hi(t)?r:t)}Aa.handledProps=["as","children","className","content","textAlign"],Aa.propTypes={};const _a=Aa;function Pa(e){var t=e.children,n=e.className,r=e.content,i=e.description,o=e.extra,s=e.header,a=e.meta,l=e.textAlign,c=Oe(Pe(o,"extra"),Re(l),"content",n),u=Le(Pa,e),h=Be(Pa,e);return hi(t)?hi(r)?we.createElement(h,Ee({},u,{className:c}),ro(Oa,(function(e){return{content:e}}),s,{autoGenerateKey:!1}),ro(_a,(function(e){return{content:e}}),a,{autoGenerateKey:!1}),ro(Ea,(function(e){return{content:e}}),i,{autoGenerateKey:!1})):we.createElement(h,Ee({},u,{className:c}),r):we.createElement(h,Ee({},u,{className:c}),t)}Pa.handledProps=["as","children","className","content","description","extra","header","meta","textAlign"],Pa.propTypes={};const Na=Pa;function Ma(e){var t=e.centered,n=e.children,r=e.className,i=e.content,o=e.doubling,s=e.items,a=e.itemsPerRow,l=e.stackable,c=e.textAlign,u=Oe("ui",Pe(t,"centered"),Pe(o,"doubling"),Pe(l,"stackable"),Re(c),De(a),"cards",r),h=Le(Ma,e),d=Be(Ma,e);if(!hi(n))return we.createElement(d,Ee({},h,{className:u}),n);if(!hi(i))return we.createElement(d,Ee({},h,{className:u}),i);var f=$s(s,(function(e){var t,n=null!=(t=e.key)?t:[e.header,e.description].join("-");return we.createElement(Ra,Ee({key:n},e))}));return we.createElement(d,Ee({},h,{className:u}),f)}Ma.handledProps=["as","centered","children","className","content","doubling","items","itemsPerRow","stackable","textAlign"],Ma.propTypes={};const ja=Ma;var Ra=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.centered,r=e.children,i=e.className,o=e.color,s=e.content,a=e.description,l=e.extra,c=e.fluid,u=e.header,h=e.href,d=e.image,f=e.link,p=e.meta,m=e.onClick,g=e.raised,v=Oe("ui",o,Pe(n,"centered"),Pe(c,"fluid"),Pe(f,"link"),Pe(g,"raised"),"card",i),y=Le(t,this.props),b=Be(t,this.props,(function(){if(m)return"a"}));return hi(r)?hi(s)?we.createElement(b,Ee({},y,{className:v,href:h,onClick:this.handleClick}),Ss.create(d,{autoGenerateKey:!1,defaultProps:{ui:!1,wrapped:!0}}),(a||u||p)&&we.createElement(Na,{description:a,header:u,meta:p}),l&&we.createElement(Na,{extra:!0},l)):we.createElement(b,Ee({},y,{className:v,href:h,onClick:this.handleClick}),s):we.createElement(b,Ee({},y,{className:v,href:h,onClick:this.handleClick}),r)},t}(we.Component);function Ia(e){var t=e.children,n=e.className,r=e.content,i=e.hidden,o=e.visible,s=Oe(Pe(o,"visible"),Pe(i,"hidden"),"content",n),a=Le(Ia,e),l=Be(Ia,e);return we.createElement(l,Ee({},a,{className:s}),hi(t)?r:t)}Ra.handledProps=["as","centered","children","className","color","content","description","extra","fluid","header","href","image","link","meta","onClick","raised"],Ra.propTypes={},Ra.Content=Na,Ra.Description=Ea,Ra.Group=ja,Ra.Header=Oa,Ra.Meta=_a,Ia.handledProps=["as","children","className","content","hidden","visible"],Ia.propTypes={};const Da=Ia;function La(e){var t=e.attached,n=e.basic,r=e.buttons,i=e.children,o=e.className,s=e.color,a=e.compact,l=e.content,c=e.floated,u=e.fluid,h=e.icon,d=e.inverted,f=e.labeled,p=e.negative,m=e.positive,g=e.primary,v=e.secondary,y=e.size,b=e.toggle,w=e.vertical,x=e.widths,k=Oe("ui",s,y,Pe(n,"basic"),Pe(a,"compact"),Pe(u,"fluid"),Pe(h,"icon"),Pe(d,"inverted"),Pe(f,"labeled"),Pe(p,"negative"),Pe(m,"positive"),Pe(g,"primary"),Pe(v,"secondary"),Pe(b,"toggle"),Pe(w,"vertical"),Me(t,"attached"),Ne(c,"floated"),De(x),"buttons",o),S=Le(La,e),C=Be(La,e);return Ii(r)?we.createElement(C,Ee({},S,{className:k}),hi(i)?l:i):we.createElement(C,Ee({},S,{className:k}),$s(r,(function(e){return $a.create(e)})))}La.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],La.propTypes={};const Ba=La;function Fa(e){var t=e.className,n=e.text,r=Oe("or",t),i=Le(Fa,e),o=Be(Fa,e);return we.createElement(o,Ee({},i,{className:r,"data-text":n}))}Fa.handledProps=["as","className","text"],Fa.propTypes={};const za=Fa;var Ha=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,we.createRef)(),t.computeElementType=function(){var e=t.props,n=e.attached,r=e.label;if(!Ii(n)||!Ii(r))return"div"},t.computeTabIndex=function(e){var n=t.props,r=n.disabled,i=n.tabIndex;return Ii(i)?r?-1:"div"===e?0:void 0:i},t.focus=function(e){return Ri(t.ref.current,"focus",e)},t.handleClick=function(e){t.props.disabled?e.preventDefault():Ri(t.props,"onClick",e,t.props)},t.hasIconClass=function(){var e=t.props,n=e.labelPosition,r=e.children,i=e.content,o=e.icon;return!0===o||o&&(n||hi(r)&&Ii(i))},t}bi(t,e);var n=t.prototype;return n.computeButtonAriaRole=function(e){var t=this.props.role;return Ii(t)?"button"!==e?"button":void 0:t},n.render=function(){var e=this.props,n=e.active,r=e.animated,i=e.attached,o=e.basic,s=e.children,a=e.circular,l=e.className,c=e.color,u=e.compact,h=e.content,d=e.disabled,f=e.floated,p=e.fluid,m=e.icon,g=e.inverted,v=e.label,y=e.labelPosition,b=e.loading,w=e.negative,x=e.positive,k=e.primary,S=e.secondary,C=e.size,E=e.toggle,T=e.type,O=Oe(c,C,Pe(n,"active"),Pe(o,"basic"),Pe(a,"circular"),Pe(u,"compact"),Pe(p,"fluid"),Pe(this.hasIconClass(),"icon"),Pe(g,"inverted"),Pe(b,"loading"),Pe(w,"negative"),Pe(x,"positive"),Pe(k,"primary"),Pe(S,"secondary"),Pe(E,"toggle"),Me(r,"animated"),Me(i,"attached")),A=Oe(Me(y||!!v,"labeled")),_=Oe(Pe(d,"disabled"),Ne(f,"floated")),P=Le(t,this.props),N=Be(t,this.props,this.computeElementType),M=this.computeTabIndex(N);if(!Ii(v)){var j=Oe("ui",O,"button",l),R=Oe("ui",A,"button",l,_),I=bs.create(v,{defaultProps:{basic:!0,pointing:"left"===y?"right":"left"},autoGenerateKey:!1});return we.createElement(N,Ee({},P,{className:R,onClick:this.handleClick}),"left"===y&&I,we.createElement(Jo,{innerRef:this.ref},we.createElement("button",{className:j,"aria-pressed":E?!!n:void 0,disabled:d,type:T,tabIndex:M},fo.create(m,{autoGenerateKey:!1})," ",h)),("right"===y||!y)&&I)}var D=Oe("ui",O,_,A,"button",l),L=!hi(s),B=this.computeButtonAriaRole(N);return we.createElement(Jo,{innerRef:this.ref},we.createElement(N,Ee({},P,{className:D,"aria-pressed":E?!!n:void 0,disabled:d&&"button"===N||void 0,onClick:this.handleClick,role:B,type:T,tabIndex:M}),L&&s,!L&&fo.create(m,{autoGenerateKey:!1}),!L&&h))},t}(we.Component);Ha.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],Ha.propTypes={},Ha.defaultProps={as:"button"},Ha.Content=Da,Ha.Group=Ba,Ha.Or=za,Ha.create=io(Ha,(function(e){return{content:e}}));const $a=Ha,Ua={downloadError:"",downloadRequest:void 0};class Wa extends we.Component{constructor(e){super(e),this.handleFileSelectionChange=(e,t)=>{e.selected=t,this.setState((e=>({downloadError:"",downloadRequest:void 0,tree:e.tree})))},this.download=(e,t)=>{this.setState({downloadRequest:"inProgress"},(async()=>{try{const n=(t||[]).map((e=>{let{filename:t,size:n}=e;return{filename:t,size:n}}));await Ms({files:n,username:e}),this.setState({downloadRequest:"complete"})}catch(n){this.setState({downloadError:n.response,downloadRequest:"error"})}}))},this.state={...Ua,files:this.props.files.map((e=>({selected:!1,...e})))}}componentDidUpdate(e){this.props.name!==e.name&&this.setState({files:this.props.files.map((e=>({selected:!1,...e})))})}render(){const{locked:e,marginTop:t,name:n,onClose:r,username:i}=this.props,{downloadError:o,downloadRequest:s,files:a}=this.state,l=a.filter((e=>e.selected)),c=Ls(l.reduce(((e,t)=>e+t.size),0));return(0,Ps.jsxs)(Ra,{className:"result-card",raised:!0,children:[(0,Ps.jsx)(Ra.Content,{children:(0,Ps.jsx)("div",{style:{marginTop:t||0},children:(0,Ps.jsx)(Sa,{directoryName:n,disabled:"inProgress"===s,files:a,locked:e,onClose:r,onSelectionChange:this.handleFileSelectionChange})})}),l.length>0&&(0,Ps.jsx)(Ra.Content,{extra:!0,children:(0,Ps.jsxs)("span",{children:[(0,Ps.jsx)($a,{color:"green",content:"Download",disabled:"inProgress"===s,icon:"download",label:{as:"a",basic:!1,content:`${l.length} file${1===l.length?"":"s"}, ${c}`},labelPosition:"right",onClick:()=>this.download(i,l)}),"inProgress"===s&&(0,Ps.jsx)(fo,{loading:!0,name:"circle notch",size:"large"}),"complete"===s&&(0,Ps.jsx)(fo,{color:"green",name:"checkmark",size:"large"}),"error"===s&&(0,Ps.jsxs)("span",{children:[(0,Ps.jsx)(fo,{color:"red",name:"x",size:"large"}),(0,Ps.jsx)(bs,{children:o.data+` (HTTP ${o.status} ${o.statusText})`})]})]})})]})}}const Va=Wa,qa=(e,t,n)=>(e||[]).map((e=>{const r=e.name===t;return(0,Ps.jsx)(na,{className:"browse-folderlist-list",children:(0,Ps.jsxs)(na.Item,{children:[(0,Ps.jsx)(na.Icon,{className:"browse-folderlist-icon"+(r?" selected":"")+(e.locked?" locked":""),name:!0===e.locked?"lock":r?"folder open":"folder"}),(0,Ps.jsxs)(na.Content,{children:[(0,Ps.jsx)(na.Header,{className:"browse-folderlist-header"+(r?" selected":"")+(e.locked?" locked":""),onClick:t=>n(t,e),children:e.name.split("\\").pop().split("/").pop()}),(0,Ps.jsx)(na.List,{children:qa(e.children,t,n)})]})]})},e.name)})),Ka=e=>{let{onSelect:t,selectedDirectoryName:n,tree:r}=e;return qa(r,n,t)};var Qa=n(3393),Ga=n(5173),Ja=n.n(Ga);function Ya(e){return"/"===e.charAt(0)}function Xa(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const Za=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&Ya(e),s=t&&Ya(t),a=o||s;if(e&&Ya(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var c=0,u=i.length;u>=0;u--){var h=i[u];"."===h?Xa(i,u):".."===h?(Xa(i,u),c++):c&&(Xa(i,u),c--)}if(!a)for(;c--;c)i.unshift("..");!a||""===i[0]||i[0]&&Ya(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};function el(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const tl=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=el(t),i=el(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1};var nl=!0,rl="Invariant failed";function il(e,t){if(!e){if(nl)throw new Error(rl);var n="function"===typeof t?t():t,r=n?"".concat(rl,": ").concat(n):rl;throw new Error(r)}}function ol(e){return"/"===e.charAt(0)?e:"/"+e}function sl(e){return"/"===e.charAt(0)?e.substr(1):e}function al(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function ll(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function cl(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function ul(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=Ee({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=Za(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function hl(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var dl=!("undefined"===typeof window||!window.document||!window.document.createElement);function fl(e,t){t(window.confirm(e))}var pl="popstate",ml="hashchange";function gl(){try{return window.history.state||{}}catch(e){return{}}}function vl(e){void 0===e&&(e={}),dl||il(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,s=void 0!==o&&o,a=i.getUserConfirmation,l=void 0===a?fl:a,c=i.keyLength,u=void 0===c?6:c,h=e.basename?ll(ol(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return h&&(o=al(o,h)),ul(o,r,n)}function f(){return Math.random().toString(36).substr(2,u)}var p=hl();function m(e){Ee(O,e),O.length=t.length,p.notifyListeners(O.location,O.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||b(d(e.state))}function v(){b(d(gl()))}var y=!1;function b(e){if(y)y=!1,m();else{p.confirmTransitionTo(e,"POP",l,(function(t){t?m({action:"POP",location:e}):function(e){var t=O.location,n=x.indexOf(t.key);-1===n&&(n=0);var r=x.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(y=!0,S(i))}(e)}))}}var w=d(gl()),x=[w.key];function k(e){return h+cl(e)}function S(e){t.go(e)}var C=0;function E(e){1===(C+=e)&&1===e?(window.addEventListener(pl,g),r&&window.addEventListener(ml,v)):0===C&&(window.removeEventListener(pl,g),r&&window.removeEventListener(ml,v))}var T=!1;var O={length:t.length,action:"POP",location:w,createHref:k,push:function(e,r){var i="PUSH",o=ul(e,r,f(),O.location);p.confirmTransitionTo(o,i,l,(function(e){if(e){var r=k(o),a=o.key,l=o.state;if(n)if(t.pushState({key:a,state:l},null,r),s)window.location.href=r;else{var c=x.indexOf(O.location.key),u=x.slice(0,c+1);u.push(o.key),x=u,m({action:i,location:o})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",o=ul(e,r,f(),O.location);p.confirmTransitionTo(o,i,l,(function(e){if(e){var r=k(o),a=o.key,l=o.state;if(n)if(t.replaceState({key:a,state:l},null,r),s)window.location.replace(r);else{var c=x.indexOf(O.location.key);-1!==c&&(x[c]=o.key),m({action:i,location:o})}else window.location.replace(r)}}))},go:S,goBack:function(){S(-1)},goForward:function(){S(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return T||(E(1),T=!0),function(){return T&&(T=!1,E(-1)),t()}},listen:function(e){var t=p.appendListener(e);return E(1),function(){E(-1),t()}}};return O}var yl="hashchange",bl={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+sl(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:sl,decodePath:ol},slash:{encodePath:ol,decodePath:ol}};function wl(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function xl(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function kl(e){window.location.replace(wl(window.location.href)+"#"+e)}function Sl(e){void 0===e&&{},dl||il(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?fl:r,o=n.hashType,s=void 0===o?"slash":o,a=e.basename?ll(ol(e.basename)):"",l=bl[s],c=l.encodePath,u=l.decodePath;function h(){var e=u(xl());return a&&al(e,a),ul(e)}var d=hl();function f(e){Ee(E,e),E.length=t.length,d.notifyListeners(E.location,E.action)}var p=!1,m=null;function g(){var e=xl(),t=c(e);if(e!==t)kl(t);else{var n=h(),r=E.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(m===cl(n))return;(function(e){if(p)f();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?f({action:t,location:e}):function(e){var t=E.location,n=w.lastIndexOf(cl(t));-1===n&&0;var r=w.lastIndexOf(cl(e));-1===r&&0;var i=n-r;i&&x(i)}(e)}))}})(n)}}var v=xl(),y=c(v);v!==y&&kl(y);var b=h(),w=[cl(b)];function x(e){t.go(e)}var k=0;function S(e){1===(k+=e)&&1===e?window.addEventListener(yl,g):0===k&&window.removeEventListener(yl,g)}var C=!1;var E={length:t.length,action:"POP",location:b,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&wl(window.location.href),n+"#"+c(a+cl(e))},push:function(e,t){var n="PUSH",r=ul(e,void 0,void 0,E.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=cl(r),i=c(a+t);if(xl()!==i){(function(e){window.location.hash=e})(i);var o=w.lastIndexOf(cl(E.location)),s=w.slice(0,o+1);s.push(t),f({action:n,location:r})}else f()}}))},replace:function(e,t){var n="REPLACE",r=ul(e,void 0,void 0,E.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=cl(r),i=c(a+t);xl()!==i&&kl(i);var o=w.indexOf(cl(E.location));-1!==o&&(w[o]=t),f({action:n,location:r})}}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(e){void 0===e&&!1;var t=d.setPrompt(e);return C||(S(1),!0),function(){return C&&S(-1),t()}},listen:function(e){var t=d.appendListener(e);return S(1),function(){S(-1),t()}}};return E}function Cl(e,t,n){return Math.min(Math.max(e,t),n)}var El=n(8123),Tl=n.n(El),Ol=n(219),Al=n.n(Ol),_l=1073741823,Pl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var Nl=we.createContext||function(e,t){var n,r,i="__create-react-context-"+function(){var e="__global_unique_id__";return Pl[e]=(Pl[e]||0)+1}()+"__",o=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}bi(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[i]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(n="function"===typeof t?t(r,i):_l,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(we.Component);o.childContextTypes=((n={})[i]=Ja().object.isRequired,n);var s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}bi(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?_l:t},r.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?_l:e},r.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},r.getValue=function(){return this.context[i]?this.context[i].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(we.Component);return s.contextTypes=((r={})[i]=Ja().object,r),{Provider:o,Consumer:s}},Ml=function(e){var t=Nl();return t.displayName=e,t},jl=Ml("Router-History"),Rl=Ml("Router"),Il=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}bi(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return we.createElement(Rl.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},we.createElement(jl.Provider,{children:this.props.children||null,value:this.props.history}))},t}(we.Component);we.Component;var Dl=function(e){function t(){return e.apply(this,arguments)||this}bi(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(we.Component);var Ll={},Bl=1e4,Fl=0;function zl(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(Ll[e])return Ll[e];var t=Tl().compile(e);return Fl<Bl&&(Ll[e]=t,Fl++),t}(e)(t,{pretty:!0})}function Hl(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return we.createElement(Rl.Consumer,null,(function(e){e||il(!1);var r=e.history,o=e.staticContext,s=i?r.push:r.replace,a=ul(t?"string"===typeof n?zl(n,t.params):Ee({},n,{pathname:zl(n.pathname,t.params)}):n);return o?(s(a),null):we.createElement(Dl,{onMount:function(){s(a)},onUpdate:function(e,t){var n=ul(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&tl(e.state,t.state)})(n,Ee({},a,{key:n.key}))||s(a)},to:n})}))}var $l={},Ul=1e4,Wl=0;function Vl(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,s=n.strict,a=void 0!==s&&s,l=n.sensitive,c=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=$l[n]||($l[n]={});if(r[e])return r[e];var i=[],o={regexp:Tl()(e,i,t),keys:i};return Wl<Ul&&(r[e]=o,Wl++),o}(n,{end:o,strict:a,sensitive:c}),i=r.regexp,s=r.keys,l=i.exec(e);if(!l)return null;var u=l[0],h=l.slice(1),d=e===u;return o&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:s.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var ql=function(e){function t(){return e.apply(this,arguments)||this}return bi(t,e),t.prototype.render=function(){var e=this;return we.createElement(Rl.Consumer,null,(function(t){t||il(!1);var n=e.props.location||t.location,r=Ee({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Vl(n.pathname,e.props):t.match}),i=e.props,o=i.children,s=i.component,a=i.render;return Array.isArray(o)&&function(e){return 0===we.Children.count(e)}(o)&&(o=null),we.createElement(Rl.Provider,{value:r},r.match?o?"function"===typeof o?o(r):o:s?we.createElement(s,r):a?a(r):null:"function"===typeof o?o(r):null)}))},t}(we.Component);function Kl(e){return"/"===e.charAt(0)?e:"/"+e}function Ql(e,t){if(!e)return t;var n=Kl(e);return 0!==t.pathname.indexOf(n)?t:Ee({},t,{pathname:t.pathname.substr(n.length)})}function Gl(e){return"string"===typeof e?e:cl(e)}function Jl(e){return function(){il(!1)}}function Yl(){}we.Component;var Xl=function(e){function t(){return e.apply(this,arguments)||this}return bi(t,e),t.prototype.render=function(){var e=this;return we.createElement(Rl.Consumer,null,(function(t){t||il(!1);var n,r,i=e.props.location||t.location;return we.Children.forEach(e.props.children,(function(e){if(null==r&&we.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?Vl(i.pathname,Ee({},e.props,{path:o})):t.match}})),r?we.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(we.Component);function Zl(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=Wo(t,["wrappedComponentRef"]);return we.createElement(Rl.Consumer,null,(function(t){return t||il(!1),we.createElement(e,Ee({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,Al()(n,e)}var ec=we.useContext;function tc(){return ec(jl)}function nc(){return ec(Rl).location}function rc(e){var t=nc(),n=ec(Rl).match;return e?Vl(t.pathname,e):n}var ic=function(e){function t(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).inputRef=(0,we.createRef)(),n.computeIcon=function(){var e=n.props,t=e.loading,r=e.icon;return Ii(r)?t?"spinner":void 0:r},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return Ii(r)?t?-1:void 0:r},n.focus=function(e){return n.inputRef.current.focus(e)},n.select=function(){return n.inputRef.current.select()},n.handleChange=function(e){var t=Qr(e,"target.value");Ri(n.props,"onChange",e,Ee({},n.props,{value:t}))},n.handleChildOverrides=function(e,t){return Ee({},t,e.props,{ref:function(t){$o(e.ref,t),n.inputRef.current=t}})},n.partitionProps=function(){var e=n.props,r=e.disabled,i=e.type,o=n.computeTabIndex(),s=Le(t,n.props),a=Do(s),l=a[0],c=a[1];return[Ee({},l,{disabled:r,type:i,tabIndex:o,onChange:n.handleChange,ref:n.inputRef}),c]},n}return bi(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.action,i=n.actionPosition,o=n.children,s=n.className,a=n.disabled,l=n.error,c=n.fluid,u=n.focus,h=n.icon,d=n.iconPosition,f=n.input,p=n.inverted,m=n.label,g=n.labelPosition,v=n.loading,y=n.size,b=n.transparent,w=n.type,x=Oe("ui",y,Pe(a,"disabled"),Pe(l,"error"),Pe(c,"fluid"),Pe(u,"focus"),Pe(p,"inverted"),Pe(v,"loading"),Pe(b,"transparent"),Ne(i,"action")||Pe(r,"action"),Ne(d,"icon")||Pe(h||v,"icon"),Ne(g,"labeled")||Pe(m,"labeled"),"input",s),k=Be(t,this.props),S=this.partitionProps(),C=S[0],E=S[1];if(!hi(o)){var T=$s(we.Children.toArray(o),(function(t){return"input"!==t.type?t:(0,we.cloneElement)(t,e.handleChildOverrides(t,C))}));return we.createElement(k,Ee({},E,{className:x}),T)}var O=$a.create(r,{autoGenerateKey:!1}),A=bs.create(m,{defaultProps:{className:Oe("label",_o(g,"corner")&&g)},autoGenerateKey:!1});return we.createElement(k,Ee({},E,{className:x}),"left"===i&&O,"right"!==g&&A,so(f||w,{defaultProps:C,autoGenerateKey:!1}),fo.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==i&&O,"right"===g&&A)},t}(we.Component);ic.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],ic.propTypes={},ic.defaultProps={type:"text"},ic.create=io(ic,(function(e){return{type:e}}));const oc=ic;function sc(e){var t=e.active,n=e.children,r=e.className,i=e.content,o=e.disabled,s=e.indeterminate,a=e.inline,l=e.inverted,c=e.size,u=Oe("ui",c,Pe(t,"active"),Pe(o,"disabled"),Pe(s,"indeterminate"),Pe(l,"inverted"),Pe(n||i,"text"),Me(a,"inline"),"loader",r),h=Le(sc,e),d=Be(sc,e);return we.createElement(d,Ee({},h,{className:u}),hi(n)?i:n)}sc.handledProps=["active","as","children","className","content","disabled","indeterminate","inline","inverted","size"],sc.propTypes={};const ac=sc,lc={browseError:void 0,browseState:"idle",browseStatus:0,info:{directories:0,files:0,lockedDirectories:0,lockedFiles:0},interval:void 0,selectedDirectory:{},selectedFiles:[],separator:"\\",tree:[],username:""};class cc extends we.Component{constructor(e){super(e),this.browse=()=>{const e=this.inputtext.inputRef.current.value;this.setState({browseError:void 0,browseState:"pending",username:e},(()=>{(async e=>{let{username:t}=e;return(await ge.get(`/users/${encodeURIComponent(t)}/browse`)).data})({username:e}).then((e=>{let{directories:t}=e;const{lockedDirectories:n}=e;let r;const i=t.length,o=t.reduce(((e,t)=>(r||(t.name.includes("\\")?r="\\":t.name.includes("/")&&(r="/")),e+t.fileCount)),0),s=n.length,a=n.reduce(((e,t)=>e+t.fileCount),0);t=t.concat(n.map((e=>({...e,locked:!0})))),this.setState({info:{directories:i,files:o,lockedDirectories:s,lockedFiles:a},separator:r,tree:this.getDirectoryTree({directories:t,separator:r})})})).then((()=>this.setState({browseError:void 0,browseState:"complete"},(()=>{this.saveState()})))).catch((e=>this.setState({browseError:e,browseState:"error"})))}))},this.clear=()=>{this.setState(lc,(()=>{this.saveState(),this.inputtext.focus()}))},this.keyUp=e=>"Escape"===e.key?this.clear():"",this.saveState=()=>{this.inputtext.inputRef.current.value=this.state.username,this.inputtext.inputRef.current.disabled="idle"!==this.state.browseState;const e=()=>{try{localStorage.setItem("soulseek-example-browse-state",Qa.compress(JSON.stringify(this.state)))}catch(e){console.error(e)}};window.requestIdleCallback?window.requestIdleCallback(e):Promise.resolve().then(e)},this.loadState=()=>{var e;this.setState(!(null!==(e=this.props.location.state)&&void 0!==e&&e.user)&&JSON.parse(Qa.decompress(localStorage.getItem("soulseek-example-browse-state")||""))||lc)},this.fetchStatus=()=>{const{browseState:e,username:t}=this.state;"pending"===e&&(e=>{let{username:t}=e;return ge.get(`/users/${encodeURIComponent(t)}/browse/status`)})({username:t}).then((e=>this.setState({browseStatus:e.data})))},this.getDirectoryTree=e=>{let{directories:t,separator:n}=e;if(0===t.length||void 0===t[0].name)return[];const r=new Map;for(const o of t){const e=o.name.split(n).length;r.has(e)||r.set(e,[]),r.get(e).push(o)}const i=Math.min(...Array.from(r.keys()));return r.get(i).map((e=>this.getChildDirectories(r,e,n,i+1)))},this.getChildDirectories=(e,t,n,r)=>{if(!e.has(r))return{...t,children:[]};const i=e.get(r).filter((e=>e.name.startsWith(t.name)));return{...t,children:i.map((t=>this.getChildDirectories(e,t,n,r+1)))}},this.selectDirectory=e=>{this.setState({selectedDirectory:{...e,children:[]}},(()=>this.saveState()))},this.handleDeselectDirectory=()=>{this.setState({selectedDirectory:lc.selectedDirectory},(()=>this.saveState()))},this.state=lc}componentDidMount(){var e;this.fetchStatus(),this.loadState(),this.setState({interval:window.setInterval(this.fetchStatus,500)},(()=>this.saveState())),null!==(e=this.props.location.state)&&void 0!==e&&e.user&&this.setState({username:this.props.location.state.user},this.browse),document.addEventListener("keyup",this.keyUp,!1)}componentWillUnmount(){clearInterval(this.state.interval),this.setState({interval:void 0}),document.removeEventListener("keyup",this.keyUp,!1)}render(){const{browseError:e,browseState:t,browseStatus:n,info:r,selectedDirectory:i,separator:o,tree:s,username:a}=this.state,{locked:l,name:c}=i,u="pending"===t,h=!(s&&s.length>0),d=(i.files||[]).map((e=>({...e,filename:`${c}${o}${e.filename}`})));return(0,Ps.jsxs)("div",{className:"search-container",children:[(0,Ps.jsxs)(vi,{className:"browse-segment",raised:!0,children:[(0,Ps.jsx)("div",{className:"browse-segment-icon",children:(0,Ps.jsx)(fo,{name:"folder open",size:"big"})}),(0,Ps.jsx)(oc,{action:!u&&("idle"===t?{icon:"search",onClick:this.browse}:{color:"red",icon:"x",onClick:this.clear}),className:"search-input",disabled:u,input:(0,Ps.jsx)("input",{"data-lpignore":"true",placeholder:"Username",type:"search"}),loading:u,onKeyUp:e=>"Enter"===e.key?this.browse():"",placeholder:"Username",ref:e=>this.inputtext=e,size:"big"})]}),u?(0,Ps.jsxs)(ac,{active:!0,className:"search-loader",inline:"centered",size:"big",children:["Downloaded ",Math.round(n.percentComplete||0),"% of Response"]}):(0,Ps.jsx)("div",{children:e?(0,Ps.jsxs)("span",{className:"browse-error",children:["Failed to browse ",a]}):(0,Ps.jsxs)("div",{className:"browse-container",children:[h?(0,Ps.jsx)(Ns,{caption:"No user share to display",icon:"folder open"}):(0,Ps.jsx)(Ra,{className:"browse-tree-card",raised:!0,children:(0,Ps.jsxs)(Ra.Content,{children:[(0,Ps.jsxs)(Ra.Header,{children:[(0,Ps.jsx)(fo,{color:"green",name:"circle"}),a]}),(0,Ps.jsx)(Ra.Meta,{className:"browse-meta",children:(0,Ps.jsxs)("span",{children:[`${r.files+r.lockedFiles} files in ${r.directories+r.lockedDirectories} directories (including ${r.lockedFiles} files in ${r.lockedDirectories} locked directories)`," "]})}),(0,Ps.jsx)(vi,{className:"browse-folderlist",children:(0,Ps.jsx)(Ka,{onSelect:(e,t)=>this.selectDirectory(t),selectedDirectoryName:c,tree:s})})]})}),c&&(0,Ps.jsx)(Va,{files:d,locked:l,marginTop:-20,name:c,onClose:this.handleDeselectDirectory,username:a})]})})]})}}const uc=Zl(cc),hc=async e=>{let{username:t}=e;return(await ge.get(`/conversations/${encodeURIComponent(t)}`)).data};const dc=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Kr(e,s);n(a,s)&&wa(o,Vr(s,e),a)}return o};const fc=function(e,t){return dc(e,t,(function(t,n){return Yr(e,n)}))};var pc=rt?rt.isConcatSpreadable:void 0;const mc=function(e){return dn(e)||En(e)||!!(pc&&e&&e[pc])};const gc=function e(t,n,r,i,o){var s=-1,a=t.length;for(r||(r=mc),o||(o=[]);++s<a;){var l=t[s];n>0&&r(l)?n>1?e(l,n-1,r,i,o):hn(o,l):i||(o[o.length]=l)}return o};const vc=function(e){return(null==e?0:e.length)?gc(e,1):[]};const yc=function(e){return Mi(Ti(e,void 0,vc),e+"")}((function(e,t){return null==e?{}:fc(e,t)}));const bc=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n};const wc=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n};const xc=function(e,t,n){var r=dn(e)?bc:wc,i=arguments.length<3;return r(e,ri(t,4),n,i,ai)};var kc=Object.prototype.hasOwnProperty;const Sc=function(e){if(null==e)return!0;if(Yn(e)&&(dn(e)||"string"==typeof e||"function"==typeof e.splice||Pn(e)||$n(e)||En(e)))return!e.length;var t=vr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(qn(e))return!Jn(e).length;for(var n in e)if(kc.call(e,n))return!1;return!0};var Cc=n(7324),Ec=n.n(Cc);const Tc=zo.instance;var Oc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleButtonOverrides=function(e){return{onClick:function(n,r){Ri(e,"onClick",n,r),Ri(t.props,"onActionClick",n,r)}}},t}return bi(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.actions,i=n.children,o=n.className,s=n.content,a=Oe("actions",o),l=Le(t,this.props),c=Be(t,this.props);return hi(i)?hi(s)?we.createElement(c,Ee({},l,{className:a}),$s(r,(function(t){return $a.create(t,{overrideProps:e.handleButtonOverrides})}))):we.createElement(c,Ee({},l,{className:a}),s):we.createElement(c,Ee({},l,{className:a}),i)},t}(we.Component);function Ac(e){var t=e.children,n=e.className,r=e.content,i=e.image,o=e.scrolling,s=Oe(n,Pe(i,"image"),Pe(o,"scrolling"),"content"),a=Le(Ac,e),l=Be(Ac,e);return we.createElement(l,Ee({},a,{className:s}),hi(t)?r:t)}Oc.handledProps=["actions","as","children","className","content","onActionClick"],Oc.propTypes={},Oc.create=io(Oc,(function(e){return{actions:e}})),Ac.handledProps=["as","children","className","content","image","scrolling"],Ac.propTypes={},Ac.create=io(Ac,(function(e){return{content:e}}));const _c=Ac;function Pc(e){var t=e.children,n=e.className,r=e.content,i=Oe("description",n),o=Le(Pc,e),s=Be(Pc,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Pc.handledProps=["as","children","className","content"],Pc.propTypes={};const Nc=Pc;const Mc=Fo()?we.useLayoutEffect:we.useEffect;var jc=/\s+/;var Rc=new Map,Ic=function(e,t){var n=function(e){var t=[];return e?(e.forEach((function(e){"string"===typeof e.current&&e.current.split(jc).forEach((function(e){t.push(e)}))})),t.filter((function(e,t,n){return e.length>0&&n.indexOf(e)===t}))):[]}(t),r=function(e,t){return[t.filter((function(t){return-1===e.indexOf(t)})),e.filter((function(e){return-1===t.indexOf(e)}))]}(Rc.get(e)||[],n),i=r[0],o=r[1];e&&(i.forEach((function(t){return e.classList.add(t)})),o.forEach((function(t){return e.classList.remove(t)}))),Rc.set(e,n)},Dc=new function(){var e=this;this.add=function(t,n){if(e.nodes.has(t)){e.nodes.get(t).add(n)}else{var r=new Set;r.add(n),e.nodes.set(t,r)}},this.del=function(t,n){if(e.nodes.has(t)){var r=e.nodes.get(t);1!==r.size?r.delete(n):e.nodes.delete(t)}},this.emit=function(t,n){n(t,e.nodes.get(t))},this.nodes=new Map};function Lc(e){var t=e.blurring,n=e.children,r=e.className,i=e.centered,o=e.content,s=e.inverted,a=e.mountNode,l=e.scrolling,c=we.useRef(),u=Oe("ui",Pe(s,"inverted"),Pe(!i,"top aligned"),"page modals dimmer transition visible active",r),h=Oe("dimmable dimmed",Pe(t,"blurring"),Pe(l,"scrolling")),d=Le(Lc,e),f=Be(Lc,e);return function(e,t){var n=we.useRef(),r=we.useRef(!1);Mc((function(){if(n.current=t,r.current){var i=Uo(e)?e.current:e;Dc.emit(i,Ic)}r.current=!0}),[t]),Mc((function(){var t=Uo(e)?e.current:e;return Dc.add(t,n),Dc.emit(t,Ic),function(){Dc.del(t,n),Dc.emit(t,Ic)}}),[e])}(a,h),we.useEffect((function(){c.current&&c.current.style&&c.current.style.setProperty("display","flex","important")}),[]),we.createElement(Jo,{innerRef:c},we.createElement(f,Ee({},d,{className:u}),hi(n)?o:n))}Lc.handledProps=["as","blurring","centered","children","className","content","inverted","mountNode","scrolling"],Lc.propTypes={},Lc.create=io(Lc,(function(e){return{content:e}}));const Bc=Lc;function Fc(e){var t=e.children,n=e.className,r=e.content,i=Oe("header",n),o=Le(Fc,e),s=Be(Fc,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Fc.handledProps=["as","children","className","content"],Fc.propTypes={},Fc.create=io(Fc,(function(e){return{content:e}}));const zc=Fc;var Hc=function(e){function t(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).legacy=Fo()&&!window.ActiveXObject&&"ActiveXObject"in window,n.ref=(0,we.createRef)(),n.dimmerRef=(0,we.createRef)(),n.latestDocumentMouseDownEvent=null,n.getMountNode=function(){return Fo()?n.props.mountNode||document.body:null},n.handleActionsOverrides=function(e){return{onActionClick:function(t,r){Ri(e,"onActionClick",t,r),Ri(n.props,"onActionClick",t,n.props),n.handleClose(t)}}},n.handleClose=function(e){n.setState({open:!1}),Ri(n.props,"onClose",e,Ee({},n.props,{open:!1}))},n.handleDocumentMouseDown=function(e){n.latestDocumentMouseDownEvent=e},n.handleDocumentClick=function(e){var t=n.props.closeOnDimmerClick,r=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!t||is(n.ref.current,r)||is(n.ref.current,e)||(n.setState({open:!1}),Ri(n.props,"onClose",e,Ee({},n.props,{open:!1})))},n.handleIconOverrides=function(e){return{onClick:function(t){Ri(e,"onClick",t),n.handleClose(t)}}},n.handleOpen=function(e){Ri(n.props,"onOpen",e,Ee({},n.props,{open:!0})),n.setState({open:!0})},n.handlePortalMount=function(e){var t=n.props.eventPool;n.setState({scrolling:!1}),n.setPositionAndClassNames(),Tc.sub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),Tc.sub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),Ri(n.props,"onMount",e,n.props)},n.handlePortalUnmount=function(e){var t=n.props.eventPool;cancelAnimationFrame(n.animationRequestId),Tc.unsub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),Tc.unsub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),Ri(n.props,"onUnmount",e,n.props)},n.setPositionAndClassNames=function(){var e,t=n.props.centered,r={};if(n.ref.current){var i=n.ref.current.getBoundingClientRect(),o=function(e){var t=e.height+0,n=e.height+0,r=window.innerHeight;return r/2+-n/2+t+50<r}(i);e=!o;var s=n.legacy?function(e,t,n){var r=t&&e?-n.height/2:0;return{marginLeft:-n.width/2,marginTop:r}}(o,t,i):{};Ec()(n.state.legacyStyles,s)||(r.legacyStyles=s),n.state.scrolling!==e&&(r.scrolling=e)}Sc(r)||n.setState(r),n.animationRequestId=requestAnimationFrame(n.setPositionAndClassNames)},n.renderContent=function(e){var r=n.props,i=r.actions,o=r.basic,s=r.children,a=r.className,l=r.closeIcon,c=r.content,u=r.header,h=r.size,d=r.style,f=n.state,p=f.legacyStyles,m=f.scrolling,g=Oe("ui",h,Pe(o,"basic"),Pe(n.legacy,"legacy"),Pe(m,"scrolling"),"modal transition visible active",a),v=Be(t,n.props),y=!0===l?"close":l,b=fo.create(y,{overrideProps:n.handleIconOverrides});return we.createElement(Jo,{innerRef:n.ref},we.createElement(v,Ee({},e,{className:g,style:Ee({},p,d)}),b,hi(s)?we.createElement(we.Fragment,null,zc.create(u,{autoGenerateKey:!1}),_c.create(c,{autoGenerateKey:!1}),Oc.create(i,{overrideProps:n.handleActionsOverrides})):s))},n}bi(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.handlePortalUnmount()},n.render=function(){var e=this.props,n=e.centered,r=e.closeOnDocumentClick,i=e.dimmer,o=e.eventPool,s=e.trigger,a=this.state,l=a.open,c=a.scrolling,u=this.getMountNode();if(!Fo())return(0,we.isValidElement)(s)?s:null;var h=Le(t,this.props),d=us.handledProps,f=xc(h,(function(e,t,n){return _o(d,n)||(e[n]=t),e}),{}),p=yc(h,d);return we.createElement(us,Ee({closeOnDocumentClick:r},p,{trigger:s,eventPool:o,mountNode:u,open:l,onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount}),we.createElement(Jo,{innerRef:this.dimmerRef},Bc.create(Zi(i)?i:{},{autoGenerateKey:!1,defaultProps:{blurring:"blurring"===i,inverted:"inverted"===i},overrideProps:{children:this.renderContent(f),centered:n,mountNode:u,scrolling:c}})))},t}(ss);Hc.handledProps=["actions","as","basic","centered","children","className","closeIcon","closeOnDimmerClick","closeOnDocumentClick","content","defaultOpen","dimmer","eventPool","header","mountNode","onActionClick","onClose","onMount","onOpen","onUnmount","open","size","style","trigger"],Hc.propTypes={},Hc.defaultProps={centered:!0,dimmer:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!1,eventPool:"Modal"},Hc.autoControlledProps=["open"],Hc.Actions=Oc,Hc.Content=_c,Hc.Description=Nc,Hc.Dimmer=Bc,Hc.Header=zc;const $c=Hc;function Uc(e){var t=e.slider,n=e.toggle,r=e.type,i=Le(Uc,e),o=!(t||n)||void 0;return we.createElement(ka,Ee({},i,{type:r,radio:o,slider:t,toggle:n}))}Uc.handledProps=["slider","toggle","type"],Uc.propTypes={},Uc.defaultProps={type:"radio"};const Wc=Uc;function Vc(e){var t=e.children,n=e.className,r=e.content,i=e.control,o=e.disabled,s=e.error,a=e.inline,l=e.label,c=e.required,u=e.type,h=e.width,d=e.id,f=Oe(Pe(o,"disabled"),Pe(s,"error"),Pe(a,"inline"),Pe(c,"required"),De(h,"wide"),"field",n),p=Le(Vc,e),m=Be(Vc,e),g=Qr(s,"pointing","above"),v=bs.create(s,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:g,id:d?d+"-error-message":void 0,role:"alert","aria-atomic":!0}}),y=("below"===g||"right"===g)&&v,b=("above"===g||"left"===g)&&v;if(Ii(i))return Ii(l)?we.createElement(m,Ee({},p,{className:f,id:d}),hi(t)?r:t):we.createElement(m,Ee({},p,{className:f,id:d}),y,ao(l,{autoGenerateKey:!1}),b);var w={"aria-describedby":d&&s?d+"-error-message":null,"aria-invalid":!!s||void 0},x=Ee({},p,{content:r,children:t,disabled:o,required:c,type:u,id:d});return"input"!==i||"checkbox"!==u&&"radio"!==u?i===ka||i===Wc?we.createElement(m,{className:f},y,(0,we.createElement)(i,Ee({},w,x,{label:l})),b):we.createElement(m,{className:f},ao(l,{defaultProps:{htmlFor:d},autoGenerateKey:!1}),y,(0,we.createElement)(i,Ee({},w,x)),b):we.createElement(m,{className:f},we.createElement("label",null,y,(0,we.createElement)(i,Ee({},w,x))," ",l,b))}Vc.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],Vc.propTypes={};const qc=Vc;function Kc(e){var t=e.control,n=Le(Kc,e),r=Be(Kc,e);return we.createElement(r,Ee({},n,{control:t}))}Kc.handledProps=["as","control"],Kc.propTypes={},Kc.defaultProps={as:qc,control:$a};const Qc=Kc;function Gc(e){var t=e.control,n=Le(Gc,e),r=Be(Gc,e);return we.createElement(r,Ee({},n,{control:t}))}Gc.handledProps=["as","control"],Gc.propTypes={},Gc.defaultProps={as:qc,control:ka};const Jc=Gc;const Yc=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i};const Xc=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};const Zc=function(e,t){var n=!0;return ai(e,(function(e,r,i){return n=!!t(e,r,i)})),n};const eu=function(e,t,n){var r=dn(e)?Xc:Zc;return n&&ci(e,t,n)&&(t=void 0),r(e,ri(t,3))};const tu=function(e,t,n,r){var i=-1,o=zi,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=zr(t,Dn(n))),r?(o=Hi,s=!1):t.length>=200&&(o=nn,s=!1,t=new tn(t));e:for(;++i<a;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,s&&h===h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else o(t,h,r)||l.push(u)}return l};const nu=function(e){return wn(e)&&Yn(e)};var ru=ji((function(e,t){return nu(e)?tu(e,t):[]}));const iu=ru;const ou=function(e){return function(t,n,r){var i=Object(t);if(!Yn(t)){var o=ri(n,3);t=Xn(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:void 0}};var su=Math.max;const au=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Eo(n);return i<0&&(i=su(r+i,0)),Di(e,ri(t,3),i)};const lu=ou(au);const cu=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:Eo(t),ki(e,0,(t=r-t)<0?0:t)):[]};const uu=ei("length");var hu=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const du=function(e){return hu.test(e)};var fu="\\ud800-\\udfff",pu="["+fu+"]",mu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",gu="\\ud83c[\\udffb-\\udfff]",vu="[^"+fu+"]",yu="(?:\\ud83c[\\udde6-\\uddff]){2}",bu="[\\ud800-\\udbff][\\udc00-\\udfff]",wu="(?:"+mu+"|"+gu+")"+"?",xu="[\\ufe0e\\ufe0f]?",ku=xu+wu+("(?:\\u200d(?:"+[vu,yu,bu].join("|")+")"+xu+wu+")*"),Su="(?:"+[vu+mu+"?",mu,yu,bu,pu].join("|")+")",Cu=RegExp(gu+"(?="+gu+")|"+Su+ku,"g");const Eu=function(e){for(var t=Cu.lastIndex=0;Cu.test(e);)++t;return t};const Tu=function(e){return du(e)?Eu(e):uu(e)};const Ou=function(e){if(null==e)return 0;if(Yn(e))return to(e)?Tu(e):e.length;var t=vr(e);return"[object Map]"==t||"[object Set]"==t?e.size:Jn(e).length};var Au=ji((function(e,t){return nu(e)?tu(e,gc(t,1,nu,!0)):[]}));const _u=Au;const Pu=ji((function(e){return Vi(gc(e,1,nu,!0))}));const Nu=function(e,t){return Sr(e,t)};var Mu=function(e){function t(){return e.apply(this,arguments)||this}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.className,r=e.name,i=Oe(r,"flag",n),o=Le(t,this.props),s=Be(t,this.props);return we.createElement(s,Ee({},o,{className:i}))},t}(we.PureComponent);Mu.handledProps=["as","className","name"],Mu.propTypes={},Mu.defaultProps={as:"i"},Mu.create=io(Mu,(function(e){return{name:e}}));const ju=Mu;function Ru(e){var t=e.className,n=Oe("divider",t),r=Le(Ru,e),i=Be(Ru,e);return we.createElement(i,Ee({},r,{className:n}))}Ru.handledProps=["as","className"],Ru.propTypes={};const Iu=Ru;var Du=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){Ri(t.props,"onClick",e,t.props)},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,i=e.className,o=e.content,s=e.disabled,a=e.description,l=e.flag,c=e.icon,u=e.image,h=e.label,d=e.selected,f=e.text,p=Oe(Pe(n,"active"),Pe(s,"disabled"),Pe(d,"selected"),"item",i),m=Ii(c)?function(e,t){return ui(we.Children.toArray(e),{type:t})}(r,"DropdownMenu")&&"dropdown":c,g=Le(t,this.props),v=Be(t,this.props),y={role:"option","aria-disabled":s,"aria-checked":n,"aria-selected":d};if(!hi(r))return we.createElement(v,Ee({},g,y,{className:p,onClick:this.handleClick}),r);var b=ju.create(l,{autoGenerateKey:!1}),w=fo.create(m,{autoGenerateKey:!1}),x=Ss.create(u,{autoGenerateKey:!1}),k=bs.create(h,{autoGenerateKey:!1}),S=ro("span",(function(e){return{children:e}}),a,{defaultProps:{className:"description"},autoGenerateKey:!1}),C=ro("span",(function(e){return{children:e}}),hi(o)?f:o,{defaultProps:{className:"text"},autoGenerateKey:!1});return we.createElement(v,Ee({},g,y,{className:p,onClick:this.handleClick}),x,w,b,k,S,C)},t}(we.Component);Du.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],Du.propTypes={},Du.create=io(Du,(function(e){return e}));const Lu=Du;function Bu(e){var t=e.children,n=e.className,r=e.content,i=e.icon,o=Oe("header",n),s=Le(Bu,e),a=Be(Bu,e);return hi(t)?we.createElement(a,Ee({},s,{className:o}),fo.create(i,{autoGenerateKey:!1}),r):we.createElement(a,Ee({},s,{className:o}),t)}Bu.handledProps=["as","children","className","content","icon"],Bu.propTypes={},Bu.create=io(Bu,(function(e){return{content:e}}));const Fu=Bu;function zu(e){var t=e.children,n=e.className,r=e.content,i=e.direction,o=e.open,s=e.scrolling,a=Oe(i,Pe(o,"visible"),Pe(s,"scrolling"),"menu transition",n),l=Le(zu,e),c=Be(zu,e);return we.createElement(c,Ee({},l,{className:a}),hi(t)?r:t)}zu.handledProps=["as","children","className","content","direction","open","scrolling"],zu.propTypes={};const Hu=zu;var $u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleChange=function(e){var n=Qr(e,"target.value");Ri(t.props,"onChange",e,Ee({},t.props,{value:n}))},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.autoComplete,r=e.className,i=e.tabIndex,o=e.type,s=e.value,a=Oe("search",r),l=Le(t,this.props);return we.createElement("input",Ee({},l,{"aria-autocomplete":"list",autoComplete:n,className:a,onChange:this.handleChange,tabIndex:i,type:o,value:s}))},t}(we.Component);$u.handledProps=["as","autoComplete","className","tabIndex","type","value"],$u.propTypes={},$u.defaultProps={autoComplete:"off",type:"text"},$u.create=io($u,(function(e){return{type:e}}));const Uu=$u;function Wu(e){var t=e.children,n=e.className,r=e.content,i=Oe("divider",n),o=Le(Wu,e),s=Be(Wu,e);return we.createElement(s,Ee({"aria-atomic":!0,"aria-live":"polite",role:"alert"},o,{className:i}),hi(t)?r:t)}Wu.handledProps=["as","children","className","content"],Wu.propTypes={},Wu.create=io(Wu,(function(e){return{content:e}}));const Vu=Wu;var qu=/[\\^$.*+?()[\]{}|]/g,Ku=RegExp(qu.source);const Qu=function(e){return(e=Wr(e))&&Ku.test(e)?e.replace(qu,"\\$&"):e};const Gu=function(e){return function(t){return null==e?void 0:e[t]}};const Ju=Gu({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});var Yu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xu=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const Zu=function(e){return(e=Wr(e))&&e.replace(Yu,Ju).replace(Xu,"")};const eh=function(e,t){var n=[];return ai(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};const th=function(e,t){return(dn(e)?pn:eh)(e,ri(t,3))};function nh(e){var t=e.additionLabel,n=e.additionPosition,r=e.allowAdditions,i=e.deburr,o=e.multiple,s=e.options,a=e.search,l=e.searchQuery,c=e.value,u=s;if(o&&(u=th(u,(function(e){return!_o(c,e.value)}))),a&&l)if(pt(a))u=a(u,l);else{var h=i?Zu(l):l,d=new RegExp(Qu(h),"i");u=th(u,(function(e){return d.test(i?Zu(e.text):e.text)}))}if(r&&a&&l&&!ui(u,{text:l})){var f={key:"addition",text:[we.isValidElement(t)?we.cloneElement(t,{key:"addition-label"}):t||"",we.createElement("b",{key:"addition-query"},l)],value:l,className:"addition","data-additional":!0};"top"===n?u.unshift(f):u.push(f)}return u}function rh(e){var t,n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,o=e.deburr,s=e.multiple,a=e.options,l=e.search,c=e.searchQuery,u=e.selectedIndex,h=e.value,d=nh({value:h,options:a,searchQuery:c,additionLabel:n,additionPosition:r,allowAdditions:i,deburr:o,multiple:s,search:l}),f=xc(d,(function(e,t,n){return t.disabled||e.push(n),e}),[]);if(!u||u<0){var p=f[0];t=s?p:au(d,["value",h])||f[0]}else if(s)t=lu(f,(function(e){return e>=u})),u>=d.length-1&&(t=f[f.length-1]);else{var m=au(d,["value",h]);t=_o(f,m)?m:void 0}return(!t||t<0)&&(t=f[0]),t}nh.handledProps=[];var ih=function(e,t){return Ii(e)?t:e},oh=function(e){return e?e.map((function(e){return yc(e,["key","value"])})):e};function sh(e){var t=e.flag,n=e.image,r=e.text;return pt(r)?r:{content:we.createElement(we.Fragment,null,ju.create(t),Ss.create(n),r)}}var ah=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).searchRef=(0,we.createRef)(),t.sizerRef=(0,we.createRef)(),t.ref=(0,we.createRef)(),t.handleChange=function(e,n){Ri(t.props,"onChange",e,Ee({},t.props,{value:n}))},t.closeOnChange=function(e){var n=t.props,r=n.closeOnChange,i=n.multiple;(os(r)?!i:r)&&t.close(e,$i)},t.closeOnEscape=function(e){t.props.closeOnEscape&&Xo().getCode(e)===Xo().Escape&&(e.preventDefault(),t.close(e))},t.moveSelectionOnKeyDown=function(e){var n,r=t.props,i=r.multiple,o=r.selectOnNavigation;if(t.state.open){var s=((n={})[Xo().ArrowDown]=1,n[Xo().ArrowUp]=-1,n)[Xo().getCode(e)];if(void 0!==s){e.preventDefault();var a=t.getSelectedIndexAfterMove(s);!i&&o&&t.makeSelectedItemActive(e,a),t.setState({selectedIndex:a})}}},t.openOnSpace=function(e){var n,r,i,o=t.state.focus&&!t.state.open&&Xo().getCode(e)===Xo().Spacebar,s="INPUT"!==(null==(n=e.target)?void 0:n.tagName)&&"TEXTAREA"!==(null==(r=e.target)?void 0:r.tagName)&&!0!==(null==(i=e.target)?void 0:i.isContentEditable);o&&(s&&e.preventDefault(),t.open(e))},t.openOnArrow=function(e){var n=t.state,r=n.focus,i=n.open;if(r&&!i){var o=Xo().getCode(e);o!==Xo().ArrowDown&&o!==Xo().ArrowUp||(e.preventDefault(),t.open(e))}},t.makeSelectedItemActive=function(e,n){var r=t.state,i=r.open,o=r.value,s=t.props.multiple,a=t.getSelectedItem(n),l=Qr(a,"value"),c=Qr(a,"disabled");if(Ii(l)||!i||c)return o;var u=s?Pu(o,[l]):l;return(s?!!_u(u,o).length:u!==o)&&(t.setState({value:u}),t.handleChange(e,u),a["data-additional"]&&Ri(t.props,"onAddItem",e,Ee({},t.props,{value:l}))),o},t.selectItemOnEnter=function(e){var n=t.props.search,r=t.state,i=r.open,o=r.selectedIndex;if(i&&(Xo().getCode(e)===Xo().Enter||!n&&Xo().getCode(e)===Xo().Spacebar)){e.preventDefault();var s=Ou(nh({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search}));if(!n||0!==s){var a=t.makeSelectedItemActive(e,o);t.setState({selectedIndex:rh({additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search,selectedIndex:o,value:a,options:t.props.options,searchQuery:""})}),t.closeOnChange(e),t.clearSearchQuery(),n&&Ri(t.searchRef.current,"focus")}}},t.removeItemOnBackspace=function(e){var n=t.props,r=n.multiple,i=n.search,o=t.state,s=o.searchQuery,a=o.value;if(Xo().getCode(e)===Xo().Backspace&&!s&&i&&r&&!Sc(a)){e.preventDefault();var l=cu(a);t.setState({value:l}),t.handleChange(e,l)}},t.closeOnDocumentClick=function(e){t.props.closeOnBlur&&(t.ref.current&&is(t.ref.current,e)||t.close())},t.handleMouseDown=function(e){t.isMouseDown=!0,Ri(t.props,"onMouseDown",e,t.props),document.addEventListener("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,document.removeEventListener("mouseup",t.handleDocumentMouseUp)},t.handleClick=function(e){var n=t.props,r=n.minCharacters,i=n.search,o=t.state,s=o.open,a=o.searchQuery;if(Ri(t.props,"onClick",e,t.props),e.stopPropagation(),!i)return t.toggle(e);s?Ri(t.searchRef.current,"focus"):a.length>=r||1===r?t.open(e):Ri(t.searchRef.current,"focus")},t.handleIconClick=function(e){var n=t.props.clearable,r=t.hasValue();Ri(t.props,"onClick",e,t.props),e.stopPropagation(),n&&r?t.clearValue(e):t.toggle(e)},t.handleItemClick=function(e,n){var r=t.props,i=r.multiple,o=r.search,s=t.state.value,a=n.value;if(e.stopPropagation(),(i||n.disabled)&&e.nativeEvent.stopImmediatePropagation(),!n.disabled){var l=n["data-additional"],c=i?Pu(t.state.value,[a]):a;(i?!!_u(c,s).length:c!==s)&&(t.setState({value:c}),t.handleChange(e,c)),t.clearSearchQuery(),Ri(o?t.searchRef.current:t.ref.current,"focus"),t.closeOnChange(e),l&&Ri(t.props,"onAddItem",e,Ee({},t.props,{value:a}))}},t.handleFocus=function(e){t.state.focus||(Ri(t.props,"onFocus",e,t.props),t.setState({focus:!0}))},t.handleBlur=function(e){var n=Qr(e,"currentTarget");if(!n||!n.contains(document.activeElement)){var r=t.props,i=r.closeOnBlur,o=r.multiple,s=r.selectOnBlur;t.isMouseDown||(Ri(t.props,"onBlur",e,t.props),s&&!o&&(t.makeSelectedItemActive(e,t.state.selectedIndex),i&&t.close()),t.setState({focus:!1}),t.clearSearchQuery())}},t.handleSearchChange=function(e,n){var r=n.value;e.stopPropagation();var i=t.props.minCharacters,o=t.state.open,s=r;Ri(t.props,"onSearchChange",e,Ee({},t.props,{searchQuery:s})),t.setState({searchQuery:s,selectedIndex:0}),!o&&s.length>=i?t.open():o&&1!==i&&s.length<i&&t.close()},t.handleKeyDown=function(e){t.moveSelectionOnKeyDown(e),t.openOnArrow(e),t.openOnSpace(e),t.selectItemOnEnter(e),Ri(t.props,"onKeyDown",e)},t.getSelectedItem=function(e){var n=nh({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});return Qr(n,"["+e+"]")},t.getItemByValue=function(e){var n=t.props.options;return lu(n,{value:e})},t.getDropdownAriaOptions=function(){var e=t.props,n=e.loading,r=e.disabled,i=e.search,o=e.multiple,s={role:i?"combobox":"listbox","aria-busy":n,"aria-disabled":r,"aria-expanded":!!t.state.open};return"listbox"===s.role&&(s["aria-multiselectable"]=o),s},t.clearSearchQuery=function(){var e=t.state.searchQuery;void 0!==e&&""!==e&&t.setState({searchQuery:""})},t.handleLabelClick=function(e,n){e.stopPropagation(),t.setState({selectedLabel:n.value}),Ri(t.props,"onLabelClick",e,n)},t.handleLabelRemove=function(e,n){e.stopPropagation();var r=t.state.value,i=iu(r,n.value);t.setState({value:i}),t.handleChange(e,i)},t.getSelectedIndexAfterMove=function(e,n){void 0===n&&(n=t.state.selectedIndex);var r=nh({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(void 0!==r&&!eu(r,"disabled")){var i=r.length-1,o=n+e;return!t.props.wrapSelection&&(o>i||o<0)?o=n:o>i?o=0:o<0&&(o=i),r[o].disabled?t.getSelectedIndexAfterMove(e,o):o}},t.handleIconOverrides=function(e){var n=t.props.clearable;return{className:Oe(n&&t.hasValue()&&"clear",e.className),onClick:function(n){Ri(e,"onClick",n,e),t.handleIconClick(n)}}},t.clearValue=function(e){var n=t.props.multiple?[]:"";t.setState({value:n}),t.handleChange(e,n)},t.computeSearchInputTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return Ii(r)?n?-1:0:r},t.computeSearchInputWidth=function(){var e=t.state.searchQuery;if(t.sizerRef.current&&e){t.sizerRef.current.style.display="inline",t.sizerRef.current.textContent=e;var n=Math.ceil(t.sizerRef.current.getBoundingClientRect().width);return t.sizerRef.current.style.removeProperty("display"),n}},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.search,i=e.tabIndex;if(!r)return n?-1:Ii(i)?0:i},t.handleSearchInputOverrides=function(e){return{onChange:function(n,r){Ri(e,"onChange",n,r),t.handleSearchChange(n,r)}}},t.hasValue=function(){var e=t.props.multiple,n=t.state.value;return e?!Sc(n):!Ii(n)&&""!==n},t.scrollSelectedItemIntoView=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=e.querySelector(".item.selected");if(n){var r=n.offsetTop<e.scrollTop,i=n.offsetTop+n.clientHeight>e.scrollTop+e.clientHeight;r?e.scrollTop=n.offsetTop:i&&(e.scrollTop=n.offsetTop+n.clientHeight-e.clientHeight)}}}},t.setOpenDirection=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=t.ref.current.getBoundingClientRect(),r=e.clientHeight,i=document.documentElement.clientHeight-n.top-n.height-r,o=n.top-r,s=i<0&&o>i;!s!==!t.state.upward&&t.setState({upward:s})}}},t.open=function(e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var r=t.props,i=r.disabled,o=r.search;i||(o&&Ri(t.searchRef.current,"focus"),Ri(t.props,"onOpen",e,t.props),n&&t.setState({open:!0}),t.scrollSelectedItemIntoView())},t.close=function(e,n){void 0===n&&(n=t.handleClose),t.state.open&&(Ri(t.props,"onClose",e,t.props),t.setState({open:!1},n))},t.handleClose=function(){var e=document.activeElement===t.searchRef.current;!e&&t.ref.current&&t.ref.current.blur();var n=document.activeElement===t.ref.current,r=e||n;t.setState({focus:r})},t.toggle=function(e){return t.state.open?t.close(e):t.open(e)},t.renderText=function(){var e,n=t.props,r=n.multiple,i=n.placeholder,o=n.search,s=n.text,a=t.state,l=a.searchQuery,c=a.selectedIndex,u=a.value,h=a.open,d=t.hasValue(),f=Oe(i&&!d&&"default","text",o&&l&&"filtered"),p=i;return s?p=s:h&&!r?e=t.getSelectedItem(c):d&&(e=t.getItemByValue(u)),Vu.create(e?sh(e):p,{defaultProps:{className:f}})},t.renderSearchInput=function(){var e=t.props,n=e.search,r=e.searchInput,i=t.state.searchQuery;return n&&we.createElement(Jo,{innerRef:t.searchRef},Uu.create(r,{defaultProps:{style:{width:t.computeSearchInputWidth()},tabIndex:t.computeSearchInputTabIndex(),value:i},overrideProps:t.handleSearchInputOverrides}))},t.renderSearchSizer=function(){var e=t.props,n=e.search,r=e.multiple;return n&&r&&we.createElement("span",{className:"sizer",ref:t.sizerRef})},t.renderLabels=function(){var e=t.props,n=e.multiple,r=e.renderLabel,i=t.state,o=i.selectedLabel,s=i.value;if(n&&!Sc(s)){var a=$s(s,t.getItemByValue);return $s(Yc(a),(function(e,n){var i={active:e.value===o,as:"a",key:ih(e.key,e.value),onClick:t.handleLabelClick,onRemove:t.handleLabelRemove,value:e.value};return bs.create(r(e,n,i),{defaultProps:i})}))}},t.renderOptions=function(){var e=t.props,n=e.lazyLoad,r=e.multiple,i=e.search,o=e.noResultsMessage,s=t.state,a=s.open,l=s.selectedIndex,c=s.value;if(n&&!a)return null;var u=nh({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(null!==o&&i&&Sc(u))return we.createElement("div",{className:"message"},o);var h=r?function(e){return _o(c,e)}:function(e){return e===c};return $s(u,(function(e,n){return Lu.create(Ee({active:h(e.value),selected:l===n},e,{key:ih(e.key,e.value),style:Ee({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(n,r){null==e.onClick||e.onClick(n,r),t.handleItemClick(n,r)}}}})}))},t.renderMenu=function(){var e=t.props,n=e.children,r=e.direction,i=e.header,o=t.state.open,s=t.getDropdownMenuAriaOptions();if(!hi(n)){var a=we.Children.only(n),l=Oe(r,Pe(o,"visible"),a.props.className);return(0,we.cloneElement)(a,Ee({className:l},s))}return we.createElement(Hu,Ee({},s,{direction:r,open:o}),Fu.create(i,{autoGenerateKey:!1}),t.renderOptions())},t}bi(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},t.getAutoControlledStateFromProps=function(e,t,n){var r={__options:e.options,__value:t.value};return(!Ec()(n.__value,t.value)||!Nu(oh(e.options),oh(n.__options)))&&(r.selectedIndex=rh({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),r},n.componentDidMount=function(){this.state.open&&this.open(null,!1)},n.shouldComponentUpdate=function(e,t){return!Ec()(e,this.props)||!Ec()(t,this.state)},n.componentDidUpdate=function(e,t){var n=this.props,r=n.closeOnBlur,i=n.minCharacters,o=n.openOnFocus,s=n.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var a=!s||s&&1===i&&!this.state.open;o&&a&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&r&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},n.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,n=e.multiple,r={};return t&&(r["aria-multiselectable"]=n,r.role="listbox"),r},n.render=function(){var e=this.props,n=e.basic,r=e.button,i=e.className,o=e.compact,s=e.disabled,a=e.error,l=e.fluid,c=e.floating,u=e.icon,h=e.inline,d=e.item,f=e.labeled,p=e.loading,m=e.multiple,g=e.pointing,v=e.search,y=e.selection,b=e.scrolling,w=e.simple,x=e.trigger,k=this.state,S=k.focus,C=k.open,E=k.upward,T=Oe("ui",Pe(C,"active visible"),Pe(s,"disabled"),Pe(a,"error"),Pe(p,"loading"),Pe(n,"basic"),Pe(r,"button"),Pe(o,"compact"),Pe(l,"fluid"),Pe(c,"floating"),Pe(h,"inline"),Pe(f,"labeled"),Pe(d,"item"),Pe(m,"multiple"),Pe(v,"search"),Pe(y,"selection"),Pe(w,"simple"),Pe(b,"scrolling"),Pe(E,"upward"),Me(g,"pointing"),"dropdown",i),O=Le(t,this.props),A=Be(t,this.props),_=this.getDropdownAriaOptions(A,this.props);return we.createElement(Jo,{innerRef:this.ref},we.createElement(A,Ee({},O,_,{className:T,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),x||this.renderText(),fo.create(u,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),C&&we.createElement(Ho(),{name:"keydown",on:this.closeOnEscape}),C&&we.createElement(Ho(),{name:"click",on:this.closeOnDocumentClick}),S&&we.createElement(Ho(),{name:"keydown",on:this.removeItemOnBackspace})))},t}(ss);function lh(e){var t=e.control,n=Le(lh,e),r=Be(lh,e);return we.createElement(r,Ee({},n,{control:t}))}ah.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],ah.propTypes={},ah.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:sh,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},ah.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],ah.Divider=Iu,ah.Header=Fu,ah.Item=Lu,ah.Menu=Hu,ah.SearchInput=Uu,ah.Text=Vu,lh.handledProps=["as","control"],lh.propTypes={},lh.defaultProps={as:qc,control:ah};const ch=lh;function uh(e){var t=e.children,n=e.className,r=e.grouped,i=e.inline,o=e.unstackable,s=e.widths,a=Oe(Pe(r,"grouped"),Pe(i,"inline"),Pe(o,"unstackable"),De(s,null,!0),"fields",n),l=Le(uh,e),c=Be(uh,e);return we.createElement(c,Ee({},l,{className:a}),t)}uh.handledProps=["as","children","className","grouped","inline","unstackable","widths"],uh.propTypes={};const hh=uh;function dh(e){var t=e.control,n=Le(dh,e),r=Be(dh,e);return we.createElement(r,Ee({},n,{control:t}))}dh.handledProps=["as","control"],dh.propTypes={},dh.defaultProps={as:qc,control:oc};const fh=dh;function ph(e){var t=e.control,n=Le(ph,e),r=Be(ph,e);return we.createElement(r,Ee({},n,{control:t}))}ph.handledProps=["as","control"],ph.propTypes={},ph.defaultProps={as:qc,control:Wc};const mh=ph;function gh(e){return we.createElement(ah,Ee({},e,{selection:!0}))}gh.handledProps=["options"],gh.propTypes={},gh.Divider=ah.Divider,gh.Header=ah.Header,gh.Item=ah.Item,gh.Menu=ah.Menu;const vh=gh;function yh(e){var t=e.control,n=e.options,r=Le(yh,e),i=Be(yh,e);return we.createElement(i,Ee({},r,{control:t,options:n}))}yh.handledProps=["as","control","options"],yh.propTypes={},yh.defaultProps={as:qc,control:vh};const bh=yh;var wh=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,we.createRef)(),t.focus=function(){return t.ref.current.focus()},t.handleChange=function(e){var n=Qr(e,"target.value");Ri(t.props,"onChange",e,Ee({},t.props,{value:n}))},t.handleInput=function(e){var n=Qr(e,"target.value");Ri(t.props,"onInput",e,Ee({},t.props,{value:n}))},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.rows,r=e.value,i=Le(t,this.props),o=Be(t,this.props);return we.createElement(Jo,{innerRef:this.ref},we.createElement(o,Ee({},i,{onChange:this.handleChange,onInput:this.handleInput,rows:n,value:r})))},t}(we.Component);wh.handledProps=["as","onChange","onInput","rows","value"],wh.propTypes={},wh.defaultProps={as:"textarea",rows:3};const xh=wh;function kh(e){var t=e.control,n=Le(kh,e),r=Be(kh,e);return we.createElement(r,Ee({},n,{control:t}))}kh.handledProps=["as","control"],kh.propTypes={},kh.defaultProps={as:qc,control:xh};const Sh=kh;var Ch=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleSubmit=function(e){"string"!==typeof t.props.action&&Ri(e,"preventDefault");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ri.apply(void 0,[t.props,"onSubmit",e,t.props].concat(r))},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.action,r=e.children,i=e.className,o=e.error,s=e.inverted,a=e.loading,l=e.reply,c=e.size,u=e.success,h=e.unstackable,d=e.warning,f=e.widths,p=Oe("ui",c,Pe(o,"error"),Pe(s,"inverted"),Pe(a,"loading"),Pe(l,"reply"),Pe(u,"success"),Pe(h,"unstackable"),Pe(d,"warning"),De(f,null,!0),"form",i),m=Le(t,this.props),g=Be(t,this.props);return we.createElement(g,Ee({},m,{action:n,className:p,onSubmit:this.handleSubmit}),r)},t}(we.Component);Ch.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],Ch.propTypes={},Ch.defaultProps={as:"form"},Ch.Field=qc,Ch.Button=Qc,Ch.Checkbox=Jc,Ch.Dropdown=ch,Ch.Group=hh,Ch.Input=fh,Ch.Radio=mh,Ch.Select=bh,Ch.TextArea=Sh;const Eh=Ch,Th=we.createRef(),Oh=e=>{let{initiateConversation:t,...n}=e;const[r,i]=we.useState(!1),[o,s]=we.useState(""),[a,l]=we.useState("");(0,we.useEffect)((()=>{r&&Th.current.focus()}),[r]);const c=()=>o.length>0&&a.length>0;return(0,Ps.jsxs)($c,{onClose:()=>i(!1),onOpen:()=>i(!0),open:r,...n,children:[(0,Ps.jsxs)(_s,{children:[(0,Ps.jsx)(fo,{name:"send"}),(0,Ps.jsx)($c.Content,{children:"Send Private Message"})]}),(0,Ps.jsx)($c.Content,{children:(0,Ps.jsxs)(Eh,{children:[(0,Ps.jsx)(Eh.Field,{children:(0,Ps.jsx)(oc,{onChange:(e,t)=>s(t.value),placeholder:"Username",ref:Th})}),(0,Ps.jsx)(Eh.Field,{children:(0,Ps.jsx)(oc,{onChange:(e,t)=>l(t.value),placeholder:"Message"})})]})}),(0,Ps.jsxs)($c.Actions,{children:[(0,Ps.jsx)($a,{onClick:()=>i(!1),children:"Cancel"}),(0,Ps.jsx)($a,{disabled:!c(),onClick:()=>(async()=>{c()?(await t(o,a),i(!1)):Th.current.focus()})(),positive:!0,children:"Send"})]})]})};function Ah(e){var t=e.children,n=e.className,r=e.content,i=Oe("header",n),o=Le(Ah,e),s=Be(Ah,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Ah.handledProps=["as","children","className","content"],Ah.propTypes={};const _h=Ah;var Ph=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;const Nh=function(e){return e.match(Ph)||[]};var Mh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;const jh=function(e){return Mh.test(e)};var Rh="\\ud800-\\udfff",Ih="\\u2700-\\u27bf",Dh="a-z\\xdf-\\xf6\\xf8-\\xff",Lh="A-Z\\xc0-\\xd6\\xd8-\\xde",Bh="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fh="["+Bh+"]",zh="\\d+",Hh="["+Ih+"]",$h="["+Dh+"]",Uh="[^"+Rh+Bh+zh+Ih+Dh+Lh+"]",Wh="(?:\\ud83c[\\udde6-\\uddff]){2}",Vh="[\\ud800-\\udbff][\\udc00-\\udfff]",qh="["+Lh+"]",Kh="(?:"+$h+"|"+Uh+")",Qh="(?:"+qh+"|"+Uh+")",Gh="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Jh="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Yh="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Xh="[\\ufe0e\\ufe0f]?",Zh=Xh+Yh+("(?:\\u200d(?:"+["[^"+Rh+"]",Wh,Vh].join("|")+")"+Xh+Yh+")*"),ed="(?:"+[Hh,Wh,Vh].join("|")+")"+Zh,td=RegExp([qh+"?"+$h+"+"+Gh+"(?="+[Fh,qh,"$"].join("|")+")",Qh+"+"+Jh+"(?="+[Fh,qh+Kh,"$"].join("|")+")",qh+"?"+Kh+"+"+Gh,qh+"+"+Jh,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zh,ed].join("|"),"g");const nd=function(e){return e.match(td)||[]};const rd=function(e,t,n){return e=Wr(e),void 0===(t=n?void 0:t)?jh(e)?nd(e):Nh(e):e.match(t)||[]};var id=RegExp("['\u2019]","g");const od=function(e){return function(t){return bc(rd(Zu(t).replace(id,"")),e,"")}};const sd=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:ki(e,t,n)};const ad=function(e){return e.split("")};var ld="\\ud800-\\udfff",cd="["+ld+"]",ud="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",hd="\\ud83c[\\udffb-\\udfff]",dd="[^"+ld+"]",fd="(?:\\ud83c[\\udde6-\\uddff]){2}",pd="[\\ud800-\\udbff][\\udc00-\\udfff]",md="(?:"+ud+"|"+hd+")"+"?",gd="[\\ufe0e\\ufe0f]?",vd=gd+md+("(?:\\u200d(?:"+[dd,fd,pd].join("|")+")"+gd+md+")*"),yd="(?:"+[dd+ud+"?",ud,fd,pd,cd].join("|")+")",bd=RegExp(hd+"(?="+hd+")|"+yd+vd,"g");const wd=function(e){return e.match(bd)||[]};const xd=function(e){return du(e)?wd(e):ad(e)};const kd=function(e){return function(t){t=Wr(t);var n=du(t)?xd(t):void 0,r=n?n[0]:t.charAt(0),i=n?sd(n,1).join(""):t.slice(1);return r[e]()+i}};const Sd=kd("toUpperCase");const Cd=od((function(e,t,n){return e+(n?" ":"")+Sd(t)}));var Ed=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Ri(t.props,"onClick",e,t.props)},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,i=e.className,o=e.color,s=e.content,a=e.disabled,l=e.fitted,c=e.header,u=e.icon,h=e.link,d=e.name,f=e.onClick,p=e.position,m=Oe(o,p,Pe(n,"active"),Pe(a,"disabled"),Pe(!0===u||u&&!(d||s),"icon"),Pe(c,"header"),Pe(h,"link"),Me(l,"fitted"),"item",i),g=Be(t,this.props,(function(){if(f)return"a"})),v=Le(t,this.props);return hi(r)?we.createElement(g,Ee({},v,{className:m,onClick:this.handleClick}),fo.create(u,{autoGenerateKey:!1}),hi(s)?Cd(d):s):we.createElement(g,Ee({},v,{className:m,onClick:this.handleClick}),r)},t}(we.Component);function Td(e){var t=e.children,n=e.className,r=e.content,i=e.position,o=Oe(i,"menu",n),s=Le(Td,e),a=Be(Td,e);return we.createElement(a,Ee({},s,{className:o}),hi(t)?r:t)}Ed.handledProps=["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"],Ed.propTypes={},Ed.create=io(Ed,(function(e){return{content:e,name:e}})),Td.handledProps=["as","children","className","content","position"],Td.propTypes={};const Od=Td;var Ad=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){var i=r.index;t.setState({activeIndex:i}),Ri(e,"onClick",n,r),Ri(t.props,"onItemClick",n,r)}}},t}bi(t,e);var n=t.prototype;return n.renderItems=function(){var e=this,t=this.props.items,n=this.state.activeIndex;return $s(t,(function(t,r){return Ed.create(t,{defaultProps:{active:parseInt(n,10)===r,index:r},overrideProps:e.handleItemOverrides})}))},n.render=function(){var e=this.props,n=e.attached,r=e.borderless,i=e.children,o=e.className,s=e.color,a=e.compact,l=e.fixed,c=e.floated,u=e.fluid,h=e.icon,d=e.inverted,f=e.pagination,p=e.pointing,m=e.secondary,g=e.size,v=e.stackable,y=e.tabular,b=e.text,w=e.vertical,x=e.widths,k=Oe("ui",s,g,Pe(r,"borderless"),Pe(a,"compact"),Pe(u,"fluid"),Pe(d,"inverted"),Pe(f,"pagination"),Pe(p,"pointing"),Pe(m,"secondary"),Pe(v,"stackable"),Pe(b,"text"),Pe(w,"vertical"),Me(n,"attached"),Me(c,"floated"),Me(h,"icon"),Me(y,"tabular"),Ne(l,"fixed"),De(x,"item"),o,"menu"),S=Le(t,this.props),C=Be(t,this.props);return we.createElement(C,Ee({},S,{className:k}),hi(i)?this.renderItems():i)},t}(ss);Ad.handledProps=["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"],Ad.propTypes={},Ad.autoControlledProps=["activeIndex"],Ad.Header=_h,Ad.Item=Ed,Ad.Menu=Od,Ad.create=io(Ad,(function(e){return{items:e}}));const _d=Ad,Pd=e=>{let{active:t,conversations:n,onConversationChange:r,...i}=e;const o=Object.keys(n),s=e=>t===e;return(0,Ps.jsxs)(_d,{className:"conversation-menu",size:"large",children:[o.map((e=>(0,Ps.jsxs)(_d.Item,{active:s(e),className:"menu-item "+(s(e)?"menu-active":""),name:e,onClick:()=>r(e),children:[(0,Ps.jsx)(fo,{color:"green",name:"circle",size:"tiny"}),e,n[e].hasUnAcknowledgedMessages&&(0,Ps.jsx)(bs,{color:"red",size:"tiny",children:n[e].unAcknowledgedMessageCount})]},e))),(0,Ps.jsx)(_d.Menu,{position:"right",children:(0,Ps.jsx)(Oh,{centered:!0,size:"small",trigger:(0,Ps.jsx)($a,{className:"add-button",icon:!0,children:(0,Ps.jsx)(fo,{name:"plus"})}),...i})})]})},Nd={active:"",conversations:{},interval:void 0,loading:!1};class Md extends we.Component{constructor(e){super(e),this.listRef=(0,we.createRef)(),this.messageRef=void 0,this.getFirstConversation=()=>{const e=Object.keys(this.state.conversations);return e.length>0?e[0]:""},this.fetchConversations=async()=>{let e=await(async()=>(await ge.get("/conversations")).data)();e=0===e.length?{}:e.reduce(((e,t)=>(e[t.username]=t,e)),{});const{active:t}=this.state,n=e[t];n&&(console.log("active?",n),!0===n.hasUnAcknowledgedMessages&&await this.acknowledgeMessages(t),e={...e,[t]:await hc({username:t})}),this.setState({conversations:e},(()=>{this.state.conversations[this.state.active]||this.selectConversation(this.getFirstConversation())}))},this.acknowledgeMessages=async e=>{e&&""!==e&&await(e=>{let{username:t}=e;return ge.put(`/conversations/${encodeURIComponent(t)}`)})({username:e})},this.sendMessage=async(e,t)=>{e&&t&&""!==e&&await(e=>{let{username:t,message:n}=e;return ge.post(`/conversations/${encodeURIComponent(t)}`,JSON.stringify(n))})({message:t,username:e})},this.sendReply=async()=>{const{active:e}=this.state,t=this.messageRef.current.value;this.validInput()&&(await this.sendMessage(e,t),this.messageRef.current.value="",this.fetchConversations())},this.validInput=()=>(this.state.active||"").length>0&&(this.messageRef&&this.messageRef.current&&this.messageRef.current.value||"").length>0,this.focusInput=()=>{this.messageRef.current.focus()},this.formatTimestamp=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en",{day:"numeric",hour:"numeric",minute:"2-digit",month:"numeric"}).format(t)},this.selectConversation=e=>{this.setState({active:e,loading:!0},(async()=>{const{active:e,conversations:t}=this.state;sessionStorage.setItem(a,e),this.setState({conversations:""===e?t:{...t,[e]:await hc({username:e})},loading:!1},(()=>{try{this.listRef.current.lastChild.scrollIntoView()}catch{}}))}))},this.initiateConversation=async(e,t)=>{await this.sendMessage(e,t),await this.fetchConversations(),this.selectConversation(e)},this.deleteConversation=async e=>{await(e=>{let{username:t}=e;return ge.delete(`/conversations/${encodeURIComponent(t)}`)})({username:e}),await this.fetchConversations(),this.selectConversation(this.getFirstConversation())},this.state=Nd}componentDidMount(){this.setState({active:sessionStorage.getItem(a)||"",interval:window.setInterval(this.fetchConversations,5e3)},(async()=>{await this.fetchConversations(),this.selectConversation(this.state.active||this.getFirstConversation())}))}componentWillUnmount(){clearInterval(this.state.interval),this.setState({interval:void 0})}render(){var e;const{active:t,conversations:n=[],loading:r}=this.state,i=(null===(e=n[t])||void 0===e?void 0:e.messages)||[],{user:o}=this.props.state;return(0,Ps.jsxs)("div",{className:"chats",children:[(0,Ps.jsxs)(vi,{className:"chat-segment",raised:!0,children:[(0,Ps.jsx)("div",{className:"chat-segment-icon",children:(0,Ps.jsx)(fo,{name:"comment",size:"big"})}),(0,Ps.jsx)(Pd,{active:t,conversations:n,initiateConversation:this.initiateConversation,onConversationChange:e=>this.selectConversation(e)})]}),!1===Boolean(t)?(0,Ps.jsx)(Ns,{caption:"No chats to display",icon:"comment"}):(0,Ps.jsx)(Ra,{className:"chat-active-card",raised:!0,children:(0,Ps.jsxs)(Ra.Content,{onClick:()=>this.focusInput(),children:[(0,Ps.jsxs)(Ra.Header,{children:[(0,Ps.jsx)(fo,{color:"green",name:"circle"}),t,(0,Ps.jsx)(fo,{className:"close-button",color:"red",link:!0,name:"close",onClick:()=>this.deleteConversation(t)})]}),(0,Ps.jsx)("div",{className:"chat",children:r?(0,Ps.jsx)(ps,{active:!0,inverted:!0,children:(0,Ps.jsx)(ac,{inverted:!0})}):(0,Ps.jsxs)(vi.Group,{children:[(0,Ps.jsx)(vi,{className:"chat-history",children:(0,Ps.jsx)(Jo,{innerRef:this.listRef,children:(0,Ps.jsxs)(na,{children:[i.map((e=>(0,Ps.jsxs)(na.Content,{className:"chat-message "+("Out"===e.direction?"chat-message-self":""),children:[(0,Ps.jsx)("span",{className:"chat-message-time",children:this.formatTimestamp(e.timestamp)}),(0,Ps.jsxs)("span",{className:"chat-message-name",children:["Out"===e.direction?o.username:e.username,":"," "]}),(0,Ps.jsx)("span",{className:"chat-message-message",children:e.message})]},`${e.timestamp}+${e.message}`))),(0,Ps.jsx)(na.Content,{id:"chat-history-scroll-anchor"})]})})}),(0,Ps.jsx)(vi,{className:"chat-input",children:(0,Ps.jsx)(oc,{action:{className:"chat-message-button",disabled:!this.validInput(),icon:(0,Ps.jsx)(fo,{color:"green",name:"send"}),onClick:this.sendMessage},fluid:!0,input:(0,Ps.jsx)("input",{autoComplete:"off","data-lpignore":"true",id:"chat-message-input",type:"text"}),onKeyUp:e=>"Enter"===e.key?this.sendReply():"",ref:e=>this.messageRef=e&&e.inputRef,transparent:!0})})]})})]})})]})}}const jd=Md,Rd=["\n      \u2584\u2584\u2584\u2584     \u2584\u2584\u2584\u2584     \u2584\u2584\u2584\u2584\n\u2584\u2584\u2584\u2584\u2584\u2584\u2588  \u2588\u2584\u2584\u2584\u2584\u2584\u2588  \u2588\u2584\u2584\u2584\u2584\u2584\u2588  \u2588\n\u2588__ --\u2588  \u2588__ --\u2588    \u25c4\u2588  -  \u2588\n\u2588\u2584\u2584\u2584\u2584\u2584\u2588\u2584\u2584\u2588\u2584\u2584\u2584\u2584\u2584\u2588\u2584\u2584\u2588\u2584\u2584\u2588\u2584\u2584\u2584\u2584\u2584\u2588\n","\n        \u2584\u2584\u2584\u2584         \u2584\u2584\u2584\u2584       \u2584\u2584\u2584\u2584\n\u2584\u2584\u2584\u2584\u2584\u2584\u2584 \u2588  \u2588 \u2584\u2584\u2584\u2584\u2584\u2584\u2584 \u2588  \u2588\u2584\u2584\u2584 \u2584\u2584\u2584\u2588  \u2588\n\u2588__ --\u2588 \u2588  \u2588 \u2588__ --\u2588 \u2588    \u25c4\u2588 \u2588  -  \u2588\n\u2588\u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2588\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584\u2588\n"];function Id(e){var t=e.children,n=e.className,r=e.computer,i=e.color,o=e.floated,s=e.largeScreen,a=e.mobile,l=e.only,c=e.stretched,u=e.tablet,h=e.textAlign,d=e.verticalAlign,f=e.widescreen,p=e.width,m=Oe(i,Pe(c,"stretched"),je(l,"only"),Re(h),Ne(o,"floated"),Ie(d),De(r,"wide computer"),De(s,"wide large screen"),De(a,"wide mobile"),De(u,"wide tablet"),De(f,"wide widescreen"),De(p,"wide"),"column",n),g=Le(Id,e),v=Be(Id,e);return we.createElement(v,Ee({},g,{className:m}),t)}Id.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],Id.propTypes={},Id.create=io(Id,(function(e){return{children:e}}));const Dd=Id;function Ld(e){var t=e.centered,n=e.children,r=e.className,i=e.color,o=e.columns,s=e.divided,a=e.only,l=e.reversed,c=e.stretched,u=e.textAlign,h=e.verticalAlign,d=Oe(i,Pe(t,"centered"),Pe(s,"divided"),Pe(c,"stretched"),je(a,"only"),je(l,"reversed"),Re(u),Ie(h),De(o,"column",!0),"row",r),f=Le(Ld,e),p=Be(Ld,e);return we.createElement(p,Ee({},f,{className:d}),n)}Ld.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],Ld.propTypes={};const Bd=Ld;function Fd(e){var t=e.celled,n=e.centered,r=e.children,i=e.className,o=e.columns,s=e.container,a=e.divided,l=e.doubling,c=e.inverted,u=e.padded,h=e.relaxed,d=e.reversed,f=e.stackable,p=e.stretched,m=e.textAlign,g=e.verticalAlign,v=Oe("ui",Pe(n,"centered"),Pe(s,"container"),Pe(l,"doubling"),Pe(c,"inverted"),Pe(f,"stackable"),Pe(p,"stretched"),Me(t,"celled"),Me(a,"divided"),Me(u,"padded"),Me(h,"relaxed"),je(d,"reversed"),Re(m),Ie(g),De(o,"column",!0),"grid",i),y=Le(Fd,e),b=Be(Fd,e);return we.createElement(b,Ee({},y,{className:v}),r)}Fd.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],Fd.Column=Dd,Fd.Row=Bd,Fd.propTypes={};const zd=Fd;function Hd(e){var t=e.children,n=e.className,r=e.content,i=Oe("content",n),o=Le(Hd,e),s=Be(Hd,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Hd.handledProps=["as","children","className","content"],Hd.propTypes={};const $d=Hd;function Ud(e){var t=e.children,n=e.className,r=e.content,i=Oe("header",n),o=Le(Ud,e),s=Be(Ud,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Ud.handledProps=["as","children","className","content"],Ud.propTypes={},Ud.create=io(Ud,(function(e){return{content:e}}));const Wd=Ud;function Vd(e){var t=e.children,n=e.className,r=e.content,i=Oe("content",n),o=Le(Vd,e),s=Be(Vd,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Vd.handledProps=["as","children","className","content"],Vd.propTypes={},Vd.defaultProps={as:"li"},Vd.create=io(Vd,(function(e){return{content:e}}));const qd=Vd;function Kd(e){var t=e.children,n=e.className,r=e.items,i=Oe("list",n),o=Le(Kd,e),s=Be(Kd,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?$s(r,qd.create):t)}Kd.handledProps=["as","children","className","items"],Kd.propTypes={},Kd.defaultProps={as:"ul"},Kd.create=io(Kd,(function(e){return{items:e}}));const Qd=Kd;var Gd=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleDismiss=function(e){var n=t.props.onDismiss;n&&n(e,t.props)},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.attached,r=e.children,i=e.className,o=e.color,s=e.compact,a=e.content,l=e.error,c=e.floating,u=e.header,h=e.hidden,d=e.icon,f=e.info,p=e.list,m=e.negative,g=e.onDismiss,v=e.positive,y=e.size,b=e.success,w=e.visible,x=e.warning,k=Oe("ui",o,y,Pe(s,"compact"),Pe(l,"error"),Pe(c,"floating"),Pe(h,"hidden"),Pe(d,"icon"),Pe(f,"info"),Pe(m,"negative"),Pe(v,"positive"),Pe(b,"success"),Pe(w,"visible"),Pe(x,"warning"),Me(n,"attached"),"message",i),S=g&&we.createElement(fo,{name:"close",onClick:this.handleDismiss}),C=Le(t,this.props),E=Be(t,this.props);return hi(r)?we.createElement(E,Ee({},C,{className:k}),S,fo.create(d,{autoGenerateKey:!1}),(!Ii(u)||!Ii(a)||!Ii(p))&&we.createElement($d,null,Wd.create(u,{autoGenerateKey:!1}),Qd.create(p,{autoGenerateKey:!1}),lo(a,{autoGenerateKey:!1}))):we.createElement(E,Ee({},C,{className:k}),S,r)},t}(we.Component);Gd.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],Gd.propTypes={},Gd.Content=$d,Gd.Header=Wd,Gd.List=Qd,Gd.Item=qd;const Jd={password:"",rememberMe:!0,username:""},Yd=e=>{let{error:t,loading:n,onLoginAttempt:r}=e;const i=(0,we.useRef)(),[o,s]=(0,we.useState)(Jd),[a,l]=(0,we.useState)(!1),c=(0,we.useMemo)((()=>Rd[Math.floor(Math.random()*Rd.length)]),[]);(0,we.useEffect)((()=>{""!==o.username&&""!==o.password?l(!0):l(!1)}),[o]),(0,we.useEffect)((()=>{var e;null===(e=i.current)||void 0===e||e.focus()}),[n]);const u=(e,t)=>{s({...o,[e]:t})},{password:h,rememberMe:d,username:f}=o;return(0,Ps.jsx)(zd,{style:{height:"100vh"},textAlign:"center",verticalAlign:"middle",children:(0,Ps.jsxs)(zd.Column,{style:{maxWidth:372},children:[(0,Ps.jsx)(_s,{as:"h2",style:{fontFamily:"monospace",fontSize:"inherit",letterSpacing:-1,lineHeight:1.1,whiteSpace:"pre"},textAlign:"center",children:c}),(0,Ps.jsxs)(Eh,{size:"large",children:[(0,Ps.jsxs)(vi,{raised:!0,children:[(0,Ps.jsx)(oc,{disabled:n,fluid:!0,icon:"user",iconPosition:"left",onChange:e=>u("username",e.target.value),placeholder:"Username",ref:i}),(0,Ps.jsx)(Eh.Input,{disabled:n,fluid:!0,icon:"lock",iconPosition:"left",onChange:e=>u("password",e.target.value),placeholder:"Password",type:"password"}),(0,Ps.jsx)(ka,{checked:d,disabled:n,label:"Remember Me",onChange:()=>u("rememberMe",!d)})]}),(0,Ps.jsxs)($a,{className:"login-button",disabled:!a||n,fluid:!0,loading:n,onClick:()=>r(f,h,d),primary:!0,size:"large",children:[(0,Ps.jsx)(fo,{name:"sign in"}),"Login"]}),t&&(0,Ps.jsxs)(Gd,{className:"login-failure",floating:!0,negative:!0,children:[(0,Ps.jsx)(fo,{name:"x"}),t.message]})]})]})})},Xd=e=>{let{joinRoom:t,...n}=e;const[r,i]=(0,we.useState)(!1),[o,s]=(0,we.useState)([]),[a,l]=(0,we.useState)(void 0),[c,u]=(0,we.useState)("name"),[h,d]=(0,we.useState)("desc"),[f,p]=(0,we.useState)(""),[m,g]=(0,we.useState)(!0);(0,we.useEffect)((()=>{r&&(async()=>{g(!0);const e=await(async()=>{const e=(await ge.get("/rooms/available")).data;if(Array.isArray(e))return e;console.warn("got non-array response from rooms API",e)})();s(e),g(!1)})()}),[r]);const v=(0,we.useMemo)((()=>{const e=[...o].filter((e=>e.name.includes(f)));return e.sort(((e,t)=>"asc"===h?"string"===typeof e[c]?t[c].localeCompare(e[c]):e[c]-t[c]:"string"===typeof e[c]?e[c].localeCompare(t[c]):t[c]-e[c])),e}),[o,f,c,h]),y=()=>{s([]),l(void 0),u("name"),d("desc"),p(""),i(!1)},b=e=>a===e.name;return(0,Ps.jsxs)($c,{className:"join-room-modal",onClose:()=>y(),onOpen:()=>i(!0),open:r,...n,children:[(0,Ps.jsxs)(_s,{children:[(0,Ps.jsx)(fo,{name:"comments"}),(0,Ps.jsx)($c.Content,{children:"Join Room"})]}),(0,Ps.jsx)($c.Content,{scrolling:!0,children:m?(0,Ps.jsx)(ps,{active:!0,inverted:!0,children:(0,Ps.jsx)(ac,{content:"Loading Room List",inverted:!0})}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(oc,{fluid:!0,icon:"filter",onChange:(e,t)=>p(t.value),placeholder:"Room Filter"}),(0,Ps.jsxs)(ga,{celled:!0,selectable:!0,children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsxs)(ga.HeaderCell,{onClick:()=>u("name"),children:["Name",(0,Ps.jsx)(fo,{link:"name"===c,name:"name"===c&&("asc"===h?"chevron up":"chevron down"),onClick:()=>d("asc"===h?"desc":"asc")})]}),(0,Ps.jsxs)(ga.HeaderCell,{onClick:()=>u("userCount"),children:["Users",(0,Ps.jsx)(fo,{link:"userCount"===c,name:"userCount"===c&&("asc"===h?"chevron up":"chevron down"),onClick:()=>d("asc"===h?"desc":"asc")})]})]})}),(0,Ps.jsx)(ga.Body,{children:v.map((e=>(0,Ps.jsxs)(ga.Row,{onClick:()=>l(e.name),style:b(e)?{fontWeight:"bold"}:{},children:[(0,Ps.jsxs)(ga.Cell,{children:[b(e)&&(0,Ps.jsx)(fo,{color:"green",name:"check"}),e.isPrivate&&(0,Ps.jsx)(fo,{name:"lock"}),e.isOwned&&(0,Ps.jsx)(fo,{name:"chess queen"}),e.isModerated&&(0,Ps.jsx)(fo,{name:"gavel"}),e.name]}),(0,Ps.jsx)(ga.Cell,{children:e.userCount})]},e.name)))})]})]})}),(0,Ps.jsxs)($c.Actions,{children:[(0,Ps.jsx)($a,{onClick:()=>i(!1),children:"Cancel"}),(0,Ps.jsx)($a,{disabled:!a,onClick:()=>(async()=>{await t(a),y()})(),positive:!0,children:"Join"})]})]})},Zd=e=>{let{active:t,joined:n,onRoomChange:r,...i}=e;const o=[...n],s=e=>t===e;return(0,Ps.jsxs)(_d,{className:"room-menu",size:"large",children:[o.map((e=>(0,Ps.jsxs)(_d.Item,{active:s(e),className:"menu-item "+(s(e)?"menu-active":""),name:e,onClick:()=>r(e),children:[(0,Ps.jsx)(fo,{color:"green",name:"circle",size:"tiny"}),e]},e))),(0,Ps.jsx)(_d.Menu,{position:"right",children:(0,Ps.jsx)(Xd,{centered:!0,size:"small",trigger:(0,Ps.jsx)($a,{className:"add-button",icon:!0,children:(0,Ps.jsx)(fo,{name:"plus"})}),...i})})]})};const ef=function(e){return wn(e)&&1===e.nodeType&&!Zi(e)};var tf=we.createContext();we.createContext();var nf=function(e,t){if("function"===typeof e)return function(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}}(e,t);null!=e&&(e.current=t)},rf=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},of="undefined"!==typeof window&&window.document&&window.document.createElement?we.useLayoutEffect:we.useEffect;function sf(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function af(e){return e instanceof sf(e).Element||e instanceof Element}function lf(e){return e instanceof sf(e).HTMLElement||e instanceof HTMLElement}function cf(e){return"undefined"!==typeof ShadowRoot&&(e instanceof sf(e).ShadowRoot||e instanceof ShadowRoot)}var uf=Math.max,hf=Math.min,df=Math.round;function ff(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function pf(){return!/^((?!chrome|android).)*safari/i.test(ff())}function mf(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&lf(e)&&(i=e.offsetWidth>0&&df(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&df(r.height)/e.offsetHeight||1);var s=(af(e)?sf(e):window).visualViewport,a=!pf()&&n,l=(r.left+(a&&s?s.offsetLeft:0))/i,c=(r.top+(a&&s?s.offsetTop:0))/o,u=r.width/i,h=r.height/o;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function gf(e){var t=sf(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function vf(e){return e?(e.nodeName||"").toLowerCase():null}function yf(e){return((af(e)?e.ownerDocument:e.document)||window.document).documentElement}function bf(e){return mf(yf(e)).left+gf(e).scrollLeft}function wf(e){return sf(e).getComputedStyle(e)}function xf(e){var t=wf(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function kf(e,t,n){void 0===n&&(n=!1);var r=lf(t),i=lf(t)&&function(e){var t=e.getBoundingClientRect(),n=df(t.width)/e.offsetWidth||1,r=df(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=yf(t),s=mf(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==vf(t)||xf(o))&&(a=function(e){return e!==sf(e)&&lf(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:gf(e);var t}(t)),lf(t)?((l=mf(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=bf(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Sf(e){var t=mf(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Cf(e){return"html"===vf(e)?e:e.assignedSlot||e.parentNode||(cf(e)?e.host:null)||yf(e)}function Ef(e){return["html","body","#document"].indexOf(vf(e))>=0?e.ownerDocument.body:lf(e)&&xf(e)?e:Ef(Cf(e))}function Tf(e,t){var n;void 0===t&&(t=[]);var r=Ef(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=sf(r),s=i?[o].concat(o.visualViewport||[],xf(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(Tf(Cf(s)))}function Of(e){return["table","td","th"].indexOf(vf(e))>=0}function Af(e){return lf(e)&&"fixed"!==wf(e).position?e.offsetParent:null}function _f(e){for(var t=sf(e),n=Af(e);n&&Of(n)&&"static"===wf(n).position;)n=Af(n);return n&&("html"===vf(n)||"body"===vf(n)&&"static"===wf(n).position)?t:n||function(e){var t=/firefox/i.test(ff());if(/Trident/i.test(ff())&&lf(e)&&"fixed"===wf(e).position)return null;var n=Cf(e);for(cf(n)&&(n=n.host);lf(n)&&["html","body"].indexOf(vf(n))<0;){var r=wf(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var Pf="top",Nf="bottom",Mf="right",jf="left",Rf="auto",If=[Pf,Nf,Mf,jf],Df="start",Lf="end",Bf="clippingParents",Ff="viewport",zf="popper",Hf="reference",$f=If.reduce((function(e,t){return e.concat([t+"-"+Df,t+"-"+Lf])}),[]),Uf=[].concat(If,[Rf]).reduce((function(e,t){return e.concat([t,t+"-"+Df,t+"-"+Lf])}),[]),Wf=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Vf(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function qf(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Kf={placement:"bottom",modifiers:[],strategy:"absolute"};function Qf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Gf(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?Kf:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Kf,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,l={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:af(e)?Tf(e):e.contextElement?Tf(e.contextElement):[],popper:Tf(t)};var u=function(e){var t=Vf(e);return Wf.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:i,name:t,instance:l,options:r}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(Qf(t,n)){i.rects={reference:kf(t,_f(n),"fixed"===i.options.strategy),popper:Sf(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,c=o.options,u=void 0===c?{}:c,h=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:qf((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),a=!0}};if(!Qf(e,t))return l;function c(){s.forEach((function(e){return e()})),s=[]}return l.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var Jf={passive:!0};function Yf(e){return e.split("-")[0]}function Xf(e){return e.split("-")[1]}function Zf(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ep(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?Yf(i):null,s=i?Xf(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case Pf:t={x:a,y:n.y-r.height};break;case Nf:t={x:a,y:n.y+n.height};break;case Mf:t={x:n.x+n.width,y:l};break;case jf:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?Zf(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case Df:t[c]=t[c]-(n[u]/2-r[u]/2);break;case Lf:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var tp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function np(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=s.x,f=void 0===d?0:d,p=s.y,m=void 0===p?0:p,g="function"===typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=jf,w=Pf,x=window;if(c){var k=_f(n),S="clientHeight",C="clientWidth";if(k===sf(n)&&"static"!==wf(k=yf(n)).position&&"absolute"===a&&(S="scrollHeight",C="scrollWidth"),i===Pf||(i===jf||i===Mf)&&o===Lf)w=Nf,m-=(h&&k===x&&x.visualViewport?x.visualViewport.height:k[S])-r.height,m*=l?1:-1;if(i===jf||(i===Pf||i===Nf)&&o===Lf)b=Mf,f-=(h&&k===x&&x.visualViewport?x.visualViewport.width:k[C])-r.width,f*=l?1:-1}var E,T=Object.assign({position:a},c&&tp),O=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:df(n*i)/i||0,y:df(r*i)/i||0}}({x:f,y:m},sf(n)):{x:f,y:m};return f=O.x,m=O.y,l?Object.assign({},T,((E={})[w]=y?"0":"",E[b]=v?"0":"",E.transform=(x.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",E)):Object.assign({},T,((t={})[w]=y?m+"px":"",t[b]=v?f+"px":"",t.transform="",t))}const rp={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];lf(i)&&vf(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});lf(r)&&vf(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const ip={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=Uf.reduce((function(e,n){return e[n]=function(e,t,n){var r=Yf(e),i=[jf,Pf].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[jf,Mf].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}};var op={left:"right",right:"left",bottom:"top",top:"bottom"};function sp(e){return e.replace(/left|right|bottom|top/g,(function(e){return op[e]}))}var ap={start:"end",end:"start"};function lp(e){return e.replace(/start|end/g,(function(e){return ap[e]}))}function cp(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&cf(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function up(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function hp(e,t,n){return t===Ff?up(function(e,t){var n=sf(e),r=yf(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=pf();(c||!c&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+bf(e),y:l}}(e,n)):af(t)?function(e,t){var n=mf(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):up(function(e){var t,n=yf(e),r=gf(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=uf(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=uf(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+bf(e),l=-r.scrollTop;return"rtl"===wf(i||n).direction&&(a+=uf(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(yf(e)))}function dp(e,t,n,r){var i="clippingParents"===t?function(e){var t=Tf(Cf(e)),n=["absolute","fixed"].indexOf(wf(e).position)>=0&&lf(e)?_f(e):e;return af(n)?t.filter((function(e){return af(e)&&cp(e,n)&&"body"!==vf(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=hp(e,n,r);return t.top=uf(i.top,t.top),t.right=hf(i.right,t.right),t.bottom=hf(i.bottom,t.bottom),t.left=uf(i.left,t.left),t}),hp(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function fp(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function pp(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function mp(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,l=void 0===a?Bf:a,c=n.rootBoundary,u=void 0===c?Ff:c,h=n.elementContext,d=void 0===h?zf:h,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,v=fp("number"!==typeof g?g:pp(g,If)),y=d===zf?Hf:zf,b=e.rects.popper,w=e.elements[p?y:d],x=dp(af(w)?w:w.contextElement||yf(e.elements.popper),l,u,s),k=mf(e.elements.reference),S=ep({reference:k,element:b,strategy:"absolute",placement:i}),C=up(Object.assign({},b,S)),E=d===zf?C:k,T={top:x.top-E.top+v.top,bottom:E.bottom-x.bottom+v.bottom,left:x.left-E.left+v.left,right:E.right-x.right+v.right},O=e.modifiersData.offset;if(d===zf&&O){var A=O[i];Object.keys(T).forEach((function(e){var t=[Mf,Nf].indexOf(e)>=0?1:-1,n=[Pf,Nf].indexOf(e)>=0?"y":"x";T[e]+=A[n]*t}))}return T}const gp={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,v=Yf(g),y=l||(v===g||!p?[sp(g)]:function(e){if(Yf(e)===Rf)return[];var t=sp(e);return[lp(e),t,lp(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(Yf(n)===Rf?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Uf:l,u=Xf(r),h=u?a?$f:$f.filter((function(e){return Xf(e)===u})):If,d=h.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=h);var f=d.reduce((function(t,n){return t[n]=mp(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[Yf(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,x=t.rects.popper,k=new Map,S=!0,C=b[0],E=0;E<b.length;E++){var T=b[E],O=Yf(T),A=Xf(T)===Df,_=[Pf,Nf].indexOf(O)>=0,P=_?"width":"height",N=mp(t,{placement:T,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),M=_?A?Mf:jf:A?Nf:Pf;w[P]>x[P]&&(M=sp(M));var j=sp(M),R=[];if(o&&R.push(N[O]<=0),a&&R.push(N[M]<=0,N[j]<=0),R.every((function(e){return e}))){C=T,S=!1;break}k.set(T,R)}if(S)for(var I=function(e){var t=b.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},D=p?3:1;D>0;D--){if("break"===I(D))break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function vp(e,t,n){return uf(e,hf(t,n))}const yp={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=mp(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=Yf(t.placement),y=Xf(t.placement),b=!y,w=Zf(v),x="x"===w?"y":"x",k=t.modifiersData.popperOffsets,S=t.rects.reference,C=t.rects.popper,E="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(k){if(o){var _,P="y"===w?Pf:jf,N="y"===w?Nf:Mf,M="y"===w?"height":"width",j=k[w],R=j+g[P],I=j-g[N],D=f?-C[M]/2:0,L=y===Df?S[M]:C[M],B=y===Df?-C[M]:-S[M],F=t.elements.arrow,z=f&&F?Sf(F):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},$=H[P],U=H[N],W=vp(0,S[M],z[M]),V=b?S[M]/2-D-W-$-T.mainAxis:L-W-$-T.mainAxis,q=b?-S[M]/2+D+W+U+T.mainAxis:B+W+U+T.mainAxis,K=t.elements.arrow&&_f(t.elements.arrow),Q=K?"y"===w?K.clientTop||0:K.clientLeft||0:0,G=null!=(_=null==O?void 0:O[w])?_:0,J=j+q-G,Y=vp(f?hf(R,j+V-G-Q):R,j,f?uf(I,J):I);k[w]=Y,A[w]=Y-j}if(a){var X,Z="x"===w?Pf:jf,ee="x"===w?Nf:Mf,te=k[x],ne="y"===x?"height":"width",re=te+g[Z],ie=te-g[ee],oe=-1!==[Pf,jf].indexOf(v),se=null!=(X=null==O?void 0:O[x])?X:0,ae=oe?re:te-S[ne]-C[ne]-se+T.altAxis,le=oe?te+S[ne]+C[ne]-se-T.altAxis:ie,ce=f&&oe?function(e,t,n){var r=vp(e,t,n);return r>n?n:r}(ae,te,le):vp(f?ae:re,te,f?le:ie);k[x]=ce,A[x]=ce-te}t.modifiersData[r]=A}},requiresIfExists:["offset"]};const bp={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Yf(n.placement),l=Zf(a),c=[jf,Mf].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return fp("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:pp(e,If))}(i.padding,n),h=Sf(o),d="y"===l?Pf:jf,f="y"===l?Nf:Mf,p=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=_f(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,b=u[d],w=v-h[c]-u[f],x=v/2-h[c]/2+y,k=vp(b,x,w),S=l;n.modifiersData[r]=((t={})[S]=k,t.centerOffset=k-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&cp(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wp(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function xp(e){return[Pf,Mf,Nf,jf].some((function(t){return e[t]>=0}))}var kp=Gf({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,l=sf(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,Jf)})),a&&l.addEventListener("resize",n.update,Jf),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Jf)})),a&&l.removeEventListener("resize",n.update,Jf)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ep({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:Yf(t.placement),variation:Xf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,np(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,np(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},rp,ip,gp,yp,bp,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=mp(t,{elementContext:"reference"}),a=mp(t,{altBoundary:!0}),l=wp(s,r),c=wp(a,i,o),u=xp(l),h=xp(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]}),Sp=n(6366),Cp=n.n(Sp),Ep=[],Tp=function(){},Op=function(){return Promise.resolve(null)},Ap=[];function _p(e){var t=e.placement,n=void 0===t?"bottom":t,r=e.strategy,i=void 0===r?"absolute":r,o=e.modifiers,s=void 0===o?Ap:o,a=e.referenceElement,l=e.onFirstUpdate,c=e.innerRef,u=e.children,h=we.useContext(tf),d=we.useState(null),f=d[0],p=d[1],m=we.useState(null),g=m[0],v=m[1];we.useEffect((function(){nf(c,f)}),[c,f]);var y,b=we.useMemo((function(){return{placement:n,strategy:i,onFirstUpdate:l,modifiers:[].concat(s,[{name:"arrow",enabled:null!=g,options:{element:g}}])}}),[n,i,l,s,g]),w=function(e,t,n){void 0===n&&(n={});var r=we.useRef(null),i={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Ep},o=we.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=o[0],a=o[1],l=we.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);qo.flushSync((function(){a({styles:rf(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:rf(n.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),c=we.useMemo((function(){var e={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[l,{name:"applyStyles",enabled:!1}])};return Cp()(r.current,e)?r.current||e:(r.current=e,e)}),[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,l]),u=we.useRef();return of((function(){u.current&&u.current.setOptions(c)}),[c]),of((function(){if(null!=e&&null!=t){var r=(n.createPopper||kp)(e,t,c);return u.current=r,function(){r.destroy(),u.current=null}}}),[e,t,n.createPopper]),{state:u.current?u.current.state:null,styles:s.styles,attributes:s.attributes,update:u.current?u.current.update:null,forceUpdate:u.current?u.current.forceUpdate:null}}(a||h,f,b),x=w.state,k=w.styles,S=w.forceUpdate,C=w.update,E=we.useMemo((function(){return{ref:p,style:k.popper,placement:x?x.placement:n,hasPopperEscaped:x&&x.modifiersData.hide?x.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:x&&x.modifiersData.hide?x.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:k.arrow,ref:v},forceUpdate:S||Tp,update:C||Op}}),[p,v,n,x,k,C,S]);return(y=u,Array.isArray(y)?y[0]:y)(E)}const Pp=function(e,t,n,r){return si(e,(function(e,i,o){t(r,n(e),i,o)})),r};const Np=function(e,t){return function(n,r){return Pp(n,e,t(r),{})}};var Mp=Object.prototype.toString,jp=Np((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Mp.call(t)),e[t]=n}),Oi(Zr));const Rp=jp;var Ip={"top center":"top","top left":"top-start","top right":"top-end","bottom center":"bottom","bottom left":"bottom-start","bottom right":"bottom-end","right center":"right","left center":"left"},Dp=(Xn(Ip),Rp(Ip));function Lp(e){return Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(e)}function Bp(e){var t=function(e,t){if("object"!=Lp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lp(t)?t:t+""}function Fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bp(r.key),r)}}var zp=function(){function e(e){this.ref=e}return e.prototype.getBoundingClientRect=function(){return Ri(this.ref.current,"getBoundingClientRect")||{}},function(e,t,n){t&&Fp(e.prototype,t),n&&Fp(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"clientWidth",get:function(){return this.getBoundingClientRect().width}},{key:"clientHeight",get:function(){return this.getBoundingClientRect().height}},{key:"parentNode",get:function(){return this.ref.current?this.ref.current.parentNode:void 0}}]),e}(),Hp=Rr((function(e){return new zp(Uo(e)?e:{current:e})}));const $p=Hp;function Up(e){var t=e.children,n=e.className,r=e.content,i=Oe("content",n),o=Le(Up,e),s=Be(Up,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}function Wp(e){var t=e.children,n=e.className,r=e.content,i=Oe("header",n),o=Le(Wp,e),s=Be(Wp,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}Up.handledProps=["as","children","className","content"],Up.propTypes={},Up.create=io(Up,(function(e){return{children:e}})),Wp.handledProps=["as","children","className","content"],Wp.propTypes={},Wp.create=io(Wp,(function(e){return{children:e}}));var Vp=function(e){function t(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).state={},n.open=!1,n.zIndexWasSynced=!1,n.triggerRef=we.createRef(),n.elementRef=we.createRef(),n.getPortalProps=function(){var e={},t=n.props,r=t.on,i=t.hoverable,o=dn(r)?r:[r];return i&&(e.closeOnPortalMouseLeave=!0,e.mouseLeaveDelay=300),_o(o,"hover")&&(e.openOnTriggerClick=!1,e.closeOnTriggerClick=!1,e.openOnTriggerMouseEnter=!0,e.closeOnTriggerMouseLeave=!0,e.mouseLeaveDelay=70,e.mouseEnterDelay=50),_o(o,"click")&&(e.openOnTriggerClick=!0,e.closeOnTriggerClick=!0,e.closeOnDocumentClick=!0),_o(o,"focus")&&(e.openOnTriggerFocus=!0,e.closeOnTriggerBlur=!0),e},n.hideOnScroll=function(e){ef(e.target)&&n.elementRef.current.contains(e.target)||(n.setState({closed:!0}),Tc.unsub("scroll",n.hideOnScroll,{target:window}),n.timeoutId=setTimeout((function(){n.setState({closed:!1})}),50),n.handleClose(e))},n.handleClose=function(e){Ri(n.props,"onClose",e,Ee({},n.props,{open:!1}))},n.handleOpen=function(e){Ri(n.props,"onOpen",e,Ee({},n.props,{open:!0}))},n.handlePortalMount=function(e){Ri(n.props,"onMount",e,n.props)},n.handlePortalUnmount=function(e){n.positionUpdate=null,Ri(n.props,"onUnmount",e,n.props)},n.renderContent=function(e){var r=e.placement,i=e.ref,o=e.update,s=e.style,a=n.props,l=a.basic,c=a.children,u=a.className,h=a.content,d=a.hideOnScroll,f=a.flowing,p=a.header,m=a.inverted,g=a.popper,v=a.size,y=a.style,b=a.wide,w=n.state.contentRestProps;n.positionUpdate=o;var x=Oe("ui",Dp[r],v,Me(b,"wide"),Pe(l,"basic"),Pe(f,"flowing"),Pe(m,"inverted"),"popup transition visible",u),k=Be(t,n.props),S=Ee({left:"auto",right:"auto",position:"initial"},y),C=we.createElement(k,Ee({},w,{className:x,style:S,ref:n.elementRef}),hi(c)?we.createElement(we.Fragment,null,Wp.create(p,{autoGenerateKey:!1}),Up.create(h,{autoGenerateKey:!1})):c,d&&we.createElement(Ho(),{on:n.hideOnScroll,name:"scroll",target:"window"}));return oo(g||{},{overrideProps:{children:C,ref:i,style:Ee({display:"flex"},s)}})},n}bi(t,e),t.getDerivedStateFromProps=function(e,n){if(n.closed||n.disabled)return{};var r=Le(t,e),i=xc(r,(function(e,t,n){return _o(us.handledProps,n)||(e[n]=t),e}),{});return{contentRestProps:i,portalRestProps:yc(r,us.handledProps)}};var n=t.prototype;return n.componentDidUpdate=function(e){Ec()(this.props.popperDependencies,e.popperDependencies)||this.handleUpdate()},n.componentWillUnmount=function(){clearTimeout(this.timeoutId)},n.handleUpdate=function(){this.positionUpdate&&this.positionUpdate()},n.render=function(){var e=this,t=this.props,n=t.context,r=t.disabled,i=t.eventsEnabled,o=t.offset,s=t.pinned,a=t.popper,l=t.popperModifiers,c=t.position,u=t.positionFixed,h=t.trigger,d=this.state,f=d.closed,p=d.portalRestProps;if(f||r)return h;var m=[{name:"arrow",enabled:!1},{name:"eventListeners",options:{scroll:!!i,resize:!!i}},{name:"flip",enabled:!s},{name:"preventOverflow",enabled:!!o},{name:"offset",enabled:!!o,options:{offset:o}}].concat(l,[{name:"syncZIndex",enabled:!0,phase:"beforeRead",fn:function(t){var n,r=t.state;if(!e.zIndexWasSynced){var i=null==a||null==(n=a.style)?void 0:n.zIndex;os(i)&&(r.elements.popper.style.zIndex=window.getComputedStyle(r.elements.popper.firstChild).zIndex),e.zIndexWasSynced=!0}},effect:function(){return function(){e.zIndexWasSynced=!1}}}]),g=$p(Ii(n)?this.triggerRef:n),v=Ee({},this.getPortalProps(),p);return we.createElement(us,Ee({},v,{onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount,trigger:h,triggerRef:this.triggerRef}),we.createElement(_p,{modifiers:m,placement:Ip[c],strategy:u?"fixed":null,referenceElement:g},this.renderContent))},t}(we.Component);Vp.handledProps=["as","basic","children","className","content","context","disabled","eventsEnabled","flowing","header","hideOnScroll","hoverable","inverted","offset","on","onClose","onMount","onOpen","onUnmount","pinned","popper","popperDependencies","popperModifiers","position","positionFixed","size","style","trigger","wide"],Vp.propTypes={},Vp.defaultProps={disabled:!1,eventsEnabled:!0,on:["click","hover"],pinned:!1,popperModifiers:[],position:"top left"},Vp.Content=Up,Vp.Header=Wp;const qp=e=>{var t;return null!==(t=e.countryCode)&&void 0!==t?t:"?"},Kp=e=>{let{users:t}=e;const n=e=>(e||{}).countryCode?(0,Ps.jsx)(ju,{name:e.countryCode.toLowerCase()}):(0,Ps.jsx)(fo,{className:"unknown-user-flag",name:"question"}),r=(0,we.useMemo)((()=>{const e=[...t].sort(((e,t)=>e.username.localeCompare(t.username))).reduce(((e,t)=>(("Online"===t.status?e.online:e.offline).push(t),e)),{offline:[],online:[]});return[...e.online,...e.offline]}),[t]);return(0,Ps.jsx)(na,{children:r.map((e=>(0,Ps.jsx)(na.Item,{className:e.self?"room-user-self":"",children:(0,Ps.jsxs)(na.Content,{style:{opacity:"Online"===e.status?1:.5},children:[(0,Ps.jsx)(Vp,{content:qp(e),trigger:n(e)}),e.username]})},e.username)))})},Qp={active:"",contextMenu:{message:null,open:!1,x:0,y:0},intervals:{messages:void 0,rooms:void 0},joined:[],loading:!1,room:{messages:[],users:[]}};class Gp extends we.Component{constructor(e){super(e),this.listRef=(0,we.createRef)(),this.messageRef=void 0,this.getFirstRoom=()=>this.state.joined.length>0?this.state.joined[0]:"",this.fetchJoinedRooms=async()=>{const e=await(async()=>{const e=(await ge.get("/rooms/joined")).data;if(Array.isArray(e))return e;console.warn("got non-array response from rooms API",e)})();this.setState({joined:e},(()=>{this.state.joined.includes(this.state.active)||this.selectRoom(this.getFirstRoom())}))},this.fetchActiveRoom=async()=>{const{active:e}=this.state;if(0===e.length)return;const t=await(async e=>{let{roomName:t}=e;const n=(await ge.get(`/rooms/joined/${encodeURIComponent(t)}/messages`)).data;if(Array.isArray(n))return n;console.warn("got non-array response from rooms API",n)})({roomName:e}),n=await(async e=>{let{roomName:t}=e;const n=(await ge.get(`/rooms/joined/${encodeURIComponent(t)}/users`)).data;if(Array.isArray(n))return n;console.warn("got non-array response from rooms API",n)})({roomName:e});this.setState({room:{messages:t,users:n}})},this.selectRoom=async e=>{this.setState({active:e,loading:!0,room:Qp.room},(async()=>{const{active:e}=this.state;sessionStorage.setItem(l,e),await this.fetchActiveRoom(),this.setState({loading:!1},(()=>{try{this.listRef.current.lastChild.scrollIntoView()}catch{}}))}))},this.joinRoom=async e=>{await(async e=>{let{roomName:t}=e;return ge.post("/rooms/joined",t)})({roomName:e}),await this.fetchJoinedRooms(),this.selectRoom(e)},this.leaveRoom=async e=>{await(async e=>{let{roomName:t}=e;return ge.delete(`/rooms/joined/${encodeURIComponent(t)}`)})({roomName:e}),await this.fetchJoinedRooms(),this.selectRoom(this.getFirstRoom())},this.validInput=()=>(this.state.active||"").length>0&&(this.messageRef&&this.messageRef.current&&this.messageRef.current.value||"").length>0,this.focusInput=()=>{this.messageRef.current.focus()},this.formatTimestamp=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en",{day:"numeric",hour:"numeric",minute:"2-digit",month:"numeric"}).format(t)},this.sendMessage=async()=>{const{active:e}=this.state,t=this.messageRef.current.value;this.validInput()&&(await(async e=>{let{roomName:t,message:n}=e;return ge.post(`/rooms/joined/${encodeURIComponent(t)}/messages`,JSON.stringify(n))})({message:t,roomName:e}),this.messageRef.current.value="")},this.handleContextMenu=(e,t)=>{e.preventDefault(),this.setState({contextMenu:{message:t,open:!0,x:e.pageX,y:e.pageY}})},this.handleCloseContextMenu=()=>{this.setState((e=>({contextMenu:{...e.contextMenu,open:!1}})))},this.handleReply=()=>{this.messageRef.current.value=`[${this.state.contextMenu.message.username}] ${this.state.contextMenu.message.message} --\x3e `,this.focusInput()},this.handleUserProfile=()=>{this.props.history.push("/users",{user:this.state.contextMenu.message.username})},this.handleBrowseShares=()=>{this.props.history.push("/browse",{user:this.state.contextMenu.message.username})},this.state=Qp}componentDidMount(){this.setState({active:sessionStorage.getItem(l)||"",intervals:{messages:window.setInterval(this.fetchActiveRoom,1e3),rooms:window.setInterval(this.fetchJoinedRooms,500)}},(async()=>{await this.fetchJoinedRooms(),this.selectRoom(this.state.active||this.getFirstRoom()),document.addEventListener("click",this.handleCloseContextMenu)}))}componentWillUnmount(){const{messages:e,rooms:t}=this.state.intervals;clearInterval(t),clearInterval(e),document.removeEventListener("click",this.handleCloseContextMenu),this.setState({intervals:Qp.intervals})}renderContextMenu(){const{contextMenu:e}=this.state;return(0,Ps.jsx)(us,{open:e.open,children:(0,Ps.jsxs)("div",{className:"ui vertical buttons popup-menu",style:{left:e.x,maxHeight:`calc(100vh - ${e.y}px)`,top:e.y},children:[(0,Ps.jsx)($a,{className:"ui compact button popup-option",onClick:this.handleReply,children:"Reply"}),(0,Ps.jsx)($a,{className:"ui compact button popup-option",onClick:this.handleUserProfile,children:"User Profile"}),(0,Ps.jsx)($a,{className:"ui compact button popup-option",onClick:this.handleBrowseShares,children:"Browse Shares"})]})})}render(){const{active:e=[],joined:t=[],loading:n,room:r}=this.state;return(0,Ps.jsxs)("div",{className:"rooms",children:[(0,Ps.jsxs)(vi,{className:"rooms-segment",raised:!0,children:[(0,Ps.jsx)("div",{className:"rooms-segment-icon",children:(0,Ps.jsx)(fo,{name:"comments",size:"big"})}),(0,Ps.jsx)(Zd,{active:e,joinRoom:this.joinRoom,joined:t,onRoomChange:e=>this.selectRoom(e)})]}),0===(null===e||void 0===e?void 0:e.length)?(0,Ps.jsx)(Ns,{caption:"No rooms to display",icon:"comments"}):(0,Ps.jsx)(Ra,{className:"room-active-card",raised:!0,children:(0,Ps.jsxs)(Ra.Content,{onClick:()=>this.focusInput(),children:[(0,Ps.jsxs)(Ra.Header,{children:[(0,Ps.jsx)(fo,{color:"green",name:"circle"}),e,(0,Ps.jsx)(fo,{className:"close-button",color:"red",link:!0,name:"close",onClick:()=>this.leaveRoom(e)})]}),(0,Ps.jsx)("div",{className:"room",children:n?(0,Ps.jsx)(ps,{active:!0,inverted:!0,children:(0,Ps.jsx)(ac,{inverted:!0})}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(vi.Group,{children:[(0,Ps.jsx)(vi,{className:"room-history",children:(0,Ps.jsx)(Jo,{innerRef:this.listRef,children:(0,Ps.jsxs)(na,{children:[r.messages.map((e=>(0,Ps.jsx)("div",{onContextMenu:t=>this.handleContextMenu(t,e),children:(0,Ps.jsxs)(na.Content,{className:"room-message "+(e.self?"room-message-self":""),children:[(0,Ps.jsx)("span",{className:"room-message-time",children:this.formatTimestamp(e.timestamp)}),(0,Ps.jsxs)("span",{className:"room-message-name",children:[e.username,":"," "]}),(0,Ps.jsx)("span",{className:"room-message-message",children:e.message})]})},`${e.timestamp}+${e.message}`))),(0,Ps.jsx)(na.Content,{id:"room-history-scroll-anchor"})]})})}),(0,Ps.jsx)(vi,{className:"room-input",children:(0,Ps.jsx)(oc,{action:{className:"room-message-button",disabled:!this.validInput(),icon:(0,Ps.jsx)(fo,{color:"green",name:"send"}),onClick:this.sendMessage},fluid:!0,input:(0,Ps.jsx)("input",{autoComplete:"off","data-lpignore":"true",id:"room-message-input",type:"text"}),onKeyUp:e=>"Enter"===e.key?this.sendMessage():"",ref:e=>this.messageRef=e&&e.inputRef,transparent:!0})})]}),(0,Ps.jsx)(vi,{className:"room-users",children:(0,Ps.jsx)(Kp,{users:r.users})})]})})]})}),this.renderContextMenu()]})}}const Jp=Zl(Gp),Yp=(e,t,n)=>{const r=e.match(t);if(r)return Number.parseInt(r[n],10)},Xp=e=>{let{caption:t,icon:n="x",suppressPrefix:r=!1}=e;return(0,Ps.jsx)(vi,{basic:!0,className:"error-segment",placeholder:!0,children:(0,Ps.jsxs)(_s,{icon:!0,children:[(0,Ps.jsx)(fo,{color:"red",name:n}),!r&&"Error: ",t]})})},Zp=e=>{let{children:t,size:n="big",...r}=e;return(0,Ps.jsx)(vi,{basic:!0,className:"loader-segment",placeholder:!0,children:(0,Ps.jsx)(ac,{active:!0,size:n,...r,children:t})})},em=e=>{let{children:t,...n}=e;const r=Object.values(n);for(const i of r)if(i)return i;return t},tm=e=>"number"==typeof e&&!isNaN(e),nm=e=>"string"==typeof e,rm=e=>"function"==typeof e,im=e=>nm(e)||rm(e)?e:null,om=e=>(0,we.isValidElement)(e)||nm(e)||rm(e)||tm(e);function sm(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:o=300}=e;return function(e){let{children:s,position:a,preventExitTransition:l,done:c,nodeRef:u,isIn:h}=e;const d=r?`${t}--${a}`:t,f=r?`${n}--${a}`:n,p=(0,we.useRef)(0);return(0,we.useLayoutEffect)((()=>{const e=u.current,t=d.split(" "),n=r=>{r.target===u.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===p.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,we.useEffect)((()=>{const e=u.current,t=()=>{e.removeEventListener("animationend",t),i?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,c,o):c()};h||(l?t():(p.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))}),[h]),we.createElement(we.Fragment,null,s)}}function am(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const lm={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter((e=>e!==t));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach((t=>{const n=setTimeout((()=>{t(...[].slice.call(arguments,1))}),0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)}))}},cm=e=>{let{theme:t,type:n,...r}=e;return we.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...r})},um={info:function(e){return we.createElement(cm,{...e},we.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return we.createElement(cm,{...e},we.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return we.createElement(cm,{...e},we.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return we.createElement(cm,{...e},we.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return we.createElement("div",{className:"Toastify__spinner"})}};function hm(e){const[,t]=(0,we.useReducer)((e=>e+1),0),[n,r]=(0,we.useState)([]),i=(0,we.useRef)(null),o=(0,we.useRef)(new Map).current,s=e=>-1!==n.indexOf(e),a=(0,we.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:s,getToast:e=>o.get(e)}).current;function l(e){let{containerId:t}=e;const{limit:n}=a.props;!n||t&&a.containerId!==t||(a.count-=a.queue.length,a.queue=[])}function c(e){r((t=>null==e?[]:t.filter((t=>t!==e))))}function u(){const{toastContent:e,toastProps:t,staleId:n}=a.queue.shift();d(e,t,n)}function h(e,n){let{delay:r,staleId:s,...l}=n;if(!om(e)||function(e){return!i.current||a.props.enableMultiContainer&&e.containerId!==a.props.containerId||o.has(e.toastId)&&null==e.updateId}(l))return;const{toastId:h,updateId:f,data:p}=l,{props:m}=a,g=()=>c(h),v=null==f;v&&a.count++;const y={...m,style:m.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(l).filter((e=>{let[t,n]=e;return null!=n}))),toastId:h,updateId:f,data:p,closeToast:g,isIn:!1,className:im(l.className||m.toastClassName),bodyClassName:im(l.bodyClassName||m.bodyClassName),progressClassName:im(l.progressClassName||m.progressClassName),autoClose:!l.isLoading&&(b=l.autoClose,w=m.autoClose,!1===b||tm(b)&&b>0?b:w),deleteToast(){const e=am(o.get(h),"removed");o.delete(h),lm.emit(4,e);const n=a.queue.length;if(a.count=null==h?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),n>0){const e=null==h?a.props.limit:1;if(1===n||1===e)a.displayedToast++,u();else{const t=e>n?n:e;a.displayedToast=t;for(let e=0;e<t;e++)u()}}else t()}};var b,w;y.iconOut=function(e){let{theme:t,type:n,isLoading:r,icon:i}=e,o=null;const s={theme:t,type:n};return!1===i||(rm(i)?o=i(s):(0,we.isValidElement)(i)?o=(0,we.cloneElement)(i,s):nm(i)||tm(i)?o=i:r?o=um.spinner():(e=>e in um)(n)&&(o=um[n](s))),o}(y),rm(l.onOpen)&&(y.onOpen=l.onOpen),rm(l.onClose)&&(y.onClose=l.onClose),y.closeButton=m.closeButton,!1===l.closeButton||om(l.closeButton)?y.closeButton=l.closeButton:!0===l.closeButton&&(y.closeButton=!om(m.closeButton)||m.closeButton);let x=e;(0,we.isValidElement)(e)&&!nm(e.type)?x=(0,we.cloneElement)(e,{closeToast:g,toastProps:y,data:p}):rm(e)&&(x=e({closeToast:g,toastProps:y,data:p})),m.limit&&m.limit>0&&a.count>m.limit&&v?a.queue.push({toastContent:x,toastProps:y,staleId:s}):tm(r)?setTimeout((()=>{d(x,y,s)}),r):d(x,y,s)}function d(e,t,n){const{toastId:i}=t;n&&o.delete(n);const s={content:e,props:t};o.set(i,s),r((e=>[...e,i].filter((e=>e!==n)))),lm.emit(4,am(s,null==s.props.updateId?"added":"updated"))}return(0,we.useEffect)((()=>(a.containerId=e.containerId,lm.cancelEmit(3).on(0,h).on(1,(e=>i.current&&c(e))).on(5,l).emit(2,a),()=>{o.clear(),lm.emit(3,a)})),[]),(0,we.useEffect)((()=>{a.props=e,a.isToastActive=s,a.displayedToast=n.length})),{getToastToRender:function(t){const n=new Map,r=Array.from(o.values());return e.newestOnTop&&r.reverse(),r.forEach((e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},containerRef:i,isToastActive:s}}function dm(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function fm(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function pm(e){const[t,n]=(0,we.useState)(!1),[r,i]=(0,we.useState)(!1),o=(0,we.useRef)(null),s=(0,we.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=(0,we.useRef)(e),{autoClose:l,pauseOnHover:c,closeToast:u,onClick:h,closeOnClick:d}=e;function f(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),s.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",y),document.addEventListener("touchmove",v),document.addEventListener("touchend",y);const n=o.current;s.canCloseOnClick=!0,s.canDrag=!0,s.boundingRect=n.getBoundingClientRect(),n.style.transition="",s.x=dm(t.nativeEvent),s.y=fm(t.nativeEvent),"x"===e.draggableDirection?(s.start=s.x,s.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(s.start=s.y,s.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function p(t){if(s.boundingRect){const{top:n,bottom:r,left:i,right:o}=s.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&s.x>=i&&s.x<=o&&s.y>=n&&s.y<=r?g():m()}}function m(){n(!0)}function g(){n(!1)}function v(n){const r=o.current;s.canDrag&&r&&(s.didMove=!0,t&&g(),s.x=dm(n),s.y=fm(n),s.delta="x"===e.draggableDirection?s.x-s.start:s.y-s.start,s.start!==s.x&&(s.canCloseOnClick=!1),r.style.transform=`translate${e.draggableDirection}(${s.delta}px)`,r.style.opacity=""+(1-Math.abs(s.delta/s.removalDistance)))}function y(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",y);const t=o.current;if(s.canDrag&&s.didMove&&t){if(s.canDrag=!1,Math.abs(s.delta)>s.removalDistance)return i(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform=`translate${e.draggableDirection}(0)`,t.style.opacity="1"}}(0,we.useEffect)((()=>{a.current=e})),(0,we.useEffect)((()=>(o.current&&o.current.addEventListener("d",m,{once:!0}),rm(e.onOpen)&&e.onOpen((0,we.isValidElement)(e.children)&&e.children.props),()=>{const e=a.current;rm(e.onClose)&&e.onClose((0,we.isValidElement)(e.children)&&e.children.props)})),[]),(0,we.useEffect)((()=>(e.pauseOnFocusLoss&&(document.hasFocus()||g(),window.addEventListener("focus",m),window.addEventListener("blur",g)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",m),window.removeEventListener("blur",g))})),[e.pauseOnFocusLoss]);const b={onMouseDown:f,onTouchStart:f,onMouseUp:p,onTouchEnd:p};return l&&c&&(b.onMouseEnter=g,b.onMouseLeave=m),d&&(b.onClick=e=>{h&&h(e),s.canCloseOnClick&&u()}),{playToast:m,pauseToast:g,isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:b}}function mm(e){let{closeToast:t,theme:n,ariaLabel:r="close"}=e;return we.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":r},we.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},we.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gm(e){let{delay:t,isRunning:n,closeToast:r,type:i="default",hide:o,className:s,style:a,controlledProgress:l,progress:c,rtl:u,isIn:h,theme:d}=e;const f=o||l&&0===c,p={...a,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:f?0:1};l&&(p.transform=`scaleX(${c})`);const m=Oe("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),g=rm(s)?s({rtl:u,type:i,defaultClassName:m}):Oe(m,s);return we.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:g,style:p,[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{h&&r()}})}const vm=e=>{const{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:i}=pm(e),{closeButton:o,children:s,autoClose:a,onClick:l,type:c,hideProgressBar:u,closeToast:h,transition:d,position:f,className:p,style:m,bodyClassName:g,bodyStyle:v,progressClassName:y,progressStyle:b,updateId:w,role:x,progress:k,rtl:S,toastId:C,deleteToast:E,isIn:T,isLoading:O,iconOut:A,closeOnClick:_,theme:P}=e,N=Oe("Toastify__toast",`Toastify__toast-theme--${P}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":_}),M=rm(p)?p({rtl:S,position:f,type:c,defaultClassName:N}):Oe(N,p),j=!!k||!a,R={closeToast:h,type:c,theme:P};let I=null;return!1===o||(I=rm(o)?o(R):(0,we.isValidElement)(o)?(0,we.cloneElement)(o,R):mm(R)),we.createElement(d,{isIn:T,done:E,position:f,preventExitTransition:n,nodeRef:r},we.createElement("div",{id:C,onClick:l,className:M,...i,style:m,ref:r},we.createElement("div",{...T&&{role:x},className:rm(g)?g({type:c}):Oe("Toastify__toast-body",g),style:v},null!=A&&we.createElement("div",{className:Oe("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!O})},A),we.createElement("div",null,s)),I,we.createElement(gm,{...w&&!j?{key:`pb-${w}`}:{},rtl:S,theme:P,delay:a,isRunning:t,isIn:T,closeToast:h,hide:u,type:c,style:b,className:y,controlledProgress:j,progress:k||0})))},ym=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},bm=sm(ym("bounce",!0)),wm=(sm(ym("slide",!0)),sm(ym("zoom")),sm(ym("flip")),(0,we.forwardRef)(((e,t)=>{const{getToastToRender:n,containerRef:r,isToastActive:i}=hm(e),{className:o,style:s,rtl:a,containerId:l}=e;function c(e){const t=Oe("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":a});return rm(o)?o({position:e,rtl:a,defaultClassName:t}):Oe(t,im(o))}return(0,we.useEffect)((()=>{t&&(t.current=r.current)}),[]),we.createElement("div",{ref:r,className:"Toastify",id:l},n(((e,t)=>{const n=t.length?{...s}:{...s,pointerEvents:"none"};return we.createElement("div",{className:c(e),style:n,key:`container-${e}`},t.map(((e,n)=>{let{content:r,props:o}=e;return we.createElement(vm,{...o,isIn:i(o.toastId),style:{...o.style,"--nth":n+1,"--len":t.length},key:`toast-${o.key}`},r)})))})))})));wm.displayName="ToastContainer",wm.defaultProps={position:"top-right",transition:bm,autoClose:5e3,closeButton:mm,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let xm,km=new Map,Sm=[],Cm=1;function Em(){return""+Cm++}function Tm(e){return e&&(nm(e.toastId)||tm(e.toastId))?e.toastId:Em()}function Om(e,t){return km.size>0?lm.emit(0,e,t):Sm.push({content:e,options:t}),t.toastId}function Am(e,t){return{...t,type:t&&t.type||e,toastId:Tm(t)}}function _m(e){return(t,n)=>Om(t,Am(e,n))}function Pm(e,t){return Om(e,Am("default",t))}Pm.loading=(e,t)=>Om(e,Am("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Pm.promise=function(e,t,n){let r,{pending:i,error:o,success:s}=t;i&&(r=nm(i)?Pm.loading(i,n):Pm.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void Pm.dismiss(r);const o={type:e,...a,...n,data:i},s=nm(t)?{render:t}:t;return r?Pm.update(r,{...o,...s}):Pm(s.render,{...o,...s}),i},c=rm(e)?e():e;return c.then((e=>l("success",s,e))).catch((e=>l("error",o,e))),c},Pm.success=_m("success"),Pm.info=_m("info"),Pm.error=_m("error"),Pm.warning=_m("warning"),Pm.warn=Pm.warning,Pm.dark=(e,t)=>Om(e,Am("default",{theme:"dark",...t})),Pm.dismiss=e=>{km.size>0?lm.emit(1,e):Sm=Sm.filter((t=>null!=e&&t.options.toastId!==e))},Pm.clearWaitingQueue=function(e){return void 0===e&&(e={}),lm.emit(5,e)},Pm.isActive=e=>{let t=!1;return km.forEach((n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},Pm.update=function(e,t){void 0===t&&(t={}),setTimeout((()=>{const n=function(e,t){let{containerId:n}=t;const r=km.get(n||xm);return r&&r.getToast(e)}(e,t);if(n){const{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:Em()};o.toastId!==e&&(o.staleId=e);const s=o.render||i;delete o.render,Om(s,o)}}),0)},Pm.done=e=>{Pm.update(e,{progress:1})},Pm.onChange=e=>(lm.on(4,e),()=>{lm.off(4,e)}),Pm.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Pm.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},lm.on(2,(e=>{xm=e.containerId||e,km.set(xm,e),Sm.forEach((e=>{lm.emit(0,e.content,e.options)})),Sm=[]})).on(3,(e=>{km.delete(e.containerId||e),0===km.size&&lm.off(0).off(1).off(5)}));const Nm=e=>{let{files:t=[]}=e;const{lockedFiles:n=[]}=e;return t=t.concat(n.map((e=>({...e,locked:!0})))),t.reduce(((e,t)=>{const n=(e=>{let t=e;return t.lastIndexOf("\\")>0&&(t=t.slice(0,Math.max(0,t.lastIndexOf("\\")))),t.lastIndexOf("/")>0&&(t=t.slice(0,Math.max(0,t.lastIndexOf("/")))),t})(t.filename),r={selected:!1,...t};return e[n]=void 0===e[n]?[r]:e[n].concat(r),e}),{})};class Mm extends we.Component{constructor(e){super(e),this.handleFileSelectionChange=(e,t)=>{e.selected=t,this.setState((e=>({downloadError:"",downloadRequest:void 0,tree:e.tree})))},this.download=(e,t)=>{this.setState({downloadRequest:"inProgress"},(async()=>{try{const n=(t||[]).map((e=>{let{filename:t,size:n}=e;return{filename:t,size:n}}));await Ms({files:n,username:e}),this.setState({downloadRequest:"complete"})}catch(n){this.setState({downloadError:n.response,downloadRequest:"error"})}}))},this.getFullDirectory=async(e,t)=>{this.setState({fetchingDirectoryContents:!0});try{const n={...this.state.tree},r=n[t];try{const i=await(async e=>{let{username:t,directory:n}=e;return(await ge.post(`/users/${encodeURIComponent(t)}/directory`,{directory:n})).data})({directory:t,username:e}),o=null===i||void 0===i?void 0:i[0];if(!o)throw new Error("No directories were included in the response");const{files:s,name:a}=o,l=s.map((e=>{var n,i;return{...e,filename:`${t}\\${e.filename}`,selected:null!==(n=null===(i=r.find((n=>n.filename===`${t}\\${e.filename}`)))||void 0===i?void 0:i.selected)&&void 0!==n&&n}}));n[a]=l,this.setState({tree:{...n}})}catch(o){throw new Error(`Failed to process directory response: ${o}`,{cause:o})}}catch(o){var n,r,i;console.error(o),Pm.error(null!==(n=null!==(r=null===o||void 0===o||null===(i=o.response)||void 0===i?void 0:i.data)&&void 0!==r?r:null===o||void 0===o?void 0:o.message)&&void 0!==n?n:o)}finally{this.setState({fetchingDirectoryContents:!1})}},this.handleToggleFolded=()=>{this.setState((e=>({isFolded:!e.isFolded})))},this.state={downloadError:"",downloadRequest:void 0,fetchingDirectoryContents:!1,isFolded:this.props.isInitiallyFolded,tree:Nm(this.props.response)}}componentDidUpdate(e){JSON.stringify(this.props.response)!==JSON.stringify(e.response)&&this.setState({tree:Nm(this.props.response)}),this.props.isInitiallyFolded!==e.isInitiallyFolded&&this.setState({isFolded:this.props.isInitiallyFolded})}render(){const{response:e}=this.props,t=e.hasFreeUploadSlot,{downloadError:n,downloadRequest:r,fetchingDirectoryContents:i,isFolded:o,tree:s}=this.state,a=Object.keys(s).reduce(((e,t)=>e.concat(s[t])),[]).filter((e=>e.selected)),l=Ls(a.reduce(((e,t)=>e+t.size),0));return(0,Ps.jsxs)(Ra,{className:"result-card",raised:!0,children:[(0,Ps.jsxs)(Ra.Content,{children:[(0,Ps.jsxs)(Ra.Header,{children:[(0,Ps.jsx)(fo,{link:!0,name:o?"chevron right":"chevron down",onClick:this.handleToggleFolded}),(0,Ps.jsx)(fo,{color:t?"green":"yellow",name:"circle"}),e.username,(0,Ps.jsx)(fo,{className:"close-button",color:"red",link:!0,name:"close",onClick:()=>this.props.onHide()})]}),(0,Ps.jsx)(Ra.Meta,{className:"result-meta",children:(0,Ps.jsxs)("span",{children:["Upload Speed: ",Ls(e.uploadSpeed),"/s, Free Upload Slot: ",t?"YES":"NO",", Queue Length: ",e.queueLength]})}),(!o&&Object.keys(s)||[]).map((t=>(0,Ps.jsx)(Sa,{directoryName:t,disabled:"inProgress"===r,files:s[t],footer:(0,Ps.jsxs)("button",{disabled:i,onClick:()=>this.getFullDirectory(e.username,t),style:{backgroundColor:"transparent",border:"none",cursor:"pointer",width:"100%"},type:"button",children:[(0,Ps.jsx)(fo,{loading:i,name:i?"circle notch":"folder"}),"Get Full Directory Contents"]}),locked:s[t].find((e=>e.locked)),onSelectionChange:this.handleFileSelectionChange},t)))]}),a.length>0&&(0,Ps.jsx)(Ra.Content,{extra:!0,children:(0,Ps.jsxs)("span",{children:[(0,Ps.jsx)($a,{color:"green",content:"Download",disabled:this.props.disabled||"inProgress"===r,icon:"download",label:{as:"a",basic:!1,content:`${a.length} file${1===a.length?"":"s"}, ${l}`},labelPosition:"right",onClick:()=>this.download(e.username,a)}),"inProgress"===r&&(0,Ps.jsx)(fo,{loading:!0,name:"circle notch",size:"large"}),"complete"===r&&(0,Ps.jsx)(fo,{color:"green",name:"checkmark",size:"large"}),"error"===r&&(0,Ps.jsxs)("span",{children:[(0,Ps.jsx)(fo,{color:"red",name:"x",size:"large"}),(0,Ps.jsx)(bs,{children:n.data+` (HTTP ${n.status} ${n.statusText})`})]})]})})]})}}const jm=Mm,Rm=e=>{let{state:t,...n}=e;switch(t){case"None":case"Queued":case"Requested":return(0,Ps.jsx)(fo,{name:"time",...n});case"InProgress":return(0,Ps.jsx)(fo,{color:"green",loading:!0,name:"circle notch",...n});case"Completed, TimedOut":case"Completed, ResponseLimitReached":case"Completed, FileLimitReached":return(0,Ps.jsx)(fo,{color:"green",name:"check",...n});case"Completed, Cancelled":return(0,Ps.jsx)(fo,{color:"green",name:"stop circle",...n});case"Completed, Errored":return(0,Ps.jsx)(fo,{color:"red",name:"x",...n});default:return(0,Ps.jsx)(fo,{color:"yellow",name:"question circle",...n})}},Im=e=>{let{state:t,...n}=e;return(0,Ps.jsx)(Vp,{content:t,trigger:Rm({state:t,...n})})};var Dm=n(5237);const Lm=e=>{let{creating:t,disabled:n,isSmallScreen:r,isTinyScreen:i,loaded:o,onCreate:s,searchText:a,working:l}=e;return o&&(0,Ps.jsxs)($a,{disabled:n||l,icon:r&&!i,loading:t,onClick:()=>s({navigate:!0,search:a}),children:[(0,Ps.jsx)(fo,{name:"refresh"}),(!r||i)&&"Search Again"]})},Bm=e=>{let{isComplete:t,isSmallScreen:n,isTinyScreen:r,loaded:i,removing:o,stopOrRemove:s,stopping:a,working:l}=e;return(0,Ps.jsxs)($a,{disabled:l,floated:r?"right":void 0,icon:n&&!r,loading:o||a,negative:!0,onClick:s,children:[(0,Ps.jsx)(fo,{name:t?"trash alternate":"stop circle"}),(!n||r)&&(i&&t?"Delete":"Stop")]})},Fm=e=>{let{creating:t,disabled:n,loaded:r,loading:i,onCreate:o,onRemove:s,onStop:a,removing:l,search:c,stopping:u}=e;const h=(0,Dm.useMediaQuery)({query:"(max-width: 899px)"}),d=(0,Dm.useMediaQuery)({query:"(max-width: 684px)"}),{isComplete:f,searchText:p,state:m}=c,g=i||t||l||u,v=()=>{f?s(c):a(c)};return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(vi,{className:"search-detail-header-segment",raised:!0,children:[(0,Ps.jsxs)(_s,{children:[(0,Ps.jsx)(Im,{state:m}),p]}),!d&&(0,Ps.jsxs)("div",{className:"search-detail-header-buttons",children:[(0,Ps.jsx)(Lm,{creating:t,disabled:n,isSmallScreen:h,isTinyScreen:d,loaded:r,onCreate:o,searchText:p,working:g}),(0,Ps.jsx)(Bm,{isComplete:f,isSmallScreen:h,isTinyScreen:d,loaded:r,removing:l,stopOrRemove:v,stopping:u,working:g})]})]}),d&&(0,Ps.jsxs)(vi,{children:[(0,Ps.jsx)(Lm,{creating:t,disabled:n,isSmallScreen:h,isTinyScreen:d,loaded:r,onCreate:o,searchText:p,working:g}),(0,Ps.jsx)(Bm,{isComplete:f,isSmallScreen:h,isTinyScreen:d,loaded:r,removing:l,stopOrRemove:v,stopping:u,working:g})]})]})},zm=[{key:"uploadSpeed",text:"Upload Speed (Fastest to Slowest)",value:"uploadSpeed"},{key:"queueLength",text:"Queue Depth (Least to Most)",value:"queueLength"}],Hm=e=>{let{creating:t,disabled:n,onCreate:r,onRemove:i,onStop:o,removing:s,search:a,stopping:l}=e;const{fileCount:c,id:u,isComplete:h,lockedFileCount:d,responseCount:f,state:p}=a,[m,g]=(0,we.useState)(!1),[v,y]=(0,we.useState)(void 0),[b,w]=(0,we.useState)([]),[x,k]=(0,we.useState)([]),[S,C]=(0,we.useState)("uploadSpeed"),[E,T]=(0,we.useState)(!0),[O,A]=(0,we.useState)(!1),[_,P]=(0,we.useState)(!1),[N,M]=(0,we.useState)(""),[j,R]=(0,we.useState)(5);(0,we.useEffect)((()=>{const e=async()=>{try{g(!0),await(e=500,new Promise((t=>{setTimeout(t,e)})));const t=await(async e=>{let{id:t}=e;const n=(await ge.get(`/searches/${encodeURIComponent(t)}/responses`)).data;if(Array.isArray(n))return n;console.warn("got non-array response from searches API",n)})({id:u});w(t),g(!1)}catch(t){y(t),g(!1)}var e};h&&e()}),[u,h]);const I=(0,we.useMemo)((()=>{const{field:e,order:t}={queueLength:{field:"queueLength",order:"asc"},uploadSpeed:{field:"uploadSpeed",order:"desc"}}[S],n=(e=>{const t={exclude:[],include:[],isCBR:!1,isLossless:!1,isLossy:!1,isVBR:!1,minBitDepth:0,minBitRate:0,minFilesInFolder:0,minFileSize:0,minLength:0};t.minBitRate=Yp(e,/(minbr|minbitrate):(\d+)/iu,2)||t.minBitRate,t.minBitDepth=Yp(e,/(minbd|minbitdepth):(\d+)/iu,2)||t.minBitDepth,t.minFileSize=Yp(e,/(minfs|minfilesize):(\d+)/iu,2)||t.minFileSize,t.minLength=Yp(e,/(minlen|minlength):(\d+)/iu,2)||t.minLength,t.minFilesInFolder=Yp(e,/(minfif|minfilesinfolder):(\d+)/iu,2)||t.minFilesInFolder,t.isVBR=Boolean(/isvbr/iu.test(e)),t.isCBR=Boolean(/iscbr/iu.test(e)),t.isLossless=Boolean(/islossless/iu.test(e)),t.isLossy=Boolean(/islossy/iu.test(e));const n=e.toLowerCase().split(" ").filter((e=>!e.includes(":")&&"isvbr"!==e&&"iscbr"!==e&&"islossless"!==e&&"islossy"!==e));return t.include=n.filter((e=>!e.startsWith("-"))),t.exclude=n.filter((e=>e.startsWith("-"))).map((e=>e.slice(1))),t})(N);return b.filter((e=>!x.includes(e.username))).map((e=>E?{...e,lockedFileCount:0,lockedFiles:[]}:e)).map((e=>(e=>{let{filters:t={exclude:[],include:[],isCBR:!1,isLossless:!1,isLossy:!1,isVBR:!1,minBitDepth:0,minBitRate:0,minFileSize:0,minLength:0},response:n={files:[],lockedFiles:[]}}=e;const{files:r=[],lockedFiles:i=[]}=n;if(n.fileCount+n.lockedFileCount<t.minFilesInFolder)return{...n,files:[]};const o=e=>e.filter((e=>{const{bitRate:n,size:r,length:i,filename:o,sampleRate:s,bitDepth:a,isVariableBitRate:l}=e,{isCBR:c,isVBR:u,isLossless:h,isLossy:d,minBitRate:f,minBitDepth:p,minFileSize:m,minLength:g,include:v=[],exclude:y=[]}=t;return(!c||void 0!==l&&!l)&&!(u&&(void 0===l||!l))&&!!(!h||s&&a)&&(!d||!s&&!a)&&!(n<f)&&!(a<p)&&!(r<m)&&!(i<g)&&!(v.length>0&&v.filter((e=>o.toLowerCase().includes(e))).length!==v.length)&&!y.some((e=>o.toLowerCase().includes(e)))})),s=o(r),a=o(i);return{...n,fileCount:s.length,files:s,lockedFileCount:a.length,lockedFiles:a}})({filters:n,response:e}))).filter((e=>e.fileCount+e.lockedFileCount>0)).filter((e=>!(O&&!e.hasFreeUploadSlot))).sort(((n,r)=>"asc"===t?n[e]-r[e]:r[e]-n[e]))}),[x,E,O,N,S,b]),D=()=>{g(!1),y(void 0),w([]),k([]),R(5)},L=(null===b||void 0===b?void 0:b.length)-I.length,B=I.length-j,F=!s&&!t&&!m&&b;var z;return v?(0,Ps.jsx)(Xp,{caption:null!==(z=null===v||void 0===v?void 0:v.message)&&void 0!==z?z:v}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Fm,{creating:t,disabled:n,loaded:F,loading:m,onCreate:async e=>{let{navigate:t,search:n}=e;D(),r({navigate:t,searchForCreate:n})},onRemove:async()=>{D(),i(a)},onStop:o,removing:s,search:a,stopping:l}),(0,Ps.jsxs)(em,{loading:m&&(0,Ps.jsx)(Zp,{}),searching:!h&&(0,Ps.jsx)(Zp,{children:"InProgress"===p?`Found ${c} files ${d>0?`(plus ${d} locked) `:""}from ${f} users`:"Loading results..."}),children:[F&&(0,Ps.jsxs)(vi,{className:"search-options",raised:!0,children:[(0,Ps.jsx)(ah,{button:!0,className:"search-options-sort icon",floating:!0,icon:"sort",labeled:!0,onChange:(e,t)=>{let{value:n}=t;return C(n)},options:zm,text:zm.find((e=>e.value===S)).text}),(0,Ps.jsxs)("div",{className:"search-option-toggles",children:[(0,Ps.jsx)(ka,{checked:E,className:"search-options-hide-locked",label:"Hide Locked Results",onChange:()=>T(!E),toggle:!0}),(0,Ps.jsx)(ka,{checked:O,className:"search-options-hide-no-slots",label:"Hide Results with No Free Slots",onChange:()=>A(!O),toggle:!0}),(0,Ps.jsx)(ka,{checked:_,className:"search-options-fold-results",label:"Fold Results",onChange:()=>P(!_),toggle:!0})]}),(0,Ps.jsx)(oc,{action:Boolean(N)&&{color:"red",icon:"x",onClick:()=>M("")},className:"search-filter",label:{content:"Filter",icon:"filter"},onChange:(e,t)=>M(t.value),placeholder:" lackluster container -bothersome iscbr|isvbr islossless|islossy  minbitrate:320 minbitdepth:24 minfilesize:10 minfilesinfolder:8 minlength:5000 ",value:N})]}),F&&I.slice(0,j).map((e=>(0,Ps.jsx)(jm,{disabled:n,isInitiallyFolded:_,onHide:()=>k([...x,e.username]),response:e},e.username))),F&&(B>0?(0,Ps.jsxs)($a,{className:"showmore-button",fluid:!0,onClick:()=>R(j+5),primary:!0,size:"large",children:["Show ",B>5?5:B," More Results"," ",`(${B} remaining, ${L} hidden by filter(s))`]}):L>0?(0,Ps.jsx)($a,{className:"showmore-button",disabled:!0,fluid:!0,size:"large",children:`All results shown. ${L} results hidden by filter(s)`}):"")]})]})},$m=e=>{let{loading:t,onRemove:n,onStop:r,search:i,...o}=e;return t?(0,Ps.jsx)(fo,{loading:!0,name:"spinner",...o}):i.state.includes("Completed")?(0,Ps.jsx)(fo,{color:"red",name:"trash alternate",onClick:()=>n(),style:{cursor:"pointer"}}):(0,Ps.jsx)(fo,{color:"red",name:"stop circle",onClick:()=>r(),style:{cursor:"pointer"}})};var Um=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=vl(t.props),t}return bi(t,e),t.prototype.render=function(){return we.createElement(Il,{history:this.history,children:this.props.children})},t}(we.Component);we.Component;var Wm=function(e,t){return"function"===typeof e?e(t):e},Vm=function(e,t){return"string"===typeof e?ul(e,null,null,t):e},qm=function(e){return e},Km=we.forwardRef;"undefined"===typeof Km&&(Km=qm);var Qm=Km((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=Wo(e,["innerRef","navigate","onClick"]),s=o.target,a=Ee({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return a.ref=qm!==Km&&t||n,we.createElement("a",a)}));var Gm=Km((function(e,t){var n=e.component,r=void 0===n?Qm:n,i=e.replace,o=e.to,s=e.innerRef,a=Wo(e,["component","replace","to","innerRef"]);return we.createElement(Rl.Consumer,null,(function(e){e||il(!1);var n=e.history,l=Vm(Wm(o,e.location),e.location),c=l?n.createHref(l):"",u=Ee({},a,{href:c,navigate:function(){var t=Wm(o,e.location),r=cl(e.location)===cl(Vm(t));(i||r?n.replace:n.push)(t)}});return qm!==Km?u.ref=t||s:u.innerRef=s,we.createElement(r,u)}))})),Jm=function(e){return e},Ym=we.forwardRef;"undefined"===typeof Ym&&(Ym=Jm);Ym((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,o=void 0===i?"active":i,s=e.activeStyle,a=e.className,l=e.exact,c=e.isActive,u=e.location,h=e.sensitive,d=e.strict,f=e.style,p=e.to,m=e.innerRef,g=Wo(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return we.createElement(Rl.Consumer,null,(function(e){e||il(!1);var n=u||e.location,i=Vm(Wm(p,n),n),v=i.pathname,y=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=y?Vl(n.pathname,{path:y,exact:l,sensitive:h,strict:d}):null,w=!!(c?c(b,n):b),x="function"===typeof a?a(w):a,k="function"===typeof f?f(w):f;w&&(x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(x,o),k=Ee({},k,s));var S=Ee({"aria-current":w&&r||null,className:x,style:k,to:i},g);return Jm!==Ym?S.ref=t||m:S.innerRef=m,we.createElement(Gm,S)}))}));const Xm=e=>{let{onRemove:t,onStop:n,search:r}=e;const[i,o]=(0,we.useState)(!1),s=rc(),a=async e=>{o(!0);try{await e()}catch(t){console.error(t)}finally{o(!1)}};return(0,Ps.jsxs)(ga.Row,{disabled:i,style:{cursor:i?"wait":void 0},children:[(0,Ps.jsx)(ga.Cell,{children:(0,Ps.jsx)(Im,{state:r.state})}),(0,Ps.jsx)(ga.Cell,{children:(0,Ps.jsx)(Gm,{to:`${s.url}/${r.id}`,children:r.searchText})}),(0,Ps.jsx)(ga.Cell,{children:r.fileCount}),(0,Ps.jsxs)(ga.Cell,{children:[(0,Ps.jsx)(fo,{color:"yellow",name:"lock",size:"small"}),r.lockedFileCount]}),(0,Ps.jsx)(ga.Cell,{children:r.responseCount}),(0,Ps.jsx)(ga.Cell,{children:r.endedAt?new Date(r.endedAt).toLocaleTimeString():"-"}),(0,Ps.jsx)(ga.Cell,{children:(0,Ps.jsx)($m,{loading:i,onRemove:()=>a((()=>t(r))),onStop:()=>a((()=>n(r))),search:r,style:{cursor:"pointer"}})})]})},Zm=e=>{let{connecting:t=!1,error:n,onRemove:r=()=>{},onStop:i=()=>{},searches:o={}}=e;return(0,Ps.jsx)(Ra,{className:"search-list-card",raised:!0,children:(0,Ps.jsx)(Ra.Content,{children:(0,Ps.jsx)("div",{className:"search-list-wrapper",children:(0,Ps.jsx)(em,{connecting:t&&(0,Ps.jsx)(ac,{active:!0,inline:"centered",size:"small"}),error:n&&(0,Ps.jsx)(Xp,{caption:n}),children:(0,Ps.jsxs)(ga,{className:"unstackable",size:"large",children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.HeaderCell,{className:"search-list-action",children:(0,Ps.jsx)(fo,{name:"info circle"})}),(0,Ps.jsx)(ga.HeaderCell,{className:"search-list-phrase",children:"Search"}),(0,Ps.jsx)(ga.HeaderCell,{className:"search-list-files",children:"Files"}),(0,Ps.jsx)(ga.HeaderCell,{className:"search-list-locked",children:"Locked"}),(0,Ps.jsx)(ga.HeaderCell,{className:"search-list-responses",children:"Responses"}),(0,Ps.jsx)(ga.HeaderCell,{className:"search-list-started",children:"Ended"}),(0,Ps.jsx)(ga.HeaderCell,{className:"search-list-action"})]})}),(0,Ps.jsx)(ga.Body,{children:Object.values(o).sort(((e,t)=>new Date(t.startedAt)-new Date(e.startedAt))).map((e=>(0,Ps.jsx)(Xm,{onRemove:r,onStop:i,search:e},e.id)))})]})})})})})};var eg,tg=new Uint8Array(16);function ng(){if(!eg&&!(eg="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eg(tg)}const rg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const ig=function(e){return"string"===typeof e&&rg.test(e)};for(var og=[],sg=0;sg<256;++sg)og.push((sg+256).toString(16).substr(1));const ag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(og[e[t+0]]+og[e[t+1]]+og[e[t+2]]+og[e[t+3]]+"-"+og[e[t+4]]+og[e[t+5]]+"-"+og[e[t+6]]+og[e[t+7]]+"-"+og[e[t+8]]+og[e[t+9]]+"-"+og[e[t+10]]+og[e[t+11]]+og[e[t+12]]+og[e[t+13]]+og[e[t+14]]+og[e[t+15]]).toLowerCase();if(!ig(n))throw TypeError("Stringified UUID is invalid");return n};const lg=function(e,t,n){var r=(e=e||{}).random||(e.rng||ng)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return ag(r)},cg=function(){var e,t;let{server:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[r,o]=(0,we.useState)(!0),[s,a]=(0,we.useState)(void 0),[l,c]=(0,we.useState)({}),[u,h]=(0,we.useState)(!1),[d,f]=(0,we.useState)(!1),[p,m]=(0,we.useState)(!1),g=(0,we.useRef)(),{id:v}=function(){var e=ec(Rl).match;return e?e.params:{}}(),y=tc(),b=rc(),w=()=>{o(!0)},x=()=>{o(!1),a(void 0)},k=e=>{o(!1),a(e)},S=e=>{c(e),x()};(0,we.useEffect)((()=>{w();const e=de({url:`${i}/search`});e.on("list",(e=>{S(e.reduce(((e,t)=>(e[t.id]=t,e)),{})),x()})),e.on("update",(e=>{S((t=>({...t,[e.id]:e})))})),e.on("delete",(e=>{S((t=>(delete t[e.id],{...t})))})),e.on("create",(e=>{S((t=>({...t,[e.id]:e})))})),e.onreconnecting((e=>{var t;return k(null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:"Disconnected")})),e.onreconnected((()=>x())),e.onclose((e=>{var t;return k(null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:"Disconnected")}));return(async()=>{try{w(),await e.start()}catch(r){var t,n;Pm.error(null!==(t=null===r||void 0===r?void 0:r.message)&&void 0!==t?t:"Failed to connect"),k(null!==(n=null===r||void 0===r?void 0:r.message)&&void 0!==n?n:"Failed to connect")}})(),()=>{e.stop()}}),[]);const C=async function(){var e,t;let{navigate:n=!1,search:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=null===g||void 0===g||null===(e=g.current)||void 0===e||null===(t=e.inputRef)||void 0===t?void 0:t.current,o=r||i.value,s=lg();try{m(!0),await(e=>{let{id:t,searchText:n}=e;return ge.post("/searches",{id:t,searchText:n})})({id:s,searchText:o});try{i.value="",i.focus()}catch{}m(!1),n&&y.push(`${b.url.replace(`/${v}`,"")}/${s}`)}catch(u){var a,l,c;console.error(u),Pm.error(null!==(a=null!==(l=null===u||void 0===u||null===(c=u.response)||void 0===c?void 0:c.data)&&void 0!==l?l:null===u||void 0===u?void 0:u.message)&&void 0!==a?a:u),m(!1)}},E=async e=>{try{h(!0),await(e=>{let{id:t}=e;return ge.delete(`/searches/${encodeURIComponent(t)}`)})({id:e.id}),c((t=>(delete t[e.id],{...t}))),h(!1)}catch(i){var t,n,r;console.error(i),Pm.error(null!==(t=null!==(n=null===s||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data)&&void 0!==n?n:null===s||void 0===s?void 0:s.message)&&void 0!==t?t:s),h(!1)}},T=async e=>{try{f(!0),await(e=>{let{id:t}=e;return ge.put(`/searches/${encodeURIComponent(t)}`)})({id:e.id}),f(!1)}catch(i){var t,n,r;console.error(i),Pm.error(null!==(t=null!==(n=null===i||void 0===i||null===(r=i.response)||void 0===r?void 0:r.data)&&void 0!==n?n:null===i||void 0===i?void 0:i.message)&&void 0!==t?t:i),f(!1)}};if(r)return(0,Ps.jsx)(Zp,{});var O;if(s)return(0,Ps.jsx)(Xp,{caption:null!==(O=null===s||void 0===s?void 0:s.message)&&void 0!==O?O:s});if(v){if(l[v])return(0,Ps.jsx)(Hm,{creating:p,disabled:!(null!==n&&void 0!==n&&n.isConnected),onCreate:C,onRemove:E,onStop:T,removing:u,search:l[v],stopping:d});y.replace(b.url.replace(`/${v}`,""))}return null===g||void 0===g||null===(e=g.current)||void 0===e||null===(t=e.inputRef)||void 0===t||t.current.focus(),(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(vi,{className:"search-segment",raised:!0,children:[(0,Ps.jsx)("div",{className:"search-segment-icon",children:(0,Ps.jsx)(fo,{name:"search",size:"big"})}),(0,Ps.jsx)(oc,{action:(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)($a,{disabled:p||!n.isConnected,icon:"plus",onClick:C}),(0,Ps.jsx)($a,{disabled:p||!n.isConnected,icon:"search",onClick:()=>C({navigate:!0})})]}),className:"search-input",disabled:p||!n.isConnected,input:(0,Ps.jsx)("input",{"data-lpignore":"true",placeholder:n.isConnected?"Search phrase":"Connect to server to perform a search",type:"search"}),loading:p,onKeyUp:e=>"Enter"===e.key?C():"",placeholder:"Search phrase",ref:g,size:"big"})]}),0===Object.keys(l).length?(0,Ps.jsx)(Ns,{caption:"No searches to display",icon:"search"}):(0,Ps.jsx)(Zm,{connecting:r,error:s,onRemove:E,onStop:T,searches:l})]})},ug=1024;let hg=0;class dg{constructor(e,t){this.from=e,this.to=t}}class fg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=hg++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=mg.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}fg.closedBy=new fg({deserialize:e=>e.split(" ")}),fg.openedBy=new fg({deserialize:e=>e.split(" ")}),fg.group=new fg({deserialize:e=>e.split(" ")}),fg.contextHash=new fg({perNode:!0}),fg.lookAhead=new fg({perNode:!0}),fg.mounted=new fg({perNode:!0});const pg=Object.create(null);class mg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):pg,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new mg(e.name||"",t,e.id,n);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(r)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(fg.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(fg.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}mg.none=new mg("",Object.create(null),0,8);class gg{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(){let e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(let i of this.types){let t=null;for(let e of n){let n=e(i);n&&(t||(t=Object.assign({},i.props)),t[n[0].id]=n[1])}e.push(t?new mg(i.name,t,i.id,i.flags):i)}return new gg(e)}}const vg=new WeakMap,yg=new WeakMap;var bg;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(bg||(bg={}));class wg{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(fg.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Ng(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=vg.get(this)||this.topNode,r=new Ng(n);return r.moveTo(e,t),vg.set(this,r._tree),r}get topNode(){return new Tg(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Eg(vg.get(this)||this.topNode,e,t,!1);return vg.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Eg(yg.get(this)||this.topNode,e,t,!0);return yg.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e,o=e.mode||0,s=(o&bg.IncludeAnonymous)>0;for(let a=this.cursor(o|bg.IncludeAnonymous);;){let e=!1;if(a.from<=i&&a.to>=r&&(!s&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(s||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:Ig(mg.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new wg(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new wg(mg.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=ug,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new xg(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,v,y){let{id:b,start:w,end:x,size:k}=a,S=u;for(;k<0;){if(a.next(),-1==k){let t=o[b];return n.push(t),void v.push(w-e)}if(-3==k)return void(c=b);if(-4==k)return void(u=b);throw new RangeError(`Unrecognized record size: ${k}`)}let C,E,T=l[b],O=w-e;if(x-w<=i&&(E=m(a.pos-t,y))){let t=new Uint16Array(E.size-E.skip),n=a.pos-E.size,i=t.length;for(;a.pos>n;)i=g(E.start,t,i);C=new kg(t,x-E.start,r),O=E.start-e}else{let e=a.pos-k;a.next();let t=[],n=[],r=b>=s?b:-1,o=0,l=x;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(f(t,n,w,o,a.end,l,r,S),o=t.length,l=a.end),a.next()):h(w,e,t,n,r);if(r>=0&&o>0&&o<t.length&&f(t,n,w,o,w,l,r,S),t.reverse(),n.reverse(),r>-1&&o>0){let e=d(T);C=Ig(T,t,n,0,t.length,0,x-w,e,e)}else C=p(T,t,n,x-w,S-x)}n.push(C),v.push(O)}function d(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof wg){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(fg.lookAhead))&&(s=n[a]+i.length+o)}return p(e,t,n,r,s)}}function f(e,t,n,i,o,s,a,l){let c=[],u=[];for(;e.length>i;)c.push(e.pop()),u.push(t.pop()+n-o);e.push(p(r.types[a],c,u,s-o,l-s)),t.push(o-n)}function p(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;if(c){let e=[fg.contextHash,c];o=o?[e].concat(o):[e]}if(i>25){let e=[fg.lookAhead,i];o=o?[e].concat(o):[e]}return new wg(e,t,n,r,o)}function m(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=s?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=d,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}function g(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=g(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let v=[],y=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,v,y,-1);let b=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new wg(l[e.topID],v.reverse(),y.reverse(),b)}(e)}}wg.empty=new wg(mg.none,[],[],0);class xg{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xg(this.buffer,this.index)}}class kg{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return mg.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(Sg(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n){let r=this.buffer,i=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){i[a++]=r[s++],i[a++]=r[s++]-n;let t=i[a++]=r[s++]-n;i[a++]=r[s++]-e,o=Math.max(o,t)}return new kg(i,o,this.set)}}function Sg(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function Cg(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function Eg(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof Tg&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:bg.IgnoreOverlays;if(r)for(let s=e,a=s.parent;a;s=a,a=s.parent)s instanceof Tg&&s.index<0&&(null===(i=a.enter(t,n,o))||void 0===i?void 0:i.from)!=s.from&&(e=a);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class Tg{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(Sg(r,n,c,c+l.length))if(l instanceof kg){if(i&bg.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new Pg(new _g(o,l,e,c),null,s)}else if(i&bg.IncludeAnonymous||!l.type.isAnonymous||Mg(l)){let s;if(!(i&bg.IgnoreMounts)&&l.props&&(s=l.prop(fg.mounted))&&!s.overlay)return new Tg(s.tree,c,e,o);let a=new Tg(l,c,e,o);return i&bg.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&bg.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(r&bg.IgnoreOverlays)&&(n=this._tree.prop(fg.mounted))&&n.overlay){let r=e-this.from;for(let{from:e,to:i}of n.overlay)if((t>0?e<=r:e<r)&&(t<0?i>=r:i>r))return new Tg(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(){return new Ng(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}get tree(){return this._tree}toTree(){return this._tree}resolve(e){return Eg(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return Eg(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}enterUnfinishedNodesBefore(e){return Cg(this,e)}getChild(e){let t=Og(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return Og(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ag(this,e)}}function Og(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function Ag(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class _g{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Pg{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new Pg(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&bg.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new Pg(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Pg(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Pg(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(){return new Ng(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];e.push(n.slice(r,i,o)),t.push(0)}return new wg(this.type,e,t,this.to-this.from)}resolve(e){return Eg(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return Eg(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}enterUnfinishedNodesBefore(e){return Cg(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e){let t=Og(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return Og(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}get node(){return this}matchContext(e){return Ag(this,e)}}class Ng{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Tg)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof Tg?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&bg.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&bg.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&bg.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&bg.IncludeAnonymous||e instanceof kg||!e.type.isAnonymous||Mg(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let r=n;r<this.stack.length;r++)t=new Pg(this.buffer,t,this.stack[r]);return this.bufferNode=new Pg(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return Ag(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return Ag(this.node,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function Mg(e){return e.children.some((e=>e instanceof kg||!e.type.isAnonymous||Mg(e)))}const jg=new WeakMap;function Rg(e,t){if(!e.isAnonymous||t instanceof kg||t.type!=e)return 1;let n=jg.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof wg)){n=1;break}n+=Rg(e,r)}jg.set(t,n)}return n}function Ig(e,t,n,r,i,o,s,a,l){let c=0;for(let f=r;f<i;f++)c+=Rg(e,t[f]);let u=Math.ceil(1.5*c/8),h=[],d=[];return function t(n,r,i,s,a){for(let c=i;c<s;){let i=c,f=r[c],p=Rg(e,n[c]);for(c++;c<s;c++){let t=Rg(e,n[c]);if(p+t>=u)break;p+=t}if(c==i+1){if(p>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-f;h.push(Ig(e,n,r,i,c,f,t,null,l))}d.push(f+a-o)}}(t,n,r,i,0),(a||l)(h,d,s)}class Dg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[new Dg(0,e.length,e,0,!1,n)];for(let i of t)i.to>e.length&&r.push(i);return r}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new Dg(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class Lg{startParse(e,t,n){return"string"==typeof e&&(e=new Bg(e)),n=n?n.length?n.map((e=>new dg(e.from,e.to))):[new dg(0,0)]:[new dg(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class Bg{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new fg({perNode:!0});class Fg{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),Hg.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=[];return this.decompose(e,t,n,0),Hg.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new Wg(this),i=new Wg(e);for(let o=t,s=t;;){if(r.next(o),i.next(o),o=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(s+=r.value.length,r.done||s>=n)return!0}}iter(){return new Wg(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)}iterRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new Vg(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new qg(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new zg(e):Hg.from(zg.split(e,[])):Fg.empty}}class zg extends Fg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e);super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new Kg(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new zg(Ug(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=$g(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new zg(t,e.length+i.length));else{let e=t.length>>1;n.push(new zg(t.slice(0,e)),new zg(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof zg))return super.replace(e,t,n);let r=$g(this.text,$g(n.text,Ug(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new zg(r,i):Hg.from(zg.split(r,[]),i)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new zg(n,r)),n=[],r=-1);return r>-1&&t.push(new zg(n,r)),t}}class Hg extends Fg{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new Hg(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Hg))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.reduce(((e,t)=>e+t.length+1),-1),n=0;for(let d of e)n+=d.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new zg(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof Hg)for(let n of e.children)u(n);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof zg&&a&&(t=c[c.length-1])instanceof zg&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new zg(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:Hg.from(c,l)),l=-1,a=c.length=0)}for(let d of e)u(d);return h(),1==s.length?s[0]:new Hg(s,t)}}function $g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9;for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function Ug(e,t,n){return $g(e,[""],t,n)}Fg.empty=new zg([""],0);class Wg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof zg?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof zg?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof zg){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof zg?i.text.length:i.children.length)<<1))}}}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Vg{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Wg(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class qg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Fg.prototype[Symbol.iterator]=function(){return this.iter()},Wg.prototype[Symbol.iterator]=Vg.prototype[Symbol.iterator]=qg.prototype[Symbol.iterator]=function(){return this});class Kg{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let Qg="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let n=1;n<Qg.length;n++)Qg[n]+=Qg[n-1];function Gg(e){for(let t=1;t<Qg.length;t+=2)if(Qg[t]>e)return Qg[t-1]<=e;return!1}function Jg(e){return e>=127462&&e<=127487}const Yg=8205;function Xg(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Zg:ev)(e,t,!(arguments.length>3&&void 0!==arguments[3])||arguments[3])}function Zg(e,t,n){if(t==e.length)return t;t&&tv(e.charCodeAt(t))&&nv(e.charCodeAt(t-1))&&t--;let r=rv(e,t);for(t+=ov(r);t<e.length;){let i=rv(e,t);if(r==Yg||i==Yg||n&&Gg(i))t+=ov(i),r=i;else{if(!Jg(i))break;{let n=0,r=t-2;for(;r>=0&&Jg(rv(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function ev(e,t,n){for(;t>0;){let r=Zg(e,t-2,n);if(r<t)return r;t--}return 0}function tv(e){return e>=56320&&e<57344}function nv(e){return e>=55296&&e<56320}function rv(e,t){let n=e.charCodeAt(t);if(!nv(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return tv(r)?r-56320+(n-55296<<10)+65536:n}function iv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function ov(e){return e<65536?1:2}const sv=/\r\n?|\n/;var av=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(av||(av={}));class lv{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e){dv(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new lv(e)}composeDesc(e){return this.empty?e:e.empty?this:pv(this,e)}mapDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:fv(this,e,t)}mapPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:av.Simple,r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=av.Simple&&l>=e&&(n==av.TrackDel&&r<e&&l>e||n==av.TrackBefore&&r<e||n==av.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new lv(e)}static create(e){return new lv(e)}}class cv extends lv{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return dv(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e){return fv(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(Fg.empty);n.push(o?e.slice(i,i+o):Fg.empty)}i+=o}return new cv(t,n)}compose(e){return this.empty?e:e.empty?this:pv(this,e,!0)}map(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:fv(this,e,t,!0)}iterChanges(e){dv(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get desc(){return lv.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new mv(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);uv(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;uv(t,e,o),o>0&&hv(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);uv(t,e,-1),uv(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new cv(t,n),filtered:lv.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!r.length)return;o<t&&uv(r,t-o,-1);let e=new cv(r,i);s=s?s.compose(e.map(s)):e,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof cv){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?Fg.of(c.split(n||sv)):c:Fg.empty,h=u.length;if(e==s&&0==h)return;e<o&&a(),e>o&&uv(r,e-o,-1),uv(r,s-e,h),hv(i,r,u),o=s}}(e),a(!s),s}static empty(e){return new cv(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(Fg.empty);n[r]=Fg.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new cv(t,n)}static createSet(e,t){return new cv(e,t)}}function uv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function hv(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(Fg.empty);e.push(n)}}function dv(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=Fg.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,h),i=c,o=u}}}function fv(e,t,n){let r=[],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?[]:null,o=new mv(e),s=new mv(t);for(let a=-1;;)if(-1==o.ins&&-1==s.ins){let e=Math.min(o.len,s.len);uv(r,e,-1),o.forward(e),s.forward(e)}else if(s.ins>=0&&(o.ins<0||a==o.i||0==o.off&&(s.len<o.len||s.len==o.len&&!n))){let e=s.len;for(uv(r,s.ins,-1);e;){let t=Math.min(o.len,e);o.ins>=0&&a<o.i&&o.len<=t&&(uv(r,0,o.ins),i&&hv(i,r,o.text),a=o.i),o.forward(t),e-=t}s.next()}else{if(!(o.ins>=0)){if(o.done&&s.done)return i?cv.createSet(r,i):lv.create(r);throw new Error("Mismatched change set lengths")}{let e=0,t=o.len;for(;t;)if(-1==s.ins){let n=Math.min(t,s.len);e+=n,t-=n,s.forward(n)}else{if(!(0==s.ins&&s.len<t))break;t-=s.len,s.next()}uv(r,e,a<o.i?o.ins:0),i&&a<o.i&&hv(i,r,o.text),a=o.i,o.forward(o.len-t)}}}function pv(e,t){let n=[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[]:null,i=new mv(e),o=new mv(t);for(let s=!1;;){if(i.done&&o.done)return r?cv.createSet(n,r):lv.create(n);if(0==i.ins)uv(n,i.len,0,s),i.next();else if(0!=o.len||o.done){if(i.done||o.done)throw new Error("Mismatched change set lengths");{let e=Math.min(i.len2,o.len),t=n.length;if(-1==i.ins){let t=-1==o.ins?-1:o.off?0:o.ins;uv(n,e,t,s),r&&t&&hv(r,n,o.text)}else-1==o.ins?(uv(n,i.off?0:i.len,e,s),r&&hv(r,n,i.textBit(e))):(uv(n,i.off?0:i.len,o.off?0:o.ins,s),r&&!o.off&&hv(r,n,o.text));s=(i.ins>e||o.ins>=0&&o.len>e)&&(s||n.length>t),i.forward2(e),o.forward(e)}}else uv(n,0,o.ins,s),r&&hv(r,n,o.text),o.next()}}class mv{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Fg.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Fg.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class gv{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.empty?t=n=e.mapPos(this.from,r):(t=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),t==this.from&&n==this.to?this:new gv(t,n,this.flags)}extend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e<=this.anchor&&t>=this.anchor)return vv.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return vv.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return vv.range(e.anchor,e.head)}static create(e,t,n){return new gv(e,t,n)}}class vv{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.empty?this:vv.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new vv([this.main],0)}addRange(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return vv.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainIndex,n=this.ranges.slice();return n[t]=e,vv.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new vv(e.ranges.map((e=>gv.fromJSON(e))),e.main)}static single(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new vv([vv.range(e,t)],0)}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return vv.normalized(e.slice(),t);n=i.to}return new vv(e,t)}static cursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return gv.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!==r&&void 0!==r?r:33554431)<<5)}static range(e,t,n,r){let i=(null!==n&&void 0!==n?n:33554431)<<5|(null==r?3:Math.min(2,r));return t<e?gv.create(t,e,24|i):gv.create(e,t,(t>e?4:0)|i)}static normalized(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let r=1;r<e.length;r++){let n=e[r],i=e[r-1];if(n.empty?n.from<=i.to:n.from<i.to){let o=i.from,s=Math.max(n.to,i.to);r<=t&&t--,e.splice(--r,2,n.anchor>n.head?vv.range(s,o):vv.range(o,s))}}return new vv(e,t)}}function yv(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let bv=0;class wv{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=bv++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}static define(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new wv(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:xv),!!e.static,e.enables)}of(e){return new kv([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new kv(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new kv(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function xv(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class kv{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=bv++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let u of this.dependencies)"doc"==u?a=!0:"selection"==u?l=!0:0==(1&(null!==(t=e[u.id])&&void 0!==t?t:1))&&c.push(e[u.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||Cv(e,c)){let t=n(e);if(s?!Sv(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[i];if(null!=l){let i=Fv(t,l);if(this.dependencies.every((n=>n instanceof wv?t.facet(n)===e.facet(n):!(n instanceof Ov)||t.field(n,!1)==e.field(n,!1)))||(s?Sv(a=n(e),i,r):r(a=n(e),i)))return e.values[o]=i,0}else a=n(e);return e.values[o]=a,1}}}}function Sv(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Cv(e,t){let n=!1;for(let r of t)1&Bv(e,r)&&(n=!0);return n}function Ev(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=Fv(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)Bv(e,t);return e.values[s]=a(e),1},update(e,n){if(!Cv(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=Cv(e,r),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&xv(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const Tv=wv.define({static:!0});class Ov{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new Ov(bv++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Tv).find((e=>e.field==this));return((null===t||void 0===t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,Tv.of({field:this,create:e})]}get extension(){return this}}const Av=4,_v=3,Pv=2,Nv=1;function Mv(e){return t=>new Rv(t,e)}const jv={highest:Mv(0),high:Mv(Nv),default:Mv(Pv),low:Mv(_v),lowest:Mv(Av)};class Rv{constructor(e,t){this.inner=e,this.prec=t}}class Iv{of(e){return new Dv(this,e)}reconfigure(e){return Iv.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Dv{constructor(e,t){this.compartment=e,this.inner=t}}class Lv{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let h of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,s){let a=i.get(e);if(null!=a){if(a<=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof Dv&&n.delete(e.compartment)}if(i.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof Dv){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,s)}else if(e instanceof Rv)o(e.inner,e.prec);else if(e instanceof Ov)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof kv)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,Pv);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,Pv),r.reduce(((e,t)=>e.concat(t)))}(e,t,o))h instanceof Ov?r.push(h):(i[h.facet.id]||(i[h.facet.id]=[])).push(h);let s=Object.create(null),a=[],l=[];for(let h of r)s[h.id]=l.length<<1,l.push((e=>h.slot(e)));let c=null===n||void 0===n?void 0:n.config.facets;for(let h in i){let e=i[h],t=e[0].facet,r=c&&c[h]||[];if(e.every((e=>0==e.type)))if(s[t.id]=a.length<<1|1,xv(r,e))a.push(n.facet(t));else{let r=t.combine(e.map((e=>e.value)));a.push(n&&t.compare(r,n.facet(t))?n.facet(t):r)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[t.id]=l.length<<1,l.push((n=>Ev(n,t,e)))}}let u=l.map((e=>e(s)));return new Lv(e,o,u,s,a,i)}}function Bv(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function Fv(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const zv=wv.define(),Hv=wv.define({combine:e=>e.some((e=>e)),static:!0}),$v=wv.define({combine:e=>e.length?e[0]:void 0,static:!0}),Uv=wv.define(),Wv=wv.define(),Vv=wv.define(),qv=wv.define({combine:e=>!!e.length&&e[0]});class Kv{constructor(e,t){this.type=e,this.value=t}static define(){return new Qv}}class Qv{of(e){return new Kv(this,e)}}class Gv{constructor(e){this.map=e}of(e){return new Jv(this,e)}}class Jv{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Jv(this.type,t)}is(e){return this.type==e}static define(){return new Gv((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}Jv.reconfigure=Jv.define(),Jv.appendConfig=Jv.define();class Yv{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&yv(n,t.newLength),i.some((e=>e.type==Yv.time))||(this.annotations=i.concat(Yv.time.of(Date.now())))}static create(e,t,n,r,i,o){return new Yv(e,t,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Yv.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function Xv(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Zv(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=cv.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:Jv.mapEffects(e.effects,i).concat(Jv.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function ey(e,t,n){let r=t.selection,i=ry(t.annotations);return t.userEvent&&(i=i.concat(Yv.userEvent.of(t.userEvent))),{changes:t.changes instanceof cv?t.changes:cv.of(t.changes||[],n,e.facet($v)),selection:r&&(r instanceof vv?r:vv.single(r.anchor,r.head)),effects:ry(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function ty(e,t,n){let r=ey(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let o=1;o<t.length;o++){!1===t[o].filter&&(n=!1);let i=!!t[o].sequential;r=Zv(r,ey(e,t[o],i?r.changes.newLength:e.doc.length),i)}let i=Yv.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(Vv),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=Zv(r,ey(t,o,e.changes.newLength),!0))}return r==e?e:Yv.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let i of t.facet(Uv)){let t=i(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:Xv(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=cv.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.mapDesc(t.changes).invertedDesc}e=Yv.create(t,r,e.selection&&e.selection.map(i),Jv.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(Wv);for(let i=r.length-1;i>=0;i--){let n=r[i](e);e=n instanceof Yv?n:Array.isArray(n)&&1==n.length&&n[0]instanceof Yv?n[0]:ty(t,ry(n),!1)}return e}(i):i)}Yv.time=Kv.define(),Yv.userEvent=Kv.define(),Yv.addToHistory=Kv.define(),Yv.remote=Kv.define();const ny=[];function ry(e){return null==e?ny:Array.isArray(e)?e:[e]}var iy=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(iy||(iy={}));const oy=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let sy;try{sy=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(pm){}function ay(e){return t=>{if(!/\S/.test(t))return iy.Space;if(function(e){if(sy)return sy.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||oy.test(n)))return!0}return!1}(t))return iy.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return iy.Word;return iy.Other}}class ly{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)Bv(this,s<<1);this.computeSlot=null}field(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.config.address[e.id];if(null!=n)return Bv(this,n),Fv(this,n);if(t)throw new RangeError("Field is not present in this state")}update(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ty(this,t,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(Iv.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(o.value.compartment,o.value.extension)):o.is(Jv.reconfigure)?(n=null,r=o.value):o.is(Jv.appendConfig)&&(n=null,r=ry(r).concat(o.value));if(n)t=e.startState.values.slice();else{n=Lv.resolve(r,i,this),t=new ly(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new ly(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:vv.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=ry(n.effects);for(let s=1;s<t.ranges.length;s++){let n=e(t.ranges[s]),a=this.changes(n.changes),l=a.map(r);for(let e=0;e<s;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(n.range.map(c)),r=r.compose(l),o=Jv.mapEffects(o,l).concat(Jv.mapEffects(ry(n.effects),c))}return{changes:r,selection:vv.create(i,t.mainIndex),effects:o}}changes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e instanceof cv?e:cv.of(e,this.doc.length,this.facet(ly.lineSeparator))}toText(e){return Fg.of(e.split(this.facet(ly.lineSeparator)||sv))}sliceDoc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(Bv(this,t),Fv(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof Ov&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let i in n)if(Object.prototype.hasOwnProperty.call(e,i)){let t=n[i],o=e[i];r.push(t.init((e=>t.spec.fromJSON(o,e))))}return ly.create({doc:e.doc,selection:vv.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Lv.resolve(e.extensions||[],new Map),n=e.doc instanceof Fg?e.doc:Fg.of((e.doc||"").split(t.staticFacet(ly.lineSeparator)||sv)),r=e.selection?e.selection instanceof vv?e.selection:vv.single(e.selection.anchor,e.selection.head):vv.single(0);return yv(r,n.length),t.staticFacet(Hv)||(r=r.asSingle()),new ly(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(ly.tabSize)}get lineBreak(){return this.facet(ly.lineSeparator)||"\n"}get readOnly(){return this.facet(qv)}phrase(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let i of this.facet(ly.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,((e,t)=>{if("$"==t)return"$";let r=+(t||1);return!r||r>n.length?e:n[r-1]}))),e}languageDataAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=[];for(let i of this.facet(zv))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return ay(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=Xg(t,o,!1);if(i(t.slice(e,o))!=iy.Word)break;o=e}for(;s<r;){let e=Xg(t,s);if(i(t.slice(s,e))!=iy.Word)break;s=e}return o==s?null:vv.range(o+n,s+n)}}function cy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};for(let i of e)for(let e of Object.keys(i)){let t=i[e],o=r[e];if(void 0===o)r[e]=t;else if(o===t||void 0===t);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,t)}}for(let i in t)void 0===r[i]&&(r[i]=t[i]);return r}ly.allowMultipleSelections=Hv,ly.tabSize=wv.define({combine:e=>e.length?e[0]:4}),ly.lineSeparator=$v,ly.readOnly=qv,ly.phrases=wv.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),ly.languageData=zv,ly.changeFilter=Uv,ly.transactionFilter=Wv,ly.transactionExtender=Vv,Iv.reconfigure=Jv.define();class uy{eq(e){return this==e}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return hy.create(e,t,this)}}uy.prototype.startSide=uy.prototype.endSide=0,uy.prototype.point=!1,uy.prototype.mapMode=av.TrackDel;class hy{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new hy(e,t,n)}}function dy(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class fy{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,d=this.to[a]+e;if(h==d){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(d,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new fy(r,i,n,s):null,pos:o}}}class py{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new py(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(dy)),this.isEmpty)return t.length?py.of(t):this;let s=new vy(this,null,-1).goto(0),a=0,l=[],c=new my;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(hy.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?py.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],s=this.chunk[o],a=e.touchesRange(i,i+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(i));else if(!0===a){let{mapped:o,pos:a}=s.map(i,e);o&&(r=Math.max(r,o.maxPoint),t.push(o),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new py(n,t,i||py.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return yy.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return yy.from(e).goto(t)}static compare(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=gy(o,s,n),l=new wy(o,a,i),c=new wy(s,a,i);n.iterGaps(((e,t,n)=>xy(l,e,c,t,n,r))),n.empty&&0==n.length&&xy(l,0,c,0,0,r)}static eq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;null==r&&(r=999999999);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=gy(i,o),a=new wy(i,s,0).goto(n),l=new wy(o,s,0).goto(n);for(;;){if(a.to!=l.to||!ky(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r){let i=new wy(e,null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1).goto(t),o=t,s=i.openStart;for(;;){let e=Math.min(i.to,n);if(i.point){let n=i.activeForPoint(i.to),a=i.pointFrom<t?n.length+1:Math.min(n.length,s);r.point(o,e,i.point,n,a,i.pointRank),s=Math.min(i.openEnd(e),n.length)}else e>o&&(r.span(o,e,i.active,s),s=i.openEnd(e));if(i.to>n)return s+(i.point&&i.to>n?1:0);o=i.to,i.next()}}static of(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new my;for(let r of e instanceof hy?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(dy(t,r)>0)return e.slice().sort(dy);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}py.empty=new py([],[],null,-1),py.empty.nextLayer=py.empty;class my{finishChunk(e){this.chunks.push(new fy(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new my)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(py.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=py.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function gy(e,t,n){let r=new Map;for(let o of e)for(let e=0;e<o.chunk.length;e++)o.chunk[e].maxPoint<=0&&r.set(o.chunk[e],o.chunkPos[e]);let i=new Set;for(let o of t)for(let e=0;e<o.chunk.length;e++){let t=r.get(o.chunk[e]);null==t||(n?n.mapPos(t):t)!=o.chunkPos[e]||(null===n||void 0===n?void 0:n.touchesRange(t,t+o.chunk[e].length))||i.add(o.chunk[e])}return i}class vy{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class yy{constructor(e){this.heap=e}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new vy(o,t,n,i));return 1==r.length?r[0]:new yy(r)}get startSide(){return this.value?this.value.startSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)by(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)by(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),by(this.heap,0)}}}function by(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class wy{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=yy.from(e,t,n)}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Sy(this.active,e),Sy(this.activeTo,e),Sy(this.activeRank,e),this.minActive=Ey(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;Cy(this.active,t,n),Cy(this.activeTo,t,r),Cy(this.activeRank,t,i),e&&Cy(e,t,this.cursor.from),this.minActive=Ey(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&Sy(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function xy(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&ky(e.activeForPoint(e.to),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!ky(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function ky(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function Sy(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function Cy(e,t,n){for(let r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=n}function Ey(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function Ty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=Xg(e,i));return r}function Oy(e,t,n,r){for(let i=0,o=0;;){if(o>=t)return i;if(i==e.length)break;o+=9==e.charCodeAt(i)?n-o%n:1,i=Xg(e,i)}return!0===r?-1:e.length}const Ay="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),_y="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Py="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Ny{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let o in e)i(r(o),e[o],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Py[Ay]||1;return Py[Ay]=e+1,"\u037c"+e.toString(36)}static mount(e,t){(e[_y]||new jy(e)).mount(Array.isArray(t)?t:[t])}}let My=new Map;class jy{constructor(e){let t=e.ownerDocument||e,n=t.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=My.get(t);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[_y]=r;this.sheet=new n.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],My.set(t,this)}else{this.styleTag=t.createElement("style");let n=e.head||e;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],e[_y]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var Ry={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Iy={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Dy="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Ly="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),By=0;By<10;By++)Ry[48+By]=Ry[96+By]=String(By);for(By=1;By<=24;By++)Ry[By+111]="F"+By;for(By=65;By<=90;By++)Ry[By]=String.fromCharCode(By+32),Iy[By]=String.fromCharCode(By);for(var Fy in Ry)Iy.hasOwnProperty(Fy)||(Iy[Fy]=Ry[Fy]);function zy(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function Hy(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function $y(e,t){if(!t.anchorNode)return!1;try{return Hy(e,t.anchorNode)}catch(pm){return!1}}function Uy(e){return 3==e.nodeType?eb(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Wy(e,t,n,r){return!!n&&(qy(e,t,n,r,-1)||qy(e,t,n,r,1))}function Vy(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function qy(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Ky(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=Vy(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?Ky(e):0}}}function Ky(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Qy(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function Gy(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class Jy{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Ky(t):0),n,Math.min(e.focusOffset,n?Ky(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let Yy,Xy=null;function Zy(e){if(e.setActive)return e.setActive();if(Xy)return e.focus(Xy);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==Xy?{get preventScroll(){return Xy={preventScroll:!0},!0}}:void 0),!Xy){Xy=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function eb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=Yy||(Yy=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function tb(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function nb(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class rb{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.node=e,this.offset=t,this.precise=n}static before(e,t){return new rb(e.parentNode,Vy(e),t)}static after(e,t){return new rb(e.parentNode,Vy(e)+1,t)}}const ib=[];class ob{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.dirty){let n,r=this.dom,i=null;for(let o of this.children){if(o.dirty){if(!o.dom&&(n=i?i.nextSibling:r.firstChild)){let e=ob.get(n);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e,t),o.dirty=0}if(n=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&n!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;n&&n!=o.dom;)n=sb(n);else r.insertBefore(o.dom,n);i=o.dom}for(n=i?i.nextSibling:r.firstChild,n&&t&&t.node==r&&(t.written=!0);n;)n=sb(n)}else if(1&this.dirty)for(let n of this.children)n.dirty&&(n.sync(e,t),n.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==Ky(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!ob.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,i=0;;r++){let e=this.children[r];if(e.dom==n)return i;i+=e.length+e.breakAfter}}domBoundsAround(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ib;this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new ab(this.children,e,this.children.length)}childPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function sb(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}ob.prototype.breakAfter=0;class ab{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function lb(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!d&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&i<e.length?(t==r&&(e=e.split(i),i=0),!d&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:(i&&e.merge(0,i,null,!1,0,l),o.push(e))):(null===e||void 0===e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function cb(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let d of r)h+=d.length;e.length+=h,lb(e,c,u,a,l,r,0,i,o)}let ub="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},hb="undefined"!=typeof document?document:{documentElement:{style:{}}};const db=/Edge\/(\d+)/.exec(ub.userAgent),fb=/MSIE \d/.test(ub.userAgent),pb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ub.userAgent),mb=!!(fb||pb||db),gb=!mb&&/gecko\/(\d+)/i.test(ub.userAgent),vb=!mb&&/Chrome\/(\d+)/.exec(ub.userAgent),yb="webkitFontSmoothing"in hb.documentElement.style,bb=!mb&&/Apple Computer/.test(ub.vendor),wb=bb&&(/Mobile\/\w+/.test(ub.userAgent)||ub.maxTouchPoints>2);var xb={mac:wb||/Mac/.test(ub.platform),windows:/Win/.test(ub.platform),linux:/Linux|X11/.test(ub.platform),ie:mb,ie_version:fb?hb.documentMode||6:pb?+pb[1]:db?+db[1]:0,gecko:gb,gecko_version:gb?+(/Firefox\/(\d+)/.exec(ub.userAgent)||[0,0])[1]:0,chrome:!!vb,chrome_version:vb?+vb[1]:0,ios:wb,android:/Android\b/.test(ub.userAgent),webkit:yb,safari:bb,webkit_version:yb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=hb.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class kb extends ob{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof kb&&!(this.length-(t-e)+n.length>256))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new kb(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new rb(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Cb(this.dom,e,t)}}class Sb extends ob{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(nb(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof Sb&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(cb(this,e,t,n?n.children:[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let s of this.children){let o=n+s.length;o>e&&t.push(n<e?s.split(e-n):s),r<0&&n>=e&&(r=i),n=o,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Sb(this.mark,t,o)}domAtPos(e){return Mb(this,e)}coordsAt(e,t){return Rb(this,e,t)}}function Cb(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?xb.chrome||xb.gecko||(t?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=eb(e,i,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return xb.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?Qy(l,s<0):l||null}class Eb extends ob{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||Eb)(e,t,n)}split(e){let t=Eb.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Eb&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof Eb&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Fg.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Fg.empty}domAtPos(e){return(this.length?0==e:this.side>0)?rb.before(this.dom):rb.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),i=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?r.length-1:0;i=r[s],!(e>0?0==s:s==r.length-1||i.top<i.bottom);s+=o?-1:1);return this.length?i:Qy(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Tb extends Eb{domAtPos(e){let{topView:t,text:n}=this.widget;return t?Ob(e,0,t,n,this.length-t.length,((e,t)=>e.domAtPos(t)),((e,t)=>new rb(e,Math.min(t,e.nodeValue.length)))):new rb(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?_b(e,t,n,r,this.length-n.length):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?Ob(e,t,n,r,this.length-n.length,((e,t,n)=>e.coordsAt(t,n)),((e,t,n)=>Cb(e,t,n))):Cb(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function Ob(e,t,n,r,i,o,s){if(n instanceof Sb){for(let a=n.dom.firstChild;a;a=a.nextSibling){let n=ob.get(a);if(n){let l=Hy(a,r),c=n.length+(l?i:0);if(e<c||e==c&&n.getSide()<=0)return l?Ob(e,t,n,r,i,o,s):o(n,e,t);e-=c}else{let n=Ab(e,t,a,s);if("number"!=typeof n)return n;e=n}}return o(n,n.length,-1)}return n.dom==r?s(r,e,t):o(n,e,t)}function Ab(e,t,n,r){if(3==n.nodeType){let i=n.nodeValue.length;if(e<=i)return r(n,e,t);e-=i}else if(1==n.nodeType&&"false"!=n.contentEditable)for(let i=n.firstChild;i;i=i.nextSibling){let n=Ab(e,t,i,r);if("number"!=typeof n)return n;e=n}return e}function _b(e,t,n,r,i){if(n instanceof Sb){let o=0;for(let s=n.dom.firstChild;s;s=s.nextSibling){let n=ob.get(s);if(n){let a=Hy(s,r);if(Hy(s,e))return o+(a?_b(e,t,n,r,i):n.localPosFromDOM(e,t));o+=n.length+(a?i:0)}else{let n=Pb(e,t,s);if(null!=n.result)return o+n.result;o+=n.size}}}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}function Pb(e,t,n){if(3==n.nodeType)return e==n?{result:t}:{size:n.nodeValue.length};if(1!=n.nodeType||"false"==n.contentEditable)return n.contains(e)?{result:0}:{size:0};{let r=0;for(let i=n.firstChild,o=0;;i=i.nextSibling,o++){if(e==n&&o==t)return{result:r};if(!i)return{size:r};let s=Pb(e,t,i);if(null!=s.result)return{result:t+s.result};r+=s.size}}}class Nb extends ob{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Nb&&e.side==this.side}split(){return new Nb(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?rb.before(this.dom):rb.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Fg.empty}get isHidden(){return!0}}function Mb(e,t){let n=e.dom,{children:r}=e,i=0;for(let o=0;i<r.length;i++){let e=r[i],s=o+e.length;if(!(s==o&&e.getSide()<=0)){if(t>o&&t<s&&e.dom.parentNode==n)return e.domAtPos(t-o);if(t<=o)break;o=s}}for(let o=i;o>0;o--){let e=r[o-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let o=i;o<r.length;o++){let e=r[o];if(e.dom.parentNode==n)return e.domAtPos(0)}return new rb(n,0)}function jb(e,t,n){let r,{children:i}=e;n>0&&t instanceof Sb&&i.length&&(r=i[i.length-1])instanceof Sb&&r.mark.eq(t.mark)?jb(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function Rb(e,t,n){let r=null,i=-1,o=null,s=-1;!function e(t,a){for(let l=0,c=0;l<t.children.length&&c<=a;l++){let u=t.children[l],h=c+u.length;h>=a&&(u.children.length?e(u,a-c):(!o||o.isHidden&&n>0)&&(h>a||c==h&&u.getSide()>0)?(o=u,s=a-c):(c<a||c==h&&u.getSide()<0&&!u.isHidden)&&(r=u,i=a-c)),c=h}}(e,t);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=Uy(t);return n[n.length-1]||null}(e)}function Ib(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function Db(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||e[i]!==t[i])return!1;return!0}function Lb(e,t,n){let r=null;if(t)for(let i in t)n&&i in n||e.removeAttribute(r=i);if(n)for(let i in n)t&&t[i]==n[i]||e.setAttribute(r=i,n[i]);return!!r}kb.prototype.children=Eb.prototype.children=Nb.prototype.children=ib;class Bb{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get customView(){return null}get isHidden(){return!1}destroy(e){}}var Fb=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Fb||(Fb={}));class zb extends uy{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Hb(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ub(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=Wb(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new Ub(e,t,n,r,e.widget||null,!0)}static line(e){return new $b(e)}static set(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return py.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}zb.none=py.empty;class Hb extends zb{constructor(e){let{start:t,end:n}=Wb(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Hb&&this.tagName==e.tagName&&this.class==e.class&&Db(this.attrs,e.attrs)}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Hb.prototype.point=!1;class $b extends zb{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof $b&&this.spec.class==e.spec.class&&Db(this.spec.attributes,e.spec.attributes)}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}$b.prototype.mapMode=av.TrackBefore,$b.prototype.point=!0;class Ub extends zb{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?av.TrackBefore:av.TrackAfter:av.TrackDel}get type(){return this.startSide<this.endSide?Fb.WidgetRange:this.startSide<=0?Fb.WidgetBefore:Fb.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ub&&function(e,t){return e==t||!!(e&&t&&e.compare(t))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function Wb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!==n&&void 0!==n?n:t,end:null!==r&&void 0!==r?r:t}}function Vb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}Ub.prototype.point=!0;class qb extends ob{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof qb))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),cb(this,e,t,n?n.children:[],i,o),!0}split(e){let t=new qb;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let i=n;i<this.children.length;i++)t.append(this.children[i],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Db(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){jb(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Ib(t,this.attrs||{})),n&&(this.attrs=Ib({class:n},this.attrs||{}))}domAtPos(e){return Mb(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var n;this.dom?4&this.dirty&&(nb(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Lb(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&ob.get(r)instanceof Sb;)r=r.lastChild;if(!r||!this.length||"BR"!=r.nodeName&&0==(null===(n=ob.get(r))||void 0===n?void 0:n.isEditable)&&(!xb.ios||!this.children.some((e=>e instanceof kb)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof kb)||/[^ -~]/.test(n.text))return null;let r=Uy(n.dom);if(1!=r.length)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=Rb(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return!1}get type(){return Fb.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof qb)return i;if(o>t)break}r=o+i.breakAfter}return null}}class Kb extends ob{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Kb&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?rb.before(this.dom):rb.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Kb(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return ib}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Fg.empty}domBoundsAround(){return null}become(e){return e instanceof Kb&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Qb{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Kb&&e.type==Fb.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new qb),this.atCursorPos=!0),this.curLine}flushBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.bufferMarks;this.pendingBuffer&&(this.curLine.append(Gb(new Nb(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(Gb(new kb(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Ub){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof Ub)if(n.block){let{type:e}=n;e!=Fb.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Kb(n.widget||new Jb("div"),s,e))}else{let o=Eb.create(n.widget||new Jb("span"),s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||i>r.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(Gb(new Nb(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(Gb(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t||i>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new Qb(e,t,n,i);return o.openEnd=py.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Gb(e,t){for(let n of t)e=new Sb(n,[e],e.length);return e}class Jb extends Bb{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const Yb=wv.define(),Xb=wv.define(),Zb=wv.define(),ew=wv.define(),tw=wv.define(),nw=wv.define(),rw=wv.define(),iw=wv.define({combine:e=>e.some((e=>e))}),ow=wv.define({combine:e=>e.some((e=>e))});class sw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i}map(e){return e.empty?this:new sw(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const aw=Jv.define({map:(e,t)=>e.map(t)});function lw(e,t,n){let r=e.facet(ew);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const cw=wv.define({combine:e=>!e.length||e[0]});let uw=0;const hw=wv.define();class dw{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:i}=t||{};return new dw(uw++,e,n,(e=>{let t=[hw.of(e)];return i&&t.push(gw.of((t=>{let n=t.plugin(e);return n?i(n):zb.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return dw.define((t=>new e(t)),t)}}class fw{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(lw(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(pm){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){lw(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(n){lw(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const pw=wv.define(),mw=wv.define(),gw=wv.define(),vw=wv.define(),yw=wv.define();function bw(e){let t=0,n=0,r=0,i=0;for(let o of e.state.facet(yw)){let s=o(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(r=Math.max(r,s.top)),null!=s.bottom&&(i=Math.max(i,s.bottom)))}return{left:t,right:n,top:r,bottom:i}}const ww=wv.define();class xw{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new xw(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new xw(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new xw(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class kw{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=cv.empty(this.startState.doc.length);for(let i of n)this.changes=this.changes.compose(i.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new xw(e,t,n,i)))),this.changedRanges=r}static create(e,t,n){return new kw(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Sw=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Sw||(Sw={}));const Cw=Sw.LTR,Ew=Sw.RTL;function Tw(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const Ow=Tw("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Aw=Tw("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),_w=Object.create(null),Pw=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);_w[e]=t,_w[t]=-e}const Nw=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Mw{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?Ew:Cw}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}const jw=[];function Rw(e,t){let n=e.length,r=t==Cw?1:2,i=t==Cw?2:1;if(!e||1==r&&!Nw.test(e))return Iw(n);for(let a=0,l=r,c=r;a<n;a++){let t=(o=e.charCodeAt(a))<=247?Ow[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?Aw[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203?256:64336<=o&&o<=65023?4:8204==o?256:1;512==t?t=l:8==t&&4==c&&(t=16),jw[a]=4==t?2:t,7&t&&(c=t),l=t}var o;for(let a=0,l=r,c=r;a<n;a++){let e=jw[a];if(128==e)a<n-1&&l==jw[a+1]&&24&l?e=jw[a]=l:jw[a]=256;else if(64==e){let e=a+1;for(;e<n&&64==jw[e];)e++;let t=a&&8==l||e<n&&8==jw[e]?1==c?1:8:256;for(let n=a;n<e;n++)jw[n]=t;a=e-1}else 8==e&&1==c&&(jw[a]=1);l=e,7&e&&(c=e)}for(let a,l,c,u=0,h=0,d=0;u<n;u++)if(l=_w[a=e.charCodeAt(u)])if(l<0){for(let e=h-3;e>=0;e-=3)if(Pw[e+1]==-l){let t=Pw[e+2],n=2&t?r:4&t?1&t?i:r:0;n&&(jw[u]=jw[Pw[e]]=n),h=e;break}}else{if(189==Pw.length)break;Pw[h++]=u,Pw[h++]=a,Pw[h++]=d}else if(2==(c=jw[u])||1==c){let e=c==r;d=e?0:1;for(let t=h-3;t>=0;t-=3){let n=Pw[t+2];if(2&n)break;if(e)Pw[t+2]|=2;else{if(4&n)break;Pw[t+2]|=4}}}for(let a=0;a<n;a++)if(256==jw[a]){let e=a+1;for(;e<n&&256==jw[e];)e++;let t=1==(a?jw[a-1]:r),i=t==(1==(e<n?jw[e]:r))?t?1:2:r;for(let n=a;n<e;n++)jw[n]=i;a=e-1}let s=[];if(1==r)for(let a=0;a<n;){let e=a,t=1!=jw[a++];for(;a<n&&t==(1!=jw[a]);)a++;if(t)for(let n=a;n>e;){let t=n,r=2!=jw[--n];for(;n>e&&r==(2!=jw[n-1]);)n--;s.push(new Mw(n,t,r?2:1))}else s.push(new Mw(e,a,0))}else for(let a=0;a<n;){let e=a,t=2==jw[a++];for(;a<n&&t==(2==jw[a]);)a++;s.push(new Mw(e,a,t?1:2))}return s}function Iw(e){return[new Mw(0,e,0)]}let Dw="";function Lw(e,t,n,r,i){var o;let s=r.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=Mw.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=t[a];s==l.side(i,n)&&(l=t[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=Xg(e.text,s,c);if(Dw=e.text.slice(Math.min(s,u),Math.max(s,u)),u!=l.side(i,n))return vv.cursor(u+e.from,c?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?vv.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):vv.cursor(u+e.from,i?-1:1,l.level):vv.cursor(i?e.to:e.from,i?-1:1,n)}const Bw="\uffff";class Fw{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ly.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bw}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let i=r.nextSibling;if(i==t)break;let o=ob.get(r),s=ob.get(i);(o&&s?o.breakAfter:(o?o.breakAfter:zw(r))||zw(i)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&this.lineBreak(),r=i}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=ob.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function zw(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Hw{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class $w extends ob{constructor(e){super(),this.view=e,this.compositionDeco=zb.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new qb],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xw(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((e=>{let{fromA:t,toA:n}=e;return n<this.minWidthFrom||t>this.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=zb.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let n=Ww(e);if(!n)return zb.none;let{from:r,to:i,node:o,text:s}=n,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(i,-1)),{state:c}=e,u=new Fw([],c);3==o.nodeType?u.readTextNode(o):u.readRange(o.firstChild,null);let{text:h}=u;if(h.indexOf(Bw)>-1)return zb.none;if(l-a<h.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+h.length))==h)l=a+h.length;else{if(c.doc.sliceString(Math.max(0,l-h.length),l)!=h)return zb.none;a=l-h.length}else if(c.doc.sliceString(a,l)!=h)return zb.none;let d=ob.get(o);d instanceof Tb?d=d.widget.topView:d&&(d.parent=null);return zb.set(zb.replace({widget:new Vw(o,s,d),inclusive:!0}).range(a,l))}(this.view,e.changes)),(xb.ie||xb.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=function(e,t,n){let r=new Kw;return py.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=xw.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=xb.chrome||xb.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let i of this.children)i instanceof Kb&&i.widget instanceof Uw&&r.push(i.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let r=e.length-1;;r--){let t=r>=0?e[r]:null;if(!t)break;let{fromA:i,toA:o,fromB:s,toB:a}=t,{content:l,breakAtStart:c,openStart:u,openEnd:h}=Qb.build(this.view.state.doc,s,a,this.decorations,this.dynamicDecorationMap),{i:d,off:f}=n.findPos(o,1),{i:p,off:m}=n.findPos(i,-1);lb(this,p,m,d,f,l,c,u,h)}}updateSelection(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let t=this.view.root.activeElement,n=t==this.dom,r=!n&&$y(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t));if(!(n||e||r))return;let i=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,s=this.domAtPos(o.anchor),a=o.empty?s:this.domAtPos(o.head);if(xb.gecko&&o.empty&&!this.compositionDeco.size&&(1==(l=s).node.nodeType&&l.node.firstChild&&(0==l.offset||"false"==l.node.childNodes[l.offset-1].contentEditable)&&(l.offset==l.node.childNodes.length||"false"==l.node.childNodes[l.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>s.node.insertBefore(e,s.node.childNodes[s.offset]||null))),s=a=new rb(e,0),i=!0}var l;let c=this.view.observer.selectionRange;!i&&c.focusNode&&Wy(s.node,s.offset,c.anchorNode,c.anchorOffset)&&Wy(a.node,a.offset,c.focusNode,c.focusOffset)||(this.view.observer.ignore((()=>{xb.android&&xb.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=zy(this.view.root);if(e)if(o.empty){if(xb.gecko){let e=function(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}(s.node,s.offset);if(e&&3!=e){let t=qw(s.node,s.offset,1==e?1:-1);t&&(s=new rb(t,1==e?0:t.nodeValue.length))}}e.collapse(s.node,s.offset),null!=o.bidiLevel&&null!=c.cursorBidiLevel&&(c.cursorBidiLevel=o.bidiLevel)}else if(e.extend){e.collapse(s.node,s.offset);try{e.extend(a.node,a.offset)}catch(pm){}}else{let t=document.createRange();o.anchor>o.head&&([s,a]=[a,s]),t.setEnd(a.node,a.offset),t.setStart(s.node,s.offset),e.removeAllRanges(),e.addRange(t)}else;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),t&&t.focus())})),this.view.observer.setSelectionRange(s,a)),this.impreciseAnchor=s.precise?null:new rb(c.anchorNode,c.anchorOffset),this.impreciseHead=a.precise?null:new rb(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,n=zy(e.root),{anchorNode:r,anchorOffset:i}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=qb.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,i)}nearest(e){for(let t=e;t;){let e=ob.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof qb)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(e>o||e==o&&i.type!=Fb.WidgetBefore&&i.type!=Fb.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==Fb.WidgetBefore&&t>-2))return i.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Sw.LTR;for(let l=0,c=0;c<this.children.length;c++){let e=this.children[c],u=l+e.length;if(u>r)break;if(l>=n){let n=e.dom.getBoundingClientRect();if(t.push(n.height),o){let t=e.dom.lastChild,r=t?Uy(t):[];if(r.length){let e=r[r.length-1],t=a?e.right-n.left:n.right-e.left;t>s&&(s=t,this.minWidth=i,this.minWidthFrom=l,this.minWidthTo=u)}}}l=u+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Sw.RTL:Sw.LTR}measureTextSize(){for(let i of this.children)if(i instanceof qb){let e=i.measureTextSize();if(e)return e}let e,t,n,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(r);let i=Uy(r.firstChild)[0];e=r.getBoundingClientRect().height,t=i?i.width/27:7,n=i?i.height:e,r.remove()})),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,t=this.children.length;return t&&(e-=this.children[--t].length),new ab(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(zb.replace({widget:new Uw(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return zb.set(e)}updateDeco(){let e=this.view.state.facet(gw).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=bw(this.view),o={left:r.left-i.left,top:r.top-i.top,right:r.right+i.right,bottom:r.bottom+i.bottom};!function(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView||window;for(let u=e;u;)if(1==u.nodeType){let e,h=u==l.body;if(h)e=Gy(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let t=u.getBoundingClientRect();e={left:t.left,right:t.left+u.clientWidth,top:t.top,bottom:t.top+u.clientHeight}}let d=0,f=0;if("nearest"==i)t.top<e.top?(f=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+f&&(f=t.bottom-e.bottom+f+s)):t.bottom>e.bottom&&(f=t.bottom-e.bottom+s,n<0&&t.top-f<e.top&&(f=-(e.top+f-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;f=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(d=-(e.left-t.left+o),n>0&&t.right>e.right+d&&(d=t.right-e.right+d+o)):t.right>e.right&&(d=t.right-e.right+o,n<0&&t.left<e.left+d&&(d=-(e.left+d-t.left+o))):d=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,d||f)if(h)c.scrollBy(d,f);else{let e=0,n=0;if(f){let e=u.scrollTop;u.scrollTop+=f,n=u.scrollTop-e}if(d){let t=u.scrollLeft;u.scrollLeft+=d,e=u.scrollLeft-t}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-d)<1&&(r="nearest"),n&&Math.abs(n-f)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Sw.LTR)}}class Uw extends Bb{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Ww(e){let t=e.observer.selectionRange,n=t.focusNode&&qw(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof qb){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!ob.get(t);)t=t.previousSibling;let i=t?ob.get(t).posAtEnd:r.posAtStart;return{from:i,to:i,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof qb)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}class Vw extends Bb{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Tb}}function qw(e,t,n){if(n<=0)for(let r=e,i=t;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&i>0))break;r=r.childNodes[i-1],i=Ky(r)}if(n>=0)for(let r=e,i=t;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&i<r.childNodes.length&&n>=0))break;r=r.childNodes[i],i=0}return null}class Kw{constructor(){this.changes=[]}compareRange(e,t){Vb(e,t,this.changes)}comparePoint(e,t){Vb(e,t,this.changes)}}function Qw(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Gw(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Jw(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Yw(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Xw(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Zw(e,t,n){let r,i,o,s,a,l,c,u,h=!1;for(let f=e.firstChild;f;f=f.nextSibling){let e=Uy(f);for(let d=0;d<e.length;d++){let p=e[d];i&&Jw(i,p)&&(p=Yw(Xw(p,i.bottom),i.top));let m=Qw(t,p),g=Gw(n,p);if(0==m&&0==g)return 3==f.nodeType?ex(f,t,n):Zw(f,t,n);if(!r||s>g||s==g&&o>m){r=f,i=p,o=m,s=g;let a=g?n<p.top?-1:1:m?t<p.left?-1:1:0;h=!a||(a>0?d<e.length-1:d>0)}0==m?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=f,c=p):n<p.top&&(!u||u.top>p.top)&&(l=f,u=p):c&&Jw(c,p)?c=Xw(c,p.bottom):u&&Jw(u,p)&&(u=Yw(u,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let d=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?ex(r,d,n):h&&"false"!=r.contentEditable?Zw(r,d,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}}function ex(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=eb(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if(xb.chrome||xb.gecko){eb(e,a).getBoundingClientRect().left==c.right&&(r=!n)}if(u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function tx(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;var i,o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:u,y:h}=t,d=h-l;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let w=e.defaultLineHeight/2,x=!1;s=e.elementAtHeight(d),s.type!=Fb.Text;)for(;d=r>0?s.bottom+w:s.top-w,!(d>=0&&d<=c);){if(x)return n?null:0;x=!0,r=-r}h=l+d;let f=s.from;if(f<e.viewport.from)return 0==e.viewport.from?0:n?null:nx(e,a,s,u,h);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:nx(e,a,s,u,h);let p=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:p,g=m.elementFromPoint(u,h);g&&!e.contentDOM.contains(g)&&(g=null),g||(u=Math.max(a.left+1,Math.min(a.right-1,u)),g=m.elementFromPoint(u,h),g&&!e.contentDOM.contains(g)&&(g=null));let v,y=-1;if(g&&0!=(null===(i=e.docView.nearest(g))||void 0===i?void 0:i.isEditable))if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(u,h);e&&({offsetNode:v,offset:y}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(u,h);t&&(({startContainer:v,startOffset:y}=t),(!e.contentDOM.contains(v)||xb.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let i=e.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return eb(e,r-1,r).getBoundingClientRect().left>n}(v,y,u)||xb.chrome&&function(e,t,n){if(0!=t)return!1;for(let i=e;;){let e=i.parentNode;if(!e||1!=e.nodeType||e.firstChild!=i)return!1;if(e.classList.contains("cm-line"))break;i=e}let r=1==e.nodeType?e.getBoundingClientRect():eb(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}(v,y,u))&&(v=void 0))}if(!v||!e.docView.dom.contains(v)){let t=qb.find(e.docView,f);if(!t)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:y}=Zw(t.dom,u,h))}let b=e.docView.nearest(v);if(!b)return null;if(b.isWidget&&1==(null===(o=b.dom)||void 0===o?void 0:o.nodeType)){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(v,y)+b.posAtStart}function nx(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){o+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+Oy(s,o,e.state.tabSize)}function rx(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let r of n.type)if(r.to>t||r.to==t&&(r.to==n.to||r.type==Fb.Text))return r;return n}function ix(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=Lw(i,o,s,a,n),c=Dw;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;c="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=vv.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function ox(e,t,n){for(;;){let r=0;for(let i of e)i.between(t-1,t+1,((e,i,o)=>{if(t>e&&t<i){let o=r||n||(t-e<i-t?-1:1);t=o<0?e:i,r=o}}));if(!r)return t}}function sx(e,t,n){let r=ox(e.state.facet(vw).map((t=>t(e))),n.from,t.head>n.from?-1:1);return r==n.from?n:vv.cursor(r,r<n.from?1:-1)}class ax{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(t,n)=>{this.ignoreDuringComposition(n)||"keydown"==n.type&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(n.type,e,n)?n.preventDefault():t(e,n))};for(let n in px){let r=px[n];e.contentDOM.addEventListener(n,(n=>{fx(e,n)&&t(r,n)}),mx[n]),this.registeredEvents.push(n)}e.scrollDOM.addEventListener("mousedown",(n=>{if(n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(px.mousedown,n),!n.defaultPrevented&&2==n.button)){let t=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout((()=>e.contentDOM.style.minHeight=t),200)}})),e.scrollDOM.addEventListener("drop",(n=>{n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(px.drop,n)})),xb.chrome&&102==xb.chrome_version&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,xb.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let i of t)if(r=null===(n=i.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:i.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{fx(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}}runCustomHandlers(e,t,n){for(let i of this.customHandlers){let o=i.handlers[e];if(o)try{if(o.call(i.plugin,n,t)||n.defaultPrevented)return!0}catch(r){lw(t.state,r)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(n){lw(e.state,n)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=t.keyCode&&ux.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),xb.android&&xb.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!xb.ios||t.synthetic||t.altKey||t.metaKey||!((n=lx.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||cx.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey))&&(this.pendingIOSKey=n||t,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,tb(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(xb.safari&&!xb.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const lx=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],cx="dthko",ux=[16,17,18,20,91,92,224,225];function hx(e){return.7*Math.max(0,e)+8}class dx{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function(e){let t=e.ownerDocument;for(let n=e.parentNode;n&&n!=t.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}(e.contentDOM),this.atoms=e.state.facet(vw).map((t=>t(e)));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ly.allowMultipleSelections)&&function(e,t){let n=e.state.facet(Yb);return n.length?n[0](t):xb.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let n=e.state.facet(Xb);return n.length?n[0](t):xb.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=zy(e.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let e=i[o];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Ox(t))&&null}start(e){!1===this.dragging&&(e.preventDefault(),this.select(e))}move(e){var t;if(0==e.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=e);let n=0,r=0,i=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=bw(this.view);e.clientX-o.left<=i.left+6?n=-hx(i.left-e.clientX):e.clientX+o.right>=i.right-6&&(n=hx(e.clientX-i.right)),e.clientY-o.top<=i.top+6?r=-hx(i.top-e.clientY):e.clientY+o.bottom>=i.bottom-6&&(r=hx(e.clientY-i.bottom)),this.setScrollSpeed(n,r)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],i=null;if(r.empty){let e=ox(this.atoms,r.from,0);e!=r.from&&(i=vv.cursor(e,-1))}else{let e=ox(this.atoms,r.from,-1),t=ox(this.atoms,r.to,1);e==r.from&&t==r.to||(i=vv.range(r.from==r.anchor?e:t,r.from==r.head?e:t))}i&&(t||(t=e.ranges.slice()),t[n]=i)}return t?vv.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection)&&n.main.assoc==t.state.selection.main.assoc||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function fx(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=ob.get(r))&&n.ignoreEvent(t))return!1;return!0}const px=Object.create(null),mx=Object.create(null),gx=xb.ie&&xb.ie_version<15||xb.ios&&xb.webkit_version<604;function vx(e,t){let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length,a=null!=_x&&r.selection.ranges.every((e=>e.empty))&&_x==o.toString();if(a){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:vv.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:vv.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function yx(e,t,n,r){if(1==r)return vv.cursor(t,n);if(2==r)return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return vv.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=Xg(i.text,o,!1):a=Xg(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=Xg(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=Xg(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return vv.range(s+i.from,a+i.from)}(e.state,t,n);{let n=qb.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,vv.range(i,o)}}px.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode&&(e.inputState.lastEscPress=Date.now())},px.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},px.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},mx.touchstart=mx.touchmove={passive:!0},px.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of e.state.facet(Zb))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=kx(e,t),r=Ox(t),i=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),i=i.map(e.changes))},get(t,o,s){let a,l=kx(e,t),c=yx(e,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let t=yx(e,n.pos,n.bias,r),i=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=i<c.from?vv.range(i,o):vv.range(o,i)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&1==r&&i.ranges.length>1&&(a=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:r,to:i}=e.ranges[n];if(r<=t&&i>=t)return vv.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(i,l.pos))?a:s?i.addRange(c):vv.create([c])}}}(e,t)),n){let r=e.root.activeElement!=e.contentDOM;e.inputState.startMouseSelection(new dx(e,t,n,r)),r&&e.observer.ignore((()=>Zy(e.contentDOM))),e.inputState.mouseSelection&&e.inputState.mouseSelection.start(t)}};let bx=(e,t)=>e>=t.top&&e<=t.bottom,wx=(e,t,n)=>bx(t,n)&&e>=n.left&&e<=n.right;function xx(e,t,n,r){let i=qb.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&wx(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&wx(n,r,a)?1:s&&bx(r,s)?-1:1}function kx(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:xx(e,n,t.clientX,t.clientY)}}const Sx=xb.ie&&xb.ie_version<=11;let Cx=null,Ex=0,Tx=0;function Ox(e){if(!Sx)return e.detail;let t=Cx,n=Tx;return Cx=e,Tx=Date.now(),Ex=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Ex+1)%3:1}function Ax(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}px.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},px.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&Ax(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}}else Ax(e,t,t.dataTransfer.getData("Text"),!0)},px.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=gx?null:t.clipboardData;n?(vx(e,n.getData("text/plain")||n.getData("text/uri-text")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),vx(e,n.value)}),50)}(e)};let _x=null;px.copy=px.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),n.push(i));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!i)return;_x=i?n:null;let o=gx?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const Px=Kv.define();function Nx(e,t){let n=[];for(let r of e.facet(rw)){let i=r(e,t);i&&n.push(i)}return n?e.update({effects:n,annotations:Px.of(!0)}):null}function Mx(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=Nx(e.state,t);n?e.dispatch(n):e.update([])}}),10)}px.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),Mx(e)},px.blur=e=>{e.observer.clearSelectionRange(),Mx(e)},px.compositionstart=px.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},px.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,xb.chrome&&xb.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])}),50)},px.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},px.beforeinput=(e,t)=>{var n;let r;if(xb.chrome&&xb.android&&(r=lx.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const jx=["pre-wrap","normal","pre-line","break-spaces"];class Rx{constructor(e){this.lineWrapping=e,this.doc=Fg.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return jx.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i,o){let s=jx.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=i,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class Ix{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Dx{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this._content=i}get type(){return"number"==typeof this._content?Fb.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ub?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Dx(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Lx=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Lx||(Lx={}));const Bx=.001;class Fx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Bx&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Fx.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this,o=n.doc;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=r[s],h=i.lineAt(a,Lx.ByPosNoHeight,n.setDoc(t),0,0),d=h.to>=l?h:i.lineAt(l,Lx.ByPosNoHeight,n,0,0);for(u+=d.to-l,l=d.to;s>0&&h.from<=r[s-1].toA;)a=r[s-1].fromA,c=r[s-1].fromB,s--,a<h.from&&(h=i.lineAt(a,Lx.ByPosNoHeight,n,0,0));c+=h.from-a,a=h.from;let f=Vx.build(n.setDoc(o),e,c,u);i=i.replace(a,l,f)}return i.updateHeight(n,0)}static empty(){return new Hx(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new Ux(Fx.of(e.slice(0,t)),o,Fx.of(e.slice(n)))}}Fx.prototype.size=1;class zx extends Fx{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new Dx(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3?arguments[3]:void 0;return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Hx extends zx{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new Dx(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof Hx||r instanceof $x&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof $x?r=new Hx(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Fx.of(n)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class $x extends Fx{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-r+1,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*o);n=t/o,this.length>o+1&&(s=(this.height-t)/(this.length-o-1))}else n=this.height/o;return{firstLine:r,lastLine:i,perLine:n,perChar:s}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let i=r+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),o=t.doc.lineAt(i),l=s+o.length*a,c=Math.max(n,e-l/2);return new Dx(o.from,o.length,c,l,0)}{let r=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:a,length:l}=t.doc.line(i+r);return new Dx(a,l,n+s*r,s,0)}}lineAt(e,t,n,r,i){if(t==Lx.ByHeight)return this.blockAt(e,n,r,i);if(t==Lx.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new Dx(t,r-t,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,i),l=n.doc.lineAt(e),c=s+l.length*a,u=l.number-o,h=r+s*u+a*(l.from-i-u);return new Dx(l.from,l.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,t,n,r,i,o){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,i);for(let c=e,u=r;c<=t;){let t=n.doc.lineAt(c);if(c==e){let n=t.number-s;u+=a*n+l*(e-i-n)}let r=a+l*t.length;o(new Dx(t.from,t.length,u,r,0)),u+=r,c=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof $x?n[n.length-1]=new $x(e.length+r):n.push(null,new $x(r-1))}if(e>0){let t=n[0];t instanceof $x?n[0]=new $x(e+t.length):n.unshift(new $x(e-1),null)}return Fx.of(n)}decomposeLeft(e,t){t.push(new $x(e-1),null)}decomposeRight(e,t){t.push(null,new $x(this.length-e-1))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1;for(r.from>t&&n.push(new $x(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=Bx&&(s=-2);let a=new Hx(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new $x(i-o).updateHeight(e,o));let a=Fx.of(n);return(s<0||Math.abs(a.height-this.height)>=Bx||Math.abs(s-this.heightMetrics(e,t).perLine)>=Bx)&&(e.heightChanged=!0),a}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Ux extends Fx{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==Lx.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==Lx.ByPosNoHeight?Lx.ByPosNoHeight:Lx.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,Lx.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let s of n)i.push(s);if(e>0&&Wx(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),Wx(i,e)}return Fx.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Fx.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Wx(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof $x&&(r=e[t+1])instanceof $x&&e.splice(t-1,3,new $x(n.length+1+r.length))}class Vx{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Hx?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Hx(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new zx(o,r,n)):(o||i||r>=5)&&this.addLineDeco(r,i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Hx(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new $x(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Hx)return e;let t=new Hx(0,-1);return this.nodes.push(t),t}addBlock(e){var t;this.enterLine();let n=null===(t=e.deco)||void 0===t?void 0:t.type;n!=Fb.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n!=Fb.WidgetBefore&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Hx||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Hx(0,-1));let n=e;for(let r of this.nodes)r instanceof Hx&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let i=new Vx(n,e);return py.spans(t,n,r,i,0),i.finish(n)}}class qx{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Vb(e,t,this.changes,5)}}function Kx(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=e.parentNode;c&&c!=r.body;)if(1==c.nodeType){let t=c,n=window.getComputedStyle(t);if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=n.overflow){let n=t.getBoundingClientRect();o=Math.max(o,n.left),s=Math.min(s,n.right),a=Math.max(a,n.top),l=c==e.parentNode?n.bottom:Math.min(l,n.bottom)}c="absolute"==n.position||"fixed"==n.position?t.offsetParent:t.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}}function Qx(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class Gx{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e){return zb.replace({widget:new Jx(this.size,e)}).range(this.from,this.to)}}class Jx extends Bb{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Yx{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=nk,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Sw.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(mw).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new Rx(t),this.stateDeco=e.facet(gw).filter((e=>"function"!=typeof e)),this.heightMap=Fx.empty().applyChanges(this.stateDeco,Fg.empty,this.heightOracle.setDoc(e.doc),[new xw(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=zb.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((e=>{let{from:t,to:n}=e;return r>=t&&r<=n}))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new Xx(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?nk:new rk(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:ik(e,this.scaler))}))}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(gw).filter((e=>"function"!=typeof e));let r=e.changedRanges,i=xw.extendWithRanges(r,function(e,t,n){let r=new qx;return py.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:cv.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.lineBlockAtHeight(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=o&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||2&e.flags||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(ow)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Sw.RTL:Sw.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0,u=parseInt(n.paddingTop)||0,h=parseInt(n.paddingBottom)||0;this.paddingTop==u&&this.paddingBottom==h||(this.paddingTop=u,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=this.scrollTop>e.scrollDOM.scrollHeight-e.scrollDOM.clientHeight-4;let d=(this.printing?Qx:Kx)(t,this.paddingTop),f=d.top-this.pixelViewport.top,p=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let g=s.width;if(this.contentDOMWidth==g&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(g-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=e.docView.measureTextSize();o=n>0&&r.refresh(i,n,s,a,g/s,t),o&&(e.docView.minWidth=0,l|=8)}f>0&&p>0?c=Math.max(f,p):f<0&&p<0&&(c=Math.min(f,p)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(o?Fx.empty().applyChanges(this.stateDeco,Fg.empty,this.heightOracle,[new xw(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new Ix(n.from,i))}r.heightChanged&&(l|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new Xx(r.lineAt(o-1e3*n,Lx.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),Lx.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,Lx.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new Xx(r.lineAt(n-500,Lx.ByHeight,i,0,0).from,r.lineAt(n+o+500,Lx.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Xx(this.heightMap.lineAt(n,Lx.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Lx.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate(e){let{from:t,to:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,Lx.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,Lx.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(0==t||i<=s-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=a+Math.max(10,Math.min(r,250)))&&i>s-2e3&&o<a+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new Gx(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,i=r>>1,o=r<<1;if(this.defaultTextDirection!=Sw.LTR&&!n)return[];let s=[],a=(r,o,l,c)=>{if(o-r<i)return;let u=this.state.selection.main,h=[u.from];u.empty||h.push(u.to);for(let e of h)if(e>r&&e<o)return a(r,e-10,l,c),void a(e+10,o,l,c);let d=function(e,t){for(let n of e)if(t(n))return n;return}(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<i&&Math.abs(e.to-o)<i&&!h.some((t=>e.from<t&&e.to>t))));if(!d){if(o<l.to&&t&&n&&t.visibleRanges.some((e=>e.from<=o&&e.to>=o))){let e=t.moveToLineBoundary(vv.cursor(o),!1,!0).head;e>r&&(o=e)}d=new Gx(r,o,this.gapSize(l,r,o,c))}s.push(d)};for(let l of this.viewportLines){if(l.length<o)continue;let e=Zx(l.from,l.to,this.stateDeco);if(e.total<o)continue;let t,i,s=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,o,a=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=s){let t=tk(e,s),r=((this.visibleBottom-this.visibleTop)/2+a)/l.height;n=t-r,o=t+r}else n=(this.visibleTop-l.top-a)/l.height,o=(this.visibleBottom-l.top+a)/l.height;t=ek(e,n),i=ek(e,o)}else{let n,o,a=e.total*this.heightOracle.charWidth,l=r*this.heightOracle.charWidth;if(null!=s){let t=tk(e,s),r=((this.pixelViewport.right-this.pixelViewport.left)/2+l)/a;n=t-r,o=t+r}else n=(this.pixelViewport.left-l)/a,o=(this.pixelViewport.right+l)/a;t=ek(e,n),i=ek(e,o)}t>l.from&&a(l.from,t,l,e),i<l.to&&a(i,l.to,l,e)}return s}gapSize(e,t,n,r){let i=tk(r,n)-tk(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){Gx.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=zb.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];py.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||ik(this.heightMap.lineAt(e,Lx.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return ik(this.heightMap.lineAt(this.scaler.fromDOM(e),Lx.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return ik(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Xx{constructor(e,t){this.from=e,this.to=t}}function Zx(e,t,n){let r=[],i=e,o=0;return py.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function ek(e,t){let{total:n,ranges:r}=e;if(t<=0)return r[0].from;if(t>=1)return r[r.length-1].to;let i=Math.floor(n*t);for(let o=0;;o++){let{from:e,to:t}=r[o],n=t-e;if(i<=n)return e+i;i-=n}}function tk(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}const nk={toDOM:e=>e,fromDOM:e=>e,scale:1};class rk{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((n=>{let{from:i,to:o}=n,s=t.lineAt(i,Lx.ByPos,e,0,0).top,a=t.lineAt(o,Lx.ByPos,e,0,0).bottom;return r+=a-s,{from:i,to:o,top:s,bottom:a,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let s of this.viewports)s.domTop=o+(s.top-i)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),i=s.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}function ik(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Dx(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map((e=>ik(e,t))):e._content)}const ok=wv.define({combine:e=>e.join(" ")}),sk=wv.define({combine:e=>e.indexOf(!0)>-1}),ak=Ny.newName(),lk=Ny.newName(),ck=Ny.newName(),uk={"&light":"."+lk,"&dark":"."+ck};function hk(e,t,n){return new Ny(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}const dk=hk("."+ak,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},uk);class fk{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=i||o?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;n&&(t.push(new Hw(n,r)),i==n&&o==r||t.push(new Hw(i,o)));return t}(e),n=new Fw(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?vv.single(n+t,r+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!Hy(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!Hy(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);this.newSel=vv.single(r,n)}}}function pk(e,t){let n,{newSel:r}=t,i=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:s}=t.bounds,a=i.from,l=null;(8===o||xb.android&&t.text.length<s-r)&&(a=i.to,l="end");let c=function(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){n-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o}else if(a<o){o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}(e.state.doc.sliceString(r,s,Bw),t.text,a-r,l);c&&(xb.chrome&&13==o&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==Bw+Bw&&c.toB--,n={from:r+c.from,to:r+c.toA,insert:Fg.of(t.text.slice(c.from,c.toB).split(Bw))})}else r&&(!e.hasFocus&&e.state.facet(cw)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,i.to))}:(xb.mac||xb.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=vv.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Fg.of([" "])}):xb.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(r&&(r=vv.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Fg.of([" "])}),n){let t=e.state;if(xb.ios&&e.inputState.flushIOSKey(e))return!0;if(xb.android&&(n.from==i.from&&n.to==i.to&&1==n.insert.length&&2==n.insert.lines&&tb(e.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&0==n.insert.length||8==o&&n.insert.length<n.to-n.from)&&tb(e.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&0==n.insert.length&&tb(e.contentDOM,"Delete",46)))return!0;let s,a=n.insert.toString();if(e.state.facet(nw).some((t=>t(e,n.from,n.to,a))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let r=i.from<n.from?t.sliceDoc(i.from,n.from):"",o=i.to>n.to?t.sliceDoc(n.to,i.to):"";s=t.replaceSelection(e.state.toText(r+n.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let o=t.changes(n),a=r&&r.main.to<=o.newLength?r.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let r=e.state.sliceDoc(n.from,n.to),l=Ww(e)||e.state.doc.lineAt(i.head),c=i.to-n.to,u=i.to-i.from;s=t.changeByRange((s=>{if(s.from==i.from&&s.to==i.to)return{changes:o,range:a||s.map(o)};let h=s.to-c,d=h-r.length;if(s.to-s.from!=u||e.state.sliceDoc(d,h)!=r||l&&s.to>=l.from&&s.from<=l.to)return{range:s};let f=t.changes({from:d,to:h,insert:n.insert}),p=s.to-i.to;return{changes:f,range:a?vv.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):s.map(f)}}))}else s={changes:o,selection:a&&t.selection.replaceRange(a)}}let l="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,l+=".compose",e.inputState.compositionFirstChange&&(l+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(s,{scrollIntoView:!0,userEvent:l}),!0}if(r&&!r.main.eq(i)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:r,scrollIntoView:t,userEvent:n}),!0}return!1}const mk={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},gk=xb.ie&&xb.ie_version<=11;class vk{constructor(e){this.view=e,this.active=!1,this.selectionRange=new Jy,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(xb.ie&&xb.ie_version<=11||xb.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),gk&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver((()=>this.view.requestMeasure())),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(cw)?n.root.activeElement!=this.dom:!$y(n.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)?t||(this.selectionChanged=!1):(xb.ie&&xb.ie_version<=11||xb.android&&xb.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Wy(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=xb.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);Wy(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]);return{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||zy(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=$y(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,Ky(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=Ky(n))}else{if(n==e)return!0;r=Vy(n),n=n.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,mk),gk&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),gk&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&tb(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&$y(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new fk(this.view,e,t,n))}flush(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,r=pk(this.view,t);return this.view.state==n&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=yk(t,e.previousSibling||e.target.previousSibling,-1),r=yk(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n,r;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),null===(r=this.resizeContent)||void 0===r||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function yk(e,t,n){for(;t;){let r=ob.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}class bk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new Yx(e.state||ly.create(e)),this.plugins=this.state.facet(hw).map((e=>new fw(e)));for(let t of this.plugins)t.update(this);this.observer=new vk(this),this.inputState=new ax(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new $w(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(){let e=1==arguments.length&&(arguments.length<=0?void 0:arguments[0])instanceof Yv?arguments.length<=0?void 0:arguments[0]:this.state.update(...arguments);this._dispatch(e,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,i=this.state;for(let h of e){if(h.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=h.state}if(this.destroyed)return void(this.viewState.state=i);let o=this.hasFocus,s=0,a=null;e.some((e=>e.annotation(Px)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Nx(i,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(ly.phrases)!=this.state.facet(ly.phrases))return this.setState(i);t=kw.create(this,i,e),t.flags|=s;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new sw(e.empty?e:vv.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(aw)&&(u=e.value)}this.viewState.update(t,u),this.bidiCache=kk.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(ww)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(ok)!=t.state.facet(ok)&&(this.viewState.mustMeasureContent=!0),(n||r||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let h of this.state.facet(tw))h(t);(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!pk(this,c)&&l.force&&tb(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Yx(e),this.plugins=e.facet(hw).map((e=>new fw(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new $w(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(hw),n=e.state.facet(hw);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new fw(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,{scrollAnchorPos:r,scrollAnchorHeight:i}=this.viewState;if(this.viewState.scrollAnchorHeight=-1,i<0||n.scrollTop!=this.viewState.scrollTop)if(n.scrollTop>n.scrollHeight-n.clientHeight-4)r=-1,i=this.viewState.heightMap.height;else{let e=this.viewState.lineBlockAtHeight(n.scrollTop);r=e.from,i=e.top}try{for(let e=0;;e++){this.updateState=1;let s=this.viewport,a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let l=[];4&a||([this.measureRequests,l]=[l,this.measureRequests]);let c=l.map((e=>{try{return e.read(this)}catch(t){return lw(this.state,t),xk}})),u=kw.create(this,this.state,[]),h=!1,d=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),h=this.docView.update(u));for(let e=0;e<l.length;e++)if(c[e]!=xk)try{let t=l[e];t.write&&t.write(c[e],this)}catch(o){lw(this.state,o)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,d=!0;else if(i>-1){let e=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-i;(e>1||e<-1)&&(n.scrollTop+=e,d=!0)}if(h&&this.docView.updateSelection(!0),this.viewport.from==s.from&&this.viewport.to==s.to&&!d&&0==this.measureRequests.length)break;i=-1}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let s of this.state.facet(tw))s(t)}get themeClasses(){return ak+" "+(this.state.facet(sk)?ck:lk)+" "+this.state.facet(ok)}updateAttrs(){let e=Sk(this,pw,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(cw)?"true":"false",class:"cm-content",style:`${xb.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Sk(this,mw,t);let n=this.observer.ignore((()=>{let n=Lb(this.contentDOM,this.contentAttrs,t),r=Lb(this.dom,this.editorAttrs,e);return n||r}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(bk.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(ww),Ny.mount(this.root,this.styleModules.concat(dk).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return sx(this,e,ix(this,e,t,n))}moveByGroup(e,t){return sx(this,e,ix(this,e,t,(t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==iy.Space&&(i=t),i==t}}(this,e.head,t))))}moveToLineBoundary(e,t){return function(e,t,n,r){let i=rx(e,t.head),o=r&&i.type==Fb.Text&&(e.lineWrapping||i.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(r==Sw.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return vv.cursor(s,n?-1:1)}return vv.cursor(n?i.to:i.from,n?-1:1)}(this,e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}moveVertically(e,t,n){return sx(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return vv.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let h=l.left+a,d=null!==r&&void 0!==r?r:e.defaultLineHeight>>1;for(let f=0;;f+=10){let n=s+(d+f)*o,r=tx(e,{x:h,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?r<i:r>i))return vv.cursor(r,t.assoc,void 0,a)}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(e,t)}posAtCoords(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.readMeasured(),tx(this,e,t)}coordsAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return Qy(n,i[Mw.find(i,e-r.from,-1,t)].dir==Sw.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(iw)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>wk)return Iw(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let n=Rw(e.text,t);return this.bidiCache.push(new kk(e.from,e.to,t,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||xb.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Zy(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return aw.of(new sw("number"==typeof e?vv.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return dw.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=Ny.newName(),r=[ok.of(n),ww.of(hk(`.${n}`,e))];return t&&t.dark&&r.push(sk.of(!0)),r}static baseTheme(e){return jv.lowest(ww.of(hk("."+ak,e,uk)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&ob.get(n)||ob.get(e);return(null===(t=null===r||void 0===r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}bk.styleModule=ww,bk.inputHandler=nw,bk.focusChangeEffect=rw,bk.perLineTextDirection=iw,bk.exceptionSink=ew,bk.updateListener=tw,bk.editable=cw,bk.mouseSelectionStyle=Zb,bk.dragMovesSelection=Xb,bk.clickAddsSelectionRange=Yb,bk.decorations=gw,bk.atomicRanges=vw,bk.scrollMargins=yw,bk.darkTheme=sk,bk.contentAttributes=mw,bk.editorAttributes=pw,bk.lineWrapping=bk.contentAttributes.of({class:"cm-lineWrapping"}),bk.announce=Jv.define();const wk=4096,xk={};class kk{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:Sw.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new kk(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}}function Sk(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&Ib(o,n)}return n}const Ck=xb.mac?"mac":xb.windows?"win":xb.linux?"linux":"key";function Ek(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const Tk=jv.default(bk.domEventHandlers({keydown:(e,t)=>Mk(_k(t.state),e,t,"editor")})),Ok=wv.define({enables:Tk}),Ak=new WeakMap;function _k(e){let t=e.facet(Ok),n=Ak.get(t);return n||Ak.set(t,n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ck,n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s)=>{var a,l;let c=n[e]||(n[e]=Object.create(null)),u=r.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let l=0;l<n.length-1;++l){const e=n[l];if(/^(cmd|meta|m)$/i.test(e))s=!0;else if(/^a(lt)?$/i.test(e))r=!0;else if(/^(c|ctrl|control)$/i.test(e))i=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<u.length;t++){let n=u.slice(0,t).join(" ");i(n,!0),c[n]||(c[n]={preventDefault:!0,run:[t=>{let r=Pk={view:t,prefix:n,scope:e};return setTimeout((()=>{Pk==r&&(Pk=null)}),Nk),!0}]})}let h=u.join(" ");i(h,!1);let d=c[h]||(c[h]={preventDefault:!1,run:(null===(l=null===(a=c._any)||void 0===a?void 0:a.run)||void 0===l?void 0:l.slice())||[]});o&&d.run.push(o),s&&(d.preventDefault=!0)};for(let s of e){let e=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,run:[]});for(let t in e)e[t].run.push(s.any)}let r=s[t]||s.key;if(r)for(let t of e)o(t,r,s.run,s.preventDefault),s.shift&&o(t,"Shift-"+r,s.shift,s.preventDefault)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}let Pk=null;const Nk=4e3;function Mk(e,t,n,r){let i=function(e){var t=!(Dy&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Ly&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?Iy:Ry)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=ov(rv(i,0))==i.length&&" "!=i,s="",a=!1;Pk&&Pk.view==n&&Pk.scope==r&&(s=Pk.prefix+" ",(a=ux.indexOf(t.keyCode)<0)&&(Pk=null));let l,c,u=new Set,h=e=>{if(e){for(let r of e.run)if(!u.has(r)&&(u.add(r),r(n,t)))return!0;e.preventDefault&&(a=!0)}return!1},d=e[r];if(d){if(h(d[s+Ek(i,t,!o)]))return!0;if(o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(xb.windows&&t.ctrlKey&&t.altKey)&&(l=Ry[t.keyCode])&&l!=i){if(h(d[s+Ek(l,t,!0)]))return!0;if(t.shiftKey&&(c=Iy[t.keyCode])!=i&&c!=l&&h(d[s+Ek(c,t,!1)]))return!0}else if(o&&t.shiftKey&&h(d[s+Ek(i,t,!0)]))return!0;if(h(d._any))return!0}return a}class jk{constructor(e,t,n,r,i){this.className=e,this.left=t,this.top=n,this.width=r,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let i=Rk(e);return[new jk(t,r.left-i.left,r.top-i.top,null,r.bottom-r.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let r=Math.max(n.from,e.viewport.from),i=Math.min(n.to,e.viewport.to),o=e.textDirection==Sw.LTR,s=e.contentDOM,a=s.getBoundingClientRect(),l=Rk(e),c=s.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=a.right-(u?parseInt(u.paddingRight):0),f=rx(e,r),p=rx(e,i),m=f.type==Fb.Text?f:null,g=p.type==Fb.Text?p:null;m&&(e.lineWrapping||f.widgetLineBreaks)&&(m=Ik(e,r,m));g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=Ik(e,i,g));if(m&&g&&m.from==g.from)return y(b(n.from,n.to,m));{let t=m?b(n.from,null,m):w(f,!1),r=g?b(null,n.to,g):w(p,!0),i=[];return(m||f).to<(g||p).from-(m&&g?1:0)||f.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?i.push(v(h,t.bottom,d,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==Fb.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),y(t).concat(i).concat(y(r))}function v(e,n,r,i){return new jk(t,e-l.left,n-l.top-.01,r-e,i-n+.01)}function y(e){let{top:t,bottom:n,horizontal:r}=e,i=[];for(let o=0;o<r.length;o+=2)i.push(v(r[o],t,r[o+1],n));return i}function b(t,n,r){let i=1e9,s=-1e9,a=[];function l(t,n,l,c,u){let f=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);f&&p&&(i=Math.min(f.top,p.top,i),s=Math.max(f.bottom,p.bottom,s),u==Sw.LTR?a.push(o&&n?h:f.left,o&&c?d:p.right):a.push(!o&&c?h:p.left,!o&&n?d:f.right))}let c=null!==t&&void 0!==t?t:r.from,u=null!==n&&void 0!==n?n:r.to;for(let o of e.visibleRanges)if(o.to>c&&o.from<u)for(let r=Math.max(o.from,c),i=Math.min(o.to,u);;){let o=e.state.doc.lineAt(r);for(let s of e.bidiSpans(o)){let e=s.from+o.from,a=s.to+o.from;if(e>=i)break;a>r&&l(Math.max(e,r),null==t&&e<=c,Math.min(a,i),null==n&&a>=u,s.dir)}if(r=o.to+1,r>=i)break}return 0==a.length&&l(c,null==t,u,null==n,e.textDirection),{top:i,bottom:s,horizontal:a}}function w(e,t){let n=a.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function Rk(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Sw.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function Ik(e,t,n){let r=vv.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:Fb.Text}}class Dk{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Lk)!=e.state.facet(Lk)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(Lk);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>!function(e,t){return e.constructor==t.constructor&&e.eq(t)}(e,this.drawn[t])))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Lk=wv.define();function Bk(e){return[dw.define((t=>new Dk(t,e))),Lk.of(e)]}const Fk=!xb.ios,zk=wv.define({combine:e=>cy(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Hk(e){return e.startState.facet(zk)!=e.state.facet(zk)}const $k=Bk({above:!0,markers(e){let{state:t}=e,n=t.facet(zk),r=[];for(let i of t.selection.ranges){let o=i==t.selection.main;if(i.empty?!o||Fk:n.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:vv.cursor(i.head,i.head>i.anchor?-1:1);for(let i of jk.forRange(e,t,n))r.push(i)}}return r},update(e,t){e.transactions.some((e=>e.selection))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=Hk(e);return n&&Uk(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){Uk(t.state,e)},class:"cm-cursorLayer"});function Uk(e,t){t.style.animationDuration=e.facet(zk).cursorBlinkRate+"ms"}const Wk=Bk({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:jk.forRange(e,"cm-selectionBackground",t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||Hk(e),class:"cm-selectionLayer"}),Vk={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Fk&&(Vk[".cm-line"].caretColor="transparent !important");const qk=jv.highest(bk.theme(Vk)),Kk=Jv.define({map:(e,t)=>null==e?null:t.mapPos(e)}),Qk=Ov.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Kk)?t.value:e),e))}),Gk=dw.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(Qk);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Qk)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(Qk),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(Qk)!=e&&this.view.dispatch({effects:Kk.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Jk(e,t,n,r,i){t.lastIndex=0;for(let o,s=e.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)i(a+o.index,o)}class Yk{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:i,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,i)=>r(i,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,r,i)=>{let o=n(e,t,r);o&&i(r,r+e[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,r,i)=>i(r,r+e[0].length,n)}this.boundary=i,this.maxLength=o}createDeco(e){let t=new my,n=t.add.bind(t);for(let{from:r,to:i}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))Jk(e.state.doc,this.regexp,r,i,((t,r)=>this.addMatch(r,e,t,n)));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,u=[],h=(e,t,n)=>u.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,e,c.index+n.from,h);else Jk(e.state.doc,this.regexp,a,l,((t,n)=>this.addMatch(n,e,t,h)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}const Xk=null!=/x/.unicode?"gu":"g",Zk=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",Xk),eS={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let tS=null;const nS=wv.define({combine(e){let t=cy(e,{render:null,specialChars:Zk,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==tS&&"undefined"!=typeof document&&document.body){let t=document.body.style;tS=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return tS||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Xk)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Xk)),t}});let rS=null;class iS extends Bb{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"\u2022":10==e?"\u2424":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(eS[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class oS extends Bb{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const sS=zb.line({class:"cm-activeLine"}),aS=dw.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){let i=e.lineBlockAt(r.head);i.from>t&&(n.push(sS.range(i.from)),t=i.from)}return zb.set(n)}},{decorations:e=>e.decorations});class lS extends Bb{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?Uy(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=Qy(t[0],"rtl"!=n.direction),i=parseInt(n.lineHeight);return r.bottom-r.top>1.5*i?{left:r.left,right:r.right,top:r.top,bottom:r.top+i}:r}ignoreEvent(){return!1}}const cS=2e3;function uS(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,o=i>cS?-1:i==r.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):Ty(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function hS(e,t){let n=uS(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get(t,i,o){let s=uS(e,t);if(!s)return r;let a=function(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>cS||n.off>cS||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=a&&o.push(vv.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=Oy(n.text,s,e.tabSize,!0);if(r<0)o.push(vv.cursor(n.to));else{let t=Oy(n.text,a,e.tabSize);o.push(vv.range(n.from+r,n.from+t))}}}return o}(e.state,n,s);return a.length?o?vv.create(a.concat(r.ranges)):vv.create(a):r}}:null}const dS={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},fS={style:"cursor: crosshair"};const pS="-10000px";class mS{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),r=n.filter((e=>e));if(n===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let i=[];for(let o=0;o<r.length;o++){let t=r[o],n=-1;if(t){for(let e=0;e<this.tooltips.length;e++){let r=this.tooltips[e];r&&r.create==t.create&&(n=e)}if(n<0)i[o]=this.createTooltipView(t);else{let t=i[o]=this.tooltipViews[n];t.update&&t.update(e)}}}for(let o of this.tooltipViews)i.indexOf(o)<0&&(o.dom.remove(),null===(t=o.destroy)||void 0===t||t.call(o));return this.input=n,this.tooltips=r,this.tooltipViews=i,!0}}function gS(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const vS=wv.define({combine:e=>{var t,n,r;return{position:xb.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||gS}}}),yS=new WeakMap,bS=dw.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(vS);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new mS(e,kS,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(vS);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=pS,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),null===(e=n.destroy)||void 0===e||e.call(n);null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((e=>{let{dom:t}=e;return t.getBoundingClientRect()})),space:this.view.state.facet(vS).tooltipSpace(this.view)}}writeMeasure(e){var t;let{editor:n,space:r}=e,i=[];for(let o=0;o<this.manager.tooltips.length;o++){let s=this.manager.tooltips[o],a=this.manager.tooltipViews[o],{dom:l}=a,c=e.pos[o],u=e.size[o];if(!c||c.bottom<=Math.max(n.top,r.top)||c.top>=Math.min(n.bottom,r.bottom)||c.right<Math.max(n.left,r.left)-.1||c.left>Math.min(n.right,r.right)+.1){l.style.top=pS;continue}let h=s.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,d=h?7:0,f=u.right-u.left,p=null!==(t=yS.get(a))&&void 0!==t?t:u.bottom-u.top,m=a.offset||xS,g=this.view.textDirection==Sw.LTR,v=u.width>r.right-r.left?g?r.left:r.right-u.width:g?Math.min(c.left-(h?14:0)+m.x,r.right-f):Math.max(r.left,c.left-f+(h?14:0)-m.x),y=!!s.above;!s.strictSide&&(y?c.top-(u.bottom-u.top)-m.y<r.top:c.bottom+(u.bottom-u.top)+m.y>r.bottom)&&y==r.bottom-c.bottom>c.top-r.top&&(y=!y);let b=(y?c.top-r.top:r.bottom-c.bottom)-d;if(b<p&&!1!==a.resize){if(b<this.view.defaultLineHeight){l.style.top=pS;continue}yS.set(a,p),l.style.height=(p=b)+"px"}else l.style.height&&(l.style.height="");let w=y?c.top-p-d-m.y:c.bottom+d+m.y,x=v+f;if(!0!==a.overlap)for(let e of i)e.left<x&&e.right>v&&e.top<w+p&&e.bottom>w&&(w=y?e.top-p-2-d:e.bottom+d+2);"absolute"==this.position?(l.style.top=w-e.parent.top+"px",l.style.left=v-e.parent.left+"px"):(l.style.top=w+"px",l.style.left=v+"px"),h&&(h.style.left=c.left+(g?m.x:-m.x)-(v+14-7)+"px"),!0!==a.overlap&&i.push({left:v,top:w,right:x,bottom:w+p}),l.classList.toggle("cm-tooltip-above",y),l.classList.toggle("cm-tooltip-below",!y),a.positioned&&a.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=pS}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),wS=bk.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),xS={x:0,y:0},kS=wv.define({enables:[bS,wS]}),SS=wv.define();class CS{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new mS(e,SS,(e=>this.createHostedView(e)))}static create(e){return new CS(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}}const ES=kS.compute([SS],(e=>{let t=e.facet(SS).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:CS.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class TS{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let n=this.view.coordsAtPos(t);if(null==n||e.y<n.top||e.y>n.bottom||e.x<n.left-this.view.defaultCharacterWidth||e.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),i=r&&r.dir==Sw.RTL?-1:1,o=this.source(this.view,t,e.x<n.left?-i:i);if(null===o||void 0===o?void 0:o.then){let e=this.pending={pos:t};o.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>lw(this.view.state,e,"hover tooltip")))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!OS(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,i=null!==(t=null===n||void 0===n?void 0:n.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,r,i,o){let s=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let u=0;u<c.length;u++){let e=c[u];if(Math.max(e.top-i,i-e.bottom,e.left-r,r-e.right)<=o)return!0}return!1}(this.view,r,i,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!OS(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function OS(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}function AS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Jv.define(),r=Ov.define({create:()=>null,update(e,r){if(e&&(t.hideOnChange&&(r.docChanged||r.selection)||t.hideOn&&t.hideOn(r,e)))return null;if(e&&r.docChanged){let t=r.changes.mapPos(e.pos,-1,av.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);n.pos=t,null!=e.end&&(n.end=r.changes.mapPos(e.end)),e=n}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(PS)&&(e=null);return e},provide:e=>SS.from(e)});return[r,dw.define((i=>new TS(i,e,r,n,t.hoverTime||300))),ES]}function _S(e,t){let n=e.plugin(bS);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const PS=Jv.define();const NS=wv.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function MS(e,t){let n=e.plugin(jS),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const jS=dw.fromClass(class{constructor(e){this.input=e.state.facet(DS),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(NS);this.top=new RS(e,!0,t.topContainer),this.bottom=new RS(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(NS);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new RS(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new RS(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(DS);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let r of this.panels)r.update&&r.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>bk.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class RS{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=IS(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=IS(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function IS(e){let t=e.nextSibling;return e.remove(),t}const DS=wv.define({enables:jS});class LS extends uy{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}LS.prototype.elementClass="",LS.prototype.toDOM=void 0,LS.prototype.mapMode=av.TrackBefore,LS.prototype.startSide=LS.prototype.endSide=-1,LS.prototype.point=!0;const BS=wv.define(),FS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>py.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},zS=wv.define();function HS(e){return[US(),zS.of(Object.assign(Object.assign({},FS),e))]}const $S=wv.define({combine:e=>e.some((e=>e))});function US(e){let t=[WS];return e&&!1===e.fixed&&t.push($S.of(!0)),t}const WS=dw.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(zS).map((t=>new QS(e,t)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet($S),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet($S)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=py.iter(this.view.state.facet(BS),this.view.viewport.from),r=[],i=this.gutters.map((e=>new KS(e,this.view.viewport,-this.view.documentPadding.top)));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let e=!0;for(let t of o.type)if(t.type==Fb.Text&&e){qS(n,r,t.from);for(let e of i)e.line(this.view,t,r);e=!1}else if(t.widget)for(let e of i)e.widget(this.view,t)}else if(o.type==Fb.Text){qS(n,r,o.from);for(let e of i)e.line(this.view,o,r)}for(let o of i)o.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(zS),n=e.state.facet(zS),r=e.docChanged||e.heightChanged||e.viewportChanged||!py.eq(e.startState.facet(BS),e.state.facet(BS),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let i of this.gutters)i.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new QS(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>bk.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==Sw.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))});function VS(e){return Array.isArray(e)?e:[e]}function qS(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class KS{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=py.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,i=t.top-this.height;if(this.i==r.elements.length){let o=new GS(e,t.height,i,n);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,t.height,i,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];qS(this.cursor,r,t.from),n.length&&(r=r.concat(n));let i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;(0!=r.length||o.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class QS{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let i,o=r.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let e=o.getBoundingClientRect();i=(e.top+e.bottom)/2}else i=r.clientY;let s=e.lineBlockAtHeight(i-e.documentTop);t.domEventHandlers[n](e,s,r)&&r.preventDefault()}));this.markers=VS(t.markers(e)),t.initialSpacer&&(this.spacer=new GS(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=VS(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!py.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class GS{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const JS=wv.define(),YS=wv.define({combine:e=>cy(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let e=n[r],i=t[r];n[r]=e?(t,n,r)=>e(t,n,r)||i(t,n,r):i}return n}})});class XS extends LS{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function ZS(e,t){return e.state.facet(YS).formatNumber(t,e.state)}const eC=zS.compute([YS],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(JS),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new XS(ZS(e,e.state.doc.lineAt(t.from).number)),widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(YS)!=e.state.facet(YS),initialSpacer:e=>new XS(ZS(e,tC(e.state.doc.lines))),updateSpacer(e,t){let n=ZS(t.view,tC(t.view.state.doc.lines));return n==e.number?e:new XS(n)},domEventHandlers:e.facet(YS).domEventHandlers})));function tC(e){let t=9;for(;t<e;)t=10*t+9;return t}const nC=new class extends LS{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},rC=BS.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(nC.range(i)))}return py.of(t)}));let iC=0;class oC{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=iC++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new oC([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new aC;return t=>t.modified.indexOf(e)>-1?t:aC.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let sC=0;class aC{constructor(){this.instances=[],this.id=sC++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let r=[],i=new oC(r,e,t);for(let s of t)s.instances.push(i);let o=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let s of e.set)if(!s.modified.length)for(let e of o)r.push(aC.get(s,e));return i}}function lC(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new uC(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return cC.add(t)}const cC=new fg;class uC{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function hC(e,t){let n=Object.create(null);for(let o of e)if(Array.isArray(o.tag))for(let e of o.tag)n[e.id]=o.class;else n[o.tag.id]=o.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function dC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,o=new fC(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}uC.empty=new uC([],2,null);class fC{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:s,to:a}=e;if(s>=n||a<=t)return;o.isTop&&(i=this.highlighters.filter((e=>!e.scope||e.scope(o))));let l=r,c=function(e){let t=e.type.prop(cC);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||uC.empty,u=function(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(r+=(r?" ":"")+u)),this.startSpan(Math.max(t,s),l),c.opaque)return;let h=e.tree&&e.tree.prop(fg.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),u=e.firstChild();for(let d=0,f=s;;d++){let p=d<h.overlay.length?h.overlay[d]:null,m=p?p.from+s:a,g=Math.max(t,f),v=Math.min(n,m);if(g<v&&u)for(;e.from<v&&(this.highlightRange(e,g,v,r,i),this.startSpan(Math.min(v,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!p||m>n)break;f=p.to+s,f>t&&(this.highlightRange(o.cursor(),Math.max(t,p.from+s),Math.min(n,f),"",c),this.startSpan(Math.min(n,f),l))}u&&e.parent()}else if(e.firstChild()){h&&(r="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const pC=oC.define,mC=pC(),gC=pC(),vC=pC(gC),yC=pC(gC),bC=pC(),wC=pC(bC),xC=pC(bC),kC=pC(),SC=pC(kC),CC=pC(),EC=pC(),TC=pC(),OC=pC(TC),AC=pC(),_C={comment:mC,lineComment:pC(mC),blockComment:pC(mC),docComment:pC(mC),name:gC,variableName:pC(gC),typeName:vC,tagName:pC(vC),propertyName:yC,attributeName:pC(yC),className:pC(gC),labelName:pC(gC),namespace:pC(gC),macroName:pC(gC),literal:bC,string:wC,docString:pC(wC),character:pC(wC),attributeValue:pC(wC),number:xC,integer:pC(xC),float:pC(xC),bool:pC(bC),regexp:pC(bC),escape:pC(bC),color:pC(bC),url:pC(bC),keyword:CC,self:pC(CC),null:pC(CC),atom:pC(CC),unit:pC(CC),modifier:pC(CC),operatorKeyword:pC(CC),controlKeyword:pC(CC),definitionKeyword:pC(CC),moduleKeyword:pC(CC),operator:EC,derefOperator:pC(EC),arithmeticOperator:pC(EC),logicOperator:pC(EC),bitwiseOperator:pC(EC),compareOperator:pC(EC),updateOperator:pC(EC),definitionOperator:pC(EC),typeOperator:pC(EC),controlOperator:pC(EC),punctuation:TC,separator:pC(TC),bracket:OC,angleBracket:pC(OC),squareBracket:pC(OC),paren:pC(OC),brace:pC(OC),content:kC,heading:SC,heading1:pC(SC),heading2:pC(SC),heading3:pC(SC),heading4:pC(SC),heading5:pC(SC),heading6:pC(SC),contentSeparator:pC(kC),list:pC(kC),quote:pC(kC),emphasis:pC(kC),strong:pC(kC),link:pC(kC),monospace:pC(kC),strikethrough:pC(kC),inserted:pC(),deleted:pC(),changed:pC(),invalid:pC(),meta:AC,documentMeta:pC(AC),annotation:pC(AC),processingInstruction:pC(AC),definition:oC.defineModifier(),constant:oC.defineModifier(),function:oC.defineModifier(),standard:oC.defineModifier(),local:oC.defineModifier(),special:oC.defineModifier()};hC([{tag:_C.link,class:"tok-link"},{tag:_C.heading,class:"tok-heading"},{tag:_C.emphasis,class:"tok-emphasis"},{tag:_C.strong,class:"tok-strong"},{tag:_C.keyword,class:"tok-keyword"},{tag:_C.atom,class:"tok-atom"},{tag:_C.bool,class:"tok-bool"},{tag:_C.url,class:"tok-url"},{tag:_C.labelName,class:"tok-labelName"},{tag:_C.inserted,class:"tok-inserted"},{tag:_C.deleted,class:"tok-deleted"},{tag:_C.literal,class:"tok-literal"},{tag:_C.string,class:"tok-string"},{tag:_C.number,class:"tok-number"},{tag:[_C.regexp,_C.escape,_C.special(_C.string)],class:"tok-string2"},{tag:_C.variableName,class:"tok-variableName"},{tag:_C.local(_C.variableName),class:"tok-variableName tok-local"},{tag:_C.definition(_C.variableName),class:"tok-variableName tok-definition"},{tag:_C.special(_C.variableName),class:"tok-variableName2"},{tag:_C.definition(_C.propertyName),class:"tok-propertyName tok-definition"},{tag:_C.typeName,class:"tok-typeName"},{tag:_C.namespace,class:"tok-namespace"},{tag:_C.className,class:"tok-className"},{tag:_C.macroName,class:"tok-macroName"},{tag:_C.propertyName,class:"tok-propertyName"},{tag:_C.operator,class:"tok-operator"},{tag:_C.comment,class:"tok-comment"},{tag:_C.meta,class:"tok-meta"},{tag:_C.invalid,class:"tok-invalid"},{tag:_C.punctuation,class:"tok-punctuation"}]);var PC;const NC=new fg;function MC(e){return wv.define({combine:e?t=>t.concat(e):void 0})}const jC=new fg;class RC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=r,ly.prototype.hasOwnProperty("tree")||Object.defineProperty(ly.prototype,"tree",{get(){return DC(this)}}),this.parser=t,this.extension=[VC.of(this),ly.languageData.of(((e,t,n)=>{let r=IC(e,t,n),i=r.type.prop(NC);if(!i)return[];let o=e.facet(i),s=r.type.prop(jC);if(s){let i=r.resolve(t-r.from,n);for(let t of s)if(t.test(i,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(o)}}return o}))].concat(n)}isActiveAt(e,t){return IC(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(NC)==this.data}findRegions(e){let t=e.facet(VC);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(NC)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(fg.mounted);if(i){if(i.tree.prop(NC)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof wg&&r(i,e.positions[n]+t)}};return r(DC(e),0),n}get allowsNesting(){return!0}}function IC(e,t,n){let r=e.facet(VC),i=DC(e).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(t,n,bg.ExcludeBuffers))o.type.isTop&&(i=o);return i}RC.setState=Jv.define();function DC(e){let t=e.field(RC.state,!1);return t?t.tree:wg.empty}class LC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let BC=null;class FC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new FC(e,t,[],wg.empty,0,n,[],null)}startParse(){return this.parser.startParse(new LC(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=wg.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(Dg.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Dg.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=BC;BC=this;try{return e()}finally{BC=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=zC(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=Dg.applyChanges(n,t),r=wg.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new FC(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:r}=this.skipped[n];t<e.to&&r>e.from&&(this.fragments=zC(this.fragments,t,r),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Lg{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to,s={parsedPos:i,advance(){let t=BC;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new wg(mg.none,[],[],o-i)},stoppedAt:null,stopAt(){}};return s}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return BC}}function zC(e,t,n){return Dg.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class HC{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new HC(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=FC.create(e.facet(VC).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new HC(n)}}RC.state=Ov.define({create:HC.init,update(e,t){for(let n of t.effects)if(n.is(RC.setState))return n.value;return t.startState.facet(VC)!=t.state.facet(VC)?HC.init(t.state):e.apply(t)}});let $C=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&($C=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const UC="undefined"!=typeof navigator&&(null===(PC=navigator.scheduling)||void 0===PC?void 0:PC.isInputPending)?()=>navigator.scheduling.isInputPending():null,WC=dw.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(RC.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(RC.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=$C(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(RC.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!UC?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>UC&&UC()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:RC.setState.of(new HC(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>lw(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),VC=wv.define({combine:e=>e.length?e[0]:null,enables:e=>[RC.state,WC,bk.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});const qC=wv.define(),KC=wv.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function QC(e){let t=e.facet(KC);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function GC(e,t){let n="",r=e.tabSize,i=e.facet(KC)[0];if("\t"==i){for(;t>=r;)n+="\t",t-=r;i=" "}for(let o=0;o<t;o++)n+=i;return n}function JC(e,t){e instanceof ly&&(e=new YC(e));for(let r of e.state.facet(qC)){let n=r(e,t);if(void 0!==n)return n}let n=DC(e.state);return n?function(e,t,n){return eE(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,n,t):null}class YC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state=e,this.options=t,this.unit=QC(e)}lineAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return Ty(e,this.state.tabSize,t)}lineIndent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const XC=new fg;function ZC(e){let t=e.type.prop(XC);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(fg.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>iE(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?tE:null}function eE(e,t,n){for(;e;e=e.parent){let r=ZC(e);if(r)return r(nE.create(n,t,e))}return null}function tE(){return 0}class nE extends YC{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new nE(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(rE(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?eE(e,this.pos,this.base):0}}function rE(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function iE(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==r)return null;if(!e.type.isSkipped)return e.from<s?n:null;a=e.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const oE=wv.define(),sE=new fg;function aE(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function lE(e,t,n){for(let r of e.facet(oE)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=DC(e);if(r.length<n)return null;let i=null;for(let o=r.resolveInner(n,1);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<t)break;let s=o.type.prop(sE);if(s&&(o.to<r.length-50||r.length==e.doc.length||!aE(o))){let r=s(o,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(i=r)}}return i}(e,t,n)}function cE(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const uE=Jv.define({map:cE}),hE=Jv.define({map:cE});function dE(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const fE=Ov.define({create:()=>zb.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(uE)&&!mE(e,n.value.from,n.value.to)?e=e.update({add:[kE.range(n.value.from,n.value.to)]}):n.is(hE)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>bk.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,((e,t)=>{n.push(e,t)})),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],i=e[n++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");t.push(kE.range(r,i))}return zb.set(t,!0)}});function pE(e,t,n){var r;let i=null;return null===(r=e.field(fE,!1))||void 0===r||r.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function mE(e,t,n){let r=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(r=!0)})),r}function gE(e,t){return e.field(fE,!1)?t:t.concat(Jv.appendConfig.of(xE()))}function vE(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return bk.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}const yE=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of dE(e)){let n=lE(e.state,t.from,t.to);if(n)return e.dispatch({effects:gE(e.state,[uE.of(n),vE(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(fE,!1))return!1;let t=[];for(let n of dE(e)){let r=pE(e.state,n.from,n.to);r&&t.push(hE.of(r),vE(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=lE(t,i.from,i.to);o&&n.push(uE.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:gE(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(fE,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(hE.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],bE={placeholderDOM:null,placeholderText:"\u2026"},wE=wv.define({combine:e=>cy(e,bE)});function xE(e){let t=[fE,EE];return e&&t.push(wE.of(e)),t}const kE=zb.replace({widget:new class extends Bb{toDOM(e){let{state:t}=e,n=t.facet(wE),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=pE(e.state,n.from,n.to);r&&e.dispatch({effects:hE.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),SE={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class CE extends LS{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const EE=bk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class TE{constructor(e,t){let n;function r(e){let t=Ny.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof RC?e=>e.prop(NC)==o.data:o?e=>e==o:void 0,this.style=hC(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:i}).style,this.module=n?new Ny(n):null,this.themeType=t.themeType}static define(e,t){return new TE(e,t||{})}}const OE=wv.define(),AE=wv.define({combine:e=>e.length?[e[0]]:null});function _E(e){let t=e.facet(OE);return t.length?t:e.facet(AE)}function PE(e,t){let n,r=[ME];return e instanceof TE&&(e.module&&r.push(bk.styleModule.of(e.module)),n=e.themeType),(null===t||void 0===t?void 0:t.fallback)?r.push(AE.of(e)):n?r.push(OE.computeN([bk.darkTheme],(t=>t.facet(bk.darkTheme)==("dark"==n)?[e]:[]))):r.push(OE.of(e)),r}class NE{constructor(e){this.markCache=Object.create(null),this.tree=DC(e.state),this.decorations=this.buildDeco(e,_E(e.state))}update(e){let t=DC(e.state),n=_E(e.state),r=n!=_E(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return zb.none;let n=new my;for(let{from:r,to:i}of e.visibleRanges)dC(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=zb.mark({class:r})))}),r,i);return n.finish()}}const ME=jv.high(dw.fromClass(NE,{decorations:e=>e.decorations})),jE=TE.define([{tag:_C.meta,color:"#404740"},{tag:_C.link,textDecoration:"underline"},{tag:_C.heading,textDecoration:"underline",fontWeight:"bold"},{tag:_C.emphasis,fontStyle:"italic"},{tag:_C.strong,fontWeight:"bold"},{tag:_C.strikethrough,textDecoration:"line-through"},{tag:_C.keyword,color:"#708"},{tag:[_C.atom,_C.bool,_C.url,_C.contentSeparator,_C.labelName],color:"#219"},{tag:[_C.literal,_C.inserted],color:"#164"},{tag:[_C.string,_C.deleted],color:"#a11"},{tag:[_C.regexp,_C.escape,_C.special(_C.string)],color:"#e40"},{tag:_C.definition(_C.variableName),color:"#00f"},{tag:_C.local(_C.variableName),color:"#30a"},{tag:[_C.typeName,_C.namespace],color:"#085"},{tag:_C.className,color:"#167"},{tag:[_C.special(_C.variableName),_C.macroName],color:"#256"},{tag:_C.definition(_C.propertyName),color:"#00c"},{tag:_C.comment,color:"#940"},{tag:_C.invalid,color:"#f00"}]),RE=bk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),IE=1e4,DE="()[]{}",LE=wv.define({combine:e=>cy(e,{afterCursor:!0,brackets:DE,maxScanDistance:IE,renderMatch:zE})}),BE=zb.mark({class:"cm-matchingBracket"}),FE=zb.mark({class:"cm-nonmatchingBracket"});function zE(e){let t=[],n=e.matched?BE:FE;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const HE=Ov.define({create:()=>zb.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(LE);for(let i of t.state.selection.ranges){if(!i.empty)continue;let e=qE(t.state,i.head,-1,r)||i.head>0&&qE(t.state,i.head-1,1,r)||r.afterCursor&&(qE(t.state,i.head,1,r)||i.head<t.state.doc.length&&qE(t.state,i.head+1,-1,r));e&&(n=n.concat(r.renderMatch(e,t.state)))}return zb.set(n,!0)},provide:e=>bk.decorations.from(e)}),$E=[HE,RE];const UE=new fg;function WE(e,t,n){let r=e.prop(t<0?fg.openedBy:fg.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function VE(e){let t=e.type.prop(UE);return t?t(e.node):e}function qE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.maxScanDistance||IE,o=r.brackets||DE,s=DC(e),a=s.resolveInner(t,n);for(let l=a;l;l=l.parent){let r=WE(l.type,n,o);if(r&&l.from<l.to){let i=VE(l);if(i&&(n>0?t>=i.from&&t<i.to:t>i.from&&t<=i.to))return KE(e,t,n,l,i,r,o)}}return function(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=o;){let e=u.value;n<0&&(d+=e.length);let o=t+d*n;for(let t=n>0?0:e.length-1,a=n>0?e.length:-1;t!=a;t+=n){let a=s.indexOf(e[t]);if(!(a<0||r.resolveInner(o+t,1).type!=i))if(a%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:o+t,to:o+t+1},matched:a>>1==l>>1};h--}}n>0&&(d+=e.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,s,a.type,i,o)}function KE(e,t,n,r,i,o,s){let a=r.parent,l={from:i.from,to:i.to},c=0,u=null===a||void 0===a?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do{if(n<0?u.to<=r.from:u.from>=r.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to){let e=VE(u);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(WE(u.type,n,s))c++;else if(WE(u.type,-n,s)){if(0==c){let e=VE(u);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function QE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);let o=i;for(let s=r;s<t;s++)9==e.charCodeAt(s)?o+=n-o%n:o++;return o}class GE{constructor(e,t,n,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t,n=this.string.charAt(this.pos);if(t="string"==typeof e?n==e:n&&(e instanceof RegExp?e.test(n):e(n)),t)return++this.pos,n}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=QE(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return null!==(e=this.overrideIndent)&&void 0!==e?e:QE(this.string,null,this.tabSize)}match(e,t,n){if("string"==typeof e){let r=e=>n?e.toLowerCase():e;return r(this.string.substr(this.pos,e.length))==r(e)?(!1!==t&&(this.pos+=e.length),!0):null}{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function JE(e){if("object"!=typeof e)return e;let t={};for(let n in e){let r=e[n];t[n]=r instanceof Array?r.slice():r}return t}const YE=new WeakMap;class XE extends RC{constructor(e){let t,n=MC(e.languageData),r={name:(i=e).name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||JE,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||rT};var i;super(n,new class extends Lg{createParse(e,n,r){return new tT(t,e,n,r)}},[qC.of(((e,t)=>this.getIndent(e,t)))],e.name),this.topNode=function(e){let t=mg.define({id:iT.length,name:"Document",props:[NC.add((()=>e))]});return iT.push(t),t}(n),t=this,this.streamParser=r,this.stateAfter=new fg({perNode:!0}),this.tokenTable=e.tokenTable?new lT(r.tokenTable):cT}static define(e){return new XE(e)}getIndent(e,t){let n,r=DC(e.state),i=r.resolve(t);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let{overrideIndentation:o}=e.options;o&&(n=YE.get(e.state),null!=n&&n<t-1e4&&(n=void 0));let s,a,l=ZE(this,r,0,i.from,null!==n&&void 0!==n?n:t);if(l?(a=l.state,s=l.pos+1):(a=this.streamParser.startState(e.unit),s=0),t-s>1e4)return null;for(;s<t;){let n=e.state.doc.lineAt(s),r=Math.min(t,n.to);if(n.length){let t=o?o(n.from):-1,i=new GE(n.text,e.state.tabSize,e.unit,t<0?void 0:t);for(;i.pos<r-n.from;)nT(this.streamParser.token,i,a)}else this.streamParser.blankLine(a,e.unit);if(r==t)break;s=n.to+1}let c=e.lineAt(t);return o&&null==n&&YE.set(e.state,c.from),this.streamParser.indent(a,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function ZE(e,t,n,r,i){let o=n>=r&&n+t.length<=i&&t.prop(e.stateAfter);if(o)return{state:e.streamParser.copyState(o),pos:n+t.length};for(let s=t.children.length-1;s>=0;s--){let o=t.children[s],a=n+t.positions[s],l=o instanceof wg&&a<i&&ZE(e,o,a,r,i);if(l)return l}return null}function eT(e,t,n,r,i){if(i&&n<=0&&r>=t.length)return t;i||t.type!=e.topNode||(i=!0);for(let o=t.children.length-1;o>=0;o--){let s,a=t.positions[o],l=t.children[o];if(a<r&&l instanceof wg){if(!(s=eT(e,l,n-a,r-a,i)))break;return i?new wg(t.type,t.children.slice(0,o).concat(s),t.positions.slice(0,o+1),a+s.length):s}}return null}class tT{constructor(e,t,n,r){this.lang=e,this.input=t,this.fragments=n,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let i=FC.get(),o=r[0].from,{state:s,tree:a}=function(e,t,n,r){for(let i of t){let t,r=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),s=r<=n&&o>n&&ZE(e,i.tree,0-i.offset,n,o);if(s&&(t=eT(e,i.tree,n+i.offset,s.pos+i.offset,!1)))return{state:s.state,tree:t}}return{state:e.streamParser.startState(r?QC(r):4),tree:wg.empty}}(e,n,o,null===i||void 0===i?void 0:i.state);this.state=s,this.parsedPos=this.chunkStart=o+a.length;for(let l=0;l<a.children.length;l++)this.chunks.push(a.children[l]),this.chunkPos.push(a.positions[l]);i&&this.parsedPos<i.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(QC(i.state)),i.skipUntilInView(this.parsedPos,i.viewport.from),this.parsedPos=i.viewport.from),this.moveRangeIndex()}advance(){let e=FC.get(),t=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)"\n"==t&&(t="");else{let e=t.indexOf("\n");e>-1&&(t=t.slice(0,e))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let r=this.rangeIndex;;){let e=this.ranges[r].to;if(e>=n)break;if(t=t.slice(0,e-(n-t.length)),r++,r==this.ranges.length)break;let i=this.ranges[r].from,o=this.lineAfter(i);t+=o,n=i+o.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let r=this.ranges[this.rangeIndex].to,i=e+t;if(n>0?r>i:r>=i)break;t+=this.ranges[++this.rangeIndex].from-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,r,i){if(this.ranges.length>1){t+=i=this.skipGapsTo(t,i,1);let e=this.chunk.length;n+=i=this.skipGapsTo(n,i,-1),r+=this.chunk.length-e}return this.chunk.push(e,t,n,r),i}parseLine(e){let{line:t,end:n}=this.nextLine(),r=0,{streamParser:i}=this.lang,o=new GE(t,e?e.state.tabSize:4,e?QC(e.state):2);if(o.eol())i.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let e=nT(i.token,o,this.state);if(e&&(r=this.emitToken(this.lang.tokenTable.resolve(e),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=wg.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:oT,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new wg(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new wg(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function nT(e,t,n){t.start=t.pos;for(let r=0;r<10;r++){let r=e(t,n);if(t.pos>t.start)return r}throw new Error("Stream parser failed to advance stream.")}const rT=Object.create(null),iT=[mg.none],oT=new gg(iT),sT=[],aT=Object.create(null);for(let[n,VM]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])aT[n]=hT(rT,VM);class lT{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),aT)}resolve(e){return e?this.table[e]||(this.table[e]=hT(this.extra,e)):0}}const cT=new lT(rT);function uT(e,t){sT.indexOf(e)>-1||(sT.push(e),console.warn(t))}function hT(e,t){let n=null;for(let o of t.split(".")){let t=e[o]||_C[o];t?"function"==typeof t?n?n=t(n):uT(o,`Modifier ${o} used at start of tag`):n?uT(o,`Tag ${o} used as modifier`):n=t:uT(o,`Unknown highlighting tag ${o}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),i=mg.define({id:iT.length,name:r,props:[lC({[r]:n})]});return iT.push(i),i.id}var dT=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i");const fT={name:"yaml",token:function(e,t){var n=e.peek(),r=t.escaped;if(t.escaped=!1,"#"==n&&(0==e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(e.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(t.literal&&e.indentation()>t.keyCol)return e.skipToEnd(),"string";if(t.literal&&(t.literal=!1),e.sol()){if(t.keyCol=0,t.pair=!1,t.pairStart=!1,e.match("---"))return"def";if(e.match("..."))return"def";if(e.match(/^\s*-\s+/))return"meta"}if(e.match(/^(\{|\}|\[|\])/))return"{"==n?t.inlinePairs++:"}"==n?t.inlinePairs--:"["==n?t.inlineList++:t.inlineList--,"meta";if(t.inlineList>0&&!r&&","==n)return e.next(),"meta";if(t.inlinePairs>0&&!r&&","==n)return t.keyCol=0,t.pair=!1,t.pairStart=!1,e.next(),"meta";if(t.pairStart){if(e.match(/^\s*(\||\>)\s*/))return t.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(0==t.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(t.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(e.match(dT))return"keyword"}return!t.pair&&e.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(t.pair=!0,t.keyCol=e.indentation(),"atom"):t.pair&&e.match(/^:\s*/)?(t.pairStart=!0,"meta"):(t.pairStart=!1,t.escaped="\\"==n,e.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}};function pT(e,t){return n=>{let{state:r,dispatch:i}=n;if(r.readOnly)return!1;let o=e(t,r);return!!o&&(i(r.update(o)),!0)}}const mT=pT(xT,0),gT=pT(wT,0),vT=pT(((e,t)=>wT(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return t}(t))),0);function yT(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const bT=50;function wT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,r=n.map((e=>yT(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>function(e,t,n,r){let i,o,{open:s,close:a}=t,l=e.sliceDoc(n-bT,n),c=e.sliceDoc(r,r+bT),u=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(c)[0].length,d=l.length-u;if(l.slice(d-s.length,d)==s&&c.slice(h,h+a.length)==a)return{open:{pos:n-u,margin:u&&1},close:{pos:r+h,margin:h&&1}};r-n<=2*bT?i=o=e.sliceDoc(n,r):(i=e.sliceDoc(n,n+bT),o=e.sliceDoc(r-bT,r));let f=/^\s*/.exec(i)[0].length,p=/\s*$/.exec(o)[0].length,m=o.length-p-a.length;return i.slice(f,f+s.length)==s&&o.slice(m,m+a.length)==a?{open:{pos:n+f+s.length,margin:/\s/.test(i.charAt(f+s.length))?1:0},close:{pos:r-p-a.length,margin:/\s/.test(o.charAt(m-1))?1:0}}:null}(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function xT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,r=[],i=-1;for(let{from:o,to:s}of n){let e=r.length,n=1e9,a=yT(t,o).line;if(a){for(let e=o;e<=s;){let l=t.doc.lineAt(e);if(l.from>i&&(o==s||s>l.from)){i=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,o=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<n&&(n=e),r.push({line:l,comment:o,token:a,indent:e,empty:t,single:!1})}e=l.to+1}if(n<1e9)for(let t=e;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=n);r.length==e+1&&(r[e].single=!0)}}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:i,indent:o,empty:s,single:a}of r)!a&&s||e.push({from:t.from+o,insert:i+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const kT=Kv.define(),ST=Kv.define(),CT=wv.define(),ET=wv.define({combine:e=>cy(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})});const TT=Ov.define({create:()=>$T.empty,update(e,t){let n=t.state.facet(ET),r=t.annotation(kT);if(r){let i=t.docChanged?vv.single(function(e){let t=0;return e.iterChangedRanges(((e,n)=>t=n)),t}(t.changes)):void 0,o=MT.fromTransaction(t,i),s=r.side,a=0==s?e.undone:e.done;return a=o?jT(a,a.length,n.minDepth,o):LT(a,t.startState.selection),new $T(0==s?r.rest:a,0==s?a:r.rest)}let i=t.annotation(ST);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(Yv.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=MT.fromTransaction(t),s=t.annotation(Yv.time),a=t.annotation(Yv.userEvent);return o?e=e.addChanges(o,s,a,n,t):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new $T(e.done.map(MT.fromJSON),e.undone.map(MT.fromJSON))});function OT(e,t){return function(n){let{state:r,dispatch:i}=n;if(!t&&r.readOnly)return!1;let o=r.field(TT,!1);if(!o)return!1;let s=o.pop(e,r,t);return!!s&&(i(s),!0)}}const AT=OT(0,!1),_T=OT(1,!1),PT=OT(0,!0),NT=OT(1,!0);class MT{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new MT(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new MT(e.changes&&cv.fromJSON(e.changes),[],e.mapped&&lv.fromJSON(e.mapped),e.startSelection&&vv.fromJSON(e.startSelection),e.selectionsAfter.map(vv.fromJSON))}static fromTransaction(e,t){let n=IT;for(let r of e.startState.facet(CT)){let t=r(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new MT(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,IT)}static selection(e){return new MT(void 0,IT,void 0,void 0,e)}}function jT(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function RT(e,t){return e.length?t.length?e.concat(t):e:t}const IT=[],DT=200;function LT(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-DT));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),jT(e,e.length-1,1e9,n.setSelAfter(r)))}return[MT.selection([t])]}function BT(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function FT(e,t){if(!e.length)return e;let n=e.length,r=IT;for(;n;){let i=zT(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[MT.selection(r)]:IT}function zT(e,t,n){let r=RT(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):IT,n);if(!e.changes)return MT.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new MT(i,Jv.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const HT=/^(input\.type|delete)($|\.)/;class $T{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new $T(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||HT.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(i,function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let s=0;s<n.length;){let e=n[s++],t=n[s++];o>=e&&i<=t&&(r=!0)}})),r}(s.changes,e.changes))||"input.type.compose"==n)?jT(o,o.length-1,r.minDepth,new MT(e.changes.compose(s.changes),RT(e.effects,s.effects),s.mapped,s.startSelection,IT)):jT(o,o.length,r.minDepth,e),new $T(o,IT,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:IT;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}(i[i.length-1],e)?this:new $T(LT(this.done,e),this.undone,t,n)}addMapping(e){return new $T(FT(this.done,e),FT(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:kT.of({side:e,rest:BT(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?IT:r.slice(0,r.length-1);return i.mapped&&(n=FT(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:kT.of({side:e,rest:n}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}$T.empty=new $T(IT,IT);const UT=[{key:"Mod-z",run:AT,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:_T,preventDefault:!0},{linux:"Ctrl-Shift-z",run:_T,preventDefault:!0},{key:"Mod-u",run:PT,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:NT,preventDefault:!0}];function WT(e,t){return vv.create(e.ranges.map(t),e.mainIndex)}function VT(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function qT(e,t){let{state:n,dispatch:r}=e,i=WT(n.selection,t);return!i.eq(n.selection)&&(r(VT(n,i)),!0)}function KT(e,t){return vv.cursor(t?e.to:e.from)}function QT(e,t){return qT(e,(n=>n.empty?e.moveByChar(n,t):KT(n,t)))}function GT(e){return e.textDirectionAt(e.state.selection.main.head)==Sw.LTR}const JT=e=>QT(e,!GT(e)),YT=e=>QT(e,GT(e));function XT(e,t){return qT(e,(n=>n.empty?e.moveByGroup(n,t):KT(n,t)))}function ZT(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function eO(e,t,n){let r,i,o=DC(e).resolveInner(t.head),s=n?fg.closedBy:fg.openedBy;for(let a=t.head;;){let t=n?o.childAfter(a):o.childBefore(a);if(!t)break;ZT(e,t,s)?o=t:a=n?t.to:t.from}return i=o.type.prop(s)&&(r=n?qE(e,o.from,1):qE(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,vv.cursor(i,n?-1:1)}function tO(e,t){return qT(e,(n=>{if(!n.empty)return KT(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const nO=e=>tO(e,!1),rO=e=>tO(e,!0);function iO(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,i=0;if(n){for(let t of e.state.facet(bk.scrollMargins)){let n=t(e);(null===n||void 0===n?void 0:n.top)&&(r=Math.max(null===n||void 0===n?void 0:n.top,r)),(null===n||void 0===n?void 0:n.bottom)&&(i=Math.max(null===n||void 0===n?void 0:n.bottom,i))}t=e.scrollDOM.clientHeight-r-i}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:i,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function oO(e,t){let n,r=iO(e),{state:i}=e,o=WT(i.selection,(n=>n.empty?e.moveVertically(n,t,r.height):KT(n,t)));if(o.eq(i.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(i.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+r.marginTop,l=s.bottom-r.marginBottom;t&&t.top>a&&t.bottom<l&&(n=bk.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(VT(i,o),{effects:n}),!0}const sO=e=>oO(e,!1),aO=e=>oO(e,!0);function lO(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=vv.cursor(r.from+n))}return i}function cO(e,t,n){let r=!1,i=WT(e.selection,(t=>{let i=qE(e,t.head,-1)||qE(e,t.head,1)||t.head>0&&qE(e,t.head-1,1)||t.head<e.doc.length&&qE(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?vv.range(t.anchor,o):vv.cursor(o)}));return!!r&&(t(VT(e,i)),!0)}function uO(e,t){let n=WT(e.state.selection,(e=>{let n=t(e);return vv.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(VT(e.state,n)),!0)}function hO(e,t){return uO(e,(n=>e.moveByChar(n,t)))}const dO=e=>hO(e,!GT(e)),fO=e=>hO(e,GT(e));function pO(e,t){return uO(e,(n=>e.moveByGroup(n,t)))}function mO(e,t){return uO(e,(n=>e.moveVertically(n,t)))}const gO=e=>mO(e,!1),vO=e=>mO(e,!0);function yO(e,t){return uO(e,(n=>e.moveVertically(n,t,iO(e).height)))}const bO=e=>yO(e,!1),wO=e=>yO(e,!0),xO=e=>{let{state:t,dispatch:n}=e;return n(VT(t,{anchor:0})),!0},kO=e=>{let{state:t,dispatch:n}=e;return n(VT(t,{anchor:t.doc.length})),!0},SO=e=>{let{state:t,dispatch:n}=e;return n(VT(t,{anchor:t.selection.main.anchor,head:0})),!0},CO=e=>{let{state:t,dispatch:n}=e;return n(VT(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0};function EO(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,i=r.changeByRange((r=>{let{from:i,to:o}=r;if(i==o){let r=t(i);r<i?(n="delete.backward",r=TO(e,r,!1)):r>i&&(n="delete.forward",r=TO(e,r,!0)),i=Math.min(i,r),o=Math.max(o,r)}else i=TO(e,i,!1),o=TO(e,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:vv.cursor(i)}}));return!i.changes.empty&&(e.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?bk.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function TO(e,t,n){if(e instanceof bk)for(let r of e.state.facet(bk.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const OO=(e,t)=>EO(e,(n=>{let r,i,{state:o}=e,s=o.doc.lineAt(n);if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let e=Ty(r,o.tabSize)%QC(o)||QC(o);for(let t=0;t<e&&" "==r[r.length-1-t];t++)n--;i=n}else i=Xg(s.text,n-s.from,t,t)+s.from,i==n&&s.number!=(t?o.doc.lines:1)&&(i+=t?1:-1);return i})),AO=e=>OO(e,!1),_O=e=>OO(e,!0),PO=(e,t)=>EO(e,(n=>{let r=n,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=Xg(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n||(e=c),r=a}return r})),NO=e=>PO(e,!1),MO=e=>EO(e,(t=>{let n=e.lineBlockAt(t).to;return t<n?n:Math.min(e.state.doc.length,t+1)}));function jO(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function RO(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let o of jO(e)){if(n?o.to==e.doc.length:0==o.from)continue;let t=e.doc.lineAt(n?o.to+1:o.from-1),s=t.length+1;if(n){r.push({from:o.to,to:t.to},{from:o.from,insert:t.text+e.lineBreak});for(let t of o.ranges)i.push(vv.range(Math.min(e.doc.length,t.anchor+s),Math.min(e.doc.length,t.head+s)))}else{r.push({from:t.from,to:o.from},{from:o.to,insert:e.lineBreak+t.text});for(let e of o.ranges)i.push(vv.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:vv.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function IO(e,t,n){if(e.readOnly)return!1;let r=[];for(let i of jO(e))n?r.push({from:i.from,insert:e.doc.slice(i.from,i.to)+e.lineBreak}):r.push({from:i.to,insert:e.lineBreak+e.doc.slice(i.from,i.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const DO=BO(!1),LO=BO(!0);function BO(e){return t=>{let{state:n,dispatch:r}=t;if(n.readOnly)return!1;let i=n.changeByRange((t=>{let{from:r,to:i}=t,o=n.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=DC(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(fg.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(n,r);e&&(r=i=(i<=o.to?o:n.doc.lineAt(i)).to);let a=new YC(n,{simulateBreak:r,simulateDoubleBreak:!!s}),l=JC(a,r);for(null==l&&(l=/^\s*/.exec(n.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",GC(n,l)];return s&&c.push(GC(n,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:Fg.of(c)},range:vv.cursor(r+1+c[1].length)}}));return r(n.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function FO(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let s=r.from;s<=r.to;){let o=e.doc.lineAt(s);o.number>n&&(r.empty||r.to>o.from)&&(t(o,i,r),n=o.number),s=o.to+1}let o=e.changes(i);return{changes:i,range:vv.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const zO=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(FO(t,((e,n)=>{n.push({from:e.from,insert:t.facet(KC)})})),{userEvent:"input.indent"})),!0)},HO=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(FO(t,((e,n)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let i=Ty(r,t.tabSize),o=0,s=GC(t,Math.max(0,i-QC(t)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:e.from+o,to:e.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0)},$O=[{key:"Ctrl-b",run:JT,shift:dO,preventDefault:!0},{key:"Ctrl-f",run:YT,shift:fO},{key:"Ctrl-p",run:nO,shift:gO},{key:"Ctrl-n",run:rO,shift:vO},{key:"Ctrl-a",run:e=>qT(e,(t=>vv.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>uO(e,(t=>vv.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>qT(e,(t=>vv.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>uO(e,(t=>vv.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:_O},{key:"Ctrl-h",run:AO},{key:"Ctrl-k",run:MO},{key:"Ctrl-Alt-h",run:NO},{key:"Ctrl-o",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let r=t.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Fg.of(["",""])},range:vv.cursor(e.from)})));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let r=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,r=t.doc.lineAt(n),i=n==r.from?n-1:Xg(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:Xg(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:t.doc.slice(n,o).append(t.doc.slice(i,n))},range:vv.cursor(o)}}));return!r.changes.empty&&(n(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:aO}],UO=[{key:"ArrowLeft",run:JT,shift:dO,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>XT(e,!GT(e)),shift:e=>pO(e,!GT(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>qT(e,(t=>lO(e,t,!GT(e)))),shift:e=>uO(e,(t=>lO(e,t,!GT(e)))),preventDefault:!0},{key:"ArrowRight",run:YT,shift:fO,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>XT(e,GT(e)),shift:e=>pO(e,GT(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>qT(e,(t=>lO(e,t,GT(e)))),shift:e=>uO(e,(t=>lO(e,t,GT(e)))),preventDefault:!0},{key:"ArrowUp",run:nO,shift:gO,preventDefault:!0},{mac:"Cmd-ArrowUp",run:xO,shift:SO},{mac:"Ctrl-ArrowUp",run:sO,shift:bO},{key:"ArrowDown",run:rO,shift:vO,preventDefault:!0},{mac:"Cmd-ArrowDown",run:kO,shift:CO},{mac:"Ctrl-ArrowDown",run:aO,shift:wO},{key:"PageUp",run:sO,shift:bO},{key:"PageDown",run:aO,shift:wO},{key:"Home",run:e=>qT(e,(t=>lO(e,t,!1))),shift:e=>uO(e,(t=>lO(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:xO,shift:SO},{key:"End",run:e=>qT(e,(t=>lO(e,t,!0))),shift:e=>uO(e,(t=>lO(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:kO,shift:CO},{key:"Enter",run:DO},{key:"Mod-a",run:e=>{let{state:t,dispatch:n}=e;return n(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0}},{key:"Backspace",run:AO,shift:AO},{key:"Delete",run:_O},{key:"Mod-Backspace",mac:"Alt-Backspace",run:NO},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>PO(e,!0)},{mac:"Mod-Backspace",run:e=>EO(e,(t=>{let n=e.lineBlockAt(t).from;return t>n?n:Math.max(0,t-1)}))},{mac:"Mod-Delete",run:MO}].concat($O.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),WO=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>qT(e,(t=>eO(e.state,t,!GT(e)))),shift:e=>uO(e,(t=>eO(e.state,t,!GT(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>qT(e,(t=>eO(e.state,t,GT(e)))),shift:e=>uO(e,(t=>eO(e.state,t,GT(e))))},{key:"Alt-ArrowUp",run:e=>{let{state:t,dispatch:n}=e;return RO(t,n,!1)}},{key:"Shift-Alt-ArrowUp",run:e=>{let{state:t,dispatch:n}=e;return IO(t,n,!1)}},{key:"Alt-ArrowDown",run:e=>{let{state:t,dispatch:n}=e;return RO(t,n,!0)}},{key:"Shift-Alt-ArrowDown",run:e=>{let{state:t,dispatch:n}=e;return IO(t,n,!0)}},{key:"Escape",run:e=>{let{state:t,dispatch:n}=e,r=t.selection,i=null;return r.ranges.length>1?i=vv.create([r.main]):r.main.empty||(i=vv.create([vv.cursor(r.main.head)])),!!i&&(n(VT(t,i)),!0)}},{key:"Mod-Enter",run:LO},{key:"Alt-l",mac:"Ctrl-l",run:e=>{let{state:t,dispatch:n}=e,r=jO(t).map((e=>{let{from:n,to:r}=e;return vv.range(n,Math.min(r+1,t.doc.length))}));return n(t.update({selection:vv.create(r),userEvent:"select"})),!0}},{key:"Mod-i",run:e=>{let{state:t,dispatch:n}=e,r=WT(t.selection,(e=>{var n;let r=DC(t).resolveInner(e.head,1);for(;!(r.from<e.from&&r.to>=e.to||r.to>e.to&&r.from<=e.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return vv.range(r.to,r.from)}));return n(VT(t,r)),!0},preventDefault:!0},{key:"Mod-[",run:HO},{key:"Mod-]",run:zO},{key:"Mod-Alt-\\",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let r=Object.create(null),i=new YC(t,{overrideIndentation:e=>{let t=r[e];return null==t?-1:t}}),o=FO(t,((e,n,o)=>{let s=JC(i,e.from);if(null==s)return;/\S/.test(e.text)||(s=0);let a=/^\s*/.exec(e.text)[0],l=GC(t,s);(a!=l||o.from<e.from+a.length)&&(r[e.from]=s,n.push({from:e.from,to:e.from+a.length,insert:l}))}));return o.changes.empty||n(t.update(o,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(jO(t).map((e=>{let{from:n,to:r}=e;return n>0?n--:r<t.doc.length&&r++,{from:n,to:r}}))),r=WT(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:e=>{let{state:t,dispatch:n}=e;return cO(t,n,!1)}},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=yT(e.state,n.from);return r.line?mT(e):!!r.block&&vT(e)}},{key:"Alt-A",run:gT}].concat(UO),VO={key:"Tab",run:zO,shift:HO};function qO(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)KO(e,arguments[t]);return e}function KO(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)KO(e,t[n])}}const QO="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class GO{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(QO(e)):QO,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return rv(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=iv(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=ov(e);let r=this.normalize(t);for(let i=0,o=n;;i++){let e=r.charCodeAt(i),s=this.match(e,o);if(s)return this.value=s,this;if(i==r.length-1)break;o==n&&i<t.length&&t.charCodeAt(i)==e&&o++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}"undefined"!=typeof Symbol&&(GO.prototype[Symbol.iterator]=function(){return this});const JO={from:-1,to:-1,match:/.*/.exec("")},YO="gm"+(null==/x/.unicode?"":"u");class XO{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length;if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=JO,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new tA(e,t,n,r,i);this.re=new RegExp(t,YO+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.test=null===n||void 0===n?void 0:n.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=nA(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=nA(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const ZO=new WeakMap;class eA{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=ZO.get(e);if(!r||r.from>=n||r.to<=t){let r=new eA(t,e.sliceString(t,n));return ZO.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),ZO.set(e,new eA(o,i)),new eA(t,i.slice(t-o,n-o))}}class tA{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=JO,this.matchPos=nA(e,r),this.re=new RegExp(t,YO+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.test=null===n||void 0===n?void 0:n.test,this.flat=eA.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=nA(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=eA.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function nA(e,t){if(t>=e.length)return t;let n,r=e.lineAt(t);for(;t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function rA(e){let t=qO("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));e.dispatch({effects:iA.of(!1),selection:vv.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),e.focus()}return{dom:qO("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:iA.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},qO("label",e.state.phrase("Go to line"),": ",t)," ",qO("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(XO.prototype[Symbol.iterator]=tA.prototype[Symbol.iterator]=function(){return this});const iA=Jv.define(),oA=Ov.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(iA)&&(e=n.value);return e},provide:e=>DS.from(e,(e=>e?rA:null))}),sA=bk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),aA={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},lA=wv.define({combine:e=>cy(e,aA,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});const cA=zb.mark({class:"cm-selectionMatch"}),uA=zb.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function hA(e,t,n,r){return(0==n||e(t.sliceDoc(n-1,n))!=iy.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=iy.Word)}const dA=dw.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(lA),{state:n}=e,r=n.selection;if(r.ranges.length>1)return zb.none;let i,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return zb.none;let e=n.wordAt(o.head);if(!e)return zb.none;s=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return zb.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!hA(s,n,o.from,o.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==iy.Word&&e(t.sliceDoc(r-1,r))==iy.Word}(s,n,o.from,o.to))return zb.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return zb.none}let a=[];for(let l of e.visibleRanges){let e=new GO(n.doc,i,l.from,l.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!s||hA(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(uA.range(r,i)):(r>=o.to||i<=o.from)&&a.push(cA.range(r,i)),a.length>t.maxMatches))return zb.none}}return zb.set(a)}},{decorations:e=>e.decorations}),fA=bk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const pA=wv.define({combine:e=>cy(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new UA(e),scrollToMatch:e=>bk.scrollIntoView(e)})});class mA{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,YO),!0}catch(PC){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new kA(this):new yA(this)}getCursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=e.doc?e:ly.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?bA(this,r,t,n):vA(this,r,t,n)}}class gA{constructor(e){this.spec=e}}function vA(e,t,n,r){return new GO(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=e.sliceString(o,Math.min(e.length,r+2))),(t(wA(i,n-o))!=iy.Word||t(xA(i,n-o))!=iy.Word)&&(t(xA(i,r-o))!=iy.Word||t(wA(i,r-o))!=iy.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class yA extends gA{constructor(e){super(e)}nextMatch(e,t,n){let r=vA(this.spec,e,n,e.doc.length).nextOverlapping();return r.done&&(r=vA(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=vA(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=vA(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=vA(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function bA(e,t,n,r){return new XO(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(i=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(i(wA(n.input,n.index))!=iy.Word||i(xA(n.input,n.index))!=iy.Word)&&(i(xA(n.input,n.index+n[0].length))!=iy.Word||i(wA(n.input,n.index+n[0].length))!=iy.Word)):void 0},n,r);var i}function wA(e,t){return e.slice(Xg(e,t,!1),t)}function xA(e,t){return e.slice(t,Xg(e,t))}class kA extends gA{nextMatch(e,t,n){let r=bA(this.spec,e,n,e.doc.length).next();return r.done&&(r=bA(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=bA(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t)))}matchAll(e,t){let n=bA(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=bA(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const SA=Jv.define(),CA=Jv.define(),EA=Ov.define({create:e=>new TA(LA(e).create(),null),update(e,t){for(let n of t.effects)n.is(SA)?e=new TA(n.value.create(),e.panel):n.is(CA)&&(e=new TA(e.query,n.value?DA:null));return e},provide:e=>DS.from(e,(e=>e.panel))});class TA{constructor(e,t){this.query=e,this.panel=t}}const OA=zb.mark({class:"cm-searchMatch"}),AA=zb.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_A=dw.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(EA))}update(e){let t=e.state.field(EA);(t!=e.startState.field(EA)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight(e){let{query:t,panel:n}=e;if(!n||!t.spec.valid)return zb.none;let{view:r}=this,i=new my;for(let o=0,s=r.visibleRanges,a=s.length;o<a;o++){let{from:e,to:n}=s[o];for(;o<a-1&&n>s[o+1].from-500;)n=s[++o].to;t.highlight(r.state,e,n,((e,t)=>{let n=r.state.selection.ranges.some((n=>n.from==e&&n.to==t));i.add(e,t,n?AA:OA)}))}return i.finish()}},{decorations:e=>e.decorations});function PA(e){return t=>{let n=t.state.field(EA,!1);return n&&n.query.spec.valid?e(t,n):zA(t)}}const NA=PA(((e,t)=>{let{query:n}=t,{to:r}=e.state.selection.main,i=n.nextMatch(e.state,r,r);if(!i)return!1;let o=vv.single(i.from,i.to),s=e.state.facet(pA);return e.dispatch({selection:o,effects:[KA(e,i),s.scrollToMatch(o.main,e)],userEvent:"select.search"}),FA(e),!0})),MA=PA(((e,t)=>{let{query:n}=t,{state:r}=e,{from:i}=r.selection.main,o=n.prevMatch(r,i,i);if(!o)return!1;let s=vv.single(o.from,o.to),a=e.state.facet(pA);return e.dispatch({selection:s,effects:[KA(e,o),a.scrollToMatch(s.main,e)],userEvent:"select.search"}),FA(e),!0})),jA=PA(((e,t)=>{let{query:n}=t,r=n.matchAll(e.state,1e3);return!(!r||!r.length)&&(e.dispatch({selection:vv.create(r.map((e=>vv.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),RA=PA(((e,t)=>{let{query:n}=t,{state:r}=e,{from:i,to:o}=r.selection.main;if(r.readOnly)return!1;let s=n.nextMatch(r,i,i);if(!s)return!1;let a,l,c=[],u=[];if(s.from==i&&s.to==o&&(l=r.toText(n.getReplacement(s)),c.push({from:s.from,to:s.to,insert:l}),s=n.nextMatch(r,s.from,s.to),u.push(bk.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(i).number)+"."))),s){let t=0==c.length||c[0].from>=s.to?0:s.to-s.from-l.length;a=vv.single(s.from-t,s.to-t),u.push(KA(e,s)),u.push(r.facet(pA).scrollToMatch(a.main,e))}return e.dispatch({changes:c,selection:a,effects:u,userEvent:"input.replace"}),!0})),IA=PA(((e,t)=>{let{query:n}=t;if(e.state.readOnly)return!1;let r=n.matchAll(e.state,1e9).map((e=>{let{from:t,to:r}=e;return{from:t,to:r,insert:n.getReplacement(e)}}));if(!r.length)return!1;let i=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:bk.announce.of(i),userEvent:"input.replace.all"}),!0}));function DA(e){return e.state.facet(pA).createPanel(e)}function LA(e,t){var n,r,i,o,s;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(pA);return new mA({search:(null!==(n=null===t||void 0===t?void 0:t.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null===t||void 0===t?void 0:t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=null===t||void 0===t?void 0:t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=null===t||void 0===t?void 0:t.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(s=null===t||void 0===t?void 0:t.wholeWord)&&void 0!==s?s:c.wholeWord})}function BA(e){let t=MS(e,DA);return t&&t.dom.querySelector("[main-field]")}function FA(e){let t=BA(e);t&&t==e.root.activeElement&&t.select()}const zA=e=>{let t=e.state.field(EA,!1);if(t&&t.panel){let n=BA(e);if(n&&n!=e.root.activeElement){let r=LA(e.state,t.query.spec);r.valid&&e.dispatch({effects:SA.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[CA.of(!0),t?SA.of(LA(e.state,t.query.spec)):Jv.appendConfig.of(GA)]});return!0},HA=e=>{let t=e.state.field(EA,!1);if(!t||!t.panel)return!1;let n=MS(e,DA);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:CA.of(!1)}),!0},$A=[{key:"Mod-f",run:zA,scope:"editor search-panel"},{key:"F3",run:NA,shift:MA,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:NA,shift:MA,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:HA,scope:"editor search-panel"},{key:"Mod-Shift-l",run:e=>{let{state:t,dispatch:n}=e,r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:i,to:o}=r.main,s=[],a=0;for(let l=new GO(t.doc,t.sliceDoc(i,o));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(a=s.length),s.push(vv.range(l.value.from,l.value.to))}return n(t.update({selection:vv.create(s,a),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:e=>{let t=MS(e,rA);if(!t){let n=[iA.of(!0)];null==e.state.field(oA,!1)&&n.push(Jv.appendConfig.of([oA,sA])),e.dispatch({effects:n}),t=MS(e,rA)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:e=>{let{state:t,dispatch:n}=e,{ranges:r}=t.selection;if(r.some((e=>e.from===e.to)))return(e=>{let{state:t,dispatch:n}=e,{selection:r}=t,i=vv.create(r.ranges.map((e=>t.wordAt(e.head)||vv.cursor(e.head))),r.mainIndex);return!i.eq(r)&&(n(t.update({selection:i})),!0)})({state:t,dispatch:n});let i=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=i)))return!1;let o=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let s=!1,a=new GO(e.doc,t,r[r.length-1].to);;){if(a.next(),!a.done){if(s&&r.some((e=>e.from==a.value.from)))continue;if(o){let t=e.wordAt(a.value.from);if(!t||t.from!=a.value.from||t.to!=a.value.to)continue}return a.value}if(s)return null;a=new GO(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),s=!0}}(t,i);return!!o&&(n(t.update({selection:t.selection.addRange(vv.range(o.from,o.to),!1),effects:bk.scrollIntoView(o.to)})),!0)},preventDefault:!0}];class UA{constructor(e){this.view=e;let t=this.query=e.state.field(EA).query.spec;function n(e,t,n){return qO("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=qO("input",{value:t.search,placeholder:WA(e,"Find"),"aria-label":WA(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=qO("input",{value:t.replace,placeholder:WA(e,"Replace"),"aria-label":WA(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=qO("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=qO("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=qO("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=qO("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>NA(e)),[WA(e,"next")]),n("prev",(()=>MA(e)),[WA(e,"previous")]),n("select",(()=>jA(e)),[WA(e,"all")]),qO("label",null,[this.caseField,WA(e,"match case")]),qO("label",null,[this.reField,WA(e,"regexp")]),qO("label",null,[this.wordField,WA(e,"by word")]),...e.state.readOnly?[]:[qO("br"),this.replaceField,n("replace",(()=>RA(e)),[WA(e,"replace")]),n("replaceAll",(()=>IA(e)),[WA(e,"replace all")])],qO("button",{name:"close",onclick:()=>HA(e),"aria-label":WA(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new mA({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:SA.of(e)}))}keydown(e){var t,n,r;t=this.view,n=e,r="search-panel",Mk(_k(t.state),n,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?MA:NA)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),RA(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(SA)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(pA).top}}function WA(e,t){return e.state.phrase(t)}const VA=30,qA=/[\s\.,:;?!]/;function KA(e,t){let{from:n,to:r}=t,i=e.state.doc.lineAt(n),o=e.state.doc.lineAt(r).to,s=Math.max(i.from,n-VA),a=Math.min(o,r+VA),l=e.state.sliceDoc(s,a);if(s!=i.from)for(let c=0;c<VA;c++)if(!qA.test(l[c+1])&&qA.test(l[c])){l=l.slice(c);break}if(a!=o)for(let c=l.length-1;c>l.length-VA;c--)if(!qA.test(l[c-1])&&qA.test(l[c])){l=l.slice(0,c);break}return bk.announce.of(`${e.state.phrase("current match")}. ${l} ${e.state.phrase("on line")} ${i.number}.`)}const QA=bk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),GA=[EA,jv.lowest(_A),QA];class JA{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=DC(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(t_(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function YA(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function XA(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let e=1;e<i.length;e++)n[i[e]]=!0}let r=YA(t)+YA(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}class ZA{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function e_(e){return e.selection.main.from}function t_(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const n_=Kv.define();const r_=new WeakMap;function i_(e){if(!Array.isArray(e))return e;let t=r_.get(e);return t||r_.set(e,t=XA(e)),t}const o_=Jv.define(),s_=Jv.define();class a_{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=rv(e,t),r=ov(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(rv(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[-100];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=rv(e,0),i=ov(r),o=i==e.length?0:-100;if(r==t[0]);else{if(r!=n[0])return null;o+=-200}return[o,0,i]}let s=e.indexOf(this.pattern);if(0==s)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=rv(e,i);o!=t[l]&&o!=n[l]||(r[l++]=i),i+=ov(o)}if(l<a)return null}let c=0,u=0,h=!1,d=0,f=-1,p=-1,m=/[a-z]/.test(e),g=!0;for(let v=0,y=Math.min(e.length,200),b=0;v<y&&u<a;){let r=rv(e,v);s<0&&(c<a&&r==t[c]&&(i[c++]=v),d<a&&(r==t[d]||r==n[d]?(0==d&&(f=v),p=v+1,d++):d=0));let l,y=r<255?r>=48&&r<=57||r>=97&&r<=122?2:r>=65&&r<=90?1:0:(l=iv(r))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!v||1==y&&m||0==b&&0!=y)&&(t[u]==r||n[u]==r&&(h=!0)?o[u++]=v:o.length&&(g=!1)),b=y,v+=ov(r)}return u==a&&0==o[0]&&g?this.result((h?-200:0)-100,o,e):d==a&&0==f?[-200-e.length+(p==e.length?0:-100),0,p]:s>-1?[-700-e.length,s,s+this.pattern.length]:d==a?[-900-e.length,f,p]:u==a?this.result((h?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[e-n.length],i=1;for(let o of t){let e=o+(this.astral?ov(rv(n,o)):1);i>1&&r[i-1]==o?r[i-1]=e:(r[i++]=o,r[i++]=e)}return r}}const l_=wv.define({combine:e=>cy(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:u_,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>c_(e(n),t(n)),optionClass:(e,t)=>n=>c_(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function c_(e,t){return e?t?e+" "+t:e:t}function u_(e,t,n,r,i){let o,s,a=e.textDirection==Sw.RTL,l=a,c=!1,u="top",h=t.left-i.left,d=i.right-t.right,f=r.right-r.left,p=r.bottom-r.top;if(l&&h<Math.min(f,d)?l=!1:!l&&d<Math.min(f,h)&&(l=!0),f<=(l?h:d))o=Math.max(i.top,Math.min(n.top,i.bottom-p))-t.top,s=Math.min(400,l?h:d);else{c=!0,s=Math.min(400,(a?t.right:i.right-t.left)-30);let e=i.bottom-t.bottom;e>=p||e>t.top?o=n.bottom-t.top:(u="bottom",o=t.bottom-n.top)}return{style:`${u}: ${o}px; max-width: ${s}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":l?"left":"right")}}function h_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return n=>{let r=n.state.field(A_,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(l_).interactionDelay)return!1;let i,o=1;"page"==t&&(i=_S(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+o*(e?1:-1):e?0:s-1;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),n.dispatch({effects:O_.of(a)}),!0}}class d_{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const f_=dw.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(A_).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(A_);if(!e.selectionSet&&!e.docChanged&&e.startState.field(A_)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!S_(e)));for(let i=0;i<this.running.length;i++){let t=this.running[i];if(n||t.updates.length+e.transactions.length>50&&Date.now()-t.time>1e3){for(let e of t.context.abortListeners)try{e()}catch(r){lw(this.view.state,r)}t.context.abortListeners=null,this.running.splice(i--,1)}else t.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let i of e.transactions)"input"==S_(i)?this.composing=2:2==this.composing&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(A_);for(let n of t.active)1!=n.state||this.running.some((e=>e.active.source==n.source))||this.startQuery(n)}startQuery(e){let{state:t}=this.view,n=e_(t),r=new JA(t,n,e.explicitPos==n),i=new d_(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:s_.of(null)}),lw(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(l_);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new E_(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:e_(i.updates.length?i.updates[0].startState:this.view.state));for(let e of i.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let o=this.view.state.field(A_).active.find((e=>e.source==i.active.source));if(o&&1==o.state)if(null==i.done){let e=new C_(i.active.source,0);for(let t of i.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:T_.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(A_,!1);if(t&&t.tooltip&&this.view.state.facet(l_).closeOnBlur){let n=t.open&&_S(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||this.view.dispatch({effects:s_.of(null)})}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:o_.of(!1)})),20),this.composing=0}}});function p_(e,t){const n=t.completion.apply||t.completion.label;let r=e.state.field(A_).active.find((e=>e.source==t.source));return r instanceof E_&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},function(e,t,n,r){let{main:i}=e.selection,o=n-i.from,s=r-i.from;return Object.assign(Object.assign({},e.changeByRange((a=>a!=i&&n!=r&&e.sliceDoc(a.from+o,a.from+s)!=e.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+o,to:r==i.from?a.to:a.from+s,insert:t},range:vv.cursor(a.from+o+t.length)}))),{userEvent:"input.complete"})}(e.state,n,r.from,r.to)),{annotations:n_.of(t.completion)})):n(e,t.completion,r.from,r.to),!0)}function m_(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class g_{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:i}=n.open,o=e.state.facet(l_);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=e,o=0;for(let s=1;s<n.length;){let e=n[s++],t=n[s++];e>o&&r.appendChild(document.createTextNode(i.slice(o,e)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(e,t))),a.className="cm-completionMatchedText",o=t}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=m_(r.length,i,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(t=>{for(let n,i=t.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return p_(e,r[+n[1]]),void t.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(l_).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:s_.of(null)})})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}mount(){this.updateSel()}update(e){var t,n,r;let i=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),i!=o&&(this.updateSel(),(null===(t=i.open)||void 0===t?void 0:t.disabled)!=(null===(n=o.open)||void 0===n?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(r=i.open)||void 0===r?void 0:r.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=m_(t.options.length,t.selected,this.view.state.facet(l_).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"===typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>lw(this.view.state,e,"completion info"))):this.addInfoPane(i)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)"LI"==n.nodeName&&n.id?r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):r--;return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return r.top>Math.min(i.bottom,t.bottom)-10||r.bottom<Math.max(i.top,t.top)+10?null:this.view.state.facet(l_).positionInfo(this.view,t,r,n,i)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let i=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:a}=e[o],{section:l}=s;if(l){let e="string"==typeof l?l:l.name;if(e!=i&&(o>n.from||0==n.from))if(i=e,"string"!=typeof l&&l.header)r.appendChild(l.header(l));else{r.appendChild(document.createElement("completion-section")).textContent=e}}const c=r.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(s);u&&(c.className=u);for(let e of this.optionContent){let t=e(s,this.view.state,a);t&&c.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function v_(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class y_{constructor(e,t,n,r,i,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new y_(this.options,x_(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,i){let o=function(e,t){let n=[],r=null,i=e=>{n.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some((t=>t.name==e))||r.push("string"==typeof t?{name:e}:t)}};for(let l of e)if(l.hasResult())if(!1===l.result.filter){let e=l.result.getMatch;for(let t of l.result.options){let r=[1e9-n.length];if(e)for(let n of e(t))r.push(n);i(new ZA(t,l.source,r,r[0]))}}else{let e,n=new a_(t.sliceDoc(l.from,l.to));for(let t of l.result.options)(e=n.match(t.label))&&i(new ZA(t,l.source,e,e[0]+(t.boost||0)))}if(r){let e=Object.create(null),t=0,i=(e,t)=>{var n,r;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(r=t.rank)&&void 0!==r?r:1e9)||(e.name<t.name?-1:1)};for(let n of r.sort(i))t-=1e5,e[n.name]=t;for(let r of n){let{section:t}=r.completion;t&&(r.score+=e["string"==typeof t?t:t.name])}}let o=[],s=null,a=t.facet(l_).compareCompletions;for(let l of n.sort(((e,t)=>t.score-e.score||a(e.completion,t.completion))))!s||s.label!=l.completion.label||s.detail!=l.completion.detail||null!=s.type&&null!=l.completion.type&&s.type!=l.completion.type||s.apply!=l.completion.apply?o.push(l):v_(l.completion)>v_(s)&&(o[o.length-1]=l),s=l.completion;return o}(e,t);if(!o.length)return r&&e.some((e=>1==e.state))?new y_(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let s=t.facet(l_).selectOnOpen?0:-1;if(r&&r.selected!=s&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){s=t;break}}return new y_(o,x_(n,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(a=A_,e=>new g_(e,a)),above:i.aboveCursor},r?r.timestamp:Date.now(),s,!1);var a}map(e){return new y_(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class b_{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new b_(k_,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(l_),r=(n.override||t.languageDataAt("autocomplete",e_(t)).map(i_)).map((t=>(this.active.find((e=>e.source==t))||new C_(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let i=this.open;i&&e.docChanged&&(i=i.map(e.changes)),e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)?i=y_.build(r,t,this.id,i,n):i&&i.disabled&&!r.some((e=>1==e.state))&&(i=null),!i&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new C_(e.source,0):e)));for(let o of e.effects)o.is(O_)&&(i=i&&i.setSelected(o.value,this.id));return r==this.active&&i==this.open?this:new b_(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:w_}}const w_={"aria-autocomplete":"list"};function x_(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const k_=[];function S_(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class C_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=S_(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new C_(r.source,0));for(let i of e.effects)if(i.is(o_))r=new C_(r.source,1,i.value?e_(e.state):-1);else if(i.is(s_))r=new C_(r.source,0);else if(i.is(T_))for(let e of i.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new C_(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(e_(e.startState))?new C_(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new C_(this.source,this.state,e.mapPos(this.explicitPos))}}class E_ extends C_{constructor(e,t,n,r,i){super(e,2,t),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(e,t,n){var r;let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=e_(e.state);if((this.explicitPos<0?s<=i:s<this.from)||s>o||"delete"==t&&e_(e.startState)==this.from)return new C_(this.source,"input"==t&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):t_(e,!0).test(i)}(this.result.validFor,e.state,i,o)?new E_(this.source,l,this.result,i,o):this.result.update&&(a=this.result.update(this.result,i,o,new JA(e.state,s,l>=0)))?new E_(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:e_(e.state)):new C_(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new C_(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new E_(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const T_=Jv.define({map:(e,t)=>e.map((e=>e.map(t)))}),O_=Jv.define(),A_=Ov.define({create:()=>b_.start(),update:(e,t)=>e.update(t),provide:e=>[kS.from(e,(e=>e.tooltip)),bk.contentAttributes.from(e,(e=>e.attrs))]}),__=bk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});const P_={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},N_=Jv.define({map(e,t){let n=t.mapPos(e,-1,av.TrackAfter);return null==n?void 0:n}}),M_=new class extends uy{};M_.startSide=1,M_.endSide=-1;const j_=Ov.define({create:()=>py.empty,update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(e=py.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(N_)&&(e=e.update({add:[M_.range(n.value,n.value+1)]}));return e}});const R_="()[]{}<>";function I_(e){for(let t=0;t<R_.length;t+=2)if(R_.charCodeAt(t)==e)return R_.charAt(t+1);return iv(e<128?e:e+1)}function D_(e,t){return e.languageDataAt("closeBrackets",t)[0]||P_}const L_="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),B_=bk.inputHandler.of(((e,t,n,r)=>{if((L_?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==ov(rv(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=D_(e,e.selection.main.head),r=n.brackets||P_.brackets;for(let i of r){let o=I_(rv(i,0));if(t==i)return o==i?W_(e,i,r.indexOf(i+i+i)>-1,n):$_(e,i,o,n.before||P_.before);if(t==o&&z_(e,e.selection.main.from))return U_(e,i,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)})),F_=[{key:"Backspace",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let r=D_(t,t.selection.main.head).brackets||P_.brackets,i=null,o=t.changeByRange((e=>{if(e.empty){let n=function(e,t){let n=e.sliceString(t-2,t);return ov(rv(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let i of r)if(i==n&&H_(t.doc,e.head)==I_(rv(i,0)))return{changes:{from:e.head-i.length,to:e.head+i.length},range:vv.cursor(e.head-i.length)}}return{range:i=e}}));return i||n(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function z_(e,t){let n=!1;return e.field(j_).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function H_(e,t){let n=e.sliceString(t,t+2);return n.slice(0,ov(rv(n,0)))}function $_(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:N_.of(o.to+t.length),range:vv.range(o.anchor+t.length,o.head+t.length)};let s=H_(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:N_.of(o.head+t.length),range:vv.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function U_(e,t,n){let r=null,i=e.changeByRange((t=>t.empty&&H_(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:vv.cursor(t.head+n.length)}:r={range:t}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function W_(e,t,n,r){let i=r.stringPrefixes||P_.stringPrefixes,o=null,s=e.changeByRange((r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:N_.of(r.to+t.length),range:vv.range(r.anchor+t.length,r.head+t.length)};let s,a=r.head,l=H_(e.doc,a);if(l==t){if(V_(e,a))return{changes:{insert:t+t,from:a},effects:N_.of(a+t.length),range:vv.cursor(a+t.length)};if(z_(e,a)){let r=n&&e.sliceDoc(a,a+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+r.length,insert:r},range:vv.cursor(a+r.length)}}}else{if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(s=q_(e,a-2*t.length,i))>-1&&V_(e,s))return{changes:{insert:t+t+t+t,from:a},effects:N_.of(a+t.length),range:vv.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=iy.Word&&q_(e,a,i)>-1&&!function(e,t,n,r){let i=DC(e).resolveInner(t,-1),o=r.reduce(((e,t)=>Math.max(e,t.length)),0);for(let s=0;s<5;s++){let s=e.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=s.indexOf(n);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let t=i.firstChild;for(;t&&t.from==i.from&&t.to-t.from>n.length+a;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=i.to==t&&i.parent;if(!l)break;i=l}return!1}(e,a,t,i))return{changes:{insert:t+t,from:a},effects:N_.of(a+t.length),range:vv.cursor(a+t.length)}}return{range:o=r}}));return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function V_(e,t){let n=DC(e).resolveInner(t+1);return n.parent&&n.from==t}function q_(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=iy.Word)return t;for(let i of n){let n=t-i.length;if(e.sliceDoc(n,t)==i&&r(e.sliceDoc(n-1,n))!=iy.Word)return n}return-1}const K_=[{key:"Ctrl-Space",run:e=>!!e.state.field(A_,!1)&&(e.dispatch({effects:o_.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(A_,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:s_.of(null)}),!0)}},{key:"ArrowDown",run:h_(!0)},{key:"ArrowUp",run:h_(!1)},{key:"PageDown",run:h_(!0,"page")},{key:"PageUp",run:h_(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(A_,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(l_).interactionDelay)&&(!!t.open.disabled||p_(e,t.open.options[t.open.selected]))}}],Q_=jv.highest(Ok.computeN([l_],(e=>e.facet(l_).defaultKeymap?[K_]:[])));class G_{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class J_{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,i=n.facet(cP).markerFilter;i&&(r=i(r));let o=zb.set(r.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?zb.widget({widget:new dP(e),diagnostic:e}).range(e.from):zb.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new J_(o,t,Y_(o))}}function Y_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=null;return e.between(n,1e9,((e,n,i)=>{let{spec:o}=i;if(!t||o.diagnostic==t)return r=new G_(e,n,o.diagnostic),!1})),r}function X_(e,t){let n=e.startState.doc.lineAt(t.pos);return!(!e.effects.some((e=>e.is(eP)))&&!e.changes.touchesRange(n.from,n.to))}function Z_(e,t){return e.field(rP,!1)?t:t.concat(Jv.appendConfig.of(yP))}const eP=Jv.define(),tP=Jv.define(),nP=Jv.define(),rP=Ov.define({create:()=>new J_(zb.none,null,null),update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),r=null;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=Y_(n,e.selected.diagnostic,i)||Y_(n,null,i)}e=new J_(n,e.panel,r)}for(let n of t.effects)n.is(eP)?e=J_.init(n.value,e.panel,t.state):n.is(tP)?e=new J_(e.diagnostics,n.value?pP.open:null,e.selected):n.is(nP)&&(e=new J_(e.diagnostics,e.panel,n.value));return e},provide:e=>[DS.from(e,(e=>e.panel)),bk.decorations.from(e,(e=>e.diagnostics))]});const iP=zb.mark({class:"cm-lintRange cm-lintRange-active"});function oP(e,t,n){let{diagnostics:r}=e.state.field(rP),i=[],o=2e8,s=0;r.between(t-(n<0?1:0),t+(n>0?1:0),((e,r,a)=>{let{spec:l}=a;t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(l.diagnostic),o=Math.min(e,o),s=Math.max(r,s))}));let a=e.state.facet(cP).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:sP(e,i)})}:null}function sP(e,t){return qO("ul",{class:"cm-tooltip-lint"},t.map((t=>hP(e,t,!1))))}const aP=e=>{let t=e.state.field(rP,!1);return!(!t||!t.panel)&&(e.dispatch({effects:tP.of(!1)}),!0)},lP=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(rP,!1);t&&t.panel||e.dispatch({effects:Z_(e.state,[tP.of(!0)])});let n=MS(e,pP.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(rP,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],cP=wv.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},cy(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))});function uP(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function hP(e,t,n){var r;let i=n?uP(t.actions):[];return qO("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},qO("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=!1,s=r=>{if(r.preventDefault(),o)return;o=!0;let i=Y_(e.state.field(rP).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:a}=n,l=i[r]?a.indexOf(i[r]):-1,c=l<0?a:[a.slice(0,l),qO("u",a.slice(l,l+1)),a.slice(l+1)];return qO("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${i[r]})"`}.`},c)})),t.source&&qO("div",{class:"cm-diagnosticSource"},t.source))}class dP extends Bb{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return qO("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class fP{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=hP(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class pP{constructor(e){this.view=e,this.items=[];this.list=qO("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)aP(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=uP(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=Y_(this.view.state.field(rP).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=qO("div",{class:"cm-panel-lint"},this.list,qO("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>aP(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(rP).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(rP),n=0,r=!1,i=null;for(e.between(0,this.view.state.doc.length,((e,o,s)=>{let a,{spec:l}=s,c=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==l.diagnostic){c=t;break}c<0?(a=new fP(this.view,l.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[c],c>n&&(this.items.splice(n,c-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new fP(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:e=>{let{sel:t,panel:n}=e;t.top<n.top?this.list.scrollTop-=n.top-t.top:t.bottom>n.bottom&&(this.list.scrollTop+=t.bottom-n.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=Y_(this.view.state.field(rP).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:nP.of(t)})}static open(e){return new pP(e)}}function mP(e){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"'}>${encodeURIComponent(e)}</svg>')`}function gP(e){return mP(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const vP=bk.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:gP("#d11")},".cm-lintRange-warning":{backgroundImage:gP("orange")},".cm-lintRange-info":{backgroundImage:gP("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const yP=[rP,bk.decorations.compute([rP],(e=>{let{selected:t,panel:n}=e.field(rP);return t&&n&&t.from!=t.to?zb.set([iP.range(t.from,t.to)]):zb.none})),AS(oP,{hideOn:X_}),vP];var bP=function(e){void 0===e&&(e={});var t=[];!1!==e.closeBracketsKeymap&&(t=t.concat(F_)),!1!==e.defaultKeymap&&(t=t.concat(WO)),!1!==e.searchKeymap&&(t=t.concat($A)),!1!==e.historyKeymap&&(t=t.concat(UT)),!1!==e.foldKeymap&&(t=t.concat(yE)),!1!==e.completionKeymap&&(t=t.concat(K_)),!1!==e.lintKeymap&&(t=t.concat(lP));var n=[];return!1!==e.lineNumbers&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[YS.of(e),US(),eC]}()),!1!==e.highlightActiveLineGutter&&n.push(rC),!1!==e.highlightSpecialChars&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[nS.of(e),rS||(rS=dw.fromClass(class{constructor(e){this.view=e,this.decorations=zb.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(nS)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Yk({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=rv(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=Ty(e.text,t,r-e.from);return zb.replace({widget:new oS((t-o%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=zb.replace({widget:new iS(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(nS);e.startState.facet(nS)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[TT,ET.of(e),bk.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?AT:"historyRedo"==e.inputType?_T:null;return!!n&&(e.preventDefault(),n(t))}})]}()),!1!==e.foldGutter&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(Object.assign({},SE),e),n=new CE(t,!0),r=new CE(t,!1),i=dw.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(VC)!=e.state.facet(VC)||e.startState.field(fE,!1)!=e.state.field(fE,!1)||DC(e.startState)!=DC(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new my;for(let i of e.viewportLineBlocks){let o=pE(e.state,i.from,i.to)?r:lE(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[i,HS({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||py.empty},initialSpacer:()=>new CE(t,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(e,t,n)=>{if(o.click&&o.click(e,t,n))return!0;let r=pE(e.state,t.from,t.to);if(r)return e.dispatch({effects:hE.of(r)}),!0;let i=lE(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:uE.of(i)}),!0)}})}),xE()]}()),!1!==e.drawSelection&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[zk.of(e),$k,Wk,qk,ow.of(!0)]}()),!1!==e.dropCursor&&n.push([Qk,Gk]),!1!==e.allowMultipleSelections&&n.push(ly.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&n.push(ly.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:c}of s.selection.ranges){let e=s.doc.lineAt(c);if(e.from==a)continue;a=e.from;let t=JC(s,e.from);if(null==t)continue;let n=/^\s*/.exec(e.text)[0],r=GC(s,t);n!=r&&l.push({from:e.from,to:e.from+n.length,insert:r})}return l.length?[e,{changes:l,sequential:!0}]:e}))),!1!==e.syntaxHighlighting&&n.push(PE(jE,{fallback:!0})),!1!==e.bracketMatching&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[LE.of(e),$E]}()),!1!==e.closeBrackets&&n.push([B_,j_]),!1!==e.autocompletion&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[A_,l_.of(e),f_,Q_,__]}()),!1!==e.rectangularSelection&&n.push(function(e){let t=(null===e||void 0===e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return bk.mouseSelectionStyle.of(((e,n)=>t(n)?hS(e,n):null))}()),!1!==e.crosshairCursor&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=dS[e.key||"Alt"],r=dw.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[r,bk.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?fS:null}))]}()),!1!==e.highlightActiveLine&&n.push(aS),!1!==e.highlightSelectionMatches&&n.push(function(e){let t=[fA,dA];return e&&t.push(lA.of(e)),t}()),e.tabSize&&"number"===typeof e.tabSize&&n.push(KC.of(" ".repeat(e.tabSize))),n.concat([Ok.of(t.flat())]).filter(Boolean)};const wP="#e5c07b",xP="#e06c75",kP="#56b6c2",SP="#ffffff",CP="#abb2bf",EP="#7d8799",TP="#61afef",OP="#98c379",AP="#d19a66",_P="#c678dd",PP="#21252b",NP="#2c313a",MP="#282c34",jP="#353a42",RP="#3E4451",IP="#528bff",DP=[bk.theme({"&":{color:CP,backgroundColor:MP},".cm-content":{caretColor:IP},".cm-cursor, .cm-dropCursor":{borderLeftColor:IP},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:RP},".cm-panels":{backgroundColor:PP,color:CP},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:MP,color:EP,border:"none"},".cm-activeLineGutter":{backgroundColor:NP},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:jP},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:jP,borderBottomColor:jP},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:NP,color:CP}}},{dark:!0}),PE(TE.define([{tag:_C.keyword,color:_P},{tag:[_C.name,_C.deleted,_C.character,_C.propertyName,_C.macroName],color:xP},{tag:[_C.function(_C.variableName),_C.labelName],color:TP},{tag:[_C.color,_C.constant(_C.name),_C.standard(_C.name)],color:AP},{tag:[_C.definition(_C.name),_C.separator],color:CP},{tag:[_C.typeName,_C.className,_C.number,_C.changed,_C.annotation,_C.modifier,_C.self,_C.namespace],color:wP},{tag:[_C.operator,_C.operatorKeyword,_C.url,_C.escape,_C.regexp,_C.link,_C.special(_C.string)],color:kP},{tag:[_C.meta,_C.comment],color:EP},{tag:_C.strong,fontWeight:"bold"},{tag:_C.emphasis,fontStyle:"italic"},{tag:_C.strikethrough,textDecoration:"line-through"},{tag:_C.link,color:EP,textDecoration:"underline"},{tag:_C.heading,fontWeight:"bold",color:xP},{tag:[_C.atom,_C.bool,_C.special(_C.variableName)],color:AP},{tag:[_C.processingInstruction,_C.string,_C.inserted],color:OP},{tag:_C.invalid,color:SP}]))];var LP=bk.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),BP=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:r=!1,theme:i="light",placeholder:o="",basicSetup:s=!0}=e,a=[];switch(t&&a.unshift(Ok.of([VO])),s&&("boolean"===typeof s?a.unshift(bP()):a.unshift(bP(s))),o&&a.unshift(function(e){return dw.fromClass(class{constructor(t){this.view=t,this.placeholder=zb.set([zb.widget({widget:new lS(e),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?zb.none:this.placeholder}},{decorations:e=>e.decorations})}(o)),i){case"light":a.push(LP);break;case"dark":a.push(DP);break;case"none":break;default:a.push(i)}return!1===n&&a.push(bk.editable.of(!1)),r&&a.push(ly.readOnly.of(!0)),[...a]},FP=Kv.define();var zP=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],HP=(0,we.forwardRef)(((e,t)=>{var{className:n,value:r="",selection:i,extensions:o=[],onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:c,autoFocus:u,theme:h="light",height:d,minHeight:f,maxHeight:p,width:m,minWidth:g,maxWidth:v,basicSetup:y,placeholder:b,indentWithTab:w,editable:x,readOnly:k,root:S,initialState:C}=e,E=Wo(e,zP),T=(0,we.useRef)(null),{state:O,view:A,container:_}=function(e){var{value:t,selection:n,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:s,extensions:a=[],autoFocus:l,theme:c="light",height:u="",minHeight:h="",maxHeight:d="",placeholder:f="",width:p="",minWidth:m="",maxWidth:g="",editable:v=!0,readOnly:y=!1,indentWithTab:b=!0,basicSetup:w=!0,root:x,initialState:k}=e,[S,C]=(0,we.useState)(),[E,T]=(0,we.useState)(),[O,A]=(0,we.useState)(),_=bk.theme({"&":{height:u,minHeight:h,maxHeight:d,width:p,minWidth:m,maxWidth:g}}),P=bk.updateListener.of((e=>{if(e.docChanged&&"function"===typeof r&&!e.transactions.some((e=>e.annotation(FP)))){var t=e.state.doc.toString();r(t,e)}i&&i((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to))),selectedText:e.state.selection.ranges.some((e=>!e.empty))}))(e))})),N=[P,_,...BP({theme:c,editable:v,readOnly:y,placeholder:f,indentWithTab:b,basicSetup:w})];return s&&"function"===typeof s&&N.push(bk.updateListener.of(s)),N=N.concat(a),(0,we.useEffect)((()=>{if(S&&!O){var e={doc:t,selection:n,extensions:N},r=k?ly.fromJSON(k.json,e,k.fields):ly.create(e);if(A(r),!E){var i=new bk({state:r,parent:S,root:x});T(i),o&&o(i,r)}}return()=>{E&&(A(void 0),T(void 0))}}),[S,O]),(0,we.useEffect)((()=>C(e.container)),[e.container]),(0,we.useEffect)((()=>()=>{E&&(E.destroy(),T(void 0))}),[E]),(0,we.useEffect)((()=>{l&&E&&E.focus()}),[l,E]),(0,we.useEffect)((()=>{E&&E.dispatch({effects:Jv.reconfigure.of(N)})}),[c,a,u,h,d,p,m,g,f,v,y,b,w,r,s]),(0,we.useEffect)((()=>{if(void 0!==t){var e=E?E.state.doc.toString():"";E&&t!==e&&E.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[FP.of(!0)]})}}),[t,E]),{state:O,setState:A,view:E,setView:T,container:S,setContainer:C}}({container:T.current,root:S,value:r,autoFocus:u,theme:h,height:d,minHeight:f,maxHeight:p,width:m,minWidth:g,maxWidth:v,basicSetup:y,placeholder:b,indentWithTab:w,editable:x,readOnly:k,selection:i,onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:c,extensions:o,initialState:C});if((0,we.useImperativeHandle)(t,(()=>({editor:T.current,state:O,view:A})),[T,_,O,A]),"string"!==typeof r)throw new Error("value must be typeof string but got "+typeof r);var P="string"===typeof h?"cm-theme-"+h:"cm-theme";return(0,Ps.jsx)("div",Ee({ref:T,className:P+(n?" "+n:"")},E))}));HP.displayName="CodeMirror";const $P=HP,UP=e=>{let{onChange:t=()=>{},theme:n,value:r,...i}=e;return console.log(jE),(0,Ps.jsx)($P,{extensions:[XE.define(fT),PE(jE,{fallback:!0})],onChange:e=>t(e),theme:n,value:r,...i})},WP=e=>{let{children:t,hidden:n,...r}=e;return n?null:(0,Ps.jsx)("div",{...r,children:t})},VP=()=>" ",qP=e=>{let{children:t,icon:n,loading:r,mediaQuery:i,...o}=e;return(0,Dm.useMediaQuery)({query:i})?(0,Ps.jsx)(Vp,{content:t,trigger:(0,Ps.jsx)($a,{icon:!0,...o,children:(0,Ps.jsx)(fo,{loading:r,name:n})})}):(0,Ps.jsxs)($a,{...o,children:[(0,Ps.jsx)(fo,{loading:r,name:n}),t]})},KP=e=>{let{children:t,color:n,disabled:r,hidden:i,icon:o,loading:s,mediaQuery:a,onChange:l,onClick:c,options:u}=e;return i?null:(0,Ps.jsxs)($a.Group,{color:n,children:[(0,Ps.jsx)(qP,{disabled:r,icon:o,loading:s,mediaQuery:a,onClick:c,children:t}),(0,Ps.jsx)(ah,{className:"button icon",disabled:r,onChange:l,options:u,trigger:null})]})};function QP(e){var t=e.children,n=e.className,r=e.clearing,i=e.content,o=e.fitted,s=e.hidden,a=e.horizontal,l=e.inverted,c=e.section,u=e.vertical,h=Oe("ui",Pe(r,"clearing"),Pe(o,"fitted"),Pe(s,"hidden"),Pe(a,"horizontal"),Pe(l,"inverted"),Pe(c,"section"),Pe(u,"vertical"),"divider",n),d=Le(QP,e),f=Be(QP,e);return we.createElement(f,Ee({},d,{className:h}),hi(t)?i:t)}QP.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],QP.propTypes={};const GP=QP,JP=async e=>{let{direction:t,setState:n}=e;n(!0),await(e=>{let{direction:t}=e;return ge.delete(`/transfers/${t}s/all/completed`)})({direction:t}),n(!1),Pm.success(`Completed ${t}s cleared!`)},YP=()=>{const[e,t]=(0,we.useState)(!1),[n,r]=(0,we.useState)(!1);return(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)(_s,{as:"h3",className:"transfer-header",children:"Transfer Data"}),(0,Ps.jsx)(GP,{}),(0,Ps.jsx)("p",{children:(0,Ps.jsx)("span",{children:"The Uploads and Downloads pages can become unresponsive if too many transfers are displayed. If you're having trouble with either page, try using the buttons below to remove completed transfers."})}),(0,Ps.jsxs)($a,{loading:e,onClick:()=>JP({direction:"upload",setState:t}),primary:!0,children:[(0,Ps.jsx)(fo,{name:"trash alternate"}),"Clear All Completed Uploads"]}),(0,Ps.jsxs)($a,{loading:n,onClick:()=>JP({direction:"download",setState:r}),primary:!0,children:[(0,Ps.jsx)(fo,{name:"trash alternate"}),"Clear All Completed Downloads"]})]})};var XP=function(e){return{active:!1,type:"ellipsisItem",value:e}},ZP=function(e){return{active:!1,type:"prevItem",value:Math.max(1,e-1)}},eN=function(e,t){return{active:!1,type:"nextItem",value:Math.min(e+1,t)}},tN=function(e){return{active:!1,type:"lastItem",value:e}},nN=Math.ceil,rN=Math.max;const iN=function(e,t,n,r){for(var i=-1,o=rN(nN((t-e)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=e,e+=n;return s};const oN=function(e){return function(t,n,r){return r&&"number"!=typeof r&&ci(t,n,r)&&(n=r=void 0),t=Co(t),void 0===n?(n=t,t=0):n=Co(n),r=void 0===r?t<n?1:-1:Co(r),iN(t,n,r,e)}};const sN=oN();var aN=function(e,t,n){var r=t-1;return(r!==e+1?XP:n)(r)},lN=function(e,t,n){var r=e+1;return(r!==t-1?XP:n)(r)},cN=function(e,t,n){return $s(sN(e,t+1),n)};const uN=function(e){var t,n={activePage:+(t=e).activePage,boundaryRange:+t.boundaryRange,hideEllipsis:!!t.hideEllipsis,siblingRange:+t.siblingRange,totalPages:+t.totalPages},r=n.activePage,i=n.totalPages,o=function(e){return function(t){return{active:e===t,type:"pageItem",value:t}}}(r),s=function(e){var t=e.boundaryRange;return 1+(e.hideEllipsis?0:2)+2*e.siblingRange+2*t>=e.totalPages}(n)?cN(1,i,o):function(e,t){var n=e.activePage,r=e.boundaryRange,i=e.hideEllipsis,o=e.siblingRange,s=e.totalPages,a=i?0:1,l=r,c=cN(1,l,t),u=s+1-r,h=cN(u,s,t),d=Math.min(Math.max(n-o,l+a+1),u-a-2*o-1),f=d+2*o,p=cN(d,f,t);return[].concat(c,[!i&&aN(l,d,t)],p,[!i&&lN(f,u,t)],h).filter(Boolean)}(n,o);return[{active:!1,type:"firstItem",value:1},ZP(r)].concat(s,[eN(r,i),tN(i)])};var hN=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){Ri(t.props,"onClick",e,t.props)},t.handleKeyDown=function(e){Ri(t.props,"onKeyDown",e,t.props),Xo().getCode(e)===Xo().Enter&&Ri(t.props,"onClick",e,t.props)},t.handleOverrides=function(){return{onClick:t.handleClick,onKeyDown:t.handleKeyDown}},t}return bi(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.type,r=this.props.disabled||"ellipsisItem"===n;return Ed.create(this.props,{defaultProps:{active:t,"aria-current":t,"aria-disabled":r,disabled:r,onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:r?-1:0},overrideProps:this.handleOverrides})},t}(we.Component);hN.handledProps=["active","disabled","onClick","onKeyDown","type"],hN.propTypes={},hN.create=io(hN,(function(e){return{content:e}}));const dN=hN;var fN=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemClick=function(e,n){var r=n.value;+t.state.activePage!==+r&&(t.setState({activePage:r}),Ri(t.props,"onPageChange",e,Ee({},t.props,{activePage:r})))},t.handleItemOverrides=function(e,n,r){return function(i){return{active:e,type:n,key:n+"-"+r,onClick:function(e,n){Ri(i,"onClick",e,n),"ellipsisItem"!==n.type&&t.handleItemClick(e,n)}}}},t}bi(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{activePage:1}},n.render=function(){var e=this,n=this.props,r=n["aria-label"],i=n.boundaryRange,o=n.disabled,s=n.ellipsisItem,a=n.siblingRange,l=n.totalPages,c=this.state.activePage,u=uN({activePage:c,boundaryRange:i,hideEllipsis:Ii(s),siblingRange:a,totalPages:l}),h=Le(t,this.props);return we.createElement(_d,Ee({},h,{"aria-label":r,pagination:!0,role:"navigation"}),$s(u,(function(t){var n=t.active,r=t.type,i=t.value;return dN.create(e.props[r],{defaultProps:{content:i,disabled:o,value:i},overrideProps:e.handleItemOverrides(n,r,i)})})))},t}(ss);fN.handledProps=["activePage","aria-label","boundaryRange","defaultActivePage","disabled","ellipsisItem","firstItem","lastItem","nextItem","onPageChange","pageItem","prevItem","siblingRange","totalPages"],fN.propTypes={},fN.autoControlledProps=["activePage"],fN.defaultProps={"aria-label":"Pagination Navigation",boundaryRange:1,ellipsisItem:"...",firstItem:{"aria-label":"First item",content:"\xab"},lastItem:{"aria-label":"Last item",content:"\xbb"},nextItem:{"aria-label":"Next item",content:"\u27e9"},pageItem:{},prevItem:{"aria-label":"Previous item",content:"\u27e8"},siblingRange:1},fN.Item=dN;const pN=e=>null===e||void 0===e?void 0:e.replaceAll("-","\u2011"),mN=()=>{const[e,t]=(0,we.useState)(1),[n,r]=(0,we.useState)(0),[i,o]=(0,we.useState)(!1),[s,a]=(0,we.useState)([]),l=async()=>{o(!0);const{events:t,totalCount:n}=await(async e=>{let{offset:t,limit:n}=e;const r=await ge.get(`/events?offset=${t}&limit=${n}`);return{events:r.data,totalCount:r.headers["x-total-count"]}})({limit:10,offset:10*(e-1)}),i=Math.ceil(n/10);return a(t),r(Number.isNaN(i)?0:i),o(!1),t};return(0,we.useEffect)((()=>{l()}),[e]),i?(0,Ps.jsx)(Zp,{}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("div",{className:"header-buttons",children:(0,Ps.jsx)(fN,{activePage:e,className:"header-buttons",onPageChange:(e,n)=>(e=>{let{activePage:n}=e;n>=1&&t(n)})({...n}),totalPages:n})}),(0,Ps.jsxs)(ga,{className:"events-table, unstackable",compact:"very",children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.HeaderCell,{className:"events-list-id",children:"Id"}),(0,Ps.jsx)(ga.HeaderCell,{className:"events-list-timestamp",children:"Timestamp"}),(0,Ps.jsx)(ga.HeaderCell,{className:"events-list-type",children:"Type"}),(0,Ps.jsx)(ga.HeaderCell,{className:"events-list-data",children:"Data"})]})}),(0,Ps.jsx)(ga.Body,{className:"events-table-body",children:0===(null===s||void 0===s?void 0:s.length)?(0,Ps.jsx)(ga.Row,{children:(0,Ps.jsx)(ga.Cell,{colSpan:99,style:{opacity:.5,padding:"10px !important",textAlign:"center"},children:"No events"})}):s.map((e=>(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.Cell,{children:(0,Ps.jsx)(Vp,{content:e.id,on:"hover",style:{fontFamily:"monospace",width:"400px"},trigger:(0,Ps.jsx)(fo,{name:"info circle"}),wide:"very"})}),(0,Ps.jsx)(ga.Cell,{children:pN(e.timestamp)}),(0,Ps.jsx)(ga.Cell,{children:e.type}),(0,Ps.jsx)(ga.Cell,{className:"events-table-data",children:JSON.stringify(JSON.parse(e.data),null,2)})]},e.id)))})]})]})},gN=e=>{let{fullName:t,length:n,modifiedAt:r,name:i,remoteFileManagement:o,root:s,subdirectory:a}=e;return(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsxs)(ga.Cell,{children:[(0,Ps.jsx)(fo,{name:"file outline"}),i]}),(0,Ps.jsx)(ga.Cell,{children:r?Bs(r):""}),(0,Ps.jsx)(ga.Cell,{children:n?Ls(n):""}),(0,Ps.jsx)(ga.Cell,{children:o?(0,Ps.jsx)($c,{actions:["Cancel",{content:"Delete",key:"done",negative:!0,onClick:async()=>{await(async e=>{let{root:t,path:n}=e;return await ge.delete(`/files/${t}/files/${btoa(n)}`)})({path:`${a.join("/")}/${t}`,root:s}),fetch()}}],centered:!0,content:`Are you sure you want to delete file '${t}'?`,header:(0,Ps.jsx)(_s,{content:"Confirm File Delete",icon:"trash alternate"}),size:"small",trigger:(0,Ps.jsx)(fo,{color:"red",name:"trash alternate",style:{cursor:"pointer"}})}):null})]},t)},vN=e=>{let{deletable:t=!0,fullName:n,modifiedAt:r,name:i,onClick:o=()=>{},remoteFileManagement:s,root:a,subdirectory:l}=e;return(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsxs)(ga.Cell,{onClick:o,style:{cursor:"pointer"},children:[(0,Ps.jsx)(fo,{name:"folder"}),i]}),(0,Ps.jsx)(ga.Cell,{children:r?Bs(r):""}),(0,Ps.jsx)(ga.Cell,{}),(0,Ps.jsx)(ga.Cell,{children:s&&t?(0,Ps.jsx)($c,{actions:["Cancel",{content:"Delete",key:"done",negative:!0,onClick:async()=>{await(async e=>{let{root:t,path:n}=e;return await ge.delete(`/files/${t}/directories/${btoa(n)}`)})({path:`${l.join("/")}/${n}`,root:a}),fetch()}}],centered:!0,content:`Are you sure you want to delete directory '${n}'?`,header:(0,Ps.jsx)(_s,{content:"Confirm Directory Delete",icon:"trash alternate"}),size:"small",trigger:(0,Ps.jsx)(fo,{color:"red",name:"trash alternate",style:{cursor:"pointer"}})}):""})]},i)},yN=e=>{var t,n,r,i,o;let{remoteFileManagement:s,root:a}=e;const[l,c]=(0,we.useState)({directories:[],files:[]}),[u,h]=(0,we.useState)([]),[d,f]=(0,we.useState)(!1),p=async()=>{f(!0);const e=await(async e=>{let{root:t,subdirectory:n=""}=e;return(await ge.get(`/files/${t}/directories/${btoa(n)}`)).data})({root:a,subdirectory:u.join("/")});c(e),f(!1)};(0,we.useEffect)((()=>{p()}),[u]),(0,we.useEffect)((()=>{h([])}),[a]);if(d)return(0,Ps.jsx)(Zp,{});const m=null!==(t=(null===l||void 0===l||null===(n=l.directories)||void 0===n?void 0:n.length)+(null===l||void 0===l||null===(r=l.files)||void 0===r?void 0:r.length))&&void 0!==t?t:0;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(_s,{className:"explorer-working-directory",size:"small",children:[(0,Ps.jsx)(fo,{name:"folder open"}),"/"+a+"/"+u.join("/")]}),(0,Ps.jsxs)(ga,{className:"unstackable",size:"large",children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.HeaderCell,{className:"explorer-list-name",children:"Name"}),(0,Ps.jsx)(ga.HeaderCell,{className:"explorer-list-date",children:"Date Modified"}),(0,Ps.jsx)(ga.HeaderCell,{className:"explorer-list-size",children:"Size"}),(0,Ps.jsx)(ga.HeaderCell,{className:"explorer-list-action"})]})}),(0,Ps.jsx)(ga.Body,{children:0===m?(0,Ps.jsx)(ga.Row,{children:(0,Ps.jsx)(ga.Cell,{colSpan:99,style:{opacity:.5,padding:"10px !important",textAlign:"center"},children:"No files or directories"})}):(0,Ps.jsxs)(Ps.Fragment,{children:[u.length>0&&(0,Ps.jsx)(vN,{deletable:!1,fullName:"..",name:"..",onClick:()=>{const e=[...u];e.pop(),h(e)},remoteFileManagement:s,root:a,subdirectory:u}),null===l||void 0===l||null===(i=l.directories)||void 0===i?void 0:i.map((e=>(0,Ps.jsx)(vN,{onClick:()=>(e=>{let{path:t}=e;h([...u,t])})({path:e.name}),remoteFileManagement:s,root:a,subdirectory:u,...e},e.name))),null===l||void 0===l||null===(o=l.files)||void 0===o?void 0:o.map((e=>(0,Ps.jsx)(gN,{remoteFileManagement:s,root:a,subdirectory:u,...e},e.name)))]})})]})]})};function bN(e){var t=e.active,n=e.children,r=e.className,i=e.content,o=e.loading,s=Oe(Pe(t,"active"),Pe(o,"loading"),"tab",r),a=Le(bN,e),l=Be(bN,e),c={};return l===vi&&(c.attached="bottom"),we.createElement(l,Ee({},c,a,{className:s}),hi(n)?i:n)}bN.handledProps=["active","as","children","className","content","loading"],bN.defaultProps={as:vi,active:!0},bN.propTypes={},bN.create=io(bN,(function(e){return{content:e}}));const wN=bN;var xN=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemClick=function(e,n){var r=n.index;Ri(t.props,"onTabChange",e,Ee({},t.props,{activeIndex:r})),t.setState({activeIndex:r})},t}bi(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{activeIndex:0}},n.renderItems=function(){var e=this.props,t=e.panes,n=e.renderActiveOnly,r=this.state.activeIndex;return n?Ri(Qr(t,"["+r+"]"),"render",this.props):$s(t,(function(e,t){var n=e.pane;return wN.create(n,{overrideProps:{active:t===r}})}))},n.renderMenu=function(){var e=this.props,t=e.menu,n=e.panes,r=e.menuPosition,i=this.state.activeIndex;return!0===t.tabular&&"right"===r&&(t.tabular="right"),_d.create(t,{autoGenerateKey:!1,overrideProps:{items:$s(n,"menuItem"),onItemClick:this.handleItemClick,activeIndex:i}})},n.renderVertical=function(e){var t=this.props,n=t.grid,r=t.menuPosition,i=n.paneWidth,o=n.tabWidth,s=Wo(n,["paneWidth","tabWidth"]),a=r||"right"===e.props.tabular&&"right"||"left";return we.createElement(zd,s,"left"===a&&Dd.create({width:o,children:e},{autoGenerateKey:!1}),Dd.create({width:i,children:this.renderItems(),stretched:!0},{autoGenerateKey:!1}),"right"===a&&Dd.create({width:o,children:e},{autoGenerateKey:!1}))},n.render=function(){var e=this.renderMenu(),n=Le(t,this.props),r=Be(t,this.props);return e.props.vertical?we.createElement(r,n,this.renderVertical(e)):we.createElement(r,n,"bottom"!==e.props.attached&&e,this.renderItems(),"bottom"===e.props.attached&&e)},t}(ss);xN.handledProps=["activeIndex","as","defaultActiveIndex","grid","menu","menuPosition","onTabChange","panes","renderActiveOnly"],xN.propTypes={},xN.autoControlledProps=["activeIndex"],xN.defaultProps={grid:{paneWidth:12,tabWidth:4},menu:{attached:!0,tabular:!0},renderActiveOnly:!0},xN.Pane=wN;const kN=xN,SN=function(){let{options:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{remoteFileManagement:t}=e,n=[{menuItem:"Downloads",render:()=>(0,Ps.jsx)(kN.Pane,{children:(0,Ps.jsx)(yN,{remoteFileManagement:t,root:"downloads"})}),route:"downloads"},{menuItem:"Incomplete",render:()=>(0,Ps.jsx)(kN.Pane,{children:(0,Ps.jsx)(yN,{remoteFileManagement:t,root:"incomplete"})}),route:"incomplete"}];return(0,Ps.jsx)("div",{children:(0,Ps.jsx)(kN,{panes:n})})},CN=async()=>ge.put("/application"),EN=async()=>ge.delete("/application");var TN=n(5023),ON=n.n(TN);const AN=e=>{let{state:t,theme:n}=e;const[r,i]=(0,we.useState)();(0,we.useEffect)((()=>{setTimeout((()=>{i(ON().stringify(t,{simpleKeys:!0,sortMapEntries:!1}))}),250)}),[t]);const{pendingRestart:o}=t;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)("div",{className:"header-buttons",children:[(0,Ps.jsxs)("div",{style:{float:"left"},children:[(0,Ps.jsx)(qP,{disabled:!r,icon:"refresh",mediaQuery:"(max-width: 686px)",onClick:()=>(async e=>{let{forceCheck:t=!1}=e;return(await ge.get(`/application/version/latest?forceCheck=${t}`)).data})({forceCheck:!0}),primary:!0,children:"Check for Updates"}),(0,Ps.jsx)(qP,{color:"yellow",disabled:!r,icon:"star",mediaQuery:"(max-width: 686px)",onClick:()=>{var e;return window.open(`http://www.slsknet.org/qtlogin.php?username=${null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.username}`,"_blank")},children:"Get Privileges"})]}),(0,Ps.jsx)($c,{actions:["Cancel",{content:"Shut Down",key:"done",negative:!0,onClick:EN}],centered:!0,content:"Are you sure you want to shut the application down?  You'll need to manually start it again.",header:(0,Ps.jsx)(_s,{content:"Confirm Shutdown",icon:"redo"}),size:"mini",trigger:(0,Ps.jsx)(qP,{disabled:!r,icon:"shutdown",mediaQuery:"(max-width: 686px)",negative:!0,children:"Shut Down"})}),(0,Ps.jsx)($c,{actions:["Cancel",{content:"Restart",key:"done",negative:!0,onClick:CN}],centered:!0,content:"Are you sure you want restart the application?",header:(0,Ps.jsx)(_s,{content:"Confirm Restart",icon:"redo"}),size:"mini",trigger:(0,Ps.jsx)(qP,{color:o?"yellow":void 0,disabled:!r,icon:"redo",mediaQuery:"(max-width: 686px)",negative:!o,children:"Restart"})})]}),(0,Ps.jsx)(GP,{}),(0,Ps.jsx)(em,{loading:!r&&(0,Ps.jsx)(Zp,{}),children:(0,Ps.jsx)(UP,{basicSetup:!1,editable:!1,theme:n,value:r})})]})},_N={connected:!1,logs:[]},PN={Debug:"DBG",Error:"ERR",Information:"INF",Warning:"WRN"};class NN extends we.Component{constructor(e){super(e),this.formatTimestamp=e=>{const t=new Date(e);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`},this.state=_N}componentDidMount(){const e=de({url:`${i}/logs`});e.on("buffer",(e=>{this.setState({connected:!0,logs:e.reverse().slice(0,500)})})),e.on("log",(e=>{this.setState((t=>({connected:!0,logs:[e].concat(t.logs).slice(0,500)})))})),e.onreconnecting((()=>this.setState({connected:!1}))),e.onclose((()=>this.setState({connected:!1}))),e.onreconnected((()=>this.setState({connected:!0}))),e.start()}render(){const{connected:e,logs:t}=this.state;return(0,Ps.jsxs)("div",{className:"logs",children:[!e&&(0,Ps.jsx)(Zp,{}),e&&(0,Ps.jsxs)(ga,{className:"logs-table",compact:"very",children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.HeaderCell,{children:"Timestamp"}),(0,Ps.jsx)(ga.HeaderCell,{children:"Level"}),(0,Ps.jsx)(ga.HeaderCell,{children:"Message"})]})}),(0,Ps.jsx)(ga.Body,{className:"logs-table-body",children:t.map((e=>(0,Ps.jsxs)(ga.Row,{disabled:"Debug"===e.level,negative:"Error"===e.level,warning:"Warning"===e.level,children:[(0,Ps.jsx)(ga.Cell,{children:this.formatTimestamp(e.timestamp)}),(0,Ps.jsx)(ga.Cell,{children:PN[e.level]||e.level}),(0,Ps.jsx)(ga.Cell,{className:"logs-table-message",children:e.message})]},e.timestamp)))})]})]})}}const MN=NN,jN=async()=>(await ge.get("/options/yaml")).data,RN=async()=>(await ge.get("/options/yaml/location")).data,IN=e=>{let{onClose:t,open:n,theme:r}=e;const[i,o]=(0,we.useState)(!0),[s,a]=(0,we.useState)(),l=async()=>{o(!0);try{a(await(async()=>(await ge.get("/options/debug")).data)())}catch(r){var e,t,n;console.error(r),Pm.error(null!==(e=null!==(t=null===r||void 0===r||null===(n=r.response)||void 0===n?void 0:n.data)&&void 0!==t?t:null===r||void 0===r?void 0:r.message)&&void 0!==e?e:r)}finally{o(!1)}};return(0,we.useEffect)((()=>{n&&l()}),[n]),(0,Ps.jsxs)($c,{onClose:t,open:n,size:"large",children:[(0,Ps.jsxs)($c.Header,{children:[(0,Ps.jsx)(fo,{name:"bug"}),"Options (Debug View)"]}),(0,Ps.jsx)($c.Content,{className:"debug-view-content",scrolling:!0,children:(0,Ps.jsx)(em,{loading:i&&(0,Ps.jsx)(Ns,{loading:!0}),children:(0,Ps.jsx)(UP,{basicSetup:!1,editable:!1,style:{minHeight:500},theme:r,value:s})})}),(0,Ps.jsx)($c.Actions,{children:(0,Ps.jsx)($a,{onClick:t,children:"Close"})})]})},DN=e=>{let{onClose:t,open:n,theme:r}=e;const[{error:i,loading:o},s]=(0,we.useState)({error:!1,loading:!0}),[{isDirty:a,location:l,yaml:c},u]=(0,we.useState)({isDirty:!1,location:void 0,yaml:void 0}),[h,d]=(0,we.useState)(),[f,p]=(0,we.useState)(),m=async e=>{const t=await(async e=>{let{yaml:t}=e;return(await ge.post("/options/yaml/validate",t)).data})({yaml:e});d(t)},g=async e=>{if(await m(e),!h)try{await(async e=>{let{yaml:t}=e;return(await ge.post("/options/yaml",t)).data})({yaml:e}),t()}catch(n){p(n.response.data)}};return(0,we.useEffect)((()=>{n&&(async()=>{s({error:!1,loading:!0});try{const[e,t]=await Promise.all([RN(),jN()]);u({isDirty:!1,location:e,yaml:t}),s({error:!1,loading:!1})}catch(e){s({error:e.message,loading:!1})}})()}),[n]),(0,Ps.jsxs)($c,{onClose:t,open:n,size:"large",children:[(0,Ps.jsxs)($c.Header,{children:[(0,Ps.jsx)(fo,{name:"edit"}),"Edit Options",(0,Ps.jsx)(WP,{hidden:o,children:(0,Ps.jsxs)(Gd,{className:"no-grow edit-code-header",warning:!0,children:[(0,Ps.jsx)(fo,{name:"warning sign"}),"Editing ",l]})})]}),(0,Ps.jsx)($c.Content,{className:"edit-code-content",scrolling:!0,children:(0,Ps.jsx)(em,{error:i&&(0,Ps.jsx)(Ns,{icon:"close"}),loading:o&&(0,Ps.jsx)(Ns,{loading:!0}),children:(0,Ps.jsx)("div",{className:h||f?"edit-code-container-error":"edit-code-container",children:(0,Ps.jsx)(UP,{onChange:e=>(async e=>{u({isDirty:!0,location:l,yaml:e}),m(e)})(e),style:{minHeight:500},theme:r,value:c})})})}),(0,Ps.jsxs)($c.Actions,{children:[(h||f)&&(0,Ps.jsxs)(Gd,{className:"no-grow left-align",negative:!0,children:[(0,Ps.jsx)(fo,{name:"x"}),(null!==h&&void 0!==h?h:"")+(null!==f&&void 0!==f?f:"")]}),(0,Ps.jsxs)($a,{disabled:!a,onClick:()=>g(c),primary:!0,children:[(0,Ps.jsx)(fo,{name:"save"}),"Save"]}),(0,Ps.jsxs)($a,{negative:!0,onClick:t,children:[(0,Ps.jsx)(fo,{name:"close"}),"Cancel"]})]})]})},LN=e=>{let{debug:t,remoteConfiguration:n,setDebugModal:r,...i}=e;return n&&t?(0,Ps.jsx)(qP,{icon:"bug",mediaQuery:"(max-width: 516px)",onClick:()=>r(!0),...i,children:"Debug View"}):null},BN=e=>{let{remoteConfiguration:t,setEditModal:n,...r}=e;return t?(0,Ps.jsx)(qP,{icon:"edit",mediaQuery:"(max-width: 516px)",onClick:()=>n(!0),primary:!0,...r,children:"Edit"}):(0,Ps.jsx)(qP,{disabled:!0,icon:"lock",mediaQuery:"(max-width: 516px)",children:"Remote Configuration Disabled"})},FN=e=>{let{options:t,theme:n}=e;const[r,i]=(0,we.useState)(!1),[o,s]=(0,we.useState)(!1),[a,l]=(0,we.useState)();(0,we.useEffect)((()=>{setTimeout((()=>{l(ON().stringify(t,{simpleKeys:!0,sortMapEntries:!1}))}),250)}),[t]);const{debug:c,remoteConfiguration:u}=t;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)("div",{className:"header-buttons",children:[(0,Ps.jsx)(LN,{debug:c,disabled:!a,remoteConfiguration:u,setDebugModal:i}),(0,Ps.jsx)(BN,{disabled:!a,remoteConfiguration:u,setEditModal:s})]}),(0,Ps.jsx)(GP,{}),(0,Ps.jsx)(em,{loading:!a&&(0,Ps.jsx)(Zp,{}),children:(0,Ps.jsx)(UP,{basicSetup:!1,editable:!1,theme:n,value:a})}),(0,Ps.jsx)(IN,{onClose:()=>i(!1),open:r,theme:n}),(0,Ps.jsx)(DN,{onClose:()=>s(!1),open:o,theme:n})]})},zN=e=>{let{onClose:t,share:n,theme:r}=e;const[i,o]=(0,we.useState)(!0),[s,a]=(0,we.useState)(),{id:l,localPath:c,remotePath:u}=n||{};return(0,we.useEffect)((()=>{const e=async()=>{o(!0);const e=await async function(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("unable to get share contents: id is missing");return(await ge.get(`/shares/${encodeURIComponent(e)}/contents`)).data}({id:l}),t=e.map((e=>{const t=[e.name.replace(u,c)],n=e.files.sort(((e,t)=>e.filename.localeCompare(t.filename)));for(const r of n)t.push("\t"+r.filename.replace(u,""));return t.push(""),t.join("\n")}));a(t.join("\n")),o(!1)};l?e():(o(!0),a())}),[l]),(0,Ps.jsxs)($c,{onClose:t,open:n,size:"large",children:[(0,Ps.jsxs)($c.Header,{children:[(0,Ps.jsx)(fo,{name:"folder"}),c]}),(0,Ps.jsx)($c.Content,{className:"share-ls-content",scrolling:!0,children:(0,Ps.jsx)(em,{loading:i&&(0,Ps.jsx)(Zp,{className:"modal-loader"}),children:(0,Ps.jsx)(UP,{basicSetup:!1,editable:!1,style:{minHeight:500},theme:r,value:s||""})})}),(0,Ps.jsx)($c.Actions,{children:(0,Ps.jsx)($a,{onClick:t,children:"Close"})})]})},HN=function(){let{exclusions:e=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Ps.jsxs)(ga,{children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsx)(ga.Row,{children:(0,Ps.jsx)(ga.HeaderCell,{children:"Excluded Paths"})})}),(0,Ps.jsx)(ga.Body,{children:(0,Ps.jsx)(em,{empty:0===e.length&&(0,Ps.jsx)(ga.Row,{children:(0,Ps.jsx)(ga.Cell,{style:{opacity:.5,padding:"10px !important",textAlign:"center"},children:"No exclusions configured"})}),children:e.map((e=>(0,Ps.jsx)(ga.Row,{children:(0,Ps.jsxs)(ga.Cell,{children:[(0,Ps.jsx)(fo,{color:"red",name:"x"}),e.localPath]})},e.localPath)))})})]})},$N=e=>{let{onClick:t,shares:n}=e;return(0,Ps.jsxs)(ga,{children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.HeaderCell,{children:"Host"}),(0,Ps.jsx)(ga.HeaderCell,{children:"Local Path"}),(0,Ps.jsx)(ga.HeaderCell,{className:"share-count-column",children:"Directories"}),(0,Ps.jsx)(ga.HeaderCell,{className:"share-count-column",children:"Files"}),(0,Ps.jsx)(ga.HeaderCell,{children:"Alias"}),(0,Ps.jsx)(ga.HeaderCell,{children:"Remote Path"})]})}),(0,Ps.jsx)(ga.Body,{children:(0,Ps.jsx)(em,{empty:0===n.length&&(0,Ps.jsx)(ga.Row,{children:(0,Ps.jsx)(ga.Cell,{colSpan:6,style:{opacity:.5,padding:"10px !important",textAlign:"center"},children:"No shares configured"})}),children:n.map((e=>{var n,r;return(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.Cell,{children:e.host}),(0,Ps.jsxs)(ga.Cell,{onClick:()=>t(e),children:[(0,Ps.jsx)(fo,{name:"folder"}),(0,Ps.jsx)(Gm,{to:"#",children:e.localPath})]}),(0,Ps.jsx)(ga.Cell,{children:null!==(n=e.directories)&&void 0!==n?n:"?"}),(0,Ps.jsx)(ga.Cell,{children:null!==(r=e.files)&&void 0!==r?r:"?"}),(0,Ps.jsx)(ga.Cell,{children:e.alias}),(0,Ps.jsx)(ga.Cell,{children:e.remotePath})]},`${e.host}+${e.localPath}`)}))})})]})},UN=e=>{let{rescan:t,scanPending:n,working:r}=e;return(0,Ps.jsx)(qP,{color:n?"yellow":void 0,disabled:r,icon:"refresh",loading:r,mediaQuery:"(max-width: 516px)",onClick:()=>t(),primary:!n,children:"Rescan Shares"})},WN=e=>{let{cancel:t,working:n}=e;return(0,Ps.jsx)(qP,{color:"red",disabled:n,icon:"x",mediaQuery:"(max-width: 516px)",onClick:()=>t(),children:"Cancel Scan"})},VN=function(){let{state:e={},theme:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=(0,we.useState)(!0),[i,o]=(0,we.useState)(!1),[s,a]=(0,we.useState)([]),[l,c]=(0,we.useState)(!1),{directories:u,files:h,scanPending:d,scanProgress:f,scanning:p}=e,m=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e||r(!0);const t=await(async()=>(await ge.get("/shares")).data)(),n=Object.entries(t).reduce(((e,t)=>{let[n,r]=t;return e.concat(r.map((e=>({host:n,...e}))))}),[]);a(n)}catch(o){var t,n,i;console.error(o),Pm.error(null!==(t=null!==(n=null===o||void 0===o||null===(i=o.response)||void 0===i?void 0:i.data)&&void 0!==n?n:null===o||void 0===o?void 0:o.message)&&void 0!==t?t:o)}finally{r(!1)}};(0,we.useEffect)((()=>{m()}),[]),(0,we.useEffect)((()=>{m(!0),p||setTimeout((()=>m(!0)),1e3)}),[d,p]);const g=s.filter((e=>!e.isExcluded)),v=s.filter((e=>e.isExcluded));return(0,Ps.jsxs)(em,{loading:n&&(0,Ps.jsx)(Zp,{}),children:[(0,Ps.jsx)("div",{className:"header-buttons",children:(0,Ps.jsx)(em,{scanning:p&&(0,Ps.jsx)(WN,{cancel:async()=>{try{o(!0),await(async()=>(await ge.delete("/shares")).data)()}catch(i){var e,t,n,r;console.error(i),Pm.error(null!==(e=null!==(t=null!==(n=null===i||void 0===i||null===(r=i.response)||void 0===r?void 0:r.data)&&void 0!==n?n:null===i||void 0===i?void 0:i.message)&&void 0!==t?t:i)&&void 0!==e?e:"Failed to cancel the scan")}finally{o(!1)}},working:i}),children:(0,Ps.jsx)(UN,{rescan:async()=>{try{o(!0),await(async()=>(await ge.put("/shares")).data)()}catch(r){var e,t,n;console.error(r),Pm.error(null!==(e=null!==(t=null===r||void 0===r||null===(n=r.response)||void 0===n?void 0:n.data)&&void 0!==t?t:null===r||void 0===r?void 0:r.message)&&void 0!==e?e:r)}finally{o(!1)}},scanPending:d,working:i})})}),(0,Ps.jsx)(GP,{}),(0,Ps.jsxs)(em,{filling:p&&(0,Ps.jsx)(Zp,{children:(0,Ps.jsxs)("div",{children:[(0,Ps.jsxs)("div",{children:[Math.round(100*f),"%"]}),(0,Ps.jsxs)("div",{className:"share-scan-detail",children:["Found ",h," files in ",u," directories"]})]})}),children:[(0,Ps.jsx)($N,{onClick:c,shares:g}),(0,Ps.jsx)(HN,{exclusions:v})]}),(0,Ps.jsx)(zN,{onClose:()=>c(!1),share:l,theme:t})]})},qN=e=>{var t,n,r,i;let{options:o={},state:s={},theme:a}=e;const{params:{tab:l},...c}=rc(),u=tc(),h=[{menuItem:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(em,{pending:(null!==(t=null===s||void 0===s?void 0:s.pendingRestart)&&void 0!==t&&t||null!==(n=null===s||void 0===s?void 0:s.pendingReconnect)&&void 0!==n&&n)&&(0,Ps.jsx)(fo,{color:"yellow",name:"exclamation circle"}),children:(0,Ps.jsx)(fo,{name:"info circle"})}),"Info"]},"info"),render:()=>(0,Ps.jsx)(kN.Pane,{children:(0,Ps.jsx)(AN,{state:s,theme:a})}),route:"info"},{menuItem:{content:"Options",icon:"options",key:"options"},render:()=>(0,Ps.jsx)(kN.Pane,{className:"full-height",children:(0,Ps.jsx)(FN,{options:o,theme:a})}),route:"options"},{menuItem:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(em,{scanPending:null!==(r=null===s||void 0===s||null===(i=s.shares)||void 0===i?void 0:i.scanPending)&&void 0!==r&&r&&(0,Ps.jsx)(fo,{color:"yellow",name:"exclamation circle"}),children:(0,Ps.jsx)(fo,{name:"share external"})}),"Shares"]},"shares"),render:()=>(0,Ps.jsx)(kN.Pane,{children:(0,Ps.jsx)(VN,{state:s.shares,theme:a})}),route:"shares"},{menuItem:{content:"Files",icon:"folder open",key:"files"},render:()=>(0,Ps.jsx)(kN.Pane,{className:"full-height",children:(0,Ps.jsx)(SN,{options:o,theme:a})}),route:"files"},{menuItem:{content:"Data",icon:"database",key:"data"},render:()=>(0,Ps.jsx)(kN.Pane,{className:"full-height",children:(0,Ps.jsx)(YP,{theme:a})}),route:"data"},{menuItem:{content:"Events",icon:"calendar check",key:"events"},render:()=>(0,Ps.jsx)(kN.Pane,{className:"full-height",children:(0,Ps.jsx)(mN,{})}),route:"events"},{menuItem:{content:"Logs",icon:"file outline",key:"logs"},render:()=>(0,Ps.jsx)(kN.Pane,{children:(0,Ps.jsx)(MN,{})}),route:"logs"}],d=h.findIndex((e=>e.route===l));return void 0===l?(0,Ps.jsx)(Hl,{to:`${c.url}/${h[0].route}`}):(0,Ps.jsx)("div",{className:"system",children:(0,Ps.jsx)(vi,{raised:!0,children:(0,Ps.jsx)(kN,{activeIndex:d>-1?d:0,onTabChange:(e,t)=>{let{activeIndex:n}=t;u.push(h[n].route)},panes:h})})})};var KN=nt.isFinite,QN=Math.min;const GN=function(e){var t=Math[e];return function(e,n){if(e=ko(e),(n=null==n?0:QN(Eo(n),292))&&KN(e)){var r=(Wr(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return+((r=(Wr(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}};const JN=GN("round");const YN=function(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e};const XN=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ko(n))===n?n:0),void 0!==t&&(t=(t=ko(t))===t?t:0),YN(ko(e),t,n)};var ZN=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).calculatePercent=function(){var e=t.props,n=e.percent,r=e.total,i=e.value;return os(n)?os(r)||os(i)?void 0:i/r*100:n},t.computeValueText=function(e){var n=t.props,r=n.progress,i=n.total,o=n.value;return"value"===r?o:"ratio"===r?o+"/"+i:e+"%"},t.getPercent=function(){var e=t.props,n=e.precision,r=e.progress,i=e.total,o=e.value,s=XN(t.calculatePercent(),0,100);return os(i)||os(o)||"value"!==r?"value"===r?o:os(n)?s:JN(s,n):o/i*100},t.isAutoSuccess=function(){var e=t.props,n=e.autoSuccess,r=e.percent,i=e.total,o=e.value;return n&&(r>=100||o>=i)},t.renderLabel=function(){var e=t.props,n=e.children,r=e.content,i=e.label;return hi(n)?hi(r)?oo(i,{autoGenerateKey:!1,defaultProps:{className:"label"}}):we.createElement("div",{className:"label"},r):we.createElement("div",{className:"label"},n)},t.renderProgress=function(e){var n=t.props,r=n.precision;if(n.progress||!os(r))return we.createElement("div",{className:"progress"},t.computeValueText(e))},t}return bi(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.attached,i=e.className,o=e.color,s=e.disabled,a=e.error,l=e.indicating,c=e.inverted,u=e.size,h=e.success,d=e.warning,f=Oe("ui",o,u,Pe(n||l,"active"),Pe(s,"disabled"),Pe(a,"error"),Pe(l,"indicating"),Pe(c,"inverted"),Pe(h||this.isAutoSuccess(),"success"),Pe(d,"warning"),Ne(r,"attached"),"progress",i),p=Le(t,this.props),m=Be(t,this.props),g=this.getPercent()||0;return we.createElement(m,Ee({},p,{className:f,"data-percent":Math.floor(g)}),we.createElement("div",{className:"bar",style:{width:g+"%"}},this.renderProgress(g)),this.renderLabel())},t}(we.Component);ZN.handledProps=["active","as","attached","autoSuccess","children","className","color","content","disabled","error","indicating","inverted","label","percent","precision","progress","size","success","total","value","warning"],ZN.propTypes={};const eM=ZN,tM=e=>{switch(e){case"InProgress":return{color:"blue"};case"Completed, Succeeded":return{color:"green"};case"Requested":case"Queued, Locally":case"Queued, Remotely":case"Queued":return{};case"Initializing":return{color:"teal"};default:return{color:"red"}}},nM=e=>"red"===tM(e).color,rM=e=>e.includes("Queued"),iM=e=>{let{size:t,transferred:n}=e;const[r,i]=Ls(t,1).split(" ");return`${function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if("B"===t)return e+" "+t;const r=n<0?0:n;return Number.parseFloat((e/1024**{EB:6,GB:3,KB:1,MB:2,PB:5,TB:4,YB:8,ZB:7}[t]).toFixed(r))}(n,i,1)}/${r} ${i}`};class oM extends we.Component{constructor(e){super(e),this.handleClick=e=>{const{direction:t,state:n}=e;if("Download"===t){if(nM(n))return this.props.onRetryRequested(e);if(rM(n))return this.props.onPlaceInQueueRequested(e)}},this.toggleFolded=()=>{this.setState((e=>({isFolded:!e.isFolded})))},this.state={isFolded:!1}}render(){const{directoryName:e,files:t,onSelectionChange:n}=this.props,{isFolded:r}=this.state;return(0,Ps.jsxs)("div",{children:[(0,Ps.jsxs)(_s,{className:"filelist-header",size:"small",children:[(0,Ps.jsx)(fo,{link:!0,name:r?"folder":"folder open",onClick:()=>this.toggleFolded()}),e]}),!1===r?(0,Ps.jsx)(na,{children:(0,Ps.jsx)(na.Item,{children:(0,Ps.jsxs)(ga,{children:[(0,Ps.jsx)(ga.Header,{children:(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.HeaderCell,{className:"transferlist-selector",children:(0,Ps.jsx)(ka,{checked:0===t.filter((e=>!e.selected)).length,fitted:!0,onChange:(r,i)=>t.map((t=>n(e,t,i.checked)))})}),(0,Ps.jsx)(ga.HeaderCell,{className:"transferlist-filename",children:"File"}),(0,Ps.jsx)(ga.HeaderCell,{className:"transferlist-progress",children:"Progress"}),(0,Ps.jsx)(ga.HeaderCell,{className:"transferlist-size",children:"Size"})]})}),(0,Ps.jsx)(ga.Body,{children:t.sort(((e,t)=>Fs(e.filename).localeCompare(Fs(t.filename)))).map((t=>(0,Ps.jsxs)(ga.Row,{children:[(0,Ps.jsx)(ga.Cell,{className:"transferlist-selector",children:(0,Ps.jsx)(ka,{checked:t.selected,fitted:!0,onChange:(r,i)=>n(e,t,i.checked)})}),(0,Ps.jsx)(ga.Cell,{className:"transferlist-filename",children:Fs(t.filename)}),(0,Ps.jsx)(ga.Cell,{className:"transferlist-progress",children:"InProgress"===t.state?(0,Ps.jsx)(eM,{color:tM(t.state).color,percent:Math.round(t.percentComplete),progress:!0,style:{margin:0}}):(0,Ps.jsxs)($a,{fluid:!0,size:"mini",style:{cursor:"Upload"===t.direction?"unset":"",margin:0,padding:7},...tM(t.state),active:"Upload"===t.direction,onClick:()=>this.handleClick(t),children:["Download"===t.direction&&rM(t.state)&&(0,Ps.jsx)(fo,{name:"refresh"}),"Download"===t.direction&&nM(t.state)&&(0,Ps.jsx)(fo,{name:"redo"}),t.state,t.placeInQueue?` (#${t.placeInQueue})`:""]})}),(0,Ps.jsx)(ga.Cell,{className:"transferlist-size",children:iM({size:t.size,transferred:t.bytesTransferred})})]},t.filename)))})]})})}):""]})}}const sM=oM;class aM extends we.Component{constructor(e){super(e),this.handleSelectionChange=(e,t,n)=>{const{selections:r}=this.state,i=JSON.stringify({directory:e,filename:t.filename});n?r.add(i):r.delete(i),this.setState({selections:r})},this.isSelected=(e,t)=>this.state.selections.has(JSON.stringify({directory:e,filename:t.filename})),this.getSelectedFiles=()=>{const{user:e}=this.props;return Array.from(this.state.selections).map((e=>JSON.parse(e))).map((t=>e.directories.find((e=>e.directory===t.directory)).files.find((e=>e.filename===t.filename)))).filter((e=>void 0!==e))},this.removeFileSelection=e=>{const{selections:t}=this.state,n=Array.from(t).map((e=>JSON.parse(e))).find((t=>t.filename===e.filename));n&&(t.delete(JSON.stringify(n)),this.setState({selections:t}))},this.retryAll=async e=>{await Promise.all(e.map((e=>this.handleRetry(e))))},this.cancelAll=async(e,t,n)=>{await Promise.all(n.map((n=>js({direction:e,id:n.id,username:t}))))},this.removeAll=async(e,t,n)=>{await Promise.all(n.map((n=>js({direction:e,id:n.id,remove:!0,username:t}).then((()=>this.removeFileSelection(n))))))},this.handleRetry=async e=>{const{filename:t,size:n,username:r}=e;try{await Ms({files:[{filename:t,size:n}],username:r})}catch(i){console.error(i)}},this.handleFetchPlaceInQueue=async e=>{const{id:t,username:n}=e;try{await(e=>{let{username:t,id:n}=e;return ge.get(`/transfers/downloads/${encodeURIComponent(t)}/${encodeURIComponent(n)}/position`)})({id:t,username:n})}catch(r){console.error(r)}},this.toggleFolded=()=>{this.setState((e=>({isFolded:!e.isFolded})))},this.state={isFolded:!1,selections:new Set}}render(){const{direction:e,user:t}=this.props,{isFolded:n}=this.state,r=this.getSelectedFiles(),i=r.length>1?" Selected":"",o=r.filter((e=>Rs(e.state))).length===r.length,s=r.some((e=>Is(e.state))),a=r.filter((e=>e.state.includes("Completed"))).length===r.length;return(0,Ps.jsxs)(Ra,{className:"transfer-card",raised:!0,children:[(0,Ps.jsxs)(Ra.Content,{children:[(0,Ps.jsxs)(Ra.Header,{children:[(0,Ps.jsx)(fo,{link:!0,name:n?"chevron right":"chevron down",onClick:()=>this.toggleFolded()}),t.username]}),t.directories&&!n&&t.directories.map((e=>(0,Ps.jsx)(sM,{direction:this.props.direction,directoryName:e.directory,files:(e.files||[]).map((t=>({...t,selected:this.isSelected(e.directory,t)}))),onPlaceInQueueRequested:this.handleFetchPlaceInQueue,onRetryRequested:this.handleRetry,onSelectionChange:this.handleSelectionChange,username:t.username},e.directory)))]}),r&&r.length>0&&(0,Ps.jsx)(Ra.Content,{extra:!0,children:(0,Ps.jsxs)($a.Group,{children:[o&&(0,Ps.jsx)($a,{color:"green",content:`Retry${i}`,icon:"redo",onClick:()=>this.retryAll(r)}),o&&s&&(0,Ps.jsx)($a.Or,{}),s&&(0,Ps.jsx)($a,{color:"red",content:`Cancel${i}`,icon:"x",onClick:()=>this.cancelAll(e,t.username,r)}),(o||s)&&a&&(0,Ps.jsx)($a.Or,{}),a&&(0,Ps.jsx)($a,{content:`Remove${i}`,icon:"trash alternate",onClick:()=>this.removeAll(e,t.username,r)})]})})]},t.username)}}const lM=aM,cM=e=>{let{cancelling:t=!1,direction:n,onCancelAll:r,onRemoveAll:i,onRetryAll:o,removing:s=!1,retrying:a=!1,server:l={isConnected:!0},transfers:c}=e;const[u,h]=(0,we.useState)("Succeeded"),[d,f]=(0,we.useState)("All"),[p,m]=(0,we.useState)("Errored"),g=(0,we.useMemo)((()=>c.reduce(((e,t)=>{const n=t.directories.reduce(((e,t)=>e.concat(t.files)),[]);return e.concat(n)}),[]).filter((e=>e.direction.toLowerCase()===n))),[n,c]),v=0===g.length,y=a||t||s;return(0,Ps.jsxs)(vi,{className:"transfers-header-segment",raised:!0,children:[(0,Ps.jsx)("div",{className:"transfers-segment-icon",children:(0,Ps.jsx)(fo,{name:n,size:"big"})}),(0,Ps.jsxs)(WP,{className:"transfers-header-buttons",hidden:v,children:[(0,Ps.jsx)(KP,{color:"green",disabled:y||v||!l.isConnected,hidden:"upload"===n,icon:"redo",loading:a,mediaQuery:"(max-width: 715px)",onChange:(e,t)=>m(t.value),onClick:()=>o((e=>{let{files:t,retryOption:n}=e;switch(n){case"Errored":return t.filter((e=>["Completed, TimedOut","Completed, Errored","Completed, Rejected"].includes(e.state)));case"Cancelled":return t.filter((e=>"Completed, Cancelled"===e.state));case"All":return t.filter((e=>Rs(e.state)));default:return[]}})({files:g,retryOption:p})),options:[{key:"errored",text:"Errored",value:"Errored"},{key:"cancelled",text:"Cancelled",value:"Cancelled"},{key:"all",text:"All",value:"All"}],children:`Retry ${"All"===p?p:`All ${p}`}`}),(0,Ps.jsx)(VP,{}),(0,Ps.jsx)(KP,{color:"red",disabled:y||v,icon:"x",loading:t,mediaQuery:"(max-width: 715px)",onChange:(e,t)=>f(t.value),onClick:()=>r((e=>{let{cancelOption:t,files:n}=e;switch(t){case"All":return n.filter((e=>Is(e.state)));case"Queued":return n.filter((e=>["Queued, Locally","Queued, Remotely"].includes(e.state)));case"In Progress":return n.filter((e=>"InProgress"===e.state));default:return[]}})({cancelOption:d,files:g})),options:[{key:"all",text:"All",value:"All"},{key:"queued",text:"Queued",value:"Queued"},{key:"inProgress",text:"In Progress",value:"In Progress"}],children:`Cancel ${"All"===d?d:`All ${d}`}`}),(0,Ps.jsx)(VP,{}),(0,Ps.jsx)(KP,{disabled:y||v,icon:"trash alternate",loading:s,mediaQuery:"(max-width: 715px)",onChange:(e,t)=>h(t.value),onClick:()=>i((e=>{let{files:t,removeOption:n}=e;switch(n){case"Succeeded":return t.filter((e=>"Completed, Succeeded"===e.state));case"Errored":return t.filter((e=>["Completed, TimedOut","Completed, Errored","Completed, Rejected"].includes(e.state)));case"Cancelled":return t.filter((e=>"Completed, Cancelled"===e.state));case"Completed":return t.filter((e=>e.state.includes("Completed")));default:return[]}})({files:g,removeOption:u})),options:[{key:"succeeded",text:"Succeeded",value:"Succeeded"},{key:"errored",text:"Errored",value:"Errored"},{key:"cancelled",text:"Cancelled",value:"Cancelled"},{key:"completed",text:"Completed",value:"Completed"}],children:`Remove All ${u}`})]})]})},uM=e=>{let{direction:t,server:n}=e;const[r,i]=(0,we.useState)(!0),[o,s]=(0,we.useState)([]),[a,l]=(0,we.useState)(!1),[c,u]=(0,we.useState)(!1),[h,d]=(0,we.useState)(!1),f=async()=>{try{const e=await(async e=>{let{direction:t}=e;const n=(await ge.get(`/transfers/${encodeURIComponent(t)}s`)).data;if(Array.isArray(n))return n;console.warn("got non-array response from transfers API",n)})({direction:t});s(e)}catch(i){var e,n,r;console.error(i),Pm.error(null!==(e=null!==(n=null===i||void 0===i||null===(r=i.response)||void 0===r?void 0:r.data)&&void 0!==n?n:null===i||void 0===i?void 0:i.message)&&void 0!==e?e:i)}};(0,we.useEffect)((()=>{i(!0);(async()=>{await f(),i(!1)})();const e=window.setInterval(f,1e3);return()=>{clearInterval(e)}}),[t]),(0,we.useMemo)((()=>{i(!0)}),[t]);const p=async e=>{let{file:t,suppressStateChange:n=!1}=e;const{filename:r,size:i,username:o}=t;try{n||l(!0),await Ms({files:[{filename:r,size:i}],username:o}),n||l(!1)}catch(u){var s,a,c;console.error(u),Pm.error(null!==(s=null!==(a=null===u||void 0===u||null===(c=u.response)||void 0===c?void 0:c.data)&&void 0!==a?a:null===u||void 0===u?void 0:u.message)&&void 0!==s?s:u),n||l(!1)}},m=async e=>{l(!0),await Promise.all(e.map((e=>p({file:e,suppressStateChange:!0})))),l(!1)},g=async e=>{let{file:n,suppressStateChange:r=!1}=e;const{id:i,username:o}=n;try{r||u(!0),await js({direction:t,id:i,username:o}),r||u(!1)}catch(c){var s,a,l;console.error(c),Pm.error(null!==(s=null!==(a=null===c||void 0===c||null===(l=c.response)||void 0===l?void 0:l.data)&&void 0!==a?a:null===c||void 0===c?void 0:c.message)&&void 0!==s?s:c),r||u(!1)}},v=async e=>{u(!0),await Promise.all(e.map((e=>g({file:e,suppressStateChange:!0})))),u(!1)},y=async e=>{let{file:n,suppressStateChange:r=!1}=e;const{id:i,username:o}=n;try{r||d(!0),await js({direction:t,id:i,remove:!0,username:o}),r||d(!1)}catch(c){var s,a,l;console.error(c),Pm.error(null!==(s=null!==(a=null===c||void 0===c||null===(l=c.response)||void 0===l?void 0:l.data)&&void 0!==a?a:null===c||void 0===c?void 0:c.message)&&void 0!==s?s:c),r||d(!1)}},b=async e=>{d(!0),await Promise.all(e.map((e=>y({file:e,suppressStateChange:!0})))),d(!1)};return r?(0,Ps.jsx)(Zp,{}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(cM,{cancelling:c,direction:t,onCancelAll:v,onRemoveAll:b,onRetryAll:m,removing:h,retrying:a,server:n,transfers:o}),0===o.length?(0,Ps.jsx)(Ns,{caption:`No ${t}s to display`,icon:t}):o.map((e=>(0,Ps.jsx)(lM,{cancel:g,cancelAll:v,direction:t,remove:y,removeAll:b,retry:p,retryAll:m,user:e},e.username)))]})};function hM(e){var t=e.children,n=e.className,r=e.content,i=Oe("header",n),o=Le(hM,e),s=Be(hM,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}hM.handledProps=["as","children","className","content"],hM.propTypes={},hM.create=io(hM,(function(e){return{content:e}}));const dM=hM;function fM(e){var t=e.children,n=e.className,r=e.content,i=Oe("description",n),o=Le(fM,e),s=Be(fM,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}fM.handledProps=["as","children","className","content"],fM.propTypes={},fM.create=io(fM,(function(e){return{content:e}}));const pM=fM;function mM(e){var t=e.children,n=e.className,r=e.content,i=Oe("extra",n),o=Le(mM,e),s=Be(mM,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}mM.handledProps=["as","children","className","content"],mM.propTypes={},mM.create=io(mM,(function(e){return{content:e}}));const gM=mM;function vM(e){var t=e.children,n=e.className,r=e.content,i=Oe("meta",n),o=Le(vM,e),s=Be(vM,e);return we.createElement(s,Ee({},o,{className:i}),hi(t)?r:t)}vM.handledProps=["as","children","className","content"],vM.propTypes={},vM.create=io(vM,(function(e){return{content:e}}));const yM=vM;function bM(e){var t=e.children,n=e.className,r=e.content,i=e.description,o=e.extra,s=e.header,a=e.meta,l=e.verticalAlign,c=Oe(Ie(l),"content",n),u=Le(bM,e),h=Be(bM,e);return hi(t)?we.createElement(h,Ee({},u,{className:c}),dM.create(s,{autoGenerateKey:!1}),yM.create(a,{autoGenerateKey:!1}),pM.create(i,{autoGenerateKey:!1}),gM.create(o,{autoGenerateKey:!1}),r):we.createElement(h,Ee({},u,{className:c}),t)}bM.handledProps=["as","children","className","content","description","extra","header","meta","verticalAlign"],bM.propTypes={};const wM=bM;function xM(e){var t=e.children,n=e.className,r=e.content,i=e.divided,o=e.items,s=e.link,a=e.relaxed,l=e.unstackable,c=Oe("ui",Pe(i,"divided"),Pe(s,"link"),Pe(l,"unstackable"),Me(a,"relaxed"),"items",n),u=Le(xM,e),h=Be(xM,e);if(!hi(t))return we.createElement(h,Ee({},u,{className:c}),t);if(!hi(r))return we.createElement(h,Ee({},u,{className:c}),r);var d=$s(o,(function(e){var t=e.childKey,n=Wo(e,["childKey"]),r=null!=t?t:[n.content,n.description,n.header,n.meta].join("-");return we.createElement(TM,Ee({},n,{key:r}))}));return we.createElement(h,Ee({},u,{className:c}),d)}xM.handledProps=["as","children","className","content","divided","items","link","relaxed","unstackable"],xM.propTypes={};const kM=xM;function SM(e){var t=e.size,n=Le(SM,e);return we.createElement(Ss,Ee({},n,{size:t,ui:!!t,wrapped:!0}))}SM.handledProps=["size"],SM.propTypes={},SM.create=io(SM,(function(e){return{src:e}}));const CM=SM;function EM(e){var t=e.children,n=e.className,r=e.content,i=e.description,o=e.extra,s=e.header,a=e.image,l=e.meta,c=Oe("item",n),u=Le(EM,e),h=Be(EM,e);return hi(t)?we.createElement(h,Ee({},u,{className:c}),CM.create(a,{autoGenerateKey:!1}),we.createElement(wM,{content:r,description:i,extra:o,header:s,meta:l})):we.createElement(h,Ee({},u,{className:c}),t)}EM.handledProps=["as","children","className","content","description","extra","header","image","meta"],EM.Content=wM,EM.Description=pM,EM.Extra=gM,EM.Group=kM,EM.Header=dM,EM.Image=CM,EM.Meta=yM,EM.propTypes={};const TM=EM,OM=()=>(0,Ps.jsx)("div",{className:"users-picture-placeholder ui small image",children:(0,Ps.jsx)(fo,{name:"camera",size:"big"})}),AM=e=>{let{presence:t}=e;return(0,Ps.jsx)(fo,{color:{Away:"yellow",Online:"green"}[t]||"grey",name:"circle"})},_M=e=>{let{hasFreeUploadSlot:t}=e;return(0,Ps.jsx)(fo,{color:t?"green":"red",name:t?"check":"close"})},PM=e=>{let{address:t,description:n,hasPicture:r,picture:i,port:o,presence:s,queueLength:a,uploadSlots:l,username:c}=e;return(0,Ps.jsxs)(TM,{children:[r?(0,Ps.jsx)(TM.Image,{size:"small",src:`data:image;base64,${i}`}):(0,Ps.jsx)(OM,{}),(0,Ps.jsxs)(TM.Content,{children:[(0,Ps.jsxs)(TM.Header,{as:"a",children:[(0,Ps.jsx)(AM,{presence:s}),c]}),(0,Ps.jsxs)(TM.Meta,{children:["Free Upload Slot: ",(0,Ps.jsx)(_M,{hasFreeUploadSlot:!0}),", Total Upload Slots: ",l,", Queue Length: ",a,", IP Address: ",t,", Port: ",o]}),(0,Ps.jsx)(TM.Description,{children:n||"No user info."})]})]})},NM=()=>{const e=nc(),t=(0,we.useRef)(),[n,r]=(0,we.useState)(),[i,o]=(0,we.useState)(),[s,a]=(0,we.useState)(void 0),[{error:l,fetching:u},h]=(0,we.useState)({error:void 0,fetching:!1}),d=e=>{t.current.inputRef.current.value=e},f=()=>{localStorage.removeItem(c),a(void 0),r(void 0),d(""),t.current.focus()},p=e=>"Escape"===e.key?f():"";return(0,we.useLayoutEffect)((()=>{document.removeEventListener("keyup",p,!1)}),[]),(0,we.useEffect)((()=>{var t;document.addEventListener("keyup",p,!1);const n=(null===(t=e.state)||void 0===t?void 0:t.user)||localStorage.getItem(c);void 0!==n&&(a(n),d(n))}),[]),(0,we.useEffect)((()=>{(async()=>{if(s){h({error:void 0,fetching:!0});try{const[e,t,n]=await Promise.all([ke({username:s}),Se({username:s}),Ce({username:s})]);localStorage.setItem(c,s),r({...e.data,...t.data,...n.data}),h({error:void 0,fetching:!1})}catch(e){h({error:e,fetching:!1})}}})()}),[s]),(0,Ps.jsxs)("div",{className:"users-container",children:[(0,Ps.jsxs)(vi,{className:"users-segment",raised:!0,children:[(0,Ps.jsx)("div",{className:"users-segment-icon",children:(0,Ps.jsx)(fo,{name:"users",size:"big"})}),(0,Ps.jsx)(oc,{action:!u&&(null==n?{icon:"search",onClick:()=>a(i)}:{color:"red",icon:"x",onClick:f}),className:"users-input",disabled:u,input:(0,Ps.jsx)("input",{"data-lpignore":"true",disabled:Boolean(n)||u,placeholder:"Username",type:"search"}),loading:u,onChange:e=>o(e.target.value),onKeyUp:e=>"Enter"===e.key?a(i):"",placeholder:"Username",ref:t,size:"big"})]}),u?(0,Ps.jsx)(ac,{active:!0,className:"search-loader",inline:"centered",size:"big"}):(0,Ps.jsx)("div",{children:l?(0,Ps.jsxs)("span",{children:["Failed to retrieve information for ",s]}):null==n?(0,Ps.jsx)(Ns,{caption:"No user info to display",icon:"users"}):(0,Ps.jsx)(vi,{className:"users-user",raised:!0,children:(0,Ps.jsx)(TM.Group,{children:(0,Ps.jsx)(PM,{...n})})})})]})};var MM=function(e,t){return!!e&&!!e[t]},jM=function(){function e(e){return function(e){var t=e.capture,n=e.listener,r=e.type,i=e.target,o=e.targetRef,s=we.useRef(n);s.current=n;var a=we.useCallback((function(e){return s.current(e)}),[]),l=we.useRef(void 0);we.useEffect((function(){var e="undefined"===typeof o?i:o.current,n=function(e){var t,n,r;if(e)return"object"===typeof e.window&&e.window===e?e.event:null!=(t=null==(n=e.ownerDocument)||null==(r=n.defaultView)?void 0:r.event)?t:void 0}(window),s=function(e){e!==n?a(e):n=void 0};return MM(e,"addEventListener")&&e.addEventListener(r,s,t),l.current=setTimeout((function(){n=void 0}),1),function(){clearTimeout(l.current),n=void 0,MM(e,"removeEventListener")&&e.removeEventListener(r,s,t)}}),[t,a,i,o,r])}(e),null}return e.defaultProps={capture:!1},e}(),RM={current:"undefined"===typeof document?null:document};"undefined"===typeof window||window;function IM(e){var t=e.className,n=e.children,r=e.content,i=Oe("pushable",t),o=Le(IM,e),s=Be(IM,e);return we.createElement(s,Ee({},o,{className:i}),hi(n)?r:n)}IM.handledProps=["as","children","className","content"],IM.propTypes={};const DM=IM;function LM(e){var t=e.className,n=e.dimmed,r=e.children,i=e.content,o=Oe("pusher",Pe(n,"dimmed"),t),s=Le(LM,e),a=Be(LM,e);return we.createElement(a,Ee({},s,{className:o}),hi(r)?i:r)}LM.handledProps=["as","children","className","content","dimmed"],LM.propTypes={};const BM=LM;var FM=function(e){function t(n){var r;return(r=e.call(this,n)||this).ref=(0,we.createRef)(),r.handleAnimationStart=function(){var e=r.props.visible?"onVisible":"onHide";clearTimeout(r.animationTimer),r.animationTimer=setTimeout(r.handleAnimationEnd,t.animationDuration),r.skipNextCallback?r.skipNextCallback=!1:Ri(r.props,e,null,r.props)},r.handleAnimationEnd=function(){var e=r.props.visible?"onShow":"onHidden";r.setState({animationTick:0}),Ri(r.props,e,null,r.props)},r.handleDocumentClick=function(e){is(r.ref.current,e)||(r.skipNextCallback=!0,Ri(r.props,"onHide",e,Ee({},r.props,{visible:!1})))},r.state={animationTick:0,visible:n.visible},r}bi(t,e),t.getDerivedStateFromProps=function(e,t){var n=!!e.visible===!!t.visible?0:1;return{animationTick:t.animationTick+n,visible:e.visible}};var n=t.prototype;return n.componentDidUpdate=function(e,t){this.state.animationTick>t.animationTick&&this.handleAnimationStart()},n.componentWillUnmount=function(){clearTimeout(this.animationTimer)},n.render=function(){var e=this.props,n=e.animation,r=e.className,i=e.children,o=e.content,s=e.direction,a=e.target,l=e.visible,c=e.width,u=this.state.animationTick,h=Oe("ui",n,s,c,Pe(u>0,"animating"),Pe(l,"visible"),"sidebar",r),d=Le(t,this.props),f=Be(t,this.props),p=Uo(a)?{targetRef:a}:{target:a};return we.createElement(we.Fragment,null,we.createElement(Jo,{innerRef:this.ref},we.createElement(f,Ee({},d,{className:h}),hi(i)?o:i)),l&&we.createElement(jM,Ee({listener:this.handleDocumentClick,type:"click"},p)))},t}(we.Component);FM.handledProps=["animation","as","children","className","content","direction","onHidden","onHide","onShow","onVisible","target","visible","width"],FM.propTypes={},FM.defaultProps={direction:"left",target:RM,visible:!1},FM.animationDuration=500,FM.autoControlledProps=["visible"],FM.Pushable=DM,FM.Pusher=BM;const zM=FM,HM={applicationOptions:{},applicationState:{},error:!1,initialized:!1,login:{error:void 0,pending:!1},retriesExhausted:!1},$M=e=>{let{controller:t={},mode:n,pendingReconnect:r,server:i,user:o}=e;if("Agent"===n){const e="Connected"===(null===t||void 0===t?void 0:t.state),n=["Connecting","Reconnecting"].includes(null===t||void 0===t?void 0:t.state);return(0,Ps.jsxs)(_d.Item,{onClick:()=>e?ge.delete("/relay"):ge.put("/relay"),children:[(0,Ps.jsxs)(fo.Group,{className:"menu-icon-group",children:[(0,Ps.jsx)(fo,{color:"Connected"===(null===t||void 0===t?void 0:t.state)?"green":n?"yellow":"grey",name:"plug"}),!e&&(0,Ps.jsx)(fo,{className:"menu-icon-no-shadow",color:"red",corner:"bottom right",name:"close"})]}),"Controller ",null===t||void 0===t?void 0:t.state]})}var s;return(0,Ps.jsxs)(Ps.Fragment,{children:[(null===i||void 0===i?void 0:i.isConnected)&&(0,Ps.jsxs)(_d.Item,{onClick:()=>function(){let{message:e="client disconnected from web UI"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ge.delete("/server",{data:JSON.stringify(e)})}(),children:[(0,Ps.jsxs)(fo.Group,{className:"menu-icon-group",children:[(0,Ps.jsx)(fo,{color:r?"yellow":"green",name:"plug"}),(null===o||void 0===o||null===(s=o.privileges)||void 0===s?void 0:s.isPrivileged)&&(0,Ps.jsx)(fo,{className:"menu-icon-no-shadow",color:"yellow",corner:!0,name:"star"})]}),"Connected"]}),!(null!==i&&void 0!==i&&i.isConnected)&&(0,Ps.jsxs)(_d.Item,{onClick:()=>ge.put("/server"),children:[(0,Ps.jsxs)(fo.Group,{className:"menu-icon-group",children:[(0,Ps.jsx)(fo,{color:"grey",name:"plug"}),(0,Ps.jsx)(fo,{className:"menu-icon-no-shadow",color:"red",corner:"bottom right",name:"close"})]}),"Disconnected"]})]})};class UM extends we.Component{constructor(e){super(e),this.init=async()=>{this.setState({initialized:!1},(async()=>{try{if(await(async()=>(await ge.get("/session/enabled")).data)()||(console.debug("application security is not enabled, per api call"),console.debug("enabling token passthrough.  api calls will not be authenticated"),h(sessionStorage,s)),await be()){const e=de({url:`${i}/application`});e.on("state",(e=>{this.setState({applicationState:e})})),e.on("options",(e=>{this.setState({applicationOptions:e})})),e.onreconnecting((()=>this.setState({error:!0,retriesExhausted:!1}))),e.onclose((()=>this.setState({error:!0,retriesExhausted:!0}))),e.onreconnected((()=>this.setState({error:!1,retriesExhausted:!1}))),await e.start()}const e=this.getSavedTheme();null!=e&&this.setState({theme:e}),this.setState({error:!1})}catch(e){console.error(e),this.setState({error:!0,retriesExhausted:!0})}finally{this.setState({initialized:!0})}}))},this.getSavedTheme=()=>localStorage.getItem("slskd-theme"),this.toggleTheme=()=>{this.setState((e=>{const t="dark"===e.theme?"light":"dark";return localStorage.setItem("slskd-theme",t),{theme:t}}))},this.handleLogin=(e,t,n)=>{this.setState((e=>({login:{...e.login,error:void 0,pending:!0}})),(async()=>{try{await(async e=>{let{username:t,password:n,rememberMe:r=!1}=e;const{token:i}=(await ge.post("/session",{password:n,username:t})).data;return h(r?localStorage:sessionStorage,i),i})({password:t,rememberMe:n,username:e}),this.setState((e=>({login:{...e.login,error:!1,pending:!1}})),(()=>this.init()))}catch(r){this.setState((e=>({login:{...e.login,error:r,pending:!1}})))}}))},this.logout=()=>{ye(),this.setState({login:{...HM.login}})},this.withTokenCheck=e=>(be(),{...e}),this.state=HM}componentDidMount(){null==this.getSavedTheme()&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>e.matches&&this.setState({theme:"dark"}))),window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",(e=>e.matches&&this.setState({theme:"light"})))),this.init()}render(){const{applicationOptions:e={},applicationState:n={},error:r,initialized:i,login:o,retriesExhausted:s,theme:a=this.getSavedTheme()||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}=this.state,{pendingReconnect:l,pendingRestart:c,relay:u={},server:h,shares:d={},user:p,version:m={}}=n,{current:g,isUpdateAvailable:v,latest:y}=m,{scanPending:b}=d,{controller:w,mode:x}=u;if(!i)return(0,Ps.jsx)(ac,{active:!0,size:"big"});if(r)return(0,Ps.jsx)(Xp,{caption:(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("span",{children:"Lost connection to slskd"}),(0,Ps.jsx)("br",{}),(0,Ps.jsx)("span",{children:s?"Refresh to reconnect":"Retrying..."})]}),icon:"attention",suppressPrefix:!0});if(!ve()&&!f())return(0,Ps.jsx)(Yd,{error:o.error,initialized:o.initialized,loading:o.pending,onLoginAttempt:this.handleLogin});const k="Agent"===x;return"dark"===a?document.documentElement.classList.add(a):document.documentElement.classList.remove("dark"),(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(zM.Pushable,{as:vi,className:"app",children:[(0,Ps.jsxs)(zM,{animation:"overlay",as:_d,className:"navigation",direction:"top",horizontal:"true",icon:"labeled",inverted:!0,visible:!0,width:"thin",children:[m.isCanary&&(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{color:"yellow",name:"flask"}),"Canary"]}),k?(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"detective"}),"Agent Mode"]}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Gm,{to:`${t}/searches`,children:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"search"}),"Search"]})}),(0,Ps.jsx)(Gm,{to:`${t}/downloads`,children:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"download"}),"Downloads"]})}),(0,Ps.jsx)(Gm,{to:`${t}/uploads`,children:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"upload"}),"Uploads"]})}),(0,Ps.jsx)(Gm,{to:`${t}/rooms`,children:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"comments"}),"Rooms"]})}),(0,Ps.jsx)(Gm,{to:`${t}/chat`,children:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"comment"}),"Chat"]})}),(0,Ps.jsx)(Gm,{to:`${t}/users`,children:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"users"}),"Users"]})}),(0,Ps.jsx)(Gm,{to:`${t}/browse`,children:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"folder open"}),"Browse"]})})]}),(0,Ps.jsxs)(_d,{className:"right",inverted:!0,children:[(0,Ps.jsxs)(_d.Item,{onClick:()=>this.toggleTheme(),children:[(0,Ps.jsx)(fo,{name:"theme"}),"Theme"]}),(0,Ps.jsx)($M,{controller:w,mode:x,pendingReconnect:l,server:h,user:p}),(l||c||b)&&(0,Ps.jsxs)(_d.Item,{position:"right",children:[(0,Ps.jsx)(fo.Group,{className:"menu-icon-group",children:(0,Ps.jsx)(Gm,{to:`${t}/system/info`,children:(0,Ps.jsx)(fo,{color:"yellow",name:"exclamation circle"})})}),"Pending Action"]}),v&&(0,Ps.jsxs)($c,{centered:!0,closeIcon:!0,size:"mini",trigger:(0,Ps.jsxs)(_d.Item,{position:"right",children:[(0,Ps.jsx)(fo.Group,{className:"menu-icon-group",children:(0,Ps.jsx)(fo,{color:"yellow",name:"bullhorn"})}),"New Version!"]}),children:[(0,Ps.jsx)($c.Header,{children:"New Version!"}),(0,Ps.jsx)($c.Content,{children:(0,Ps.jsxs)("p",{children:["You are currently running version"," ",(0,Ps.jsx)("strong",{children:g}),"while version ",(0,Ps.jsx)("strong",{children:y})," is available."]})}),(0,Ps.jsx)($c.Actions,{children:(0,Ps.jsx)($a,{fluid:!0,href:"https://github.com/slskd/slskd/releases",primary:!0,style:{marginLeft:0},children:"See Release Notes"})})]}),(0,Ps.jsx)(Gm,{to:`${t}/system`,children:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"cogs"}),"System"]})}),ve()&&(0,Ps.jsx)($c,{actions:["Cancel",{content:"Log Out",key:"done",negative:!0,onClick:this.logout}],centered:!0,content:"Are you sure you want to log out?",header:(0,Ps.jsx)(_s,{content:"Confirm Log Out",icon:"sign-out"}),size:"mini",trigger:(0,Ps.jsxs)(_d.Item,{children:[(0,Ps.jsx)(fo,{name:"sign-out"}),"Log Out"]})})]})]}),(0,Ps.jsx)(zM.Pusher,{className:"app-content",children:(0,Ps.jsx)(xe.Provider,{value:{options:e,state:n},children:k?(0,Ps.jsxs)(Xl,{children:[(0,Ps.jsx)(ql,{path:`${t}/system/:tab?`,render:t=>this.withTokenCheck((0,Ps.jsx)(qN,{...t,options:e,state:n}))}),(0,Ps.jsx)(Hl,{from:"*",to:`${t}/system`})]}):(0,Ps.jsxs)(Xl,{children:[(0,Ps.jsx)(ql,{path:`${t}/searches/:id?`,render:e=>this.withTokenCheck((0,Ps.jsx)("div",{className:"view",children:(0,Ps.jsx)(cg,{server:n.server,...e})}))}),(0,Ps.jsx)(ql,{path:`${t}/browse`,render:e=>this.withTokenCheck((0,Ps.jsx)(uc,{...e}))}),(0,Ps.jsx)(ql,{path:`${t}/users`,render:e=>this.withTokenCheck((0,Ps.jsx)(NM,{...e}))}),(0,Ps.jsx)(ql,{path:`${t}/chat`,render:e=>this.withTokenCheck((0,Ps.jsx)(jd,{...e,state:n}))}),(0,Ps.jsx)(ql,{path:`${t}/rooms`,render:e=>this.withTokenCheck((0,Ps.jsx)(Jp,{...e}))}),(0,Ps.jsx)(ql,{path:`${t}/uploads`,render:e=>this.withTokenCheck((0,Ps.jsx)("div",{className:"view",children:(0,Ps.jsx)(uM,{...e,direction:"upload"})}))}),(0,Ps.jsx)(ql,{path:`${t}/downloads`,render:e=>this.withTokenCheck((0,Ps.jsx)("div",{className:"view",children:(0,Ps.jsx)(uM,{...e,direction:"download",server:n.server})}))}),(0,Ps.jsx)(ql,{path:`${t}/system/:tab?`,render:t=>this.withTokenCheck((0,Ps.jsx)(qN,{...t,options:e,state:n,theme:a}))}),(0,Ps.jsx)(Hl,{from:"*",to:`${t}/searches`})]})})})]}),(0,Ps.jsx)(wm,{autoClose:5e3,closeOnClick:!0,draggable:!1,hideProgressBar:!1,newestOnTop:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,position:"bottom-center",rtl:!1})]})}}const WM=UM;qo.render((0,Ps.jsx)(Um,{children:(0,Ps.jsx)(WM,{})}),document.querySelector("#root"))})()})();
//# sourceMappingURL=main.8be4187f.js.map