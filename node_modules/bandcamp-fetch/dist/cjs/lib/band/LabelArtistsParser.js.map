{"version":3,"file":"LabelArtistsParser.js","sourceRoot":"","sources":["../../../../src/lib/band/LabelArtistsParser.ts"],"names":[],"mappings":";;AAAA,qCAA8C;AAE9C,gDAA+D;AAQ/D,MAAqB,kBAAkB;IACrC,MAAM,CAAC,iBAAiB,CAAC,IAAY,EAAE,IAA8B;QACnE,MAAM,CAAC,GAAG,IAAA,cAAW,EAAC,IAAI,CAAC,CAAC;QAC5B,MAAM,WAAW,GAAG,CAAC,CAAC,wCAAwC,CAAC,CAAC;QAChE,MAAM,OAAO,GAAkB,EAAE,CAAC;QAClC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAS,EAAE,cAAmB,EAAE,EAAE;YAClD,cAAc,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC;YACnC,MAAM,GAAG,GAAG,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACvC,MAAM,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC5D,MAAM,QAAQ,GAAG,IAAA,2BAAgB,EAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YAC5D,MAAM,MAAM,GAAgB;gBAC1B,IAAI,EAAE,cAAc,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC,IAAI,EAAE;gBAC3E,GAAG,EAAE,IAAA,mBAAQ,EAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI;gBACzD,QAAQ,EAAE,cAAc,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,IAAI,EAAE;aAC/D,CAAC;YACF,IAAI,QAAQ,EAAE,CAAC;gBACb,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;YAC7B,CAAC;YACD,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,OAAO,OAAO,CAAC;IACjB,CAAC;CACF;AAtBD,qCAsBC","sourcesContent":["import { load as cheerioLoad } from 'cheerio';\nimport { type ImageFormat } from '../types/Image.js';\nimport { reformatImageUrl, splitUrl } from '../utils/Parse.js';\nimport { type LabelArtist } from '../types/Label.js';\n\ninterface LabelArtistsParseOptions {\n  labelUrl: string;\n  imageFormat: ImageFormat | null;\n}\n\nexport default class LabelArtistsParser {\n  static parseLabelArtists(html: string, opts: LabelArtistsParseOptions): LabelArtist[] {\n    const $ = cheerioLoad(html);\n    const artistsList = $('li.featured-item, li.artists-grid-item');\n    const results: LabelArtist[] = [];\n    artistsList.each((i: number, artistListItem: any) => {\n      artistListItem = $(artistListItem);\n      const img = artistListItem.find('img');\n      const imgSrc = img.attr('data-original') || img.attr('src');\n      const imageUrl = reformatImageUrl(imgSrc, opts.imageFormat);\n      const artist: LabelArtist = {\n        name: artistListItem.find('.featured-grid-name, .artists-grid-name').text(),\n        url: splitUrl(artistListItem.find('a').attr('href')).base,\n        location: artistListItem.find('.artists-grid-location').text()\n      };\n      if (imageUrl) {\n        artist.imageUrl = imageUrl;\n      }\n      results.push(artist);\n    });\n    return results;\n  }\n}\n"]}